var LAYERS=function(t){"use strict";function e(t){return"number"==typeof t}const n=Object.freeze({HIGH_OPEN:")",HIGH_CLOSED:"]",VALUE:"",LOW_CLOSED:"[",LOW_OPEN:"("});const r=new Map([[n.HIGH_OPEN,-1],[n.HIGH_CLOSED,0],[n.VALUE,0],[n.LOW_CLOSED,0],[n.LOW_OPEN,1]]);function i(t){return t[1]==n.LOW_CLOSED||t[1]==n.LOW_OPEN}function s(t){if(Array.isArray(t)||(t=[t,n.VALUE]),2!=t.length)throw new Error("Endpoint must be a length-2 array",t);let[r,i]=t;if(s=i,!Object.values(n).includes(s))throw new Error("Unsupported endpoint type",i);var s;if(r==-1/0)return[null,n.LOW_CLOSED];if(r==1/0)return[null,n.HIGH_CLOSED];if(null==r||null==r||e(r))return[r,i];throw new Error("endpoint must be null or number",r)}const o=s(1/0),c=s(-1/0);function l(t){return null!=t[0]?[t[0],t[1]]:i(t)?[-1/0,n.LOW_CLOSED]:[1/0,n.HIGH_CLOSED]}function u(t,e){return t<e?-1:t>e?1:0}function a(t,e){const[n,i]=l(t),[s,o]=l(e),c=u(n,s);if(0==c){return u(r.get(i),r.get(o))}return c}function h(t,e){return a(t,e)<=0}function f(t,e){return a(t,e)>=0}function _(t,e){return 0==a(t,e)}function p(t){const[e,r,i,o]=t,c=i?n.LOW_CLOSED:n.LOW_OPEN,l=o?n.HIGH_CLOSED:n.HIGH_OPEN;return[s([e,c]),s([r,l])]}function d(t,e){const[n,r]=p(t);return h(n,e=s(e))&&h(e,r)}const g={le:h,lt:function(t,e){return a(t,e)<0},ge:f,gt:function(t,e){return a(t,e)>0},cmp:a,eq:_,min:function(t,e){return h(t,e)?t:e},max:function(t,e){return f(t,e)?t:e},flip:function(t,e){if(e)throw new Error("target is deprecated");let[r,i]=t;if(null==r)return t;if(i==n.HIGH_OPEN)return[r,n.LOW_CLOSED];if(i==n.HIGH_CLOSED)return[r,n.LOW_OPEN];if(i==n.LOW_OPEN)return[r,n.HIGH_CLOSED];if(i==n.LOW_CLOSED)return[r,n.HIGH_OPEN];throw new Error("illegal endpoint type",i)},from_interval:p,from_input:s,types:{...n},POS_INF:o,NEG_INF:c},m={covers_endpoint:d,covers_point:function(t,e){return d(t,e)},is_singular:function(t){const[e,n]=p(itv);return _(e,n)},from_endpoints:function(t,e){let[r,s]=t,[o,c]=e;if(!i(t))throw new Error("illegal low endpoint",t);if((l=e)[1]!=n.HIGH_CLOSED&&l[1]!=n.HIGH_OPEN)throw new Error("illegal high endpoint",e);var l;return[r,o,s==n.LOW_CLOSED,c==n.HIGH_CLOSED]},from_input:function(t){let n=t;if(null==n||null==n)throw new Error("input is undefined");if(!Array.isArray(n)){if(!e(n))throw new Error(`input: ${t}: must be Array or Number`);n=[n,n,!0,!0]}1==n.length?n=[n[0],n[0],!0,!0]:2==n.length?n=[n[0],n[1],!0,!1]:3==n.length?n=[n[0],n[1],n[2],!1]:n.length>4&&(n=[n[0],n[1],n[2],n[4]]);let[r,i,s,o]=n;if(null!=r&&r!=-1/0||(r=null),null!=i&&i!=1/0||(i=null),null==r)s=!0;else if(!e(r))throw new Error("low not a number",r);if(null==i)o=!0;else if(!e(i))throw new Error("high not a number",i);if(null!=r&&null!=i){if(r>i)throw new Error("low > high",r,i);r==i&&(s=!0,o=!0)}if("boolean"!=typeof s)throw new Error("lowInclude not boolean");if("boolean"!=typeof o)throw new Error("highInclude not boolean");return[r,i,s,o]}};class v{nearby(t){throw new Error("Not implemented")}empty(){return null==this.first()}first(){let{center:t,right:e}=this.nearby(g.NEG_INF);return t.length>0?g.NEG_INF:g.lt(e,g.POS_INF)?e:void 0}last(){let{left:t,center:e}=this.nearby(g.POS_INF);return e.length>0?g.POS_INF:g.gt(t,g.NEG_INF)?t:void 0}right_region(t){const e=function(t){const e=g.from_interval(t.itv)[1];return g.flip(e)}(t);if(null!=e[0])return this.nearby(e)}left_region(t){const e=function(t){const e=g.from_interval(t.itv)[0];return g.flip(e)}(t);if(null!=e[0])return this.nearby(e)}find_region(t,e={}){let n,{direction:r=1,condition:i=t=>t.length>0}=e;for(;;){if(n=1==r?this.right_region(t):this.left_region(t),null==n)return;if(i(n.center))return n;t=n}}regions(t){return new y(this,t)}}class y{constructor(t,e={}){let{start:n=-1/0,stop:r=1/0,includeEmpty:i=!0}=e;if(n>r)throw new Error("stop must be larger than start",n,r);this._index=t,this._start=g.from_input(n),this._stop=g.from_input(r),this._condition=i?()=>!0:t=>t.length>0,this._current}next(){if(null==this._current&&(this._current=this._index.nearby(this._start),this._condition(this._current.center)))return{value:this._current,done:!1};let t={condition:this._condition,direction:1};return this._current=this._index.find_region(this._current,t),null==this._current?{value:void 0,done:!0}:{value:this._current,done:!1}}[Symbol.iterator](){return this}}function b(t,e){return g.cmp(t,e)}function w(t,e){return g.cmp(e,t)}function E(t,e,n,r,i){const s={center:n};if(0==n.length)s.right=i,s.left=t;else{r.sort(b);let n=r[0],o=r.slice(-1)[0],c=!g.eq(n,o);e.sort(w);let l=e[0],u=e.slice(-1)[0],a=!g.eq(l,u);g.le(i,n)?s.right=i:s.right=g.flip(n),s.next=c?s.right:i,g.ge(t,l)?s.left=t:s.left=g.flip(l),s.prev=a?s.left:t}let o=g.flip(s.left),c=g.flip(s.right);return s.itv=m.from_endpoints(o,c),s}class O extends v{constructor(t){super(),this._src=t,this._cache=t.createCache()}nearby(t){const e=this._src.index.nearby(t);return e.center=[this._cache],e}}class x{constructor(t,e,n){n=n||{},this.publisher=t,this.name=e,this.init=void 0!==n.init&&n.init,this.subscriptions=[]}subscribe(t,e){if(!t||"function"!=typeof t)throw new Error("Callback not a function",t);const n=new $(this,t,e);if(this.subscriptions.push(n),this.init&&n.init){n.init_pending=!0;let t=this;Promise.resolve().then((function(){const e=t.publisher.eventifyInitEventArgs(t.name)||[];n.init_pending=!1;for(let r of e)t.trigger(r,[n],!0)}))}return n}trigger(t,e,n){let r,i;for(const s of e)if(!s.terminated){r={src:this.publisher,name:this.name,sub:s,init:n},i=s.ctx||this.publisher;try{s.callback.call(i,t,r)}catch(t){console.log(`Error in ${this.name}: ${s.callback} ${t}`)}}}unsubscribe(t){let e=this.subscriptions.indexOf(t);e>-1&&(this.subscriptions.splice(e,1),t.terminate())}}class ${constructor(t,e,n){n=n||{},this.event=t,this.name=t.name,this.callback=e,this.init=void 0===n.init?this.event.init:n.init,this.init_pending=!1,this.terminated=!1,this.ctx=n.ctx}terminate(){this.terminated=!0,this.callback=void 0,this.event.unsubscribe(this)}}function I(t){return t.__eventify_eventMap=new Map,t.__eventify_buffer=[],t}function k(t){function e(t,e){const n=t.__eventify_eventMap.get(e);if(null==n)throw new Error("Event undefined",e);return n}t.eventifyDefine=function(t,e){if(this.__eventify_eventMap.has(t))throw new Error("Event already defined",t);this.__eventify_eventMap.set(t,new x(this,t,e))},t.eventifyTrigger=function(t,e){return this.eventifyTriggerAll([{name:t,eArg:e}])},t.eventifyTriggerAlike=function(t,e){return this.eventifyTriggerAll(e.map((e=>({name:t,eArg:e}))))},t.eventifyTriggerAll=function(t){if(0==t.length)return;let n=t.map((t=>{let{name:n,eArg:r}=t,i=e(this,n),s=i.subscriptions.filter((t=>0==t.init_pending));return[i,r,s]}),this);const r=n.length,i=this.__eventify_buffer,s=this.__eventify_buffer.length;this.__eventify_buffer.length=s+r;for(let t=0;t<r;t++)i[s+t]=n[t];if(0==s){let t=this;Promise.resolve().then((function(){for(let[e,n,r]of t.__eventify_buffer)e.trigger(n,r,!1);t.__eventify_buffer=[]}))}},t.eventifySubscriptions=function(t){return e(this,t).subscriptions},t.on=function(t,n,r){return e(this,t).subscribe(n,r)},t.off=function(t){return e(this,t.name).unsubscribe(t)}}k(class{constructor(t){I(this),this._value=t,this.eventifyDefine("change",{init:!0})}eventifyInitEventArgs(t){if("change"==t)return[this._value]}get value(){return this._value}set value(t){t!=this._value&&(this._value=t,this.eventifyTrigger("change",t))}}.prototype);const L="__callback";function C(t){t[`${L}_handlers`]=[]}function N(t){let e={handler:t};return this[`${L}_handlers`].push(e),e}function S(t){let e=this[`${L}_handlers`].indexOf(t);e>-1&&this[`${L}_handlers`].splice(e,1)}function F(t){this[`${L}_handlers`].forEach((function(e){e.handler(t)}))}function q(t){const e={add_callback:N,remove_callback:S,notify_callbacks:F};Object.assign(t,e)}function M(t){if(null==t)return!1;const e=["add_callback","remove_callback"];for(const n of e){if(!(n in t))return!1;if("function"!=typeof t[n])return!1}return!0}function P(t){return"number"==typeof t&&isFinite(t)}function H(t,e){if(!P(e))throw new Error(`${t} must be finite number ${e}`)}const A={now:()=>performance.now()/1e3},G={now:()=>new Date/1e3};function D(t,e,n,r={}){let{valueFunc:i,stateFunc:s}=r;if(null!=i){return{value:i({sources:t,states:e,offset:n}),dynamic:e.map((t=>t.dymamic)).some((t=>t)),offset:n}}return null!=s?{...s({sources:t,states:e,offset:n}),offset:n}:0==e.length?{value:void 0,dynamic:!1,offset:n}:{...e[0],offset:n}}function W(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=0;r<t;r++)e+=n.charAt(Math.floor(52*Math.random()));return e}function T(t,e){let n,r=performance.now()+(e=Math.max(e,0));return n=setTimeout((function e(){const i=r-performance.now();i>0?n=setTimeout(e,i+1):t()}),e+1),{cancel:function(){clearTimeout(n)}}}function j(t,e){const[n,r,i,s]=t;return Math.pow(r,2)-2*i*(n-e)>=0}function z(t,e){const[n,r,i,s]=t;if(0===i&&0===r)return n!=e?[]:void 0;if(0===i)return[s+(e-n)/r];if(!1===j(t,e))return[];if(0===Math.pow(r,2)-2*i*(n-e))return[s-r/i];var o=Math.sqrt(Math.pow(r,2)-2*i*(n-e)),c=s+(-r+o)/i,l=s+(-r-o)/i;return[Math.min(c,l),Math.max(c,l)]}const U={calculate:function(t,e){const[n,r,i,s]=t,o=e-s;return[n+r*o+.5*i*Math.pow(o,2),r+i*o,i,e]},has_real_solutions:j,get_real_solutions:z,calculate_time_ranges:function(t,e){const[n,r,i,s]=t;let[o,c]=e;if(null==o&&(o=-1/0),null==c&&(c=1/0),o==-1/0&&c==1/0)return[[null,null]];if(0===r&&0===i)return n>=o&&n<=c?[[null,null]]:[];let l=[];if(-1/0<o&&l.push(...z(t,o)),c<1/0&&l.push(...z(t,c)),l=[...new Set(l)],l.sort(((t,e)=>t-e)),o==-1/0){if(0==l.length)return n<=c?[[null,null]]:[];if(1==l.length)return i>0?[]:i<0?[[null,null]]:r>0?[[null,l[0]]]:[[l[0],null]];if(2==l.length){if(i>0)return[[l[0],l[1]]];if(i<0)return[[null,l[0]],[l[1],null]]}}else if(c==1/0){if(0==l.length)return n>=o?[[null,null]]:[];if(1==l.length)return i>0?[[null,null]]:i<0?[]:r>0?[[l[0],null]]:[[null,l[0]]];if(2==l.length){if(i>0)return[[null,l[0]],[l[1],null]];if(i<0)return[[l[0],l[1]]]}}else{if(0==l.length)return[];if(1==l.length)return[];if(2==l.length)return[[l[0],l[1]]];if(3==l.length)return[[l[0],l[2]]];if(4==l.length)return[[l[0],l[1]],[l[2],l[3]]]}},check_range:function(t){if(Array.isArray(t)&&2!=t.length)throw new Error(`range must have two elements ${t}`);null==t[0]||H("low",t[0]),null==t[1]||H("high",t[1])}};class V{constructor(t={}){let{CacheClass:e=B,...n}=t;this._options=n,C(this),I(this),this.eventifyDefine("change",{init:!0}),this.index,this._CacheClass=e,this._private_cache,this._consumer_caches=[]}get options(){return this._options}get cache(){return null==this._private_cache&&(this._private_cache=new this._CacheClass(this)),this._private_cache}query(t){return this.cache.query(t)}createCache(){const t=new this._CacheClass(this);return this._consumer_caches.push(t),t}releaseCache(t){const e=this._consumer_caches.indexOf(t);e>-1&&this._consumer_caches.splice(e,1)}clearCaches(){for(const t of this._consumer_caches)t.clear();null!=this._private_cache&&this._private_cache.clear()}onchange(){this.clearCaches(),this.notify_callbacks(),this.eventifyTrigger("change")}regions(t){return this.index.regions(t)}sample(t={}){if(this.index.empty())return[];let{start:e,stop:n,step:r=1}=t;if(null==e){const t=this.index.first();if(null==t[0])throw new Error("undefined start");e=t[0]}if(null==n){const t=this.index.last();if(null==t[0])throw new Error("undefined stop");n=t[0]}if(e>n)throw new Error("stop must be larger than start",e,n);const i=this.createCache(),s=function(t,e,n=1,r={}){const i=[],{include_end:s=!1}=r;if(0===n)throw new Error("Step cannot be zero.");if(t<e)for(let r=t;r<e;r+=n)i.push(r);else if(t>e)for(let r=t;r>e;r-=n)i.push(r);return s&&i.push(e),i}(e,n,r,{include_end:!0}).map((t=>[i.query(t).value,t]));return this.releaseCache(i),s}}q(V.prototype),k(V.prototype);class B{constructor(t){this._layer=t,this._nearby,this._state}get layer(){return this._layer}query(t){const e=null==this._nearby||!m.covers_endpoint(this._nearby.itv,t);if(!e&&null!=this._state&&!this._state.dynamic)return{...this._state,offset:t};e&&(this._nearby=this._layer.index.nearby(t));const n=this._nearby.center.map((e=>e.query(t))),r=D(this._nearby.center,n,t,this._layer.options);return this._state=r.dynamic?void 0:r,r}clear(){this._nearby=void 0,this._state=void 0}}class J{constructor(t){this._callback=t,this._handle,this._delay}set delay(t){if("number"!=typeof t)throw new Error(`delay must be a number ${t}`);this._delay!=t&&(this._delay=t)}get delay(){return this._delay}is_polling(){return null!=this._handle}pause(){null!=this._handle&&(this._handle.cancel(),this._handle=void 0)}poll(){this._callback(),this.pause(),this.resume()}resume(){if(null==this._handle)if(0==this._delay){const t=requestAnimationFrame(this.poll.bind(this));this._handle={cancel:()=>cancelAnimationFrame(t)}}else{const t=setTimeout(this.poll.bind(this),this._delay);this._handle={cancel:()=>clearTimeout(t)}}}}const R=new class{constructor(){this._binding_set=new Set,this._cursor_map=new Map,this._poller=new J(this.onpoll.bind(this))}bind(t,e,n){if(null==n)n=0;else if("number"!=typeof n)throw new Error(`delay must be a number ${n}`);let r={cursor:t,callback:e,delay:n};if(this._binding_set.add(r),this._cursor_map.has(t))this._cursor_map.get(t).bindings.push(r);else{let e=t.on("change",this.oncursorchange.bind(this));this._cursor_map.set(t,{sub:e,polling:!1,bindings:[r]})}return r}release(t){if(!this._binding_set.delete(t))return;const e=t.cursor,{sub:n,bindings:r}=this._cursor_map.get(e),i=r.indexOf(t);i>=0&&r.splice(i,1),0==r.length&&(e.off(n),this._cursor_map.delete(e))}oncursorchange(t,e){const n=e.src,r=t;this._cursor_map.get(n).polling=r.dynamic;const i=[...this._cursor_map.values()].filter((t=>t.polling));this.reevaluate_polling(i);const{bindings:s}=this._cursor_map.get(n);for(const t of s)t.callback(r)}onpoll(){const t=A.now();for(const[e,n]of this._cursor_map)if(n.polling){const r=e.query(t);for(const t of n.bindings)t.callback(r)}}reevaluate_polling(t){if(0==t.length)this._poller.pause();else{const e=t.map((t=>t.bindings.map((t=>t.delay)))),n=Math.min(...e);this._poller.delay=n,this._poller.pause(),this._poller.resume()}}};function X(t,e){const n=t.ctrl.query(e);if(!P(n.value))throw new Error(`warning: cursor ctrl value must be number ${n.value}`);return n}class Y{constructor(){C(this),I(this),this.eventifyDefine("change",{init:!0})}query(){throw new Error("query() not implemented")}get value(){return this.query().value}get(){return this.query().value}eventifyInitEventArgs(t){if("change"==t)return[this.query()]}bind(t,e,n={}){return function(t,e,n){return R.bind(t,e,n)}(this,t,e)}release(t){return e=t,R.release(e);var e}onchange(){this.notify_callbacks(),this.eventifyTrigger("change",this.query())}}function K(t){return null!=t&&("now"in t&&"function"==typeof t.now)}q(Y.prototype),k(Y.prototype);const Q=function(){const t=A.now(),e=G.now();return{now:(n=A.now())=>e+(n-t)}}();function Z(t){return t.itv=m.from_input(t.itv),t.id=t.id||W(10),t}function tt(t){return!!M(t)&&("get"in t&&("function"==typeof t.get&&("update"in t&&"function"==typeof t.update)))}class et{constructor(t={}){C(this),this._map=new Map;let{insert:e}=t;null!=e&&this._update({insert:e,reset:!0})}update(t){return Promise.resolve().then((()=>{let e;return null!=t&&(e=this._update(t),this.notify_callbacks(e)),e}))}_update(t){const e=new Map;let{insert:n=[],remove:r=[],reset:i=!1}=t;if(i){for(const[t,n]of this._map.entries())e.set(t,{id:t,new:void 0,old:n});this._map=new Map}else for(const t of r){let n=this._map.get(t);null!=n&&(e.set(n.id,{id:n.id,new:void 0,old:n}),this._map.delete(t))}for(let t of n){t=Z(t);const n=e.get(t.id),r=null!=n?n.old:this._map.get(t.id);e.set(t.id,{id:t.id,new:t,old:r}),this._map.set(t.id,t)}return[...e.values()]}get(){return[...this._map.values()]}}function nt(t){return!!M(t)&&("get"in t&&("function"==typeof t.get&&("set"in t&&"function"==typeof t.set)))}q(et.prototype);class rt{constructor(t={}){C(this),this._items=[];const{value:e}=t;null!=e&&(this._items=[{id:W(10),itv:[null,null,!0,!0],type:"static",data:e}])}set(t){return Promise.resolve().then((()=>{this._items=t,this.notify_callbacks()}))}get(){return this._items}}q(rt.prototype);const it="srcprop",st=`__${it}`;function ot(t){t[`${st}`]=new Map}function ct(t){const e={};e[`${it}_register`]=function(t,e={}){let{mutable:n=!0}=e;const r=this[`${st}`];r.set(t,{init:!1,mutable:n,entity:void 0,handles:[]}),Object.defineProperty(this,t,{get:function(){return r.get(t).entity},set:function(e){this[`${it}_check`]&&(e=this[`${it}_check`](t,e)),e!=r.get(t).entity&&this[`${st}_attach`](t,e)}})},e[`${st}_attach`]=function(t,e){const n=this[`${st}`].get(t);if(n.init&&!n.mutable)throw new Error(`${t} can not be reassigned`);const r=Array.isArray(e)?e:[e];if(n.handles.length>0)for(const[t,e]of Object.entries(r))M(e)&&e.remove_callback(n.handles[t]);if(n.handles=[],n.entity=e,n.init=!0,this[`${it}_onchange`]){const e=function(e){this[`${it}_onchange`](t,e)}.bind(this);for(const t of r)M(t)&&n.handles.push(t.add_callback(e));this[`${it}_onchange`](t,"reset")}},Object.assign(t,e)}class lt{constructor(){this._array=[]}get size(){return this._array.length}get array(){return this._array}indexOf(t){const e=g.from_input(t);let n=0,r=this._array.length-1;for(;n<=r;){const t=Math.floor((n+r)/2);let i=this._array[t];if(g.eq(i,e))return[!0,t];g.lt(i,e)?n=t+1:r=t-1}return[!1,n]}geIndexOf(t){let[e,n]=this.indexOf(t);return n<this._array.length?n:-1}leIndexOf(t){let[e,n]=this.indexOf(t);return n=e?n:n-1,n>=0?n:-1}gtIndexOf(t){let[e,n]=this.indexOf(t);return n=e?n+1:n,n<this._array.length?n:-1}ltIndexOf(t){let[e,n]=this.indexOf(t);return n-=1,n>=0?n:-1}update(t=[],e=[]){let n=[];for(let e of t){let[t,r]=this.indexOf(e);t&&n.push(r)}for(let t of n)this._array[t]=void 0;let r=n.length>0,i=e.length>0;i&&function(t,e){const n=t.length,r=e.length;t.length+=r;for(let i=0;i<r;i++)t[n+i]=e[i]}(this._array,e),(r||i)&&this._array.sort(g.cmp),r&&(this._array.length-=n.length),i&&function(t){let e=0;for(;!(e+1>=t.length);)g.eq(t[e],t[e+1])?t.splice(e+1,1):e+=1}(this._array)}get_by_index(t){if(t>-1&&t<this._array.length)return this._array[t]}lookup(t){null==t&&(t=[null,null,!0,!0]);let[e,n]=g.from_interval(t),r=this.geIndexOf(e),i=this.leIndexOf(n);return-1==r||-1==i?[]:this._array.slice(r,i+1)}lt(t){return this.get_by_index(this.ltIndexOf(t))}le(t){return this.get_by_index(this.leIndexOf(t))}get(t){let[e,n]=this.indexOf(t);if(e)return this._array[n]}gt(t){return this.get_by_index(this.gtIndexOf(t))}ge(t){return this.get_by_index(this.geIndexOf(t))}}const{LOW_CLOSED:ut,LOW_OPEN:at,HIGH_CLOSED:ht,HIGH_OPEN:ft}=g.types,_t=[ut,at,ht,ft];class pt{constructor(){this._map=new Map([[ut,new Set],[at,new Set],[ht,new Set],[ft,new Set]])}add(t){const[e,n]=t;return this._map.get(n).add(e)}has(t){const[e,n]=t;return this._map.get(n).has(e)}get(t){const[e,n]=t;return this._map.get(n).get(e)}list(){const t=_t.map((t=>[...this._map.get(t).values()].map((e=>[e,t]))));return[].concat(...t)}}const dt="low",gt="active",mt="high";class vt{constructor(){this._map=new Map([[ut,new Map],[at,new Map],[ht,new Map],[ft,new Map]])}get_items_by_role(t,e){const[n,r]=t,i=this._map.get(r).get(n);return null!=i?i[e]:[]}register(t,e,n){const[r,i]=t,s=this._map.get(i);s.has(r)||s.set(r,{low:[],active:[],high:[]});const o=s.get(r),c=o[dt].length+o[mt].length==0;-1==o[n].findIndex((t=>t.id==e.id))&&o[n].push(e);const l=o[dt].length+o[mt].length==0;return c&&!l}unregister(t,e){const[n,r]=t,i=this._map.get(r),s=i.get(n);if(null!=s){const t=s[dt].length+s[mt].length==0;for(const t of[dt,gt,mt]){let n=s[t].findIndex((t=>t.id==e.id));n>-1&&s[t].splice(n,1)}const r=s[dt].length+s[mt].length==0;if(!t&&r)return i.delete(n),!0}return!1}}class yt extends v{constructor(t){if(super(),!tt(t)&&!nt(t))throw new Error(`stateProvider must be collectionProvider or variableProvider ${t}`);this._sp=t,this._initialise(),this.refresh()}get src(){return this._sp}_initialise(){this._itemsmap=new vt,this._endpoints=new lt,this._index=[]}refresh(t){const e=new pt,n=new pt;let r,i=[],s=[];if(null==t)i=this.src.get()||[],this._initialise();else for(const e of t)null!=e.new&&i.push(e.new),null!=e.old&&s.push(e.old);for(const t of s)for(const n of this._endpoints.lookup(t.itv)){this._itemsmap.unregister(n,t)&&e.add(n)}for(const t of i){const[e,i]=g.from_interval(t.itv);r=this._itemsmap.register(e,t,dt),r&&n.add(e),r=this._itemsmap.register(i,t,mt),r&&n.add(i)}this._endpoints.update(e.list(),n.list());const o=new Set;for(const t of this._endpoints.array){for(let e of this._itemsmap.get_items_by_role(t,dt))o.add(e);for(let e of o)this._itemsmap.register(t,e,gt);for(let e of this._itemsmap.get_items_by_role(t,mt))o.delete(e)}}_covers(t){const e=g.from_input(t),n=this._endpoints.le(e)||g.NEG_INF,r=this._endpoints.ge(e)||g.POS_INF;if(g.eq(n,r))return this._itemsmap.get_items_by_role(n,gt);{const t=this._itemsmap.get_items_by_role(n,gt),e=this._itemsmap.get_items_by_role(r,gt),i=new Set(t.map((t=>t.id)));return e.filter((t=>i.has(t.id)))}}nearby(t){const e=g.from_input(t);let n=this._covers(e);const r=[],i=[];for(const t of n){const[e,n]=g.from_interval(t.itv);r.push(n),i.push(e)}let s,o=e;for(;!(o=this._endpoints.lt(o)||g.NEG_INF,null==o[0]||(s=this._itemsmap.get_items_by_role(o,mt),s.length>0)););let c=e;for(;!(c=this._endpoints.gt(c)||g.POS_INF,null==c[0]||(s=this._itemsmap.get_items_by_role(c,dt),s.length>0)););return E(o,i,n,r,c)}}class bt{constructor(t){this._itv=t}get itv(){return this._itv}state(t){throw new Error("not implemented")}query(t){return m.covers_point(this._itv,t)?{...this.state(t),offset:t}:{value:void 0,dynamic:!1,offset:t}}}class wt extends bt{constructor(t,e){super(t),this._value=e}state(){return{value:this._value,dynamic:!1}}}class Et extends bt{constructor(t,e){super(t);const{position:n=0,velocity:r=0,acceleration:i=0,timestamp:s=0}=e;this._vector=[n,r,i,s]}state(t){const[e,n,r,i]=U.calculate(this._vector,t);return{value:e,dynamic:0!=n||0!=r}}}function Ot(t){return Math.pow(t,2)}class xt extends bt{constructor(t,e){super(t);let{v0:n,v1:r,easing:i}=e,[s,o]=this._itv.slice(0,2);this._dynamic=r-n!=0,this._trans=function(t){return t-=s,t/=parseFloat(o-s),"ease-in"==i?t=Ot(t):"ease-out"==i?t=function(t){return 1-Ot(1-t)}(t):"ease-in-out"==i&&(t=function(t){return t<.5?Ot(2*t)/2:(2-Ot(2*(1-t)))/2}(t)),t=Math.max(t,0),t=Math.min(t,1),n+(r-n)*t}}state(t){return{value:this._trans(t),dynamic:this._dynamic}}}class $t extends bt{constructor(t,e){super(t),this._trans=function(t){if(t.length<1)return function(){};if(1==t.length)return function(){return t[0][0]};const e=[...t].sort(((t,e)=>t[1]-e[1]));return function(t){if(t<=e[0][1]){const[n,r]=e[0],[i,s]=e[1];return n+(t-r)*(i-n)/(s-r)}if(t>=e[e.length-1][1]){const[n,r]=e[e.length-2],[i,s]=e[e.length-1];return n+(t-r)*(i-n)/(s-r)}for(let n=0;n<e.length-1;n++)if(t>=e[n][1]&&t<=e[n+1][1]){const[r,i]=e[n],[s,o]=e[n+1];return r+(t-i)*(s-r)/(o-i)}}}(e)}state(t){return{value:this._trans(t),dynamic:!0}}}function It(t){if(null==t)return!1;if(!(t instanceof V))return!1;const e=Object.getOwnPropertyDescriptor(t,"src");return 0!=!(!e?.get||!e?.set)}function kt(t={}){const{src:e,...n}=t,r=new V({CacheClass:Lt,...n});return ot(r),ct(r),r.srcprop_register("src"),r.srcprop_check=function(t,e){if("src"==t){if(!tt(e)&&!nt(e))throw new Error(`"src" must collectionProvider or variableProvider ${e}`);return e}},r.srcprop_onchange=function(t,e){"src"==t&&("reset"==e&&(tt(r.src)||nt(r.src))&&(r.index=new yt(r.src)),null!=r.index&&(tt(r.src)?r.index.refresh(e):nt(r.src)&&r.index.refresh(),r.onchange()))},r.get_items=function(t){return[...r.index.nearby(t).center]},r.update=function(t){return Ct(r,t)},r.append=function(t,e){return function(t,e,n){const r=g.from_input(n),i=e.filter((t=>{const e=g.from_interval(t.itv)[1];return g.ge(e,r)})).map((t=>{if(m.covers_endpoint(t.itv,r)){const e={...t};return e.itv=[n,t.itv[1],!0,t.itv[3]],e}return t})),s=t.index.nearby(n).center.map((t=>{const e={...t};return e.itv=[t.itv[0],n,t.itv[2],!1],e})),o=t.src.get().filter((t=>{const e=g.from_interval(t.itv)[0];return g.gt(e,r)})).map((t=>t.id)),c=[...s,...i];return Ct(t,{remove:o,insert:c,reset:!1})}(r,t,e)},r.src=e,r}class Lt{constructor(t,e={}){this._layer=t,this._nearby=void 0,this._segment=void 0,this._options=e}get src(){return this._layer}get segment(){return this._segment}query(t){if(null==this._nearby||!m.covers_endpoint(this._nearby.itv,t)){this._nearby=this._layer.index.nearby(t);let{itv:e,center:n}=this._nearby;this._segments=n.map((t=>function(t,e){let{type:n="static",data:r}=e;return"static"==n?new wt(t,r):"transition"==n?new xt(t,r):"interpolation"==n?new $t(t,r):"motion"==n?new Et(t,r):void console.log("unrecognized segment type",n)}(e,t)))}const e=this._segments.map((e=>e.query(t)));return D(this._segments,e,t,this._layer.options)}clear(){this._nearby=void 0,this._segment=void 0}}function Ct(t,e={}){if(tt(t.src))return t.src.update(e);if(nt(t.src)){let{insert:n=[],remove:r=[],reset:i=!1}=e;if(i)return t.src.set(n);{const e=new Map((t.src.get()||[]).map((t=>[t.id,t])));r.forEach((t=>e.delete(t))),n.forEach((t=>e.set(t.id,t)));const i=Array.from(e.values());return t.src.set(i)}}}function Nt(t){return t instanceof Y&&null==t.ctrl&&null==t.src}function St(t=Q){if(!K(t))throw new Error(`src must be clockProvider ${t}`);const e=new Y;return e.query=function(e){return{value:t.now(e),dynamic:!0,offset:e}},e}const Ft=U.check_range;function qt(t,e){const n=new Y;let r,i;return ot(n),ct(n),n.srcprop_register("ctrl"),n.srcprop_register("src"),n.srcprop_check=function(t,e=Q){if("ctrl"==t){if(K(e)&&(e=St(e)),!Nt(e))throw new Error(`"ctrl" property must be a clock cursor ${e}`);return e}if("src"==t){if((tt(e)||nt(e))&&(e=kt({src:e})),!It(e))throw new Error(`"src" property must be an item layer ${e}`);return e}},n.srcprop_onchange=function(t,e){null!=n.src&&null!=n.ctrl&&("src"==t&&("reset"==e?r=n.src.createCache():r.clear()),function(){i&&i.cancel();const t=n.ctrl.value,e=n.src.index.nearby(t).itv[1]||1/0;if(e==1/0)return;i=T((()=>{n.onchange()}),1e3*(e-t))}(),n.onchange())},n.query=function(t){const e=n.ctrl.query(t).value;return r.query(e)},n.set=function(t){return function(t,e){const n=[{id:W(10),itv:[null,null,!0,!0],type:"static",data:e}];return t.src.update({insert:n,reset:!0})}(n,t)},n.motion=function(t){return function(t,e={}){let{value:n,offset:r}=t.query();"number"==typeof n&&isFinite(n)||(n=0);const{position:i=n,velocity:s=0,acceleration:o=0,timestamp:c=r,range:l=[null,null]}=e;Ft(l),H("position",i),H("velocity",s),H("acceleration",o),H("timestamp",c);const u=[],a=(0,U.calculate_time_ranges)([i,s,o,c],l),h=t.ctrl.value,f=a.find((t=>{const e=t[0]??-1/0,n=t[1]??1/0;return e<=h&&h<=n}));if(null!=f){const[t,e]=f;u.push({id:W(10),itv:[t,e,!0,!0],type:"motion",data:{position:i,velocity:s,acceleration:o,timestamp:c}}),null!=t&&u.push({id:W(10),itv:[null,t,!0,!1],type:"static",data:l[0]}),null!=e&&u.push({id:W(10),itv:[e,null,!1,!0],type:"static",data:l[1]})}else{const t=i<l[0]?l[0]:l[1];u.push({id:W(10),itv:[null,null,!0,!0],type:"static",data:t})}return t.src.update({insert:u,reset:!0})}(n,t)},n.transition=function({target:t,duration:e,easing:r}){return function(t,e,n,r){const{value:i,offset:s}=t.query(),o=e,c=s+n;H("position",i),H("position",o),H("position",s),H("position",c);let l=[{id:W(10),itv:[null,s,!0,!1],type:"static",data:i},{id:W(10),itv:[s,c,!0,!0],type:"transition",data:{v0:i,v1:o,t0:s,t1:c,easing:r}},{id:W(10),itv:[c,null,!1,!0],type:"static",data:o}];return t.src.update({insert:l,reset:!0})}(n,t,e,r)},n.interpolate=function({tuples:t,duration:e}){return function(t,e,n){const r=t.ctrl.value;e=e.map((([t,e])=>(H("ts",e),H("val",t),[t,r+e*n])));const[i,s]=e[0],[o,c]=e[e.length-1],l=[{id:W(10),itv:[-1/0,s,!0,!1],type:"static",data:i},{id:W(10),itv:[s,c,!0,!1],type:"interpolation",data:e},{id:W(10),itv:[c,1/0,!0,!0],type:"static",data:o}];return t.src.update({insert:l,reset:!0})}(n,t,e)},n.ctrl=t,n.src=e,n}function Mt(t,e){const n=new Y;let r,i,s;function o(){n.onchange(),function(){i&&i.cancel();s&&clearInterval(s);const t=X(n),e=t.value,r=t.offset;if(!t.dynamic)return;const c=n.src.index.nearby(e),l=c.itv[0]??-1/0,u=c.itv[1]??1/0;if(l==-1/0&&u==1/0)return;if(Nt(n.ctrl)){return void(i=T((()=>{o()}),1e3*(u-e)))}if(Nt(n.ctrl.ctrl)&&It(n.ctrl.src)){const t=n.ctrl.src.get_items(r);let s;if(1==t.length){const n=t[0];if("motion"==n.type){const{velocity:t,acceleration:r}=n.data;if(0==r){s=t>0?u:l;return void(i=T((()=>{o()}),1e3*(s-e)))}}else if("transition"==n.type){const{v0:t,v1:r,t0:c,t1:a,easing:h="linear"}=n.data;if("linear"==h){s=(r-t)/(a-c)>0?Math.min(u,r):Math.max(l,r);return void(i=T((()=>{o()}),1e3*(s-e)))}}}}!function(t){s=setInterval((()=>{!function(t){let e=n.ctrl.value;m.covers_endpoint(t,e)||o()}(t)}),100)}(c.itv)}()}return ot(n),ct(n),n.srcprop_register("ctrl"),n.srcprop_register("src"),n.srcprop_check=function(t,e=Q){if("ctrl"==t){if(K(e)&&(e=St(e)),e instanceof Y)return e;throw new Error(`ctrl must be clockProvider or Cursor ${e}`)}if("src"==t){if((tt(e)||nt(e))&&(e=kt({src:e})),e instanceof V)return e;throw new Error(`src must be Layer ${e}`)}},n.srcprop_onchange=function(t,e){null!=n.src&&null!=n.ctrl&&("src"==t&&("reset"==e?r=n.src.createCache():r.clear()),o())},n.query=function(t){const e=X(n,t).value;return r.query(e)},n.ctrl=t,n.src=e,n}class Pt extends v{constructor(t){super(),this._cursor=t}nearby(t){return{itv:[null,null,!0,!0],center:[this._cursor],left:g.NEG_INF,prev:g.NEG_INF,right:g.POS_INF,next:g.POS_INF}}}const Ht={sum:{valueFunc:function(t){return t.states.map((t=>t.value)).reduce(((t,e)=>t+e),0)}},stack:{stateFunc:function(t){return{...t.states[0]}}},array:{valueFunc:function(t){return t.states.map((t=>t.value))}}};function At(t,e){return g.cmp(t,e)}function Gt(t,e){return g.cmp(e,t)}class Dt extends v{constructor(t){super(),this._sources=t,this._caches=new Map(t.map((t=>[t,t.createCache()])))}nearby(t){t=g.from_input(t);const e=[],n=[],r=[],i=[],s=[];for(let o of this._sources){let c=o.index.nearby(t),l=o.index.find_region(c,{direction:-1}),u=o.index.find_region(c,{direction:1});if(null!=l&&e.push(g.from_interval(l.itv)[1]),null!=u&&n.push(g.from_interval(u.itv)[0]),c.center.length>0){r.push(this._caches.get(o));let[t,e]=g.from_interval(c.itv);i.push(e),s.push(t)}}n.sort(At);const o=n[0]||g.POS_INF;e.sort(Gt);return E(e[0]||g.NEG_INF,s,r,i,o)}}class Wt extends v{constructor(t,e={}){super(),this._index=t;let{condition:n=t=>t.length>0}=e;this._condition=n}nearby(t){t=g.from_input(t);const e=this._index.nearby(t);let n=this._condition(e.center);const r=t=>this._condition(t)!=n;let i,s,o=this._index.find_region(e,{direction:1,condition:r});null!=o&&(i=g.from_interval(o.itv)[0]);let c=this._index.find_region(e,{direction:-1,condition:r});null!=c&&(s=g.from_interval(c.itv)[1]),s=s||g.NEG_INF,i=i||g.POS_INF;const l=g.flip(s),u=g.flip(i);return{itv:m.from_endpoints(l,u),center:[(a=n,{query:function(t){return{value:a,dynamic:!1,offset:t}}})],left:s,right:i};var a}}function Tt(t){if(!(t instanceof V))throw new Error(`must be layer ${t}`);return{eval:function(e){for(let n of e)if(n.src==t)return!0;return!1}}}function jt(t,{shift:e=0,scale:n=1}){if(null==t||!isFinite(t))return t;if("number"==typeof t)return t*n+e;if(Array.isArray(t)&&t.length>1){let[r,i]=t;return g.from_input([r*n+e,i])}}function zt(t,{shift:e=0,scale:n=1}){if(null==t||!isFinite(t))return t;if("number"==typeof t)return(t-e)/n;if(Array.isArray(t)&&t.length>1){let[r,i]=t;return g.from_input([(r-e)/n,i])}}Tt.and=function(...t){return{eval:function(e){return t.every((t=>t.eval(e)))}}},Tt.or=function(...t){return{eval:function(e){return t.some((t=>t.eval(e)))}}},Tt.xor=function(t,e){return{eval:function(n){return t.eval(n)!=e.eval(n)}}},Tt.not=function(t){return{eval:function(e){return!t.eval(e)}}};class Ut extends v{constructor(t,e={}){super(),this._layer=t,this._cache=t.createCache(),this._options=e,this._transform_cache={query:function(t){return{...this._cache.query(zt(t,this._options)),offset:t}}.bind(this)}}nearby(t){t=g.from_input(t);const e=this._layer.index.nearby(zt(t,this._options)),n=e.itv.slice();return n[0]=jt(e.itv[0],this._options),n[1]=jt(e.itv[1],this._options),{itv:n,left:jt(e.left,this._options),right:jt(e.right,this._options),center:e.center.map((()=>this._transform_cache))}}}function Vt(t,e={}){if(!(t instanceof Y))throw new Error(`src must be a Cursor ${t}`);const n=new Y;return n.query=function(){return function(t,e={}){const{valueFunc:n,stateFunc:r}=e;return null!=n?(t.value=n(t.value),t):null!=r?r(t):t}(t.query(),e)},Nt(t)||(n.ctrl=t.ctrl,n.ctrl.add_callback((()=>{n.onchange()}))),Nt(t)||(n.src=t.src),t.add_callback((()=>{n.onchange()})),n}function Bt(t,e){const n=t.id,r=t.type;let i="";if(null!=t.itv){const[e,n,r,s]=t.itv;i=`[${null==e?"null":e.toFixed(2)},${null==n?"null":n.toFixed(2)},${r},${s}]`}let s=`<span class="item-id">${n}</span>`,o=`<span class="item-itv">${i}</span>`,c=`<span class="item-type">${r}</span>`,l=`<span class="item-data">${JSON.stringify(t.data)}</span>`;const{delete_allowed:u=!1}=e;return u?`\n        <div>\n            <button id="delete">X</button>\n            ${s}: ${c} ${o} ${l}\n        </div>`:`\n        <div>\n            ${s}: ${c} ${o} ${l}\n        </div>`}class Jt{constructor(t,e,n={}){this._sp=t,this._elem=e,this._handle=this._sp.add_callback(this._onchange.bind(this));let r={toString:Bt};this._options={...r,...n},this._options.delete_allowed&&e.addEventListener("click",(t=>{const e=t.target.closest("#delete");if(e){const n=e.closest(".list-item");n&&(this._sp.update({remove:[n.id]}),t.stopPropagation())}})),this._onchange()}_onchange(){const t=this._sp.get()||[];t.sort(((t,e)=>{let n=g.from_interval(t.itv)[0],r=g.from_interval(e.itv)[0];return g.cmp(n,r)})),this._elem.replaceChildren();const{toString:e}=this._options;for(let n of t){let t=this._elem.querySelector(`#${n.id}`);null==t&&(t=document.createElement("div"),t.setAttribute("id",n.id),t.classList.add("list-item"),this._elem.appendChild(t)),t.innerHTML=e(n,this._options)}}}function Rt(t={}){let{src:e,insert:n,value:r,...i}=t;return e instanceof V?e:(null==e&&(e=null!=r?new rt({value:r}):new et({insert:n})),kt({src:e,...i}))}return t.Cursor=Y,t.Layer=V,t.NearbyIndexBase=v,t.boolean=function(t){const e=new V;return e.index=new Wt(t.index),t.add_callback((t=>{e.onchange(t)})),e.src=t,e},t.clock=function(t){return St(t)},t.cursor_transform=Vt,t.layer=Rt,t.layer_from_cursor=function(t){if(!(t instanceof Y))throw new Error(`src must be a Cursor ${t}`);const e=new V;return e.index=new Pt(t),t.add_callback((t=>{e.onchange(t)})),e.src=t,e},t.layer_transform=function(t,e={}){if(!(t instanceof V))throw new Error(`src must be a Layer ${t}`);const n={};var r,i;n.valueFunc=(r=e.valueFunc,function({sources:t,states:e,offset:n}){return r(e[0].value)}),n.stateFunc=(i=e.stateFunc,function({sources:t,states:e,offset:n}){return i(e[0])});const s=new V(n);return s.index=new O(t),s.src=t,s.src.add_callback((t=>{s.onchange(t)})),s},t.local_clock=A,t.logical_expr=Tt,t.logical_merge=function(t,e={}){const{expr:n}=e;let r;n&&(r=t=>n.eval(t));const i=new V,s=new Dt(t);return i.index=new Wt(s,{condition:r}),t.map((t=>t.add_callback(i.onchange))),i.sources=t,i},t.merge=function(t,e={}){let{type:n="",...r}=e;n in Ht&&(r=Ht[n]);const i=new V(r);return ot(i),ct(i),i.srcprop_register("sources"),i.srcprop_check=function(t,e){if("sources"==t){if(!Array.isArray(e))throw new Error(`sources must be array ${e}`);if(!e.map((t=>t instanceof V)).every((t=>t)))throw new Error(`sources must all be layers ${e}`)}return e},i.srcprop_onchange=function(t,e){"sources"==t&&("reset"==e&&(i.index=new Dt(i.sources)),i.onchange())},i.sources=t,i},t.playback=function(t={}){let{ctrl:e,...n}=t;return Mt(e,Rt(n))},t.record=function(t={}){let{ctrl:e=Q,src:n,dst:r,...i}=t;return r=Rt({dst:n,...i}),function(t=Q,e,n){if(K(t)&&(t=St(t)),!Nt(t)&&!Nt(t.ctrl))throw new Error(`ctrl or ctrl.ctrl must be a clock cursor ${t}`);if(!(e instanceof Y))throw new Error(`src must be a cursor ${e}`);if(!It(e.src))throw new Error(`cursor src must be a segment layer ${e.src}`);if(!It(n))throw new Error(`dst must be a segment layer ${n}`);e.src.src.add_callback((function(){const r=t.value,i=e.src.src.get();n.append(i,r)}))}(e,n,r),r},t.render_cursor=function(t,e,n={}){const{delay:r=200,htmlFunc:i,novalue:s}=n,o=document.querySelector(e);return t.bind((function(t){null==t.value&&null!=s&&(t.value=s),o.innerHTML=null!=i?i(t,o):null!=t.value?`${t.value}`:""}),r)},t.render_provider=function(t,e,n={}){const r=document.querySelector(e);return new Jt(t,r,n)},t.skew=function(t,e){return Vt(t,{valueFunc:function(t){return t+e}})},t.timeline_transform=function(t,e={}){const n=new V;return ot(n),ct(n),n.srcprop_register("src"),n.srcprop_check=function(t,e){if("src"==t){if(!(e instanceof V))throw new Error(`"src" must be Layer ${e}`);return e}},n.srcprop_onchange=function(t,r){"src"==t&&("reset"==r&&(this.index=new Ut(this.src,e)),n.onchange())},n.src=t,n},t.variable=function(t={}){let{clock:e,...n}=t;return qt(e,Rt(n))},t}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF5ZXJzLmlpZmUubWluLmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbC9pbnRlcnZhbHMuanMiLCIuLi8uLi9zcmMvbmVhcmJ5X2Jhc2UuanMiLCIuLi8uLi9zcmMvdXRpbC9hcGlfZXZlbnRpZnkuanMiLCIuLi8uLi9zcmMvdXRpbC9hcGlfY2FsbGJhY2suanMiLCIuLi8uLi9zcmMvdXRpbC9jb21tb24uanMiLCIuLi8uLi9zcmMvbGF5ZXJfYmFzZS5qcyIsIi4uLy4uL3NyYy91dGlsL2N1cnNvcl9tb25pdG9yLmpzIiwiLi4vLi4vc3JjL2N1cnNvcl9iYXNlLmpzIiwiLi4vLi4vc3JjL3Byb3ZpZGVyX2Nsb2NrLmpzIiwiLi4vLi4vc3JjL3Byb3ZpZGVyX2NvbGxlY3Rpb24uanMiLCIuLi8uLi9zcmMvcHJvdmlkZXJfdmFyaWFibGUuanMiLCIuLi8uLi9zcmMvdXRpbC9hcGlfc3JjcHJvcC5qcyIsIi4uLy4uL3NyYy91dGlsL3NvcnRlZGFycmF5LmpzIiwiLi4vLi4vc3JjL25lYXJieV9pbmRleC5qcyIsIi4uLy4uL3NyYy91dGlsL3NlZ21lbnRzLmpzIiwiLi4vLi4vc3JjL2xheWVyX2l0ZW1zLmpzIiwiLi4vLi4vc3JjL2N1cnNvcl9jbG9jay5qcyIsIi4uLy4uL3NyYy9jdXJzb3JfdmFyaWFibGUuanMiLCIuLi8uLi9zcmMvY3Vyc29yX3BsYXliYWNrLmpzIiwiLi4vLi4vc3JjL29wcy9sYXllcl9mcm9tX2N1cnNvci5qcyIsIi4uLy4uL3NyYy9vcHMvbWVyZ2UuanMiLCIuLi8uLi9zcmMvb3BzL2Jvb2xlYW4uanMiLCIuLi8uLi9zcmMvb3BzL2xvZ2ljYWxfbWVyZ2UuanMiLCIuLi8uLi9zcmMvb3BzL3RpbWVsaW5lX3RyYW5zZm9ybS5qcyIsIi4uLy4uL3NyYy9vcHMvdHJhbnNmb3JtLmpzIiwiLi4vLi4vc3JjL3V0aWwvcHJvdmlkZXJfdmlld2VyLmpzIiwiLi4vLi4vc3JjL2luZGV4LmpzIiwiLi4vLi4vc3JjL29wcy9yZWNvcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgICBcbiAgICBJTlRFUlZBTCBFTkRQT0lOVFNcblxuICAgICogaW50ZXJ2YWwgZW5kcG9pbnRzIGFyZSBkZWZpbmVkIGJ5IHRyaXBsZXQgW3ZhbHVlLCB0eXBlXVxuICAgICpcbiAgICAqICAgdGhlcmUgYXJlIDQgdHlwZXMgb2YgaW50ZXJ2YWwgZW5kcG9pbnRzIFxuICAgICogICAtIHYpIC0gaGlnaCBlbmRwb2ludCBhdCB2LCBub3QgaW5jbHVzaXZlXG4gICAgKiAgIC0gdl0gLSBoaWdoIGVuZHBvaW50IGF0IHYsIGluY2x1c2l2ZVxuICAgICogICAtIFt2IC0gbG93IGVuZHBvaW50IGF0IHYsIG5vdCBpbmNsdXNpdmVcbiAgICAqICAgLSAodiAtIGxvdyBlbmRwb2ludCBhdCB2LCBpbmNsdXNpdmVcbiAgICAqIFxuICAgICogICBBIHNpbmd1bGFyIGludGVydmFsIFsyLDIsdHJ1ZSx0cnVlXSB3aWxsIGhhdmUgZW5kcG9pbnRzIFsyIGFuZCAyXVxuICAgICogXG4gICAgKiAgIEFkZGl0aW9uYWxseSwgdG8gc2ltcGxpZnkgY29tcGFyaXNvbiBiZXR3ZWVuIGVuZHBvaW50cyBhbmQgbnVtYmVyc1xuICAgICogICB3aSBpbnRyb2R1Y2UgYSBzcGVjaWFsIGVuZHBvaW50IHR5cGUgLSBWQUxVRVxuICAgICogXG4gICAgKiAgIFRodXMgd2UgZGVmaW5lIDUgdHlwZXMgb2YgZW5kcG9pbnRzXG4gICAgKiBcbiAgICAqICAgSElHSF9PUEVOIDogdilcbiAgICAqICAgSElHSF9DTE9TRUQ6IHZdXG4gICAgKiAgIFZBTFVFOiB2XG4gICAgKiAgIExPV19DTE9TRUQ6IFt2XG4gICAgKiAgIExPV19PUEVOOiAodilcbiAgICAqIFxuICAgICogICBGb3IgdGhlIHB1cnBvc2Ugb2YgZW5kcG9pbnQgY29tcGFyaXNvbiB3ZSBtYWludGFpblxuICAgICogICBhIGxvZ2ljYWwgb3JkZXJpbmcgZm9yIGVuZHBvaW50cyB3aXRoIHRoZSBzYW1lIHZhbHVlLlxuICAgICogICBcbiAgICAqICAgdikgPCBbdiA9PSB2ID09IHZdIDwgKHZcbiAgICAqICBcbiAgICAqICAgV2UgYXNzaWduIG9yZGVyaW5nIHZhbHVlc1xuICAgICogICBcbiAgICAqICAgSElHSF9PUEVOOiAtMVxuICAgICogICBISUdIX0NMT1NFRCwgVkFMVUUsIExPV19DTE9TRUQ6IDBcbiAgICAqICAgTE9XX09QRU46IDFcbiAgICAqIFxuICAgICogICB2YWx1ZSBjYW4gYmUgbnVsbCBvciBudW1iZXIuIElmIHZhbHVlIGlzIG51bGwsIHRoaXMgbWVhbnMgdW5ib3VuZGVkIGVuZHBvaW50XG4gICAgKiAgIGkuZS4gbm8gb3RoZXIgZW5kcG9pbnQgY2FuIGJlIGxhcmdlciBvciBzbWFsbGVyLlxuICAgICogICBhbiB1bmJvdW5kZWQgbG93IGVuZHBvaW50IG1lYW5zIC1JbmZpbml0eVxuICAgICogICBhbiB1bmJvdW5kZWQgaGlnaCBlbmRwb2ludCBtZWFucyBJbmZpbml0eVxuICAgICpcbiovXG5cbmZ1bmN0aW9uIGlzTnVtYmVyKG4pIHtcbiAgICByZXR1cm4gdHlwZW9mIG4gPT0gXCJudW1iZXJcIjtcbn1cblxuY29uc3QgRVBfVFlQRSA9IE9iamVjdC5mcmVlemUoe1xuICAgIEhJR0hfT1BFTjogXCIpXCIsXG4gICAgSElHSF9DTE9TRUQ6IFwiXVwiLFxuICAgIFZBTFVFOiBcIlwiLFxuICAgIExPV19DTE9TRUQ6IFwiW1wiLFxuICAgIExPV19PUEVOOiBcIihcIlxufSk7XG5cbmZ1bmN0aW9uIGlzX0VQX1RZUEUodmFsdWUpIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhFUF9UWVBFKS5pbmNsdWRlcyh2YWx1ZSk7XG59XG5cbmNvbnN0IEVQX09SREVSID0gbmV3IE1hcChbXG4gICAgW0VQX1RZUEUuSElHSF9PUEVOLCAtMV0sXG4gICAgW0VQX1RZUEUuSElHSF9DTE9TRUQsIDBdLFxuICAgIFtFUF9UWVBFLlZBTFVFLCAwXSxcbiAgICBbRVBfVFlQRS5MT1dfQ0xPU0VELCAwXSxcbiAgICBbRVBfVFlQRS5MT1dfT1BFTiwgMV1cbl0pO1xuXG5mdW5jdGlvbiBlbmRwb2ludF9pc19sb3coZXApIHtcbiAgICByZXR1cm4gZXBbMV0gPT0gRVBfVFlQRS5MT1dfQ0xPU0VEIHx8IGVwWzFdID09IEVQX1RZUEUuTE9XX09QRU47XG59XG5cbmZ1bmN0aW9uIGVuZHBvaW50X2lzX2hpZ2goZXApIHtcbiAgICByZXR1cm4gZXBbMV0gPT0gRVBfVFlQRS5ISUdIX0NMT1NFRCB8fCBlcFsxXSA9PSBFUF9UWVBFLkhJR0hfT1BFTjtcbn1cblxuLypcbiAgICByZXR1cm4gZW5kcG9pbnQgZnJvbSBpbnB1dFxuKi9cbmZ1bmN0aW9uIGVuZHBvaW50X2Zyb21faW5wdXQoZXApIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXApKSB7XG4gICAgICAgIGVwID0gW2VwLCBFUF9UWVBFLlZBTFVFXTtcbiAgICB9XG4gICAgaWYgKGVwLmxlbmd0aCAhPSAyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVuZHBvaW50IG11c3QgYmUgYSBsZW5ndGgtMiBhcnJheVwiLCBlcCk7XG4gICAgfVxuICAgIGxldCBbdix0XSA9IGVwO1xuICAgIGlmICghaXNfRVBfVFlQRSh0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBlbmRwb2ludCB0eXBlXCIsIHQpO1xuICAgIH1cbiAgICBpZiAodiA9PSAtSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsLCBFUF9UWVBFLkxPV19DTE9TRURdO1xuICAgIH1cbiAgICBpZiAodiA9PSBJbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gW251bGwsIEVQX1RZUEUuSElHSF9DTE9TRURdO1xuICAgIH1cbiAgICBpZiAodiA9PSB1bmRlZmluZWQgfHwgdiA9PSBudWxsIHx8IGlzTnVtYmVyKHYpKSB7XG4gICAgICAgIHJldHVybiBbdiwgdF07XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcImVuZHBvaW50IG11c3QgYmUgbnVsbCBvciBudW1iZXJcIiwgdik7XG59XG5cbmNvbnN0IGVuZHBvaW50X1BPU19JTkYgPSBlbmRwb2ludF9mcm9tX2lucHV0KEluZmluaXR5KTtcbmNvbnN0IGVuZHBvaW50X05FR19JTkYgPSBlbmRwb2ludF9mcm9tX2lucHV0KC1JbmZpbml0eSk7XG5cbi8qKlxuICogSW50ZXJuYWwgcmVwcmVzZW50YXRpb24gXG4gKiByZXBsYWNpbmcgbnVsbCB2YWx1c2Ugd2l0aCAtSW5maW5pdHkgb3IgSW5maW5pdHlcbiAqIGluIG9yZGVyIHRvIHNpbXBsaWZ5IG51bWVyaWNhbCBjb21wYXJpc29uXG4gKi9cbmZ1bmN0aW9uIGVuZHBvaW50X2ludGVybmFsKGVwKSB7XG4gICAgaWYgKGVwWzBdICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtlcFswXSwgZXBbMV1dO1xuICAgIH1cbiAgICBpZiAoZW5kcG9pbnRfaXNfbG93KGVwKSkge1xuICAgICAgICByZXR1cm4gWy1JbmZpbml0eSwgRVBfVFlQRS5MT1dfQ0xPU0VEXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW0luZmluaXR5LCBFUF9UWVBFLkhJR0hfQ0xPU0VEXTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgbnVtYmVyc1xuICogYXZvaWQgc3VidHJhY3Rpb24gdG8gc3VwcG9ydCBJbmZpbml0eSB2YWx1ZXNcbiAqL1xuZnVuY3Rpb24gbnVtYmVyX2NtcChhLCBiKSB7XG4gICAgaWYgKGEgPCBiKSByZXR1cm4gLTE7IC8vIGNvcnJlY3Qgb3JkZXJcbiAgICBpZiAoYSA+IGIpIHJldHVybiAxOyAvLyB3cm9uZyBvcmRlclxuICAgIHJldHVybiAwOyAvLyBlcXVhbGl0eVxufVxuXG4vKlxuICAgIEVuZHBvaW50IGNvbXBhcmlzb25cbiAgICByZXR1cm5zIFxuICAgICAgICAtIG5lZ2F0aXZlIDogY29ycmVjdCBvcmRlclxuICAgICAgICAtIDAgOiBlcXVhbFxuICAgICAgICAtIHBvc2l0aXZlIDogd3Jvbmcgb3JkZXJcbiovIFxuZnVuY3Rpb24gZW5kcG9pbnRfY21wKGVwMSwgZXAyKSB7ICAgIFxuICAgIGNvbnN0IFt2MSwgdDFdID0gZW5kcG9pbnRfaW50ZXJuYWwoZXAxKTtcbiAgICBjb25zdCBbdjIsIHQyXSA9IGVuZHBvaW50X2ludGVybmFsKGVwMik7XG4gICAgY29uc3QgZGlmZiA9IG51bWJlcl9jbXAodjEsIHYyKTtcbiAgICBpZiAoZGlmZiA9PSAwKSB7XG4gICAgICAgIGNvbnN0IG8xID0gRVBfT1JERVIuZ2V0KHQxKTtcbiAgICAgICAgY29uc3QgbzIgPSBFUF9PUkRFUi5nZXQodDIpO1xuICAgICAgICByZXR1cm4gbnVtYmVyX2NtcChvMSwgbzIpO1xuICAgIH1cbiAgICByZXR1cm4gZGlmZjtcbn1cblxuZnVuY3Rpb24gZW5kcG9pbnRfbHQgKHAxLCBwMikge1xuICAgIHJldHVybiBlbmRwb2ludF9jbXAocDEsIHAyKSA8IDBcbn1cbmZ1bmN0aW9uIGVuZHBvaW50X2xlIChwMSwgcDIpIHtcbiAgICByZXR1cm4gZW5kcG9pbnRfY21wKHAxLCBwMikgPD0gMFxufVxuZnVuY3Rpb24gZW5kcG9pbnRfZ3QgKHAxLCBwMikge1xuICAgIHJldHVybiBlbmRwb2ludF9jbXAocDEsIHAyKSA+IDBcbn1cbmZ1bmN0aW9uIGVuZHBvaW50X2dlIChwMSwgcDIpIHtcbiAgICByZXR1cm4gZW5kcG9pbnRfY21wKHAxLCBwMikgPj0gMFxufVxuZnVuY3Rpb24gZW5kcG9pbnRfZXEgKHAxLCBwMikge1xuICAgIHJldHVybiBlbmRwb2ludF9jbXAocDEsIHAyKSA9PSAwXG59XG5mdW5jdGlvbiBlbmRwb2ludF9taW4ocDEsIHAyKSB7XG4gICAgcmV0dXJuIChlbmRwb2ludF9sZShwMSwgcDIpKSA/IHAxIDogcDI7XG59XG5mdW5jdGlvbiBlbmRwb2ludF9tYXgocDEsIHAyKSB7XG4gICAgcmV0dXJuIChlbmRwb2ludF9nZShwMSwgcDIpKSA/IHAxIDogcDI7XG59XG5cbi8qKlxuICogZmxpcCBlbmRwb2ludDpcbiAqIC0gaWUuIGdldCBhZGphY2VudCBlbmRwb25pdCBvbiB0aGUgdGltZWxpbmVcbiAqIFxuICogdikgPC0+IFt2XG4gKiB2XSA8LT4gKHZcbiAqIFxuICogZmxpcHBpbmcgaGFzIG5vIGVmZmVjdCBvbiBlbmRwb2ludHMgd2l0aCB1bmJvdW5kZWQgdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiBlbmRwb2ludF9mbGlwKGVwLCB0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInRhcmdldCBpcyBkZXByZWNhdGVkXCIpO1xuICAgIH1cbiAgICBsZXQgW3YsdF0gPSBlcDtcbiAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBlcDtcbiAgICB9XG4gICAgaWYgKHQgPT0gRVBfVFlQRS5ISUdIX09QRU4pIHtcbiAgICAgICAgcmV0dXJuIFt2LCBFUF9UWVBFLkxPV19DTE9TRURdO1xuICAgIH0gZWxzZSBpZiAodCA9PSBFUF9UWVBFLkhJR0hfQ0xPU0VEKSB7XG4gICAgICAgIHJldHVybiBbdiwgRVBfVFlQRS5MT1dfT1BFTl07XG4gICAgfSBlbHNlIGlmICh0ID09IEVQX1RZUEUuTE9XX09QRU4pIHtcbiAgICAgICAgcmV0dXJuIFt2LCBFUF9UWVBFLkhJR0hfQ0xPU0VEXTtcbiAgICB9IGVsc2UgaWYgKHQgPT0gRVBfVFlQRS5MT1dfQ0xPU0VEKSB7XG4gICAgICAgIHJldHVybiBbdiwgRVBfVFlQRS5ISUdIX09QRU5dO1xuICAgIH0gZWxzZSB7XG4gICAgXHR0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGVuZHBvaW50IHR5cGVcIiwgdCk7XG4gICAgfVxuICAgIHJldHVybiBwO1xufVxuXG4vKlxuICAgIHJldHVybnMgbG93IGFuZCBoaWdoIGVuZHBvaW50cyBmcm9tIGludGVydmFsXG4qL1xuZnVuY3Rpb24gZW5kcG9pbnRzX2Zyb21faW50ZXJ2YWwoaXR2KSB7XG4gICAgY29uc3QgW2xvdywgaGlnaCwgbG93Q2xvc2VkLCBoaWdoQ2xvc2VkXSA9IGl0djtcbiAgICBjb25zdCBsb3dUeXBlID0gKGxvd0Nsb3NlZCkgPyAgRVBfVFlQRS5MT1dfQ0xPU0VEIDogRVBfVFlQRS5MT1dfT1BFTjtcbiAgICBjb25zdCBoaWdoVHlwZSA9IChoaWdoQ2xvc2VkKSA/ICBFUF9UWVBFLkhJR0hfQ0xPU0VEIDogRVBfVFlQRS5ISUdIX09QRU47XG4gICAgY29uc3QgbG93RXAgPSBlbmRwb2ludF9mcm9tX2lucHV0KFtsb3csIGxvd1R5cGVdKTtcbiAgICBjb25zdCBoaWdoRXAgPSBlbmRwb2ludF9mcm9tX2lucHV0KFtoaWdoLCBoaWdoVHlwZV0pO1xuICAgIHJldHVybiBbbG93RXAsIGhpZ2hFcF07XG59XG5cblxuLypcbiAgICBJTlRFUlZBTFNcblxuICAgIEludGVydmFscyBhcmUgW2xvdywgaGlnaCwgbG93Q2xvc2VkLCBoaWdoQ2xvc2VkXVxuXG4qLyBcblxuXG4vKlxuICAgIHJldHVybiB0cnVlIGlmIHBvaW50IG9yIGVuZHBvaW50IGlzIGNvdmVyZWQgYnkgaW50ZXJ2YWxcbiAgICBwb2ludCBwIGNhbiBiZSBudW1iZXIgdmFsdWUgb3IgYW4gZW5kcG9pbnRcbiovXG5mdW5jdGlvbiBpbnRlcnZhbF9jb3ZlcnNfZW5kcG9pbnQoaXR2LCBlcCkge1xuICAgIGNvbnN0IFtsb3dfZXAsIGhpZ2hfZXBdID0gZW5kcG9pbnRzX2Zyb21faW50ZXJ2YWwoaXR2KTtcbiAgICBlcCA9IGVuZHBvaW50X2Zyb21faW5wdXQoZXApO1xuICAgIC8vIGNvdmVyczogbG93IDw9IHAgPD0gaGlnaFxuICAgIHJldHVybiBlbmRwb2ludF9sZShsb3dfZXAsIGVwKSAmJiBlbmRwb2ludF9sZShlcCwgaGlnaF9lcCk7XG59XG4vLyBjb252ZW5pZW5jZVxuZnVuY3Rpb24gaW50ZXJ2YWxfY292ZXJzX3BvaW50KGl0diwgcCkge1xuICAgIHJldHVybiBpbnRlcnZhbF9jb3ZlcnNfZW5kcG9pbnQoaXR2LCBwKTtcbn1cblxuLypcbiAgICBSZXR1cm4gdHJ1ZSBpZiBpbnRlcnZhbCBlbmRwb2ludHMgYXJlIGVxdWFsXG4qL1xuZnVuY3Rpb24gaW50ZXJ2YWxfaXNfc2luZ3VsYXIoaW50ZXJ2YWwpIHtcbiAgICBjb25zdCBbbG93X2VwLCBoaWdoX2VwXSA9IGVuZHBvaW50c19mcm9tX2ludGVydmFsKGl0dik7XG4gICAgcmV0dXJuIGVuZHBvaW50X2VxKGxvd19lcCwgaGlnaF9lcCk7XG59XG5cbi8qXG4gICAgQ3JlYXRlIGludGVydmFsIGZyb20gZW5kcG9pbnRzXG4qL1xuZnVuY3Rpb24gaW50ZXJ2YWxfZnJvbV9lbmRwb2ludHMoZXAxLCBlcDIpIHtcbiAgICBsZXQgW3YxLCB0MV0gPSBlcDE7XG4gICAgbGV0IFt2MiwgdDJdID0gZXAyO1xuICAgIGlmICghZW5kcG9pbnRfaXNfbG93KGVwMSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBsb3cgZW5kcG9pbnRcIiwgZXAxKTtcbiAgICB9XG4gICAgaWYgKCFlbmRwb2ludF9pc19oaWdoKGVwMikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBoaWdoIGVuZHBvaW50XCIsIGVwMik7XG4gICAgfVxuICAgIHJldHVybiBbdjEsIHYyLCB0MSA9PSBFUF9UWVBFLkxPV19DTE9TRUQsIHQyID09IEVQX1RZUEUuSElHSF9DTE9TRURdO1xufVxuXG5cbmZ1bmN0aW9uIGludGVydmFsX2Zyb21faW5wdXQoaW5wdXQpe1xuICAgIGxldCBpdHYgPSBpbnB1dDtcbiAgICBpZiAoaXR2ID09IHVuZGVmaW5lZCB8fCBpdHYgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbnB1dCBpcyB1bmRlZmluZWRcIik7XG4gICAgfVxuICAgIGlmICghQXJyYXkuaXNBcnJheShpdHYpKSB7XG4gICAgICAgIGlmIChpc051bWJlcihpdHYpKSB7XG4gICAgICAgICAgICAvLyBpbnB1dCBpcyBzaW5ndWxhciBudW1iZXJcbiAgICAgICAgICAgIGl0diA9IFtpdHYsIGl0diwgdHJ1ZSwgdHJ1ZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGlucHV0OiAke2lucHV0fTogbXVzdCBiZSBBcnJheSBvciBOdW1iZXJgKVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBtYWtlIHN1cmUgaW50ZXJ2YWwgaXMgbGVuZ3RoIDRcbiAgICBpZiAoaXR2Lmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIGl0diA9IFtpdHZbMF0sIGl0dlswXSwgdHJ1ZSwgdHJ1ZV07XG4gICAgfSBlbHNlIGlmIChpdHYubGVuZ3RoID09IDIpIHtcbiAgICAgICAgaXR2ID0gW2l0dlswXSwgaXR2WzFdLCB0cnVlLCBmYWxzZV07XG4gICAgfSBlbHNlIGlmIChpdHYubGVuZ3RoID09IDMpIHtcbiAgICAgICAgaXR2ID0gW2l0dlswXSwgaXR2WzFdLCBpdHZbMl0sIGZhbHNlXTtcbiAgICB9IGVsc2UgaWYgKGl0di5sZW5ndGggPiA0KSB7XG4gICAgICAgIGl0diA9IFtpdHZbMF0sIGl0dlsxXSwgaXR2WzJdLCBpdHZbNF1dO1xuICAgIH1cbiAgICBsZXQgW2xvdywgaGlnaCwgbG93SW5jbHVkZSwgaGlnaEluY2x1ZGVdID0gaXR2O1xuICAgIC8vIGJvdW5kYXJ5IGNvbmRpdGlvbnMgYXJlIG51bWJlciBvciBudWxsXG4gICAgaWYgKGxvdyA9PSB1bmRlZmluZWQgfHwgbG93ID09IC1JbmZpbml0eSkge1xuICAgICAgICBsb3cgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoaGlnaCA9PSB1bmRlZmluZWQgfHwgaGlnaCA9PSBJbmZpbml0eSkge1xuICAgICAgICBoaWdoID0gbnVsbDtcbiAgICB9XG4gICAgLy8gY2hlY2sgbG93XG4gICAgaWYgKGxvdyA9PSBudWxsKSB7XG4gICAgICAgIGxvd0luY2x1ZGUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghaXNOdW1iZXIobG93KSkgdGhyb3cgbmV3IEVycm9yKFwibG93IG5vdCBhIG51bWJlclwiLCBsb3cpO1xuICAgIH1cbiAgICAvLyBjaGVjayBoaWdoXG4gICAgaWYgKGhpZ2ggPT0gbnVsbCkge1xuICAgICAgICBoaWdoSW5jbHVkZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFpc051bWJlcihoaWdoKSkgdGhyb3cgbmV3IEVycm9yKFwiaGlnaCBub3QgYSBudW1iZXJcIiwgaGlnaCk7XG4gICAgfSAgICBcbiAgICAvLyBjaGVjayB0aGF0IGxvdyA8PSBoaWdoXG4gICAgaWYgKGxvdyAhPSBudWxsICYmIGhpZ2ggIT0gbnVsbCkge1xuICAgICAgICBpZiAobG93ID4gaGlnaCkgdGhyb3cgbmV3IEVycm9yKFwibG93ID4gaGlnaFwiLCBsb3csIGhpZ2gpO1xuICAgICAgICAvLyBzaW5nbGV0b25cbiAgICAgICAgaWYgKGxvdyA9PSBoaWdoKSB7XG4gICAgICAgICAgICBsb3dJbmNsdWRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGhpZ2hJbmNsdWRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjaGVjayB0aGF0IGxvd0luY2x1ZGUsIGhpZ2hJbmNsdWRlIGFyZSBib29sZWFuc1xuICAgIGlmICh0eXBlb2YgbG93SW5jbHVkZSAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibG93SW5jbHVkZSBub3QgYm9vbGVhblwiKTtcbiAgICB9IFxuICAgIGlmICh0eXBlb2YgaGlnaEluY2x1ZGUgIT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImhpZ2hJbmNsdWRlIG5vdCBib29sZWFuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gW2xvdywgaGlnaCwgbG93SW5jbHVkZSwgaGlnaEluY2x1ZGVdO1xufVxuXG5leHBvcnQgY29uc3QgZW5kcG9pbnQgPSB7XG4gICAgbGU6IGVuZHBvaW50X2xlLFxuICAgIGx0OiBlbmRwb2ludF9sdCxcbiAgICBnZTogZW5kcG9pbnRfZ2UsXG4gICAgZ3Q6IGVuZHBvaW50X2d0LFxuICAgIGNtcDogZW5kcG9pbnRfY21wLFxuICAgIGVxOiBlbmRwb2ludF9lcSxcbiAgICBtaW46IGVuZHBvaW50X21pbixcbiAgICBtYXg6IGVuZHBvaW50X21heCxcbiAgICBmbGlwOiBlbmRwb2ludF9mbGlwLFxuICAgIGZyb21faW50ZXJ2YWw6IGVuZHBvaW50c19mcm9tX2ludGVydmFsLFxuICAgIGZyb21faW5wdXQ6IGVuZHBvaW50X2Zyb21faW5wdXQsXG4gICAgdHlwZXM6IHsuLi5FUF9UWVBFfSxcbiAgICBQT1NfSU5GIDogZW5kcG9pbnRfUE9TX0lORixcbiAgICBORUdfSU5GIDogZW5kcG9pbnRfTkVHX0lORlxufVxuZXhwb3J0IGNvbnN0IGludGVydmFsID0ge1xuICAgIGNvdmVyc19lbmRwb2ludDogaW50ZXJ2YWxfY292ZXJzX2VuZHBvaW50LFxuICAgIGNvdmVyc19wb2ludDogaW50ZXJ2YWxfY292ZXJzX3BvaW50LCBcbiAgICBpc19zaW5ndWxhcjogaW50ZXJ2YWxfaXNfc2luZ3VsYXIsXG4gICAgZnJvbV9lbmRwb2ludHM6IGludGVydmFsX2Zyb21fZW5kcG9pbnRzLFxuICAgIGZyb21faW5wdXQ6IGludGVydmFsX2Zyb21faW5wdXRcbn1cbiIsImltcG9ydCB7IGVuZHBvaW50LCBpbnRlcnZhbCB9IGZyb20gXCIuL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBORUFSQlkgSU5ERVhcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBBYnN0cmFjdCBzdXBlcmNsYXNzIGZvciBOZWFyYnlJbmRleGUuXG4gKiBcbiAqIFN1cGVyY2xhc3MgdXNlZCB0byBjaGVjayB0aGF0IGEgY2xhc3MgaW1wbGVtZW50cyB0aGUgbmVhcmJ5KCkgbWV0aG9kLCBcbiAqIGFuZCBwcm92aWRlIHNvbWUgY29udmVuaWVuY2UgbWV0aG9kcy5cbiAqIFxuICogTkVBUkJZIElOREVYXG4gKiBcbiAqIE5lYXJieUluZGV4IHByb3ZpZGVzIGluZGV4aW5nIHN1cHBvcnQgb2YgZWZmZWN0aXZlbHlcbiAqIGxvb2tpbmcgdXAgcmVnaW9ucyBieSBvZmZzZXQsIFxuICogZ2l2ZW4gdGhhdFxuICogKGkpIGVhY2ggcmVnaW9uIGlzIGFzc29jaWF0ZWQgd2l0aCBhbiBpbnRlcnZhbCBhbmQsXG4gKiAoaWkpIHJlZ2lvbnMgYXJlIG5vbi1vdmVybGFwcGluZy5cbiAqIFxuICogTkVBUkJZXG4gKiBUaGUgbmVhcmJ5IG1ldGhvZCByZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBuZWlnaGJvcmhvb2QgXG4gKiBhcm91bmQgZW5kcG9pbnQuIFxuICogXG4gKiBSZXR1cm5zIHtcbiAqICAgICAgY2VudGVyOiBsaXN0IG9mIG9iamVjdHMgY292ZXJlZCBieSByZWdpb24sXG4gKiAgICAgIGl0djogcmVnaW9uIGludGVydmFsIC0gdmFsaWRpdHkgb2YgY2VudGVyIFxuICogICAgICBsZWZ0OlxuICogICAgICAgICAgZmlyc3QgaW50ZXJ2YWwgZW5kcG9pbnQgdG8gdGhlIGxlZnQgXG4gKiAgICAgICAgICB3aGljaCB3aWxsIHByb2R1Y2UgZGlmZmVyZW50IHtjZW50ZXJ9XG4gKiAgICAgICAgICBhbHdheXMgYSBoaWdoLWVuZHBvaW50IG9yIGVuZHBvaW50Lk5FR19JTkZcbiAqICAgICAgcmlnaHQ6XG4gKiAgICAgICAgICBmaXJzdCBpbnRlcnZhbCBlbmRwb2ludCB0byB0aGUgcmlnaHRcbiAqICAgICAgICAgIHdoaWNoIHdpbGwgcHJvZHVjZSBkaWZmZXJlbnQge2NlbnRlcn1cbiAqICAgICAgICAgIGFsd2F5cyBhIGxvdy1lbmRwb2ludCBvciBlbmR0cG9pbnQuUE9TX0lORlxuICogXG4gKiBcbiAqIFRoZSBuZWFyYnkgc3RhdGUgaXMgd2VsbC1kZWZpbmVkIGZvciBldmVyeSBlbmRwb2ludFxuICogb24gdGhlIHRpbWVsaW5lLlxuICogXG4gKiBJTlRFUlZBTFNcbiAqIFxuICogW2xvdywgaGlnaCwgbG93SW5jbHVzaXZlLCBoaWdoSW5jbHVzaXZlXVxuICogXG4gKiBUaGlzIHJlcHJlc2VudGF0aW9uIGVuc3VyZXMgdGhhdCB0aGUgaW50ZXJ2YWwgZW5kcG9pbnRzIFxuICogYXJlIG9yZGVyZWQgYW5kIGFsbG93cyBpbnRlcnZhbHMgdG8gYmUgZXhjbHVzaXZlIG9yIGluY2x1c2l2ZSwgXG4gKiB5ZXQgY292ZXIgdGhlIGVudGlyZSByZWFsIGxpbmUgXG4gKiBcbiAqIFthLGJdLCAoYSxiKSwgW2EsYiksIFthLCBiKSBhcmUgYWxsIHZhbGlkIGludGVydmFsc1xuICogXG4gKiBcbiAqIElOVEVSVkFMIEVORFBPSU5UU1xuICogXG4gKiBpbnRlcnZhbCBlbmRwb2ludHMgYXJlIGRlZmluZWQgYnkgW3ZhbHVlLCB0eXBlXSwgZm9yIGV4YW1wbGVcbiAqIFxuICogNCkgLT4gWzQsXCIpXCJdIC0gaGlnaCBlbmRwb2ludCBsZWZ0IG9mIDRcbiAqIFs0IC0+IFs0LCBcIltcIl0gLSBsb3cgZW5kcG9pbnQgaW5jbHVkZXMgNFxuICogNCAgLT4gWzQsIFwiXCJdIC0gdmFsdWUgNFxuICogNF0gLT4gWzQsIFwiXVwiXSAtIGhpZ2ggZW5kcG9pbnQgaW5jbHVkZXMgNFxuICogKDQgLT4gWzQsIFwiKFwiXSAtIGxvdyBlbmRwb2ludCBpcyByaWdodCBvZiA0XG4gKiBcbiAqL1xuXG5cbi8qKlxuICogcmV0dXJuIGZpcnN0IGhpZ2ggZW5kcG9pbnQgb24gdGhlIGxlZnQgZnJvbSBuZWFyYnksXG4gKiB3aGljaCBpcyBub3QgaW4gY2VudGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZWZ0X2VuZHBvaW50IChuZWFyYnkpIHtcbiAgICBjb25zdCBsb3cgPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKG5lYXJieS5pdHYpWzBdO1xuICAgIHJldHVybiBlbmRwb2ludC5mbGlwKGxvdyk7XG59XG5cbi8qKlxuICogcmV0dXJuIGZpcnN0IGxvdyBlbmRwb2ludCBvbiB0aGUgcmlnaHQgZnJvbSBuZWFyYnksXG4gKiB3aGljaCBpcyBub3QgaW4gY2VudGVyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0X2VuZHBvaW50IChuZWFyYnkpIHtcbiAgICBjb25zdCBoaWdoID0gZW5kcG9pbnQuZnJvbV9pbnRlcnZhbChuZWFyYnkuaXR2KVsxXTtcbiAgICByZXR1cm4gZW5kcG9pbnQuZmxpcChoaWdoKTtcbn1cblxuXG5cbmV4cG9ydCBjbGFzcyBOZWFyYnlJbmRleEJhc2Uge1xuXG5cbiAgICAvKiBcbiAgICAgICAgTmVhcmJ5IG1ldGhvZFxuICAgICovXG4gICAgbmVhcmJ5KG9mZnNldCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuXG4gICAgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpcnN0KCkgPT0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qXG4gICAgICAgIHJldHVybiBsb3cgcG9pbnQgb2YgbGVmdG1vc3QgZW50cnlcbiAgICAqL1xuICAgIGZpcnN0KCkge1xuICAgICAgICBsZXQge2NlbnRlciwgcmlnaHR9ID0gdGhpcy5uZWFyYnkoZW5kcG9pbnQuTkVHX0lORik7XG4gICAgICAgIGlmIChjZW50ZXIubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgIHJldHVybiBlbmRwb2ludC5ORUdfSU5GO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRwb2ludC5sdChyaWdodCwgZW5kcG9pbnQuUE9TX0lORikpIHtcbiAgICAgICAgICAgIHJldHVybiByaWdodDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVtcHR5XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLypcbiAgICAgICAgcmV0dXJuIGhpZ2ggcG9pbnQgb2YgcmlnaHRtb3N0IGVudHJ5XG4gICAgKi9cbiAgICBsYXN0KCkge1xuICAgICAgICBsZXQge2xlZnQsIGNlbnRlcn0gPSB0aGlzLm5lYXJieShlbmRwb2ludC5QT1NfSU5GKTtcbiAgICAgICAgaWYgKGNlbnRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5kcG9pbnQuUE9TX0lORjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kcG9pbnQuZ3QobGVmdCwgZW5kcG9pbnQuTkVHX0lORikpIHtcbiAgICAgICAgICAgIHJldHVybiBsZWZ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZW1wdHlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIHJldHVybiBuZWFyYnkgb2YgZmlyc3QgcmVnaW9uIHRvIHRoZSByaWdodFxuICAgICAqIHdoaWNoIGlzIG5vdCB0aGUgY2VudGVyIHJlZ2lvbi4gSWYgbm90IGV4aXN0cywgcmV0dXJuXG4gICAgICogdW5kZWZpbmVkLiBcbiAgICAgKi9cbiAgICByaWdodF9yZWdpb24obmVhcmJ5KSB7XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gcmlnaHRfZW5kcG9pbnQobmVhcmJ5KTtcbiAgICAgICAgaWYgKHJpZ2h0WzBdID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubmVhcmJ5KHJpZ2h0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gbmVhcmJ5IG9mIGZpcnN0IHJlZ2lvbiB0byB0aGUgbGVmdFxuICAgICAqIHdoaWNoIGlzIG5vdCB0aGUgY2VudGVyIHJlZ2lvbi4gSWYgbm90IGV4aXN0cywgcmV0dXJuXG4gICAgICogdW5kZWZpbmVkLiBcbiAgICAgKi9cbiAgICBsZWZ0X3JlZ2lvbihuZWFyYnkpIHtcbiAgICAgICAgY29uc3QgbGVmdCA9IGxlZnRfZW5kcG9pbnQobmVhcmJ5KTtcbiAgICAgICAgaWYgKGxlZnRbMF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uZWFyYnkobGVmdCk7ICAgIFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGZpbmQgZmlyc3QgcmVnaW9uIHRvIHRoZSBcInJpZ2h0XCIgb3IgXCJsZWZ0XCJcbiAgICAgKiB3aGljaCBpcyBub3QgdGhlIGNlbnRlciByZWdpb24sIGFuZCB3aGljaCBtZWV0c1xuICAgICAqIGEgY29uZGl0aW9uIG9uIG5lYXJieS5jZW50ZXIuXG4gICAgICogRGVmYXVsdCBjb25kaXRpb24gaXMgY2VudGVyIG5vbi1lbXB0eVxuICAgICAqIElmIG5vdCBleGlzdHMsIHJldHVybiB1bmRlZmluZWQuIFxuICAgICAqL1xuICAgIFxuICAgIGZpbmRfcmVnaW9uKG5lYXJieSwgb3B0aW9ucz17fSkge1xuICAgICAgICBsZXQge1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gMSxcbiAgICAgICAgICAgIGNvbmRpdGlvbiA9IChjZW50ZXIpID0+IGNlbnRlci5sZW5ndGggPiAwXG4gICAgICAgIH0gPSBvcHRpb25zO1xuICAgICAgICBsZXQgbmV4dF9uZWFyYnk7XG4gICAgICAgIHdoaWxlKHRydWUpIHtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gMSkge1xuICAgICAgICAgICAgICAgIG5leHRfbmVhcmJ5ID0gdGhpcy5yaWdodF9yZWdpb24obmVhcmJ5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV4dF9uZWFyYnkgPSB0aGlzLmxlZnRfcmVnaW9uKG5lYXJieSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV4dF9uZWFyYnkgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25kaXRpb24obmV4dF9uZWFyYnkuY2VudGVyKSkge1xuICAgICAgICAgICAgICAgIC8vIGZvdW5kIHJlZ2lvbiBcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dF9uZWFyYnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZWdpb24gbm90IGZvdW5kXG4gICAgICAgICAgICAvLyBjb250aW51ZSBzZWFyY2hpbmcgdGhlIHJpZ2h0XG4gICAgICAgICAgICBuZWFyYnkgPSBuZXh0X25lYXJieTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlZ2lvbnMob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IFJlZ2lvbkl0ZXJhdG9yKHRoaXMsIG9wdGlvbnMpO1xuICAgIH1cblxufVxuXG5cbi8qXG4gICAgSXRlcmF0ZSByZWdpb25zIG9mIGluZGV4IGZyb20gbGVmdCB0byByaWdodFxuXG4gICAgSXRlcmF0aW9uIGxpbWl0ZWQgdG8gaW50ZXJ2YWwgW3N0YXJ0LCBzdG9wXSBvbiB0aGUgdGltZWxpbmUuXG4gICAgUmV0dXJucyBsaXN0IG9mIGl0ZW0tbGlzdHMuXG4gICAgb3B0aW9uc1xuICAgIC0gc3RhcnRcbiAgICAtIHN0b3BcbiAgICAtIGluY2x1ZGVFbXB0eVxuKi9cblxuY2xhc3MgUmVnaW9uSXRlcmF0b3Ige1xuXG4gICAgY29uc3RydWN0b3IoaW5kZXgsIG9wdGlvbnM9e30pIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIHN0YXJ0PS1JbmZpbml0eSwgXG4gICAgICAgICAgICBzdG9wPUluZmluaXR5LCBcbiAgICAgICAgICAgIGluY2x1ZGVFbXB0eT10cnVlXG4gICAgICAgIH0gPSBvcHRpb25zO1xuICAgICAgICBpZiAoc3RhcnQgPiBzdG9wKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IgKFwic3RvcCBtdXN0IGJlIGxhcmdlciB0aGFuIHN0YXJ0XCIsIHN0YXJ0LCBzdG9wKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuX3N0YXJ0ID0gZW5kcG9pbnQuZnJvbV9pbnB1dChzdGFydCk7XG4gICAgICAgIHRoaXMuX3N0b3AgPSBlbmRwb2ludC5mcm9tX2lucHV0KHN0b3ApO1xuXG4gICAgICAgIGlmIChpbmNsdWRlRW1wdHkpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbiA9ICgpID0+IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9jb25kaXRpb24gPSAoY2VudGVyKSA9PiBjZW50ZXIubGVuZ3RoID4gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jdXJyZW50O1xuICAgIH1cblxuICAgIG5leHQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gaW5pdGlhbHNlXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5faW5kZXgubmVhcmJ5KHRoaXMuX3N0YXJ0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb25kaXRpb24odGhpcy5fY3VycmVudC5jZW50ZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTp0aGlzLl9jdXJyZW50LCBkb25lOmZhbHNlfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IHtjb25kaXRpb246dGhpcy5fY29uZGl0aW9uLCBkaXJlY3Rpb246MX1cbiAgICAgICAgdGhpcy5fY3VycmVudCA9IHRoaXMuX2luZGV4LmZpbmRfcmVnaW9uKHRoaXMuX2N1cnJlbnQsIG9wdGlvbnMpO1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7dmFsdWU6dW5kZWZpbmVkLCBkb25lOnRydWV9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTp0aGlzLl9jdXJyZW50LCBkb25lOmZhbHNlfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cblxuLyoqXG4gKiBuZWFyYnlfZnJvbVxuICogXG4gKiB1dGlsaXR5IGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhIG5lYXJieSBvYmplY3QgaW4gY2lyY3Vtc3RhbmNlc1xuICogd2hlcmUgdGhlcmUgYXJlIG92ZXJsYXBwaW5nIGludGVydmFscyBUaGlzIGNvdWxkIGJlIHdoZW4gYSBcbiAqIHN0YXRlcHJvdmlkZXIgZm9yIGEgbGF5ZXIgaGFzIG92ZXJsYXBwaW5nIGl0ZW1zIG9yIHdoZW4gXG4gKiBtdWx0aXBsZSBuZWFyYnkgaW5kZXhlcyBhcmUgbWVyZ2VkIGludG8gb25lLlxuICogXG4gKiBcbiAqIEBwYXJhbSB7Kn0gcHJldl9oaWdoIDogdGhlIHJpZ2h0bW9zdCBoaWdoLWVuZHBvaW50IGxlZnQgb2Ygb2Zmc2V0XG4gKiBAcGFyYW0geyp9IGNlbnRlcl9sb3dfbGlzdCA6IGxvdy1lbmRwb2ludHMgb2YgY2VudGVyXG4gKiBAcGFyYW0geyp9IGNlbnRlciA6IGNlbnRlclxuICogQHBhcmFtIHsqfSBjZW50ZXJfaGlnaF9saXN0IDogaGlnaC1lbmRwb2ludHMgb2YgY2VudGVyXG4gKiBAcGFyYW0geyp9IG5leHRfbG93IDogdGhlIGxlZnRtb3N0IGxvdy1lbmRwb2ludCByaWdodCBvZiBvZmZzZXRcbiAqIEByZXR1cm5zIFxuICovXG5cbmZ1bmN0aW9uIGNtcF9hc2NlbmRpbmcocDEsIHAyKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmNtcChwMSwgcDIpXG59XG5cbmZ1bmN0aW9uIGNtcF9kZXNjZW5kaW5nKHAxLCBwMikge1xuICAgIHJldHVybiBlbmRwb2ludC5jbXAocDIsIHAxKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbmVhcmJ5X2Zyb20gKFxuICAgIHByZXZfaGlnaCwgXG4gICAgY2VudGVyX2xvd19saXN0LCBcbiAgICBjZW50ZXIsXG4gICAgY2VudGVyX2hpZ2hfbGlzdCxcbiAgICBuZXh0X2xvdykge1xuXG4gICAgLy8gbmVhcmJ5XG4gICAgY29uc3QgcmVzdWx0ID0ge2NlbnRlcn07XG5cbiAgICBpZiAoY2VudGVyLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIC8vIGVtcHR5IGNlbnRlclxuICAgICAgICByZXN1bHQucmlnaHQgPSBuZXh0X2xvdztcbiAgICAgICAgcmVzdWx0LmxlZnQgPSBwcmV2X2hpZ2g7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm9uLWVtcHR5IGNlbnRlclxuICAgICAgICBcbiAgICAgICAgLy8gY2VudGVyIGhpZ2hcbiAgICAgICAgY2VudGVyX2hpZ2hfbGlzdC5zb3J0KGNtcF9hc2NlbmRpbmcpO1xuICAgICAgICBsZXQgbWluX2NlbnRlcl9oaWdoID0gY2VudGVyX2hpZ2hfbGlzdFswXTtcbiAgICAgICAgbGV0IG1heF9jZW50ZXJfaGlnaCA9IGNlbnRlcl9oaWdoX2xpc3Quc2xpY2UoLTEpWzBdO1xuICAgICAgICBsZXQgbXVsdGlwbGVfY2VudGVyX2hpZ2ggPSAhZW5kcG9pbnQuZXEobWluX2NlbnRlcl9oaWdoLCBtYXhfY2VudGVyX2hpZ2gpXG5cbiAgICAgICAgLy8gY2VudGVyIGxvd1xuICAgICAgICBjZW50ZXJfbG93X2xpc3Quc29ydChjbXBfZGVzY2VuZGluZyk7XG4gICAgICAgIGxldCBtYXhfY2VudGVyX2xvdyA9IGNlbnRlcl9sb3dfbGlzdFswXTtcbiAgICAgICAgbGV0IG1pbl9jZW50ZXJfbG93ID0gY2VudGVyX2xvd19saXN0LnNsaWNlKC0xKVswXTtcbiAgICAgICAgbGV0IG11bHRpcGxlX2NlbnRlcl9sb3cgPSAhZW5kcG9pbnQuZXEobWF4X2NlbnRlcl9sb3csIG1pbl9jZW50ZXJfbG93KVxuXG4gICAgICAgIC8vIG5leHQvcmlnaHRcbiAgICAgICAgaWYgKGVuZHBvaW50LmxlKG5leHRfbG93LCBtaW5fY2VudGVyX2hpZ2gpKSB7XG4gICAgICAgICAgICByZXN1bHQucmlnaHQgPSBuZXh0X2xvdztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdC5yaWdodCA9IGVuZHBvaW50LmZsaXAobWluX2NlbnRlcl9oaWdoKVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5uZXh0ID0gKG11bHRpcGxlX2NlbnRlcl9oaWdoKSA/IHJlc3VsdC5yaWdodCA6IG5leHRfbG93O1xuXG4gICAgICAgIC8vIHByZXYvbGVmdFxuICAgICAgICBpZiAoZW5kcG9pbnQuZ2UocHJldl9oaWdoLCBtYXhfY2VudGVyX2xvdykpIHtcbiAgICAgICAgICAgIHJlc3VsdC5sZWZ0ID0gcHJldl9oaWdoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LmxlZnQgPSBlbmRwb2ludC5mbGlwKG1heF9jZW50ZXJfbG93KTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQucHJldiA9IChtdWx0aXBsZV9jZW50ZXJfbG93KSA/IHJlc3VsdC5sZWZ0IDogcHJldl9oaWdoO1xuXG4gICAgfVxuXG4gICAgLy8gaW50ZXJ2YWwgZnJvbSBsZWZ0L3JpZ2h0XG4gICAgbGV0IGxvdyA9IGVuZHBvaW50LmZsaXAocmVzdWx0LmxlZnQpO1xuICAgIGxldCBoaWdoID0gZW5kcG9pbnQuZmxpcChyZXN1bHQucmlnaHQpO1xuICAgIHJlc3VsdC5pdHYgPSBpbnRlcnZhbC5mcm9tX2VuZHBvaW50cyhsb3csIGhpZ2gpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vKipcbiAqIENyZWF0ZSBhIE5lYXJieUluZGV4IGZvciBhIHNyYyBvYmplY3QgTGF5ZXIuXG4gKiBcbiAqIFRoZSBzcmMgb2JqZWN0IHJlc29sdmVzIHF1ZXJpZXMgZm9yIHRoZSBlbnRpcmUgdGltZWxpbmUuXG4gKiBJbiBvcmRlciBmb3IgdGhlIGRlZmF1bHQgTGF5ZXJDYWNoZSB0byB3b3JrLCBhblxuICogb2JqZWN0IHdpdGggYSAucXVlcnkob2Zmc2V0KSBtZXRob2QgaXMgbmVlZGVkIGluIFxuICogbmVhcmJ5LmNlbnRlci5cbiAqL1xuXG5leHBvcnQgY2xhc3MgTmVhcmJ5SW5kZXhTcmMgZXh0ZW5kcyBOZWFyYnlJbmRleEJhc2Uge1xuXG4gICAgY29uc3RydWN0b3Ioc3JjKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX3NyYyA9IHNyYztcbiAgICAgICAgdGhpcy5fY2FjaGUgPSBzcmMuY3JlYXRlQ2FjaGUoKTtcbiAgICB9XG5cbiAgICBuZWFyYnkob2Zmc2V0KSB7XG4gICAgICAgIGNvbnN0IG5lYXJieSA9IHRoaXMuX3NyYy5pbmRleC5uZWFyYnkob2Zmc2V0KTtcbiAgICAgICAgbmVhcmJ5LmNlbnRlciA9IFt0aGlzLl9jYWNoZV07XG4gICAgICAgIHJldHVybiBuZWFyYnk7XG4gICAgfVxufVxuIiwiLypcblx0Q29weXJpZ2h0IDIwMjBcblx0QXV0aG9yIDogSW5nYXIgQXJudHplblxuXG5cdFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBUaW1pbmdzcmMgbW9kdWxlLlxuXG5cdFRpbWluZ3NyYyBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5XG5cdGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieVxuXHR0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvclxuXHQoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuXG5cdFRpbWluZ3NyYyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLFxuXHRidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZlxuXHRNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlXG5cdEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLlxuXG5cdFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuXHRhbG9uZyB3aXRoIFRpbWluZ3NyYy4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbiovXG5cblxuXG4vKlxuXHRFdmVudFxuXHQtIG5hbWU6IGV2ZW50IG5hbWVcblx0LSBwdWJsaXNoZXI6IHRoZSBvYmplY3Qgd2hpY2ggZGVmaW5lZCB0aGUgZXZlbnRcblx0LSBpbml0OiB0cnVlIGlmIHRoZSBldmVudCBzdXBwcG9ydHMgaW5pdCBldmVudHNcblx0LSBzdWJzY3JpcHRpb25zOiBzdWJzY3JpcHRpbnMgdG8gdGhpcyBldmVudFxuXG4qL1xuXG5jbGFzcyBFdmVudCB7XG5cblx0Y29uc3RydWN0b3IgKHB1Ymxpc2hlciwgbmFtZSwgb3B0aW9ucykge1xuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cdFx0dGhpcy5wdWJsaXNoZXIgPSBwdWJsaXNoZXI7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLmluaXQgPSAob3B0aW9ucy5pbml0ID09PSB1bmRlZmluZWQpID8gZmFsc2UgOiBvcHRpb25zLmluaXQ7XG5cdFx0dGhpcy5zdWJzY3JpcHRpb25zID0gW107XG5cdH1cblxuXHQvKlxuXHRcdHN1YnNjcmliZSB0byBldmVudFxuXHRcdC0gc3Vic2NyaWJlcjogc3Vic2NyaWJpbmcgb2JqZWN0XG5cdFx0LSBjYWxsYmFjazogY2FsbGJhY2sgZnVuY3Rpb24gdG8gaW52b2tlXG5cdFx0LSBvcHRpb25zOlxuXHRcdFx0aW5pdDogaWYgdHJ1ZSBzdWJzY3JpYmVyIHdhbnRzIGluaXQgZXZlbnRzXG5cdCovXG5cdHN1YnNjcmliZSAoY2FsbGJhY2ssIG9wdGlvbnMpIHtcblx0XHRpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDYWxsYmFjayBub3QgYSBmdW5jdGlvblwiLCBjYWxsYmFjayk7XG5cdFx0fVxuXHRcdGNvbnN0IHN1YiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcywgY2FsbGJhY2ssIG9wdGlvbnMpO1xuXHRcdHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHN1Yik7XG5cdCAgICAvLyBJbml0aWF0ZSBpbml0IGNhbGxiYWNrIGZvciB0aGlzIHN1YnNjcmlwdGlvblxuXHQgICAgaWYgKHRoaXMuaW5pdCAmJiBzdWIuaW5pdCkge1xuXHQgICAgXHRzdWIuaW5pdF9wZW5kaW5nID0gdHJ1ZTtcblx0ICAgIFx0bGV0IHNlbGYgPSB0aGlzO1xuXHQgICAgXHRQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0ICAgIFx0XHRjb25zdCBlQXJncyA9IHNlbGYucHVibGlzaGVyLmV2ZW50aWZ5SW5pdEV2ZW50QXJncyhzZWxmLm5hbWUpIHx8IFtdO1xuXHQgICAgXHRcdHN1Yi5pbml0X3BlbmRpbmcgPSBmYWxzZTtcblx0ICAgIFx0XHRmb3IgKGxldCBlQXJnIG9mIGVBcmdzKSB7XG5cdCAgICBcdFx0XHRzZWxmLnRyaWdnZXIoZUFyZywgW3N1Yl0sIHRydWUpO1xuXHQgICAgXHRcdH1cblx0ICAgIFx0fSk7XG5cdCAgICB9XG5cdFx0cmV0dXJuIHN1YlxuXHR9XG5cblx0Lypcblx0XHR0cmlnZ2VyIGV2ZW50XG5cblx0XHQtIGlmIHN1YiBpcyB1bmRlZmluZWQgLSBwdWJsaXNoIHRvIGFsbCBzdWJzY3JpcHRpb25zXG5cdFx0LSBpZiBzdWIgaXMgZGVmaW5lZCAtIHB1Ymxpc2ggb25seSB0byBnaXZlbiBzdWJzY3JpcHRpb25cblx0Ki9cblx0dHJpZ2dlciAoZUFyZywgc3VicywgaW5pdCkge1xuXHRcdGxldCBlSW5mbywgY3R4O1xuXHRcdGZvciAoY29uc3Qgc3ViIG9mIHN1YnMpIHtcblx0XHRcdC8vIGlnbm9yZSB0ZXJtaW5hdGVkIHN1YnNjcmlwdGlvbnNcblx0XHRcdGlmIChzdWIudGVybWluYXRlZCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGVJbmZvID0ge1xuXHRcdFx0XHRzcmM6IHRoaXMucHVibGlzaGVyLFxuXHRcdFx0XHRuYW1lOiB0aGlzLm5hbWUsXG5cdFx0XHRcdHN1Yjogc3ViLFxuXHRcdFx0XHRpbml0OiBpbml0XG5cdFx0XHR9XG5cdFx0XHRjdHggPSBzdWIuY3R4IHx8IHRoaXMucHVibGlzaGVyO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0c3ViLmNhbGxiYWNrLmNhbGwoY3R4LCBlQXJnLCBlSW5mbyk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coYEVycm9yIGluICR7dGhpcy5uYW1lfTogJHtzdWIuY2FsbGJhY2t9ICR7ZXJyfWApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qXG5cdHVuc3Vic2NyaWJlIGZyb20gZXZlbnRcblx0LSB1c2Ugc3Vic2NyaXB0aW9uIHJldHVybmVkIGJ5IHByZXZpb3VzIHN1YnNjcmliZVxuXHQqL1xuXHR1bnN1YnNjcmliZShzdWIpIHtcblx0XHRsZXQgaWR4ID0gdGhpcy5zdWJzY3JpcHRpb25zLmluZGV4T2Yoc3ViKTtcblx0XHRpZiAoaWR4ID4gLTEpIHtcblx0XHRcdHRoaXMuc3Vic2NyaXB0aW9ucy5zcGxpY2UoaWR4LCAxKTtcblx0XHRcdHN1Yi50ZXJtaW5hdGUoKTtcblx0XHR9XG5cdH1cbn1cblxuXG4vKlxuXHRTdWJzY3JpcHRpb24gY2xhc3NcbiovXG5cbmNsYXNzIFN1YnNjcmlwdGlvbiB7XG5cblx0Y29uc3RydWN0b3IoZXZlbnQsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblx0XHR0aGlzLmV2ZW50ID0gZXZlbnQ7XG5cdFx0dGhpcy5uYW1lID0gZXZlbnQubmFtZTtcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tcblx0XHR0aGlzLmluaXQgPSAob3B0aW9ucy5pbml0ID09PSB1bmRlZmluZWQpID8gdGhpcy5ldmVudC5pbml0IDogb3B0aW9ucy5pbml0O1xuXHRcdHRoaXMuaW5pdF9wZW5kaW5nID0gZmFsc2U7XG5cdFx0dGhpcy50ZXJtaW5hdGVkID0gZmFsc2U7XG5cdFx0dGhpcy5jdHggPSBvcHRpb25zLmN0eDtcblx0fVxuXG5cdHRlcm1pbmF0ZSgpIHtcblx0XHR0aGlzLnRlcm1pbmF0ZWQgPSB0cnVlO1xuXHRcdHRoaXMuY2FsbGJhY2sgPSB1bmRlZmluZWQ7XG5cdFx0dGhpcy5ldmVudC51bnN1YnNjcmliZSh0aGlzKTtcblx0fVxufVxuXG5cbi8qXG5cblx0RVZFTlRJRlkgSU5TVEFOQ0VcblxuXHRFdmVudGlmeSBicmluZ3MgZXZlbnRpbmcgY2FwYWJpbGl0aWVzIHRvIGFueSBvYmplY3QuXG5cblx0SW4gcGFydGljdWxhciwgZXZlbnRpZnkgc3VwcG9ydHMgdGhlIGluaXRpYWwtZXZlbnQgcGF0dGVybi5cblx0T3B0LWluIGZvciBpbml0aWFsIGV2ZW50cyBwZXIgZXZlbnQgdHlwZS5cblxuXHRldmVudGlmeUluaXRFdmVudEFyZ3MobmFtZSkge1xuXHRcdGlmIChuYW1lID09IFwiY2hhbmdlXCIpIHtcblx0XHRcdHJldHVybiBbdGhpcy5fdmFsdWVdO1xuXHRcdH1cblx0fVxuXG4qL1xuXG5leHBvcnQgZnVuY3Rpb24gZXZlbnRpZnlJbnN0YW5jZSAob2JqZWN0KSB7XG5cdG9iamVjdC5fX2V2ZW50aWZ5X2V2ZW50TWFwID0gbmV3IE1hcCgpO1xuXHRvYmplY3QuX19ldmVudGlmeV9idWZmZXIgPSBbXTtcblx0cmV0dXJuIG9iamVjdDtcbn07XG5cblxuLypcblx0RVZFTlRJRlkgUFJPVE9UWVBFXG5cblx0QWRkIGV2ZW50aWZ5IGZ1bmN0aW9uYWxpdHkgdG8gcHJvdG90eXBlIG9iamVjdFxuKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV2ZW50aWZ5UHJvdG90eXBlKF9wcm90b3R5cGUpIHtcblxuXHRmdW5jdGlvbiBldmVudGlmeUdldEV2ZW50KG9iamVjdCwgbmFtZSkge1xuXHRcdGNvbnN0IGV2ZW50ID0gb2JqZWN0Ll9fZXZlbnRpZnlfZXZlbnRNYXAuZ2V0KG5hbWUpO1xuXHRcdGlmIChldmVudCA9PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkV2ZW50IHVuZGVmaW5lZFwiLCBuYW1lKTtcblx0XHR9XG5cdFx0cmV0dXJuIGV2ZW50O1xuXHR9XG5cblx0Lypcblx0XHRERUZJTkUgRVZFTlRcblx0XHQtIHVzZWQgb25seSBieSBldmVudCBzb3VyY2Vcblx0XHQtIG5hbWU6IG5hbWUgb2YgZXZlbnRcblx0XHQtIG9wdGlvbnM6IHtpbml0OnRydWV9IHNwZWNpZmllcyBpbml0LWV2ZW50IHNlbWFudGljcyBmb3IgZXZlbnRcblx0Ki9cblx0ZnVuY3Rpb24gZXZlbnRpZnlEZWZpbmUobmFtZSwgb3B0aW9ucykge1xuXHRcdC8vIGNoZWNrIHRoYXQgZXZlbnQgZG9lcyBub3QgYWxyZWFkeSBleGlzdFxuXHRcdGlmICh0aGlzLl9fZXZlbnRpZnlfZXZlbnRNYXAuaGFzKG5hbWUpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJFdmVudCBhbHJlYWR5IGRlZmluZWRcIiwgbmFtZSk7XG5cdFx0fVxuXHRcdHRoaXMuX19ldmVudGlmeV9ldmVudE1hcC5zZXQobmFtZSwgbmV3IEV2ZW50KHRoaXMsIG5hbWUsIG9wdGlvbnMpKTtcblx0fTtcblxuXHQvKlxuXHRcdE9OXG5cdFx0LSB1c2VkIGJ5IHN1YnNjcmliZXJcblx0XHRyZWdpc3RlciBjYWxsYmFjayBvbiBldmVudC5cblx0Ki9cblx0ZnVuY3Rpb24gb24obmFtZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gZXZlbnRpZnlHZXRFdmVudCh0aGlzLCBuYW1lKS5zdWJzY3JpYmUoY2FsbGJhY2ssIG9wdGlvbnMpO1xuXHR9O1xuXG5cdC8qXG5cdFx0T0ZGXG5cdFx0LSB1c2VkIGJ5IHN1YnNjcmliZXJcblx0XHRVbi1yZWdpc3RlciBhIGhhbmRsZXIgZnJvbSBhIHNwZWNmaWMgZXZlbnQgdHlwZVxuXHQqL1xuXHRmdW5jdGlvbiBvZmYoc3ViKSB7XG5cdFx0cmV0dXJuIGV2ZW50aWZ5R2V0RXZlbnQodGhpcywgc3ViLm5hbWUpLnVuc3Vic2NyaWJlKHN1Yik7XG5cdH07XG5cblxuXHRmdW5jdGlvbiBldmVudGlmeVN1YnNjcmlwdGlvbnMobmFtZSkge1xuXHRcdHJldHVybiBldmVudGlmeUdldEV2ZW50KHRoaXMsIG5hbWUpLnN1YnNjcmlwdGlvbnM7XG5cdH1cblxuXG5cblx0Lypcblx0XHRUcmlnZ2VyIGxpc3Qgb2YgZXZlbnRJdGVtcyBvbiBvYmplY3RcblxuXHRcdGV2ZW50SXRlbTogIHtuYW1lOi4uLCBlQXJnOi4ufVxuXG5cdFx0Y29weSBhbGwgZXZlbnRJdGVtcyBpbnRvIGJ1ZmZlci5cblx0XHRyZXF1ZXN0IGVtcHR5aW5nIHRoZSBidWZmZXIsIGkuZS4gYWN0dWFsbHkgdHJpZ2dlcmluZyBldmVudHMsXG5cdFx0ZXZlcnkgdGltZSB0aGUgYnVmZmVyIGdvZXMgZnJvbSBlbXB0eSB0byBub24tZW1wdHlcblx0Ki9cblx0ZnVuY3Rpb24gZXZlbnRpZnlUcmlnZ2VyQWxsKGV2ZW50SXRlbXMpIHtcblx0XHRpZiAoZXZlbnRJdGVtcy5sZW5ndGggPT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIG1ha2UgdHJpZ2dlciBpdGVtc1xuXHRcdC8vIHJlc29sdmUgbm9uLXBlbmRpbmcgc3Vic2NyaXB0aW9ucyBub3dcblx0XHQvLyBlbHNlIHN1YnNjcmlwdGlvbnMgbWF5IGNoYW5nZSBmcm9tIHBlbmRpbmcgdG8gbm9uLXBlbmRpbmdcblx0XHQvLyBiZXR3ZWVuIGhlcmUgYW5kIGFjdHVhbCB0cmlnZ2VyaW5nXG5cdFx0Ly8gbWFrZSBsaXN0IG9mIFtldiwgZUFyZywgc3Vic10gdHVwbGVzXG5cdFx0bGV0IHRyaWdnZXJJdGVtcyA9IGV2ZW50SXRlbXMubWFwKChpdGVtKSA9PiB7XG5cdFx0XHRsZXQge25hbWUsIGVBcmd9ID0gaXRlbTtcblx0XHRcdGxldCBldiA9IGV2ZW50aWZ5R2V0RXZlbnQodGhpcywgbmFtZSk7XG5cdFx0XHRsZXQgc3VicyA9IGV2LnN1YnNjcmlwdGlvbnMuZmlsdGVyKHN1YiA9PiBzdWIuaW5pdF9wZW5kaW5nID09IGZhbHNlKTtcblx0XHRcdHJldHVybiBbZXYsIGVBcmcsIHN1YnNdO1xuXHRcdH0sIHRoaXMpO1xuXG5cdFx0Ly8gYXBwZW5kIHRyaWdnZXIgSXRlbXMgdG8gYnVmZmVyXG5cdFx0Y29uc3QgbGVuID0gdHJpZ2dlckl0ZW1zLmxlbmd0aDtcblx0XHRjb25zdCBidWYgPSB0aGlzLl9fZXZlbnRpZnlfYnVmZmVyO1xuXHRcdGNvbnN0IGJ1Zl9sZW4gPSB0aGlzLl9fZXZlbnRpZnlfYnVmZmVyLmxlbmd0aDtcblx0XHQvLyByZXNlcnZlIG1lbW9yeSAtIHNldCBuZXcgbGVuZ3RoXG5cdFx0dGhpcy5fX2V2ZW50aWZ5X2J1ZmZlci5sZW5ndGggPSBidWZfbGVuICsgbGVuO1xuXHRcdC8vIGNvcHkgdHJpZ2dlckl0ZW1zIHRvIGJ1ZmZlclxuXHRcdGZvciAobGV0IGk9MDsgaTxsZW47IGkrKykge1xuXHRcdFx0YnVmW2J1Zl9sZW4raV0gPSB0cmlnZ2VySXRlbXNbaV07XG5cdFx0fVxuXHRcdC8vIHJlcXVlc3QgZW1wdHlpbmcgb2YgdGhlIGJ1ZmZlclxuXHRcdGlmIChidWZfbGVuID09IDApIHtcblx0XHRcdGxldCBzZWxmID0gdGhpcztcblx0XHRcdFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvciAobGV0IFtldiwgZUFyZywgc3Vic10gb2Ygc2VsZi5fX2V2ZW50aWZ5X2J1ZmZlcikge1xuXHRcdFx0XHRcdC8vIGFjdHVhbCBldmVudCB0cmlnZ2VyaW5nXG5cdFx0XHRcdFx0ZXYudHJpZ2dlcihlQXJnLCBzdWJzLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5fX2V2ZW50aWZ5X2J1ZmZlciA9IFtdO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0Lypcblx0XHRUcmlnZ2VyIG11bHRpcGxlIGV2ZW50cyBvZiBzYW1lIHR5cGUgKG5hbWUpXG5cdCovXG5cdGZ1bmN0aW9uIGV2ZW50aWZ5VHJpZ2dlckFsaWtlKG5hbWUsIGVBcmdzKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXZlbnRpZnlUcmlnZ2VyQWxsKGVBcmdzLm1hcChlQXJnID0+IHtcblx0XHRcdHJldHVybiB7bmFtZSwgZUFyZ307XG5cdFx0fSkpO1xuXHR9XG5cblx0Lypcblx0XHRUcmlnZ2VyIHNpbmdsZSBldmVudFxuXHQqL1xuXHRmdW5jdGlvbiBldmVudGlmeVRyaWdnZXIobmFtZSwgZUFyZykge1xuXHRcdHJldHVybiB0aGlzLmV2ZW50aWZ5VHJpZ2dlckFsbChbe25hbWUsIGVBcmd9XSk7XG5cdH1cblxuXHRfcHJvdG90eXBlLmV2ZW50aWZ5RGVmaW5lID0gZXZlbnRpZnlEZWZpbmU7XG5cdF9wcm90b3R5cGUuZXZlbnRpZnlUcmlnZ2VyID0gZXZlbnRpZnlUcmlnZ2VyO1xuXHRfcHJvdG90eXBlLmV2ZW50aWZ5VHJpZ2dlckFsaWtlID0gZXZlbnRpZnlUcmlnZ2VyQWxpa2U7XG5cdF9wcm90b3R5cGUuZXZlbnRpZnlUcmlnZ2VyQWxsID0gZXZlbnRpZnlUcmlnZ2VyQWxsO1xuXHRfcHJvdG90eXBlLmV2ZW50aWZ5U3Vic2NyaXB0aW9ucyA9IGV2ZW50aWZ5U3Vic2NyaXB0aW9ucztcblx0X3Byb3RvdHlwZS5vbiA9IG9uO1xuXHRfcHJvdG90eXBlLm9mZiA9IG9mZjtcbn07XG5cblxuZXhwb3J0IHtldmVudGlmeUluc3RhbmNlIGFzIGFkZFN0YXRlfTtcbmV4cG9ydCB7ZXZlbnRpZnlQcm90b3R5cGUgYXMgYWRkTWV0aG9kc307XG5cbi8qXG5cdEV2ZW50IFZhcmlhYmxlXG5cblx0T2JqZWN0cyB3aXRoIGEgc2luZ2xlIFwiY2hhbmdlXCIgZXZlbnRcbiovXG5cbmV4cG9ydCBjbGFzcyBFdmVudFZhcmlhYmxlIHtcblxuXHRjb25zdHJ1Y3RvciAodmFsdWUpIHtcblx0XHRldmVudGlmeUluc3RhbmNlKHRoaXMpO1xuXHRcdHRoaXMuX3ZhbHVlID0gdmFsdWU7XG5cdFx0dGhpcy5ldmVudGlmeURlZmluZShcImNoYW5nZVwiLCB7aW5pdDp0cnVlfSk7XG5cdH1cblxuXHRldmVudGlmeUluaXRFdmVudEFyZ3MobmFtZSkge1xuXHRcdGlmIChuYW1lID09IFwiY2hhbmdlXCIpIHtcblx0XHRcdHJldHVybiBbdGhpcy5fdmFsdWVdO1xuXHRcdH1cblx0fVxuXG5cdGdldCB2YWx1ZSAoKSB7cmV0dXJuIHRoaXMuX3ZhbHVlfTtcblx0c2V0IHZhbHVlICh2YWx1ZSkge1xuXHRcdGlmICh2YWx1ZSAhPSB0aGlzLl92YWx1ZSkge1xuXHRcdFx0dGhpcy5fdmFsdWUgPSB2YWx1ZTtcblx0XHRcdHRoaXMuZXZlbnRpZnlUcmlnZ2VyKFwiY2hhbmdlXCIsIHZhbHVlKTtcblx0XHR9XG5cdH1cbn1cbmV2ZW50aWZ5UHJvdG90eXBlKEV2ZW50VmFyaWFibGUucHJvdG90eXBlKTtcblxuLypcblx0RXZlbnQgQm9vbGVhblxuXG5cblx0Tm90ZSA6IGltcGxlbWVudGF0aW9uIHVzZXMgZmFsc2luZXNzIG9mIGlucHV0IHBhcmFtZXRlciB0byBjb25zdHJ1Y3RvciBhbmQgc2V0KCkgb3BlcmF0aW9uLFxuXHRzbyBldmVudEJvb2xlYW4oLTEpIHdpbGwgYWN0dWFsbHkgc2V0IGl0IHRvIHRydWUgYmVjYXVzZVxuXHQoLTEpID8gdHJ1ZSA6IGZhbHNlIC0+IHRydWUgIVxuKi9cblxuZXhwb3J0IGNsYXNzIEV2ZW50Qm9vbGVhbiBleHRlbmRzIEV2ZW50VmFyaWFibGUge1xuXHRjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuXHRcdHN1cGVyKEJvb2xlYW4odmFsdWUpKTtcblx0fVxuXG5cdHNldCB2YWx1ZSAodmFsdWUpIHtcblx0XHRzdXBlci52YWx1ZSA9IEJvb2xlYW4odmFsdWUpO1xuXHR9XG5cdGdldCB2YWx1ZSAoKSB7cmV0dXJuIHN1cGVyLnZhbHVlfTtcbn1cblxuXG4vKlxuXHRtYWtlIGEgcHJvbWlzZSB3aGljaCBpcyByZXNvbHZlZCB3aGVuIEV2ZW50Qm9vbGVhbiBjaGFuZ2VzXG5cdHZhbHVlLlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUHJvbWlzZShldmVudE9iamVjdCwgY29uZGl0aW9uRnVuYykge1xuXHRjb25kaXRpb25GdW5jID0gY29uZGl0aW9uRnVuYyB8fCBmdW5jdGlvbih2YWwpIHtyZXR1cm4gdmFsID09IHRydWV9O1xuXHRyZXR1cm4gbmV3IFByb21pc2UgKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XHRsZXQgc3ViID0gZXZlbnRPYmplY3Qub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRpZiAoY29uZGl0aW9uRnVuYyh2YWx1ZSkpIHtcblx0XHRcdFx0cmVzb2x2ZSh2YWx1ZSk7XG5cdFx0XHRcdGV2ZW50T2JqZWN0Lm9mZihzdWIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn07XG5cbi8vIG1vZHVsZSBhcGlcbmV4cG9ydCBkZWZhdWx0IHtcblx0ZXZlbnRpZnlQcm90b3R5cGUsXG5cdGV2ZW50aWZ5SW5zdGFuY2UsXG5cdEV2ZW50VmFyaWFibGUsXG5cdEV2ZW50Qm9vbGVhbixcblx0bWFrZVByb21pc2Vcbn07XG5cbiIsIi8qXG4gICAgVGhpcyBkZWNvcmF0ZXMgYW4gb2JqZWN0L3Byb3RvdHlwZSB3aXRoIGJhc2ljIChzeW5jaHJvbm91cykgY2FsbGJhY2sgc3VwcG9ydC5cbiovXG5cbmNvbnN0IFBSRUZJWCA9IFwiX19jYWxsYmFja1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkU3RhdGUob2JqZWN0KSB7XG4gICAgb2JqZWN0W2Ake1BSRUZJWH1faGFuZGxlcnNgXSA9IFtdO1xufVxuXG5mdW5jdGlvbiBhZGRfY2FsbGJhY2sgKGhhbmRsZXIpIHtcbiAgICBsZXQgaGFuZGxlID0ge1xuICAgICAgICBoYW5kbGVyOiBoYW5kbGVyXG4gICAgfVxuICAgIHRoaXNbYCR7UFJFRklYfV9oYW5kbGVyc2BdLnB1c2goaGFuZGxlKTtcbiAgICByZXR1cm4gaGFuZGxlO1xufTtcblxuZnVuY3Rpb24gcmVtb3ZlX2NhbGxiYWNrIChoYW5kbGUpIHtcbiAgICBsZXQgaW5kZXggPSB0aGlzW2Ake1BSRUZJWH1faGFuZGxlcnNgXS5pbmRleE9mKGhhbmRsZSk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgdGhpc1tgJHtQUkVGSVh9X2hhbmRsZXJzYF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBub3RpZnlfY2FsbGJhY2tzIChlQXJnKSB7XG4gICAgdGhpc1tgJHtQUkVGSVh9X2hhbmRsZXJzYF0uZm9yRWFjaChmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgaGFuZGxlLmhhbmRsZXIoZUFyZyk7XG4gICAgfSk7XG59O1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRNZXRob2RzIChvYmopIHtcbiAgICBjb25zdCBhcGkgPSB7XG4gICAgICAgIGFkZF9jYWxsYmFjaywgcmVtb3ZlX2NhbGxiYWNrLCBub3RpZnlfY2FsbGJhY2tzXG4gICAgfVxuICAgIE9iamVjdC5hc3NpZ24ob2JqLCBhcGkpO1xufVxuXG4vKipcbiAqIHRlc3QgaWYgb2JqZWN0IGltcGxlbWVudHMgY2FsbGJhY2sgYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19jYWxsYmFja19hcGkgKG9iaikge1xuICAgIGlmIChvYmogPT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgbWV0aG9kcyA9IFtcImFkZF9jYWxsYmFja1wiLCBcInJlbW92ZV9jYWxsYmFja1wiXTtcbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgbWV0aG9kcykge1xuICAgICAgICBpZiAoIShwcm9wIGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbcHJvcF0gIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbiIsImltcG9ydCB7IGVuZHBvaW50LCBpbnRlcnZhbCB9IGZyb20gXCIuL2ludGVydmFsc1wiO1xuXG5cbi8vIG92dmVycmlkZSBtb2R1bG8gdG8gYmVoYXZlIGJldHRlciBmb3IgbmVnYXRpdmUgbnVtYmVyc1xuZXhwb3J0IGZ1bmN0aW9uIG1vZChuLCBtKSB7XG4gICAgcmV0dXJuICgobiAlIG0pICsgbSkgJSBtO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRpdm1vZCh4LCBiYXNlKSB7XG4gICAgbGV0IG4gPSBNYXRoLmZsb29yKHggLyBiYXNlKVxuICAgIGxldCByID0gbW9kKHgsIGJhc2UpO1xuICAgIHJldHVybiBbbiwgcl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc19maW5pdGVfbnVtYmVyKG9iaikge1xuICAgIHJldHVybiAodHlwZW9mIG9iaiA9PSAnbnVtYmVyJykgJiYgaXNGaW5pdGUob2JqKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrX251bWJlcihuYW1lLCBvYmopIHtcbiAgICBpZiAoIWlzX2Zpbml0ZV9udW1iZXIob2JqKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBmaW5pdGUgbnVtYmVyICR7b2JqfWApO1xuICAgIH1cbn1cbi8qXG4gICAgc2ltaWxhciB0byByYW5nZSBmdW5jdGlvbiBpbiBweXRob25cbiovXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5nZSAoc3RhcnQsIGVuZCwgc3RlcCA9IDEsIG9wdGlvbnM9e30pIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBjb25zdCB7aW5jbHVkZV9lbmQ9ZmFsc2V9ID0gb3B0aW9ucztcbiAgICBpZiAoc3RlcCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0ZXAgY2Fubm90IGJlIHplcm8uJyk7XG4gICAgfVxuICAgIGlmIChzdGFydCA8IGVuZCkge1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gc3RlcCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChzdGFydCA+IGVuZCkge1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPiBlbmQ7IGkgLT0gc3RlcCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpbmNsdWRlX2VuZCkge1xuICAgICAgICByZXN1bHQucHVzaChlbmQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8vIHdlYnBhZ2UgY2xvY2sgLSBwZXJmb3JtYW5jZSBub3cgLSBzZWNvbmRzXG5leHBvcnQgY29uc3QgbG9jYWxfY2xvY2sgPSBmdW5jdGlvbiBsb2NhbF9jbG9jayAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbm93OiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkvMTAwMC4wO1xuICAgICAgICB9XG4gICAgfVxufSgpO1xuXG4vLyBzeXN0ZW0gY2xvY2sgLSBlcG9jaCAtIHNlY29uZHNcbmV4cG9ydCBjb25zdCBsb2NhbF9lcG9jaCA9IGZ1bmN0aW9uIGxvY2FsX2Vwb2NoICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBub3c6ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLzEwMDAuMDtcbiAgICAgICAgfVxuICAgIH1cbn0oKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBzaW5nbGUgc3RhdGUgZnJvbSBhIGxpc3Qgb2Ygc3RhdGVzLCB1c2luZyBhIHZhbHVlRnVuY1xuICogc3RhdGU6e3ZhbHVlLCBkeW5hbWljLCBvZmZzZXR9XG4gKiBcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdG9TdGF0ZShzb3VyY2VzLCBzdGF0ZXMsIG9mZnNldCwgb3B0aW9ucz17fSkge1xuICAgIGxldCB7dmFsdWVGdW5jLCBzdGF0ZUZ1bmN9ID0gb3B0aW9uczsgXG4gICAgaWYgKHZhbHVlRnVuYyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdmFsdWVGdW5jKHtzb3VyY2VzLCBzdGF0ZXMsIG9mZnNldH0pO1xuICAgICAgICBsZXQgZHluYW1pYyA9IHN0YXRlcy5tYXAoKHYpID0+IHYuZHltYW1pYykuc29tZShlPT5lKTtcbiAgICAgICAgcmV0dXJuIHt2YWx1ZSwgZHluYW1pYywgb2Zmc2V0fTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlRnVuYyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHsuLi5zdGF0ZUZ1bmMoe3NvdXJjZXMsIHN0YXRlcywgb2Zmc2V0fSksIG9mZnNldH07XG4gICAgfVxuICAgIC8vIG5vIHZhbHVlRnVuYyBvciBzdGF0ZUZ1bmNcbiAgICBpZiAoc3RhdGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHJldHVybiB7dmFsdWU6dW5kZWZpbmVkLCBkeW5hbWljOmZhbHNlLCBvZmZzZXR9XG4gICAgfVxuICAgIC8vIGZhbGxiYWNrIC0ganVzdCB1c2UgZmlyc3Qgc3RhdGVcbiAgICBsZXQgc3RhdGUgPSBzdGF0ZXNbMF07XG4gICAgcmV0dXJuIHsuLi5zdGF0ZSwgb2Zmc2V0fTsgXG59XG5cblxuLyoqXG4gKiBjaGVjayBpbnB1dCBpdGVtcyB0byBsb2NhbCBzdGF0ZSBwcm92aWRlcnNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tfaW5wdXQoaXRlbXMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoaXRlbXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIklucHV0IG11c3QgYmUgYW4gYXJyYXlcIik7XG4gICAgfVxuICAgIC8vIG1ha2Ugc3VyZSB0aGF0IGludGVydmFscyBhcmUgd2VsbCBmb3JtZWRcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgaXRlbS5pdHYgPSBpbnRlcnZhbC5mcm9tX2lucHV0KGl0ZW0uaXR2KTtcbiAgICB9XG4gICAgLy8gc29ydCBpdGVtcyBiYXNlZCBvbiBpbnRlcnZhbCBsb3cgZW5kcG9pbnRcbiAgICBpdGVtcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGxldCBhX2xvdyA9IGVuZHBvaW50LmZyb21faW50ZXJ2YWwoYS5pdHYpWzBdO1xuICAgICAgICBsZXQgYl9sb3cgPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKGIuaXR2KVswXTtcbiAgICAgICAgcmV0dXJuIGVuZHBvaW50LmNtcChhX2xvdywgYl9sb3cpO1xuICAgIH0pO1xuICAgIC8vIGNoZWNrIHRoYXQgaXRlbSBpbnRlcnZhbHMgYXJlIG5vbi1vdmVybGFwcGluZ1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHByZXZfaGlnaCA9IGVuZHBvaW50LmZyb21faW50ZXJ2YWwoaXRlbXNbaSAtIDFdLml0dilbMV07XG4gICAgICAgIGxldCBjdXJyX2xvdyA9IGVuZHBvaW50LmZyb21faW50ZXJ2YWwoaXRlbXNbaV0uaXR2KVswXTtcbiAgICAgICAgLy8gdmVyaWZ5IHRoYXQgcHJldiBoaWdoIGlzIGxlc3MgdGhhdCBjdXJyIGxvd1xuICAgICAgICBpZiAoIWVuZHBvaW50Lmx0KHByZXZfaGlnaCwgY3Vycl9sb3cpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdmVybGFwcGluZyBpbnRlcnZhbHMgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21fc3RyaW5nKGxlbmd0aCkge1xuICAgIHZhciB0ZXh0ID0gXCJcIjtcbiAgICB2YXIgcG9zc2libGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGV4dCArPSBwb3NzaWJsZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGUubGVuZ3RoKSk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0O1xufVxuXG4vKipcbiAqIEltcHJvdmVkIHNldF90aW1lb3V0XG4gKiBcbiAqIFRpbWVvdXQgaXMgZGVmaW5lZCBieSBhIHRhcmdldF9tcyByZWFkaW5nIG9mIHBlcmZvcm1hbmNlLm5vdygpLlxuICogQ2FsbGJhY2sgaXMgbm90IGludm9rZWQgdW50aWwgcGVyZm9ybWFuY2Uubm93KCkgPj0gdGFyZ2V0X21zLiBcbiAqIFxuICogVGhpcyBwcm90ZWN0cyBhZ2FpbnN0IGEgd2Vha25lc3MgaW4gYmFzaWMgc2V0VGltZW91dCwgd2hpY2ggbWF5XG4gKiBvY2NhdGlvbmFsbHkgaW52b2tlIHRoZSBjYWxsYmFjayB0b28gZWFybHkuIFxuICogXG4gKiBzY2hlZHVsZSB0aW1lb3V0IDEgbXMgbGF0ZSwgdG8gcmVkdWNlIHRoZSBsaWtlbGlob29kIG9mIFxuICogaGF2aW5nIHRvIHJlc2NoZWR1bGUgYSB0aW1lb3V0IFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0X3RpbWVvdXQgKGNhbGxiYWNrLCBkZWx0YV9tcykge1xuICAgIGxldCB0cyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGRlbHRhX21zID0gTWF0aC5tYXgoZGVsdGFfbXMsIDApO1xuICAgIGxldCB0YXJnZXRfbXMgPSB0cyArIGRlbHRhX21zO1xuICAgIGxldCB0aWQ7XG4gICAgZnVuY3Rpb24gY2FuY2VsX3RpbWVvdXQoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aWQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoYW5kbGVfdGltZW91dCgpIHtcbiAgICAgICAgY29uc3QgZGVsdGFfbXMgPSB0YXJnZXRfbXMgLSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgaWYgKGRlbHRhX21zID4gMCkge1xuICAgICAgICAgICAgLy8gcmVzY2hlZHVsZSB0aW1lb3V0XG4gICAgICAgICAgICB0aWQgPSBzZXRUaW1lb3V0KGhhbmRsZV90aW1lb3V0LCBkZWx0YV9tcyArIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aWQgPSBzZXRUaW1lb3V0KGhhbmRsZV90aW1lb3V0LCBkZWx0YV9tcyArIDEpO1xuICAgIHJldHVybiB7Y2FuY2VsOmNhbmNlbF90aW1lb3V0fTtcbn1cblxuLyoqXG4gKiAgSW1wbGVtZW50cyBkZXRlcm1pbmlzdGljIHByb2plY3Rpb24gYmFzZWQgb24gaW5pdGlhbCBjb25kaXRpb25zIFxuICogIC0gbW90aW9uIHZlY3RvciBkZXNjcmliZXMgbW90aW9uIHVuZGVyIGNvbnN0YW50IGFjY2VsZXJhdGlvblxuICpcbiAqICBtb3Rpb24gdHJhbnNpdGlvbiBcbiAqIFxuICogIHRyYW5zaXRpb24gZnJvbSB0aW1lIGRvbWFpbiB0byBwb3NpdGlvbiB1bmRlciBjb25zdGFudCBhY2NlbGVyYXRpb24gaXMgZ2l2ZW4gYnlcbiAqICBnaXZlbiBpbml0aWFsIHZlY3RvciBbcDAsdjAsYTAsdDBdXG4gKiAgcCh0KSA9IHAwICsgdjAqKHQtdDApICsgMC41KmEwKih0LXQwKSoodC10MClcbiAqICB2KHQpID0gdjAgKyBhMCoodC10MClcbiAqICBhKHQpID0gYTBcbiAqICB0KHQpID0gdFxuICovXG5leHBvcnQgZnVuY3Rpb24gbW90aW9uX2NhbGN1bGF0ZSh2ZWN0b3IsdCkge1xuICAgIGNvbnN0IFtwMCx2MCxhMCx0MF0gPSB2ZWN0b3I7XG4gICAgY29uc3QgZCA9IHQgLSB0MDtcbiAgICBjb25zdCBwID0gcDAgKyB2MCpkICsgMC41KmEwKk1hdGgucG93KGQsMik7XG4gICAgY29uc3QgdiA9IHYwICsgYTAqZDtcbiAgICBjb25zdCBhID0gYTA7XG4gICAgcmV0dXJuIFtwLHYsYSx0XTtcbn1cblxuLyoqXG4gKiBHaXZlbiBtb3Rpb24gZGV0ZXJtaW5lZCBmcm9tIFtwMCx2MCxhMCx0MF0uXG4gKiBHaXZlbiBlcXVhdGlvbiBwKHQpID0gcDAgKyB2MCoodC10MCkgKyAwLjUqYTAqKHQtdDApXjIgPT0gcDFcbiAqIENhbGN1bGF0ZSBpZiBlcXVhdGlvbiBoYXMgc29sdXRpb25zIGZvciBzb21lIHJlYWwgbnVtYmVyIHQuXG4gKiBBIHNvbHV0aW9uIGV4aXN0cyBpZiBkZXRlcm1pbmFudCBvZiBxdWFkcmF0aWMgZXF1YXRpb24gaXMgbm9uLW5lZ2F0aXZlXG4gKiAodjBeMiAtIDJhMChwMC1wMSkpID49IDBcbiAqL1xuZnVuY3Rpb24gbW90aW9uX2hhc19yZWFsX3NvbHV0aW9ucyh2ZWN0b3IsIHAxKSB7XG4gICAgY29uc3QgW3AwLHYwLGEwLHQwXSA9IHZlY3RvcjtcbiAgICByZXR1cm4gKE1hdGgucG93KHYwLDIpIC0gMiphMCoocDAtcDEpKSA+PSAwLjBcbn07XG5cbi8qKlxuICogR2l2ZW4gbW90aW9uIGRldGVybWluZWQgZnJvbSBbcDAsdjAsYTAsdDBdLlxuICogR2l2ZW4gZXF1YXRpb24gcCh0KSA9IHAwICsgdjAqKHQtdDApICsgMC41KmEwKih0LXQwKV4yID09IHAxXG4gKiBDYWxjdWxhdGUgYW5kIHJldHVybiByZWFsIHNvbHV0aW9ucywgaW4gYXNjZW5kaW5nIG9yZGVyLlxuKi8gIFxuZnVuY3Rpb24gbW90aW9uX2dldF9yZWFsX3NvbHV0aW9ucyAodmVjdG9yLCBwMSkge1xuICAgIGNvbnN0IFtwMCx2MCxhMCx0MF0gPSB2ZWN0b3I7XG4gICAgLy8gQ29uc3RhbnQgUG9zaXRpb25cbiAgICBpZiAoYTAgPT09IDAuMCAmJiB2MCA9PT0gMC4wKSB7XG4gICAgICAgIGlmIChwMCAhPSBwMSkgcmV0dXJuIFtdO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFueSB0IGlzIGEgc29sdXRpb25cbiAgICAgICAgICAgIC8vIE5PVEU6IGhhcyByZWFsIHNvbHV0aW9ucyBpcyB0cnVlXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDb25zdGFudCBub24temVybyBWZWxvY2l0eVxuICAgIGlmIChhMCA9PT0gMC4wKSByZXR1cm4gW3QwICsgKHAxLXAwKS92MF07XG4gICAgLy8gQ29uc3RhbnQgQWNjZWxlcmF0aW9uXG4gICAgaWYgKG1vdGlvbl9oYXNfcmVhbF9zb2x1dGlvbnModmVjdG9yLCBwMSkgPT09IGZhbHNlKSByZXR1cm4gW107XG4gICAgLy8gRXhhY3RseSBvbiBzb2x1dGlvblxuICAgIHZhciBkaXNjcmltaW5hbnQgPSBNYXRoLnBvdyh2MCwyKSAtIDIqYTAqKHAwLXAxKTtcbiAgICBpZiAoZGlzY3JpbWluYW50ID09PSAwLjApIHtcbiAgICAgICAgcmV0dXJuIFt0MC12MC9hMF07XG4gICAgfVxuICAgIHZhciBzcXJ0ID0gTWF0aC5zcXJ0KE1hdGgucG93KHYwLDIpIC0gMiphMCoocDAtcDEpKTtcbiAgICB2YXIgZDEgPSB0MCArICgtdjAgKyBzcXJ0KS9hMDtcbiAgICB2YXIgZDIgPSB0MCArICgtdjAgLSBzcXJ0KS9hMDtcbiAgICByZXR1cm4gW01hdGgubWluKGQxLGQyKSxNYXRoLm1heChkMSxkMildO1xufTtcblxuLypcbiAgICBjYWxjdWxhdGUgdGltZSByYW5nZSBmb3IgZ2l2ZW4gcG9zaXRpb24gcmFuZ2VcblxuICAgIG1vdGlvbiB0cmFuc2l0aW9uIGZyb20gdGltZSB0byBwb3NpdGlvbiBpcyBnaXZlbiBieVxuICAgIHAodCkgPSBwMCArIHYqdCArIDAuNSphKnQqdFxuICAgIGZpbmQgc29sdXRpb25zIGZvciB0IHNvIHRoYXQgXG4gICAgcCh0KSA9IHBvc1xuXG4gICAgZG8gdGhpcyBmb3IgYm90aCB2YWx1ZXMgaW4gcmFuZ2UgW2xvdyxoaWdoXVxuICAgIGFjY3VtdWxhdGUgYWxsIGNhbmRpZGF0ZSBzb2x1dGlvbnMgdCBpbiBhc2NlbmRpbmcgb3JkZXJcbiAgICBhdm9pZCBkdXBsaWNhdGVzXG4gICAgdGhpcyBjYW4gYWNjdW11bGF0ZSAwLDEsMiwzLDQgc29sdXRpb25cbiAgICBpZiAwIHNvbHV0aW9ucyAtIHVuZGVmaW5lZCAobW90aW9uIGRvZXMgbm90IGludGVyc2VjdCB3aXRoIHJhbmdlIGV2ZXIpIFxuICAgIGlmIDEgc29sdXRpb25zIC0gdWRlZmluZWQgKG1vdGlvbiBvbmx5IGludGVyc2VjdHMgd2l0aCByYW5nZSB0YW5nZW50aWFsbHkgYXQgb25lIHQpXG4gICAgaWYgMiBzb2x1dGlvbnMgLSBbMCwxXSAobW90aW9uIGludGVyc2VjdHMgd2l0aCByYW5nZSBhdCB0d28gdGltZXMpXG4gICAgaWYgMyBzb2x1dGlvbnMgLSBbMCwyXSAobW90aW9uIGludGVyc2VjdHMgd2l0aCByYW5nZSBhdCB0aHJlZSB0aW1lcylcbiAgICBpZiA0IHNvbHV0aW9ucyAtIFswLDFdIGFuZCBbMiwzXVxuXG4gICAgcmV0dXJucyBhIGxpc3Qgb2YgcmFuZ2UgY2FuZGlkYXRlcyAoYXQgbW9zdCB0d28gYnV0IG9ubHkgd2l0aCBhY2NlbGVyYXRpb24pXG4qL1xuZnVuY3Rpb24gbW90aW9uX2NhbGN1bGF0ZV90aW1lX3Jhbmdlcyh2ZWN0b3IsIHBvc19yYW5nZSkge1xuICAgIGNvbnN0IFtwMCx2MCxhMCx0MF0gPSB2ZWN0b3I7XG4gICAgbGV0IFtsb3csIGhpZ2hdID0gcG9zX3JhbmdlO1xuICAgIGlmIChsb3cgPT0gbnVsbCkgbG93ID0gLUluZmluaXR5O1xuICAgIGlmIChoaWdoID09IG51bGwpIGhpZ2ggPSBJbmZpbml0eTtcblxuICAgIC8vIFs8LSwgLT5dXG4gICAgaWYgKGxvdyA9PSAtSW5maW5pdHkgJiYgaGlnaCA9PSBJbmZpbml0eSkge1xuICAgICAgICAvLyBubyBwb3MgcmFuZ2UgPT0gZW50aXJlIHZhbHVlIHNwYWNlID0+IHRpbWUgcmFuZ2UgZW50aXJlIHRpbWVsaW5lXG4gICAgICAgIHJldHVybiBbW251bGwsIG51bGxdXTtcbiAgICB9IFxuXG4gICAgLy8gW0ZMQVQgTElORV1cbiAgICAvLyBwb3MgaXMgZWl0aGVyIHdpdGhpbiBwb3MgcmFuZ2UgZm9yIGFsbCB0IG9yIG5ldmVyICBcbiAgICBpZiAodjAgPT09IDAuMCAmJiBhMCA9PT0gMC4wKSB7XG4gICAgICAgIC8vIGJvdGggbG93IGFuZCBoaWdoIGJvdW5kXG4gICAgICAgIHJldHVybiAocDAgPj0gbG93ICYmIHAwIDw9IGhpZ2gpID8gW1tudWxsLCBudWxsXV0gOiBbXTtcbiAgICB9XG5cbiAgICAvLyBhZ2dyZWdhdGUgc29sdXRpb25zXG4gICAgbGV0IHNvbHV0aW9ucyA9IFtdO1xuICAgIGlmICgtSW5maW5pdHkgPCBsb3cpIHtcbiAgICAgICAgc29sdXRpb25zLnB1c2goLi4ubW90aW9uX2dldF9yZWFsX3NvbHV0aW9ucyh2ZWN0b3IsIGxvdykpO1xuICAgIH0gXG4gICAgaWYgKGhpZ2ggPCBJbmZpbml0eSkge1xuICAgICAgICBzb2x1dGlvbnMucHVzaCguLi5tb3Rpb25fZ2V0X3JlYWxfc29sdXRpb25zKHZlY3RvciwgaGlnaCkpO1xuICAgIH1cbiAgICAvLyByZW1vdmUgZHVwbGljYXRlc1xuICAgIHNvbHV0aW9ucyA9IFsuLi5uZXcgU2V0KHNvbHV0aW9ucyldO1xuICAgIC8vIHNvcnQgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgc29sdXRpb25zLnNvcnQoKGEsYikgPT4gYS1iKTtcblxuICAgIC8vIFs8LSwgSElHSF1cbiAgICBpZiAobG93ID09IC1JbmZpbml0eSkge1xuICAgICAgICAvLyBvbmx5IGhpZ2ggYm91bmRcbiAgICAgICAgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgLy8gcGFyYWJvbGEgbm90IHRvdWNoaW5nIGxvd1xuICAgICAgICAgICAgLy8gcG9zIDwgaGlnaCBvciBwb3MgPiBoaWdoIGZvciBhbGwgdCAtIGp1c3QgdGVzdCB3aXRoIHQwXG4gICAgICAgICAgICByZXR1cm4gKHAwIDw9IGhpZ2gpID8gW1tudWxsLCBudWxsXV0gOiBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzb2x1dGlvbnMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGlmIChhMCA+IDAuMCkge1xuICAgICAgICAgICAgICAgIC8vIHBhcmFib2xhIC0gdG91Y2hpbmcgaGlnaCBmcm9tIG92ZXJzaWRlXG4gICAgICAgICAgICAgICAgLy8gcG9zID4gaGlnaCBmb3IgYWxsIHRcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGEwIDwgMC4wKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFyYWJvbGEgdG91Y2hpbmcgbG93IGZyb20gdW5kZXJzaWRlXG4gICAgICAgICAgICAgICAgLy8gcG9zIDwgaGlnaCBmb3IgYWxsIHRcbiAgICAgICAgICAgICAgICByZXR1cm4gW1tudWxsLCBudWxsXV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGEwID09IDAuMCA+IHN0cmFpZ3RoIGxpbmVcbiAgICAgICAgICAgICAgICBpZiAodjAgPiAwLjApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zIDw9IGhpZ2ggZm9yIGFsbCB0IDw9IHNvbHV0aW9uc1swXVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1tudWxsLCBzb2x1dGlvbnNbMF1dXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBwb3MgPD0gaGlnaCBmb3IgdCA+PSBzb2x1dGlvbnNbMF1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtbc29sdXRpb25zWzBdLCBudWxsXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgLy8gcGFyYWJvbGFcbiAgICAgICAgICAgIGlmIChhMCA+IDAuMCkge1xuICAgICAgICAgICAgICAgIC8vIG9uZSB0aW1lIHJhbmdlIGJldHdlZW4gc29sdXRpb25zXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtbc29sdXRpb25zWzBdLCBzb2x1dGlvbnNbMV1dXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYTAgPCAwLjApIHtcbiAgICAgICAgICAgICAgICAvLyBvbmUgdGltZSByYW5nZSBvbiBlYWNoIHNpZGUgXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtbbnVsbCwgc29sdXRpb25zWzBdXSwgW3NvbHV0aW9uc1sxXSwgbnVsbF1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgIC8vIFtMT1csIC0+XVxuICAgIH0gZWxzZSBpZiAoaGlnaCA9PSBJbmZpbml0eSkge1xuICAgICAgICAvLyBvbmx5IGxvdyBib3VuZFxuICAgICAgICBpZiAoc29sdXRpb25zLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAvLyBwYXJhYm9sYSBub3QgdG91Y2hpbmcgbG93XG4gICAgICAgICAgICAvLyBwb3MgPiBsb3cgb3IgcG9zIDwgbG93IGZvciBhbGwgdCAtIGp1c3QgdGVzdCB3aXRoIHQwXG4gICAgICAgICAgICByZXR1cm4gKHAwID49IGxvdykgPyBbW251bGwsIG51bGxdXSA6IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgaWYgKGEwID4gMC4wKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFyYWJvbGEgLSB0b3VjaGluZyBsb3cgZnJvbSBvdmVyc2lkZVxuICAgICAgICAgICAgICAgIC8vIHBvcyA+IGxvdyBmb3IgYWxsIHRcbiAgICAgICAgICAgICAgICByZXR1cm4gW1tudWxsLCBudWxsXV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGEwIDwgMC4wKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFyYWJvbGEgdG91Y2hpbmcgbG93IGZyb20gdW5kZXJzaWRlXG4gICAgICAgICAgICAgICAgLy8gcG9zIDwgbG93IGZvciBhbGwgdFxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYTAgPT0gMC4wID4gc3RyYWlndGggbGluZVxuICAgICAgICAgICAgICAgIGlmICh2MCA+IDAuMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwb3MgPj0gbG93IGZvciBhbGwgdCA+PSBzb2x1dGlvbnNbMF1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtbc29sdXRpb25zWzBdLCBudWxsXV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zID49IGxvdyBmb3IgdCA8PSBzb2x1dGlvbnNbMF1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtbbnVsbCwgc29sdXRpb25zWzBdXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgLy8gcGFyYWJvbGFcbiAgICAgICAgICAgIGlmIChhMCA+IDAuMCkge1xuICAgICAgICAgICAgICAgIC8vIG9uZSB0aW1lIHJhbmdlIG9uIGVhY2ggc2lkZSBcbiAgICAgICAgICAgICAgICByZXR1cm4gW1tudWxsLCBzb2x1dGlvbnNbMF1dLCBbc29sdXRpb25zWzFdLCBudWxsXV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGEwIDwgMC4wKSB7XG4gICAgICAgICAgICAgICAgLy8gb25lIHRpbWUgcmFuZ2UgYmV0d2VlbiBzb2x1dGlvbnNcbiAgICAgICAgICAgICAgICByZXR1cm4gW1tzb2x1dGlvbnNbMF0sIHNvbHV0aW9uc1sxXV1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAvLyBbTE9XLCBISUdIXVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGJvdGggbG93IGFuZCBoaWdoIGJvdW5kXG4gICAgICAgIGlmIChzb2x1dGlvbnMubGVuZ3RoID09IDApIHJldHVybiBbXTtcbiAgICAgICAgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gMSkgcmV0dXJuIFtdO1xuICAgICAgICBpZiAoc29sdXRpb25zLmxlbmd0aCA9PSAyKSByZXR1cm4gW1tzb2x1dGlvbnNbMF0sIHNvbHV0aW9uc1sxXV1dO1xuICAgICAgICBpZiAoc29sdXRpb25zLmxlbmd0aCA9PSAzKSByZXR1cm4gW1tzb2x1dGlvbnNbMF0sIHNvbHV0aW9uc1syXV1dO1xuICAgICAgICBpZiAoc29sdXRpb25zLmxlbmd0aCA9PSA0KSByZXR1cm4gW1tzb2x1dGlvbnNbMF0sIHNvbHV0aW9uc1sxXV0sIFtzb2x1dGlvbnNbMl0sIHNvbHV0aW9uc1szXV1dO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW90aW9uX2NoZWNrX3JhbmdlKG9iaikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikgJiYgb2JqLmxlbmd0aCAhPSAyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgcmFuZ2UgbXVzdCBoYXZlIHR3byBlbGVtZW50cyAke29ian1gKTtcbiAgICB9XG4gICAgb2JqWzBdID09IG51bGwgfHwgY2hlY2tfbnVtYmVyKFwibG93XCIsIG9ialswXSk7XG4gICAgb2JqWzFdID09IG51bGwgfHwgY2hlY2tfbnVtYmVyKFwiaGlnaFwiLCBvYmpbMV0pO1xufVxuXG5leHBvcnQgY29uc3QgbW90aW9uX3V0aWxzID0ge1xuICAgIGNhbGN1bGF0ZTogbW90aW9uX2NhbGN1bGF0ZSxcbiAgICBoYXNfcmVhbF9zb2x1dGlvbnM6IG1vdGlvbl9oYXNfcmVhbF9zb2x1dGlvbnMsXG4gICAgZ2V0X3JlYWxfc29sdXRpb25zOiBtb3Rpb25fZ2V0X3JlYWxfc29sdXRpb25zLFxuICAgIGNhbGN1bGF0ZV90aW1lX3JhbmdlczogbW90aW9uX2NhbGN1bGF0ZV90aW1lX3JhbmdlcyxcbiAgICBjaGVja19yYW5nZTogbW90aW9uX2NoZWNrX3JhbmdlXG59XG4iLCJpbXBvcnQgKiBhcyBldmVudGlmeSBmcm9tIFwiLi91dGlsL2FwaV9ldmVudGlmeS5qc1wiO1xuaW1wb3J0ICogYXMgY2FsbGJhY2sgZnJvbSBcIi4vdXRpbC9hcGlfY2FsbGJhY2suanNcIjtcbmltcG9ydCB7IGludGVydmFsIH0gZnJvbSBcIi4vdXRpbC9pbnRlcnZhbHMuanNcIjtcbmltcG9ydCB7IHJhbmdlLCB0b1N0YXRlIH0gZnJvbSBcIi4vdXRpbC9jb21tb24uanNcIjtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogTEFZRVJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogTGF5ZXIgaXMgYWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgTGF5ZXJzXG4gKiBcbiAqIExheWVyIGludGVyZmFjZSBpcyBkZWZpbmVkIGJ5IChpbmRleCwgQ2FjaGVDbGFzcywgb3B0aW9ucylcbiAqIFxuICogQ2FjaGVDbGFzc1xuICogLS0tLS0tLS0tLVxuICogVGhlIENhY2hlQ2xhc3MgaW1wbGVtZW50cyB0aGUgcXVlcnkgb3BlcmF0aW9uIGZvciB0aGUgbGF5ZXIsIHVzaW5nXG4gKiB0aGUgaW5kZXggZm9yIGxvb2t1cHMgb24gY2FjaGUgbWlzcy4gTGF5ZXIgaGFzIGEgcHJpdmF0ZSBjYWNoZS4gXG4gKiBBZGRpdGlvbmFsbHksIGlmIGxheWVyIGhhcyBtdWx0aXBsZSBjb25zdW1lcnMsIHRoZXkgY2FuIGVhY2ggXG4gKiBjcmVhdGUgdGhlaXIgb3duIHByaXZhdGUgY2FjaGUuIFxuICogXG4gKiBvcHRpb25zXG4gKiAtLS0tLS0tXG4gKiBUaGUgdGhlIHJlc3VsdCBmcm9tIHRoZSBxdWVyeSBvcGVyYXRpb24gY2FuIGJlIGNvbnRyb2xsZWQgYnkgc3VwcGx5aW5nXG4gKiBvcHRpb25hbCBjdXN0b20gZnVuY3Rpb24sIGVpdGhlciB2YWx1ZUZ1bmMgb3IgYSBzdGF0ZUZ1bmMgXG4gKiB7dmFsdWVGdW5jLHN0YXRlRnVuY31cbiAqIFxuICogaW5kZXhcbiAqIC0tLS0tXG4gKiBUaGUgbmVhcmJ5IGluZGV4IGlzIHN1cHBsaWVkIGJ5IExheWVyIGltcGxlbWVudGF0aW9ucywgZWl0aGVyIGJ5IFxuICogc3ViY2xhc3NpbmcgaXQsIG9yIGJ5IGFzc2lnbmluZyB0aGUgaW5kZXguIFxuICovXG5cbmV4cG9ydCBjbGFzcyBMYXllciB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zPXt9KSB7XG5cbiAgICAgICAgbGV0IHtDYWNoZUNsYXNzPUxheWVyQ2FjaGUsIC4uLm9wdHN9ID0gb3B0aW9uczsgXG5cbiAgICAgICAgLy8gbGF5ZXIgb3B0aW9uc1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0cztcblxuICAgICAgICAvLyBjYWxsYmFja3NcbiAgICAgICAgY2FsbGJhY2suYWRkU3RhdGUodGhpcyk7XG4gICAgICAgIC8vIGRlZmluZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgZXZlbnRpZnkuYWRkU3RhdGUodGhpcyk7XG4gICAgICAgIHRoaXMuZXZlbnRpZnlEZWZpbmUoXCJjaGFuZ2VcIiwge2luaXQ6dHJ1ZX0pO1xuXG4gICAgICAgIC8vIGluZGV4XG4gICAgICAgIHRoaXMuaW5kZXg7XG5cbiAgICAgICAgLy8gY2FjaGVcbiAgICAgICAgdGhpcy5fQ2FjaGVDbGFzcyA9IENhY2hlQ2xhc3M7XG4gICAgICAgIHRoaXMuX3ByaXZhdGVfY2FjaGU7XG4gICAgICAgIHRoaXMuX2NvbnN1bWVyX2NhY2hlcyA9IFtdO1xuICAgIH1cblxuICAgIC8vIGxheWVyIG9wdGlvbnNcbiAgICBnZXQgb3B0aW9ucyAoKSB7IHJldHVybiB0aGlzLl9vcHRpb25zOyB9XG5cbiAgICAvLyBwcml2YXRlIGNhY2hlXG4gICAgZ2V0IGNhY2hlICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ByaXZhdGVfY2FjaGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9wcml2YXRlX2NhY2hlID0gbmV3IHRoaXMuX0NhY2hlQ2xhc3ModGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByaXZhdGVfY2FjaGU7XG4gICAgfVxuXG4gICAgLy8gaW52b2tlZCBieSBsYXllciBjb25zdW1lclxuICAgIHF1ZXJ5KG9mZnNldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5xdWVyeShvZmZzZXQpO1xuICAgIH1cblxuICAgIC8vIGludm9rZWQgYnkgbGF5ZXIgY29uc3VtZXJcbiAgICBjcmVhdGVDYWNoZSAoKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gbmV3IHRoaXMuX0NhY2hlQ2xhc3ModGhpcyk7XG4gICAgICAgIHRoaXMuX2NvbnN1bWVyX2NhY2hlcy5wdXNoKGNhY2hlKTtcbiAgICAgICAgcmV0dXJuIGNhY2hlO1xuICAgIH1cbiAgICByZWxlYXNlQ2FjaGUgKGNhY2hlKSB7XG4gICAgICAgIGNvbnN0IGlkeCA9IHRoaXMuX2NvbnN1bWVyX2NhY2hlcy5pbmRleE9mKGNhY2hlKTtcbiAgICAgICAgaWYgKGlkeCA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9jb25zdW1lcl9jYWNoZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGNsZWFyQ2FjaGVzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNhY2hlIG9mIHRoaXMuX2NvbnN1bWVyX2NhY2hlcyl7XG4gICAgICAgICAgICBjYWNoZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9wcml2YXRlX2NhY2hlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fcHJpdmF0ZV9jYWNoZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaW52b2tlZCBieSBzdWJjbGFzcyB3aGVuZXZlciBsYXllciBoYXMgY2hhbmdlZFxuICAgIG9uY2hhbmdlKCkge1xuICAgICAgICB0aGlzLmNsZWFyQ2FjaGVzKCk7XG4gICAgICAgIHRoaXMubm90aWZ5X2NhbGxiYWNrcygpO1xuICAgICAgICB0aGlzLmV2ZW50aWZ5VHJpZ2dlcihcImNoYW5nZVwiKTsgICAgXG4gICAgfVxuXG4gICAgLy8gaXRlcmF0b3IgZm9yIHJlZ2lvbnMgb2YgdGhlIGxheWVyIGluZGV4XG4gICAgcmVnaW9ucyAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5yZWdpb25zKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICAgIFNhbXBsZSBsYXllciB2YWx1ZXMgYnkgdGltZWxpbmUgb2Zmc2V0IGluY3JlbWVudHNcbiAgICAgICAgcmV0dXJuIGxpc3Qgb2YgdHVwbGVzIFt2YWx1ZSwgb2Zmc2V0XVxuICAgICAgICBvcHRpb25zXG4gICAgICAgIC0gc3RhcnRcbiAgICAgICAgLSBzdG9wXG4gICAgICAgIC0gc3RlcFxuXG4gICAgICAgIFRPRE8gLSB0aGlzIHNob3VsZCBiZSBhbiBpdGVyYXRvclxuICAgICovXG4gICAgc2FtcGxlKG9wdGlvbnM9e30pIHtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXguZW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGxldCB7c3RhcnQsIHN0b3AsIHN0ZXA9MX0gPSBvcHRpb25zO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN0YXJ0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgaW5kZXguZmlyc3QgaXMgYSBudW1iZXJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0ID0gdGhpcy5pbmRleC5maXJzdCgpO1xuICAgICAgICAgICAgaWYgKGZpcnN0WzBdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IGZpcnN0WzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmRlZmluZWQgc3RhcnRcIik7XG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG4gICAgICAgIGlmIChzdG9wID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgaW5kZXgubGFzdCBpcyBhIG51bWJlclxuICAgICAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMuaW5kZXgubGFzdCgpO1xuICAgICAgICAgICAgaWYgKGxhc3RbMF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHN0b3AgPSBsYXN0WzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmRlZmluZWQgc3RvcFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnQgPiBzdG9wKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IgKFwic3RvcCBtdXN0IGJlIGxhcmdlciB0aGFuIHN0YXJ0XCIsIHN0YXJ0LCBzdG9wKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5jcmVhdGVDYWNoZSgpO1xuICAgICAgICBjb25zdCBzYW1wbGVzID0gcmFuZ2Uoc3RhcnQsIHN0b3AsIHN0ZXAsIHtpbmNsdWRlX2VuZDp0cnVlfSlcbiAgICAgICAgICAgIC5tYXAoKG9mZnNldCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBbY2FjaGUucXVlcnkob2Zmc2V0KS52YWx1ZSwgb2Zmc2V0XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlbGVhc2VDYWNoZShjYWNoZSk7XG4gICAgICAgIHJldHVybiBzYW1wbGVzO1xuICAgIH1cbn1cbmNhbGxiYWNrLmFkZE1ldGhvZHMoTGF5ZXIucHJvdG90eXBlKTtcbmV2ZW50aWZ5LmFkZE1ldGhvZHMoTGF5ZXIucHJvdG90eXBlKTtcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBMQVlFUiBDQUNIRVxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBMYXllciBDYWNoZSBpcyB0aGUgcmVndWxhciBjYWNoZSB0eXBlLCBpbnRlbmRlZCBmb3JcbiAqIF9kZXJpdmVkXyBMYXllcnMgLSB0aGF0IGlzIGEgbGF5ZXJzIHdoaWNoIGluZGV4IHJlZmVyZW5jZXNcbiAqIG90aGVyIHNvdXJjZSBsYXllcnMuXG4gKiBcbiAqIEEgcXVlcnkgaXMgcmVzb2x2ZWQgYnkgaWRlbnRpZnlpbmcgdGhlIHJlbGV2YW50IHJlZ2lvbiBpblxuICogdGhlIG5lYXJieSBpbmRleCAoaW5kZXgubmVhcmJ5KG9mZnNldCkpLCBhbmQgdGhlbiBxdWVyeWluZyBcbiAqIHRoZSBzdGF0ZSBvZiBhbGwgdGhlIG9iamVjdHMgZm91bmQgaW4gdGhlIHJlZ2lvbiAobmVhcmJ5LmNlbnRlcikuXG4gKiAgXG4gKiBPcHRpb25zIHt2YWx1ZUZ1bmMgb3Igc3RhdGVGdW5jfSBhcmUgdXNlZCB0byBjb21wdXRlIGEgXG4gKiBzaW5nbGUgcXVlcnkgcmVzdWx0IGZyb20gdGhlIGxpc3Qgb2Ygc3RhdGVzLlxuICogXG4gKiBUaGUgcmVzdWx0IHN0YXRlIGlzIG9ubHkgY2FjaGVkIGlmIGl0IGlzIHN0YXRpYy5cbiAqIENhY2hlIG1pc3MgaXMgdHJpZ2dlcmVkIGlmIG5vIHN0YXRlIGhhcyBiZWVuIGNhY2hlZCwgb3IgaWYgXG4gKiBvZmZzZXQgaXMgb3V0c2lkZSB0aGUgcmVnaW9uIG9mIHRoZSBjYWNoZWQgc3RhdGUuXG4gKiBcbiAqL1xuXG5leHBvcnQgY2xhc3MgTGF5ZXJDYWNoZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihsYXllcikge1xuICAgICAgICAvLyBjYWNoZSBiZWxvbmdzIHRvIGxheWVyXG4gICAgICAgIHRoaXMuX2xheWVyID0gbGF5ZXI7XG4gICAgICAgIC8vIGNhY2hlZCBuZWFyYnkgc3RhdGVcbiAgICAgICAgdGhpcy5fbmVhcmJ5O1xuICAgICAgICAvLyBjYWNoZWQgc3RhdGVcbiAgICAgICAgdGhpcy5fc3RhdGU7XG4gICAgfVxuXG4gICAgZ2V0IGxheWVyKCkge3JldHVybiB0aGlzLl9sYXllcn07XG5cbiAgICAvKipcbiAgICAgKiBxdWVyeSBjYWNoZVxuICAgICAqL1xuICAgIHF1ZXJ5KG9mZnNldCkge1xuICAgICAgICBjb25zdCBuZWVkX2luZGV4X2xvb2t1cCA9IChcbiAgICAgICAgICAgIHRoaXMuX25lYXJieSA9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICFpbnRlcnZhbC5jb3ZlcnNfZW5kcG9pbnQodGhpcy5fbmVhcmJ5Lml0diwgb2Zmc2V0KVxuICAgICAgICApO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhbmVlZF9pbmRleF9sb29rdXAgJiYgXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSAhPSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICF0aGlzLl9zdGF0ZS5keW5hbWljXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gY2FjaGUgaGl0XG4gICAgICAgICAgICByZXR1cm4gey4uLnRoaXMuX3N0YXRlLCBvZmZzZXR9O1xuICAgICAgICB9XG4gICAgICAgIC8vIGNhY2hlIG1pc3NcbiAgICAgICAgaWYgKG5lZWRfaW5kZXhfbG9va3VwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZWFyYnkgPSB0aGlzLl9sYXllci5pbmRleC5uZWFyYnkob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwZXJmb3JtIHF1ZXJpZXNcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gdGhpcy5fbmVhcmJ5LmNlbnRlci5tYXAoKGNhY2hlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGUucXVlcnkob2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBzaW5nbGUgcmVzdWx0IHN0YXRlXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdG9TdGF0ZSh0aGlzLl9uZWFyYnkuY2VudGVyLCBzdGF0ZXMsIG9mZnNldCwgdGhpcy5fbGF5ZXIub3B0aW9ucyk7XG4gICAgICAgIC8vIGNhY2hlIHN0YXRlIG9ubHkgaWYgbm90IGR5bmFtaWNcbiAgICAgICAgdGhpcy5fc3RhdGUgPSAoc3RhdGUuZHluYW1pYykgPyB1bmRlZmluZWQgOiBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIHN0YXRlICAgIFxuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9uZWFyYnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuIiwiaW1wb3J0IHsgbG9jYWxfY2xvY2sgfSBmcm9tIFwiLi9jb21tb24uanNcIjtcblxuLyoqXG4gKiBwb2xsaW5nIGEgY2FsbGJhY2sgZnVuY3Rpb24gcGVyaW9kaWNhbGx5IHdpdGggXG4gKiBhIGZpeGVkIGRlbGF5IChtcykuXG4gKiBJZiBkZWxheSBpcyAwLCB1c2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLFxuICogZWxzZSB1c2Ugc2V0VGltZW91dC5cbiAqIERlbGF5IGNhbiBiZSBzZXQgZHluYW1pY2FsbHkuIFBhdXNlIGFuZCByZXN1bWVcbiAqIGlzIG5lZWRlZCBmb3IgbmV3IGRlbGF5IHRvIHRha2UgZWZmZWN0LlxuICovXG5cbmNsYXNzIFBvbGxlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGU7XG4gICAgICAgIHRoaXMuX2RlbGF5O1xuICAgIH1cbiAgICBcbiAgICBzZXQgZGVsYXkgKGRlbGF5X21zKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGVsYXlfbXMgIT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBkZWxheSBtdXN0IGJlIGEgbnVtYmVyICR7ZGVsYXlfbXN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2RlbGF5ICE9IGRlbGF5X21zKSB7ICAgXG4gICAgICAgICAgICB0aGlzLl9kZWxheSA9IGRlbGF5X21zO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkZWxheSAoKSB7cmV0dXJuIHRoaXMuX2RlbGF5O31cblxuICAgIGlzX3BvbGxpbmcgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlICE9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZS5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBvbGwoKSB7XG4gICAgICAgIC8vIHBvbGwgY2FsbGJhY2tcbiAgICAgICAgdGhpcy5fY2FsbGJhY2soKTtcbiAgICAgICAgLy8gc2NoZWR1bGUgbmV4dCBwb2xsXG4gICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgdGhpcy5yZXN1bWUoKTtcbiAgICB9XG5cbiAgICByZXN1bWUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsYXkgPT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGZyYW1lcmF0ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGFpZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnBvbGwuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlID0ge2NhbmNlbDogKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUoYWlkKX07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHRpbWVvdXRcbiAgICAgICAgICAgICAgICBjb25zdCB0aWQgPSBzZXRUaW1lb3V0KHRoaXMucG9sbC5iaW5kKHRoaXMpLCB0aGlzLl9kZWxheSk7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlID0ge2NhbmNlbDogKCkgPT4gY2xlYXJUaW1lb3V0KHRpZCl9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEN1cnNvciBNb25pdG9yXG4gKi9cblxuY2xhc3MgQ3Vyc29yTW9uaXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAgICBzZXQgb2YgYmluZGluZ3NcbiAgICAgICAgICAgIHBvbGwgY3Vyc29yICh3aGVuIGR5bmFtaWMpIHBlcmlvZGljYWxseSB3aXRoIGdpdmVuIChtaW5pbXVtKSBkZWxheSwgYW5kIGludm9rZSBjYWxsYmFjayB3aXRoIGN1cnNvciBzdGF0ZSBcbiAgICAgICAgICAgIGJpbmRpbmcgOiB7Y3Vyc29yLCBjYWxsYmFjaywgZGVsYXlfbXN9XG4gICAgICAgICAgICAtIGN1cnNvcjpcbiAgICAgICAgICAgIC0gY2FsbGJhY2s6IGZ1bmN0aW9uKHN0YXRlKVxuICAgICAgICAgICAgLSBkZWxheTogKG1zKSBiZXR3ZWVuIHNhbXBsZXMgKHdoZW4gdmFyaWFibGUgaXMgZHluYW1pYylcbiAgICAgICAgICAgIHRoZXJlIGNhbiBiZSBtdWx0aXBsZSBiaW5kaW5ncyBmb3IgdGhlIHNhbWUgY3Vyc29yXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX2JpbmRpbmdfc2V0ID0gbmV3IFNldCgpO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAgICBjdXJzb3JzXG4gICAgICAgICAgICBtYXA6IGN1cnNvciAtPiB7c3ViLCBwb2xsaW5nLCBiaW5kaW5nczpbXX1cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fY3Vyc29yX21hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBQb2xsZXJcbiAgICAgICAgdGhpcy5fcG9sbGVyID0gbmV3IFBvbGxlcih0aGlzLm9ucG9sbC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBiaW5kKGN1cnNvciwgY2FsbGJhY2ssIGRlbGF5KSB7XG4gICAgICAgIC8vIGNoZWNrIGRlbGF5XG4gICAgICAgIGlmIChkZWxheSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlbGF5ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVsYXkgIT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBkZWxheSBtdXN0IGJlIGEgbnVtYmVyICR7ZGVsYXl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVnaXN0ZXIgYmluZGluZ1xuICAgICAgICBsZXQgYmluZGluZyA9IHtjdXJzb3IsIGNhbGxiYWNrLCBkZWxheX07XG4gICAgICAgIHRoaXMuX2JpbmRpbmdfc2V0LmFkZChiaW5kaW5nKTtcbiAgICAgICAgLy8gcmVnaXN0ZXIgY3Vyc29yXG4gICAgICAgIGlmICghdGhpcy5fY3Vyc29yX21hcC5oYXMoY3Vyc29yKSkgeyBcbiAgICAgICAgICAgIGxldCBzdWIgPSBjdXJzb3Iub24oXCJjaGFuZ2VcIiwgdGhpcy5vbmN1cnNvcmNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnNvcl9tYXAuc2V0KGN1cnNvciwge1xuICAgICAgICAgICAgICAgIHN1YiwgcG9sbGluZzogZmFsc2UsIGJpbmRpbmdzOiBbYmluZGluZ11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY3Vyc29yX21hcC5nZXQoY3Vyc29yKS5iaW5kaW5ncy5wdXNoKGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiaW5kaW5nO1xuICAgIH1cblxuICAgIHJlbGVhc2UgKGJpbmRpbmcpIHtcbiAgICAgICAgLy8gdW5yZWdpc3RlciBiaW5kaW5nXG4gICAgICAgIGNvbnN0IHJlbW92ZWQgPSB0aGlzLl9iaW5kaW5nX3NldC5kZWxldGUoYmluZGluZyk7XG4gICAgICAgIGlmICghcmVtb3ZlZCkgcmV0dXJuO1xuICAgICAgICAvLyBjbGVhbnVwXG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGJpbmRpbmcuY3Vyc29yO1xuICAgICAgICBjb25zdCB7c3ViLCBiaW5kaW5nc30gPSB0aGlzLl9jdXJzb3JfbWFwLmdldChjdXJzb3IpO1xuICAgICAgICAvLyByZW1vdmUgYmluZGluZ1xuICAgICAgICBjb25zdCBpZHggPSBiaW5kaW5ncy5pbmRleE9mKGJpbmRpbmcpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGJpbmRpbmdzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiaW5kaW5ncy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgLy8gbm8gbW9yZSBiaW5kaW5nc1xuICAgICAgICAgICAgY3Vyc29yLm9mZihzdWIpO1xuICAgICAgICAgICAgdGhpcy5fY3Vyc29yX21hcC5kZWxldGUoY3Vyc29yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGEgY3Vyc29yIGhhcyBjaGFuZ2VkXG4gICAgICogZm9yd2FyZCBjaGFuZ2UgZXZlbnQgdG8gYWxsIGNhbGxiYWNrcyBmb3IgdGhpcyBjdXJzb3IuXG4gICAgICogYW5kIHJlZXZhbHVhdGUgcG9sbGluZyBzdGF0dXMsIHBhdXNpbmcgb3IgcmVzdW1pbmdcbiAgICAgKiBwb2xsaW5nIGlmIG5lZWRlZC5cbiAgICAgKi9cbiAgICBvbmN1cnNvcmNoYW5nZShlQXJnLCBlSW5mbykge1xuICAgICAgICBjb25zdCBjdXJzb3IgPSBlSW5mby5zcmM7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gZUFyZztcbiAgICAgICAgLy8gcmVldmFsdWF0ZSBwb2xsaW5nIHN0YXR1c1xuICAgICAgICB0aGlzLl9jdXJzb3JfbWFwLmdldChjdXJzb3IpLnBvbGxpbmcgPSBzdGF0ZS5keW5hbWljO1xuICAgICAgICAvLyBmaW5kIGN1cnNvcnMgd2hpY2ggbmVlZCBwb2xsaW5nXG4gICAgICAgIGNvbnN0IHBvbGxpbmdfY3Vyc29ycyA9IFsuLi50aGlzLl9jdXJzb3JfbWFwLnZhbHVlcygpXVxuICAgICAgICAgICAgLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5wb2xsaW5nKTtcbiAgICAgICAgdGhpcy5yZWV2YWx1YXRlX3BvbGxpbmcocG9sbGluZ19jdXJzb3JzKTtcbiAgICAgICAgLy8gZm9yd2FyZCBjaGFuZ2UgZXZlbnQgdG8gYWxsIGZvciB0aGlzIGN1cnNvciBjYWxsYmFja3NcbiAgICAgICAgY29uc3Qge2JpbmRpbmdzfSA9IHRoaXMuX2N1cnNvcl9tYXAuZ2V0KGN1cnNvcik7XG4gICAgICAgIGZvciAoY29uc3QgYmluZGluZyBvZiBiaW5kaW5ncykge1xuICAgICAgICAgICAgYmluZGluZy5jYWxsYmFjayhzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbnBvbGwoKSB7XG4gICAgICAgIGNvbnN0IHRzID0gbG9jYWxfY2xvY2subm93KCk7XG4gICAgICAgIC8vIHBvbGwgYWxsIGN1cnNvcnMgd2l0aCBuZWVkIG9mIHBvbGxpbmdcbiAgICAgICAgZm9yIChjb25zdCBbY3Vyc29yLCBlbnRyeV0gb2YgdGhpcy5fY3Vyc29yX21hcCkge1xuICAgICAgICAgICAgaWYgKGVudHJ5LnBvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGN1cnNvci5xdWVyeSh0cyk7XG4gICAgICAgICAgICAgICAgLy8gZm9yd2FyZCBwb2xsZWQgc3RhdGUgdG8gYWxsIGNhbGxiYWNrcyBmb3IgdGhpcyBjdXJzb3JcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJpbmRpbmcgb2YgZW50cnkuYmluZGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZy5jYWxsYmFjayhzdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVldmFsdWF0ZV9wb2xsaW5nKHBvbGxpbmdfY3Vyc29ycykge1xuICAgICAgICBpZiAocG9sbGluZ19jdXJzb3JzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9wb2xsZXIucGF1c2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZpbmQgbWluaW11bSBkZWxheVxuICAgICAgICAgICAgY29uc3QgZGVsYXlzID0gcG9sbGluZ19jdXJzb3JzLm1hcChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5LmJpbmRpbmdzLm1hcChiaW5kaW5nID0+IGJpbmRpbmcuZGVsYXkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBtaW5fZGVsYXkgPSBNYXRoLm1pbiguLi5kZWxheXMpO1xuICAgICAgICAgICAgdGhpcy5fcG9sbGVyLmRlbGF5ID0gbWluX2RlbGF5O1xuICAgICAgICAgICAgdGhpcy5fcG9sbGVyLnBhdXNlKCk7XG4gICAgICAgICAgICB0aGlzLl9wb2xsZXIucmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIEJJTkQgUkVMRUFTRVxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vLyBtb25pdG9yIHNpbmdsZXRvblxuY29uc3QgbW9uaXRvciA9IG5ldyBDdXJzb3JNb25pdG9yKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kKGN1cnNvciwgY2FsbGJhY2ssIGRlbGF5KSB7XG4gICAgcmV0dXJuIG1vbml0b3IuYmluZChjdXJzb3IsIGNhbGxiYWNrLCBkZWxheSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVsZWFzZShiaW5kaW5nKSB7XG4gICAgcmV0dXJuIG1vbml0b3IucmVsZWFzZShiaW5kaW5nKTtcbn1cblxuIiwiaW1wb3J0ICogYXMgZXZlbnRpZnkgZnJvbSBcIi4vdXRpbC9hcGlfZXZlbnRpZnkuanNcIjtcbmltcG9ydCAqIGFzIGNhbGxiYWNrIGZyb20gXCIuL3V0aWwvYXBpX2NhbGxiYWNrLmpzXCI7XG5pbXBvcnQgeyBiaW5kLCByZWxlYXNlIH0gZnJvbSBcIi4vdXRpbC9jdXJzb3JfbW9uaXRvci5qc1wiO1xuaW1wb3J0IHsgaXNfZmluaXRlX251bWJlciB9IGZyb20gXCIuL3V0aWwvY29tbW9uLmpzXCI7XG5cbi8qKlxuICogY29udmVuaWVuY2VcbiAqIGdldCBjdXJyZW50IHN0YXRlIGZyb20gY3Vyc29yLmN0cmxcbiAqIGVuc3VyZSB0aGF0IGN1cnNvci5jdHJsIHJldHVybiBhIG51bWJlciBvZmZzZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldF9jdXJzb3JfY3RybF9zdGF0ZSAoY3Vyc29yLCB0c19sb2NhbCkge1xuICAgIGNvbnN0IHN0YXRlID0gY3Vyc29yLmN0cmwucXVlcnkodHNfbG9jYWwpO1xuICAgIGlmICghaXNfZmluaXRlX251bWJlcihzdGF0ZS52YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB3YXJuaW5nOiBjdXJzb3IgY3RybCB2YWx1ZSBtdXN0IGJlIG51bWJlciAke3N0YXRlLnZhbHVlfWApO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIENVUlNPUlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8gIFxuXG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIEN1cnNvciBpbnRlcmZhY2VcbiAqL1xuXG5leHBvcnQgY2xhc3MgQ3Vyc29yIHtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gY2FsbGJhY2tzXG4gICAgICAgIGNhbGxiYWNrLmFkZFN0YXRlKHRoaXMpO1xuICAgICAgICAvLyBkZWZpbmUgY2hhbmdlIGV2ZW50XG4gICAgICAgIGV2ZW50aWZ5LmFkZFN0YXRlKHRoaXMpO1xuICAgICAgICB0aGlzLmV2ZW50aWZ5RGVmaW5lKFwiY2hhbmdlXCIsIHtpbml0OnRydWV9KTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqIFFVRVJZIEFQSVxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgcXVlcnkoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInF1ZXJ5KCkgbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cblxuICAgIGdldCB2YWx1ZSAoKSB7cmV0dXJuIHRoaXMucXVlcnkoKS52YWx1ZX07XG5cbiAgICBnZXQgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeSgpLnZhbHVlO1xuICAgIH1cblxuICAgIC8qXG4gICAgICAgIEV2ZW50aWZ5OiBpbW1lZGlhdGUgZXZlbnRzXG4gICAgKi9cbiAgICBldmVudGlmeUluaXRFdmVudEFyZ3MobmFtZSkge1xuICAgICAgICBpZiAobmFtZSA9PSBcImNoYW5nZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMucXVlcnkoKV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKiBCSU5EIFJFTEVBU0UgKGNvbnZlbmllbmNlKVxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgYmluZChjYWxsYmFjaywgZGVsYXksIG9wdGlvbnM9e30pIHtcbiAgICAgICAgcmV0dXJuIGJpbmQodGhpcywgY2FsbGJhY2ssIGRlbGF5LCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmVsZWFzZShoYW5kbGUpIHtcbiAgICAgICAgcmV0dXJuIHJlbGVhc2UoaGFuZGxlKTtcbiAgICB9XG5cbiAgICAvLyBpbnZva2VkIGJ5IHN1YmNsYXNzIHdoZW5ldmVyIGN1cnNvciBoYXMgY2hhbmdlZFxuICAgIG9uY2hhbmdlKCkge1xuICAgICAgICB0aGlzLm5vdGlmeV9jYWxsYmFja3MoKTtcbiAgICAgICAgdGhpcy5ldmVudGlmeVRyaWdnZXIoXCJjaGFuZ2VcIiwgdGhpcy5xdWVyeSgpKTsgICAgXG4gICAgfVxufVxuY2FsbGJhY2suYWRkTWV0aG9kcyhDdXJzb3IucHJvdG90eXBlKTtcbmV2ZW50aWZ5LmFkZE1ldGhvZHMoQ3Vyc29yLnByb3RvdHlwZSk7XG4iLCJpbXBvcnQge2xvY2FsX2Nsb2NrLCBsb2NhbF9lcG9jaH0gZnJvbSBcIi4vdXRpbC9jb21tb24uanNcIjtcblxuXG4vKipcbiAqIGNsb2NrIHByb3ZpZGVyIG11c3QgaGF2ZSBhIG5vdygpIG1ldGhvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNfY2xvY2tfcHJvdmlkZXIob2JqKSB7XG4gICAgaWYgKG9iaiA9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIShcIm5vd1wiIGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIG9iai5ub3cgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuXG5cbi8qKlxuICogQ0xPQ0sgZ2l2ZXMgZXBvY2ggdmFsdWVzLCBidXQgaXMgaW1wbGVtZW50ZWRcbiAqIHVzaW5nIHBlcmZvcm1hbmNlIG5vdyBmb3IgYmV0dGVyXG4gKiB0aW1lIHJlc29sdXRpb24gYW5kIHByb3RlY3Rpb24gYWdhaW5zdCBzeXN0ZW0gXG4gKiB0aW1lIGFkanVzdG1lbnRzLlxuICovXG5leHBvcnQgY29uc3QgTE9DQUxfQ0xPQ0tfUFJPVklERVIgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdDAgPSBsb2NhbF9jbG9jay5ub3coKTtcbiAgICBjb25zdCB0MF9lcG9jaCA9IGxvY2FsX2Vwb2NoLm5vdygpO1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdyAobG9jYWxfdHMgPSBsb2NhbF9jbG9jay5ub3coKSkge1xuICAgICAgICAgICAgcmV0dXJuIHQwX2Vwb2NoICsgKGxvY2FsX3RzIC0gdDApO1xuICAgICAgICB9XG4gICAgfVxufSgpO1xuXG4iLCJpbXBvcnQgeyBpbnRlcnZhbCB9IGZyb20gXCIuL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyByYW5kb21fc3RyaW5nfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuaW1wb3J0ICogYXMgY2FsbGJhY2sgZnJvbSBcIi4vdXRpbC9hcGlfY2FsbGJhY2suanNcIjtcblxuXG5mdW5jdGlvbiBjaGVja19pdGVtKGl0ZW0pIHtcbiAgICBpdGVtLml0diA9IGludGVydmFsLmZyb21faW5wdXQoaXRlbS5pdHYpO1xuICAgIGl0ZW0uaWQgPSBpdGVtLmlkIHx8IHJhbmRvbV9zdHJpbmcoMTApO1xuICAgIHJldHVybiBpdGVtO1xufVxuXG4vKipcbiAqIGNvbGxlY3Rpb24gcHJvdmlkZXJzIG11c3QgcHJvdmlkZSBnZXRfYWxsIGZ1bmN0aW9uXG4gKiBhbmQgYWxzbyBpbXBsZW1lbnQgY2FsbGJhY2sgaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19jb2xsZWN0aW9uX3Byb3ZpZGVyKG9iaikge1xuICAgIGlmICghY2FsbGJhY2suaXNfY2FsbGJhY2tfYXBpKG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIShcImdldFwiIGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIG9iai5nZXQgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghKFwidXBkYXRlXCIgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0eXBlb2Ygb2JqLnVwZGF0ZSAhPSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIENPTExFQ1RJT04gUFJPVklERVJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBsb2NhbCBjb2xsZWN0aW9uIHByb3ZpZGVyXG4gKiBcbiAqIFxuICogY2hhbmdlcyA9IHtcbiAqICAgcmVtb3ZlPVtdLFxuICogICBpbnNlcnQ9W10sXG4gKiAgIHJlc2V0PWZhbHNlIFxuICogfVxuICogXG4qL1xuXG5leHBvcnQgY2xhc3MgQ29sbGVjdGlvblByb3ZpZGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM9e30pIHtcbiAgICAgICAgY2FsbGJhY2suYWRkU3RhdGUodGhpcyk7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZVxuICAgICAgICBsZXQge2luc2VydH0gPSBvcHRpb25zO1xuICAgICAgICBpZiAoaW5zZXJ0ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlKHtpbnNlcnQsIHJlc2V0OnRydWV9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvY2FsIHN0YXRlcHJvdmlkZXJzIGRlY291cGxlIHVwZGF0ZSByZXF1ZXN0IGZyb21cbiAgICAgKiB1cGRhdGUgcHJvY2Vzc2luZywgYW5kIHJldHVybnMgUHJvbWlzZS5cbiAgICAgKi9cbiAgICB1cGRhdGUgKGNoYW5nZXMpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGxldCBkaWZmcztcbiAgICAgICAgICAgIGlmIChjaGFuZ2VzICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRpZmZzID0gdGhpcy5fdXBkYXRlKGNoYW5nZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5X2NhbGxiYWNrcyhkaWZmcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGlmZnM7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF91cGRhdGUoY2hhbmdlcykge1xuICAgICAgICBjb25zdCBkaWZmX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIGluc2VydD1bXSxcbiAgICAgICAgICAgIHJlbW92ZT1bXSxcbiAgICAgICAgICAgIHJlc2V0PWZhbHNlXG4gICAgICAgIH0gPSBjaGFuZ2VzO1xuXG5cbiAgICAgICAgaWYgKHJlc2V0KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtpZCwgaXRlbV0gb2YgdGhpcy5fbWFwLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIGRpZmZfbWFwLnNldChpZCwge2lkLCBuZXc6dW5kZWZpbmVkLCBvbGQ6aXRlbX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2xlYXIgYWxsIGl0ZW1zXG4gICAgICAgICAgICB0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgaXRlbXMgYnkgaWRcbiAgICAgICAgICAgIGZvciAoY29uc3QgaWQgb2YgcmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLl9tYXAuZ2V0KGlkKTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlmZl9tYXAuc2V0KGl0ZW0uaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOml0ZW0uaWQsIG5ldzp1bmRlZmluZWQsIG9sZDppdGVtXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZGVsZXRlKGlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5zZXJ0IGl0ZW1zXG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgaW5zZXJ0KSB7XG4gICAgICAgICAgICBpdGVtID0gY2hlY2tfaXRlbShpdGVtKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBkaWZmX21hcC5nZXQoaXRlbS5pZClcbiAgICAgICAgICAgIGNvbnN0IG9sZCA9IChkaWZmICE9IHVuZGVmaW5lZCkgPyBkaWZmLm9sZCA6IHRoaXMuX21hcC5nZXQoaXRlbS5pZCk7XG4gICAgICAgICAgICBkaWZmX21hcC5zZXQoaXRlbS5pZCwge2lkOml0ZW0uaWQsIG5ldzppdGVtLCBvbGR9KTtcbiAgICAgICAgICAgIHRoaXMuX21hcC5zZXQoaXRlbS5pZCwgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5kaWZmX21hcC52YWx1ZXMoKV07XG4gICAgfVxuXG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gWy4uLnRoaXMuX21hcC52YWx1ZXMoKV07XG4gICAgfTtcbn1cbmNhbGxiYWNrLmFkZE1ldGhvZHMoQ29sbGVjdGlvblByb3ZpZGVyLnByb3RvdHlwZSk7XG4iLCJpbXBvcnQgKiBhcyBjYWxsYmFjayBmcm9tIFwiLi91dGlsL2FwaV9jYWxsYmFjay5qc1wiO1xuaW1wb3J0IHsgcmFuZG9tX3N0cmluZ30gZnJvbSBcIi4vdXRpbC9jb21tb24uanNcIjtcblxuLyoqXG4gKiB2YXJpYWJsZSBwcm92aWRlcnMgbXVzdCBoYXZlIGEgdmFsdWUgcHJvcGVydHlcbiAqIGFuZCBhbHNvIGltcGxlbWVudCBjYWxsYmFjayBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzX3ZhcmlhYmxlX3Byb3ZpZGVyKG9iaikge1xuICAgIGlmICghY2FsbGJhY2suaXNfY2FsbGJhY2tfYXBpKG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIShcImdldFwiIGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIG9iai5nZXQgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghKFwic2V0XCIgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0eXBlb2Ygb2JqLnNldCAhPSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIFZBUklBQkxFIFBST1ZJREVSXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogVmFyaWFibGVQcm92aWRlciBzdG9yZXMgYSBsaXN0IG9mIGl0ZW1zLlxuICovXG5cbmV4cG9ydCBjbGFzcyBWYXJpYWJsZVByb3ZpZGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM9e30pIHtcbiAgICAgICAgY2FsbGJhY2suYWRkU3RhdGUodGhpcyk7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gW107XG4gICAgICAgIC8vIGluaXRpYWxpemVcbiAgICAgICAgY29uc3Qge3ZhbHVlfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zID0gW3tcbiAgICAgICAgICAgICAgICBpZDogcmFuZG9tX3N0cmluZygxMCksXG4gICAgICAgICAgICAgICAgaXR2OiBbbnVsbCwgbnVsbCwgdHJ1ZSwgdHJ1ZV0sIFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RhdGljXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogdmFsdWVcbiAgICAgICAgICAgIH1dO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0IChpdGVtcykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5X2NhbGxiYWNrcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zO1xuICAgIH1cbn1cbmNhbGxiYWNrLmFkZE1ldGhvZHMoVmFyaWFibGVQcm92aWRlci5wcm90b3R5cGUpOyIsImltcG9ydCB7IGlzX2NhbGxiYWNrX2FwaSB9IGZyb20gXCIuL2FwaV9jYWxsYmFjay5qc1wiO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBTT1VSQ0UgUFJPUEVSVFkgKFNSQ1BST1ApXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIEZ1bmN0aW9ucyBmb3IgZXh0ZW5kaW5nIGEgY2xhc3Mgd2l0aCBzdXBwb3J0IGZvciBcbiAqIGV4dGVybmFsIHNvdXJjZSBvbiBhIG5hbWVkIHByb3BlcnR5LlxuICogXG4gKiBvcHRpb246IG11dGFibGU6dHJ1ZSBtZWFucyB0aGF0IHByb3BlcnkgbWF5IGJlIHJlc2V0IFxuICogXG4gKiBzb3VyY2Ugb2JqZWN0IGlzIGFzc3VtZWQgdG8gc3VwcG9ydCB0aGUgY2FsbGJhY2sgaW50ZXJmYWNlLFxuICogb3IgYmUgYSBsaXN0IG9mIG9iamVjdHMgYWxsIHN1cHBvcnRpbmcgdGhlIGNhbGxiYWNrIGludGVyZmFjZVxuICovXG5cbmNvbnN0IE5BTUUgPSBcInNyY3Byb3BcIjtcbmNvbnN0IFBSRUZJWCA9IGBfXyR7TkFNRX1gO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkU3RhdGUgKG9iamVjdCkge1xuICAgIG9iamVjdFtgJHtQUkVGSVh9YF0gPSBuZXcgTWFwKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRNZXRob2RzIChvYmplY3QpIHtcblxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKHByb3BOYW1lLCBvcHRpb25zPXt9KSB7XG4gICAgICAgIGxldCB7bXV0YWJsZT10cnVlfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG1hcCA9IHRoaXNbYCR7UFJFRklYfWBdOyBcbiAgICAgICAgbWFwLnNldChwcm9wTmFtZSwge1xuICAgICAgICAgICAgaW5pdDpmYWxzZSxcbiAgICAgICAgICAgIG11dGFibGUsXG4gICAgICAgICAgICBlbnRpdHk6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGhhbmRsZXM6IFtdXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHJlZ2lzdGVyIGdldHRlcnMgYW5kIHNldHRlcnNcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIHByb3BOYW1lLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwLmdldChwcm9wTmFtZSkuZW50aXR5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzW2Ake05BTUV9X2NoZWNrYF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5ID0gdGhpc1tgJHtOQU1FfV9jaGVja2BdKHByb3BOYW1lLCBlbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5ICE9IG1hcC5nZXQocHJvcE5hbWUpLmVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW2Ake1BSRUZJWH1fYXR0YWNoYF0ocHJvcE5hbWUsIGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhdHRhdGNoKHByb3BOYW1lLCBlbnRpdHkpIHtcblxuICAgICAgICBjb25zdCBtYXAgPSB0aGlzW2Ake1BSRUZJWH1gXTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBtYXAuZ2V0KHByb3BOYW1lKVxuXG4gICAgICAgIGlmIChzdGF0ZS5pbml0ICYmICFzdGF0ZS5tdXRhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cHJvcE5hbWV9IGNhbiBub3QgYmUgcmVhc3NpZ25lZGApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW50aXRpZXMgPSAoQXJyYXkuaXNBcnJheShlbnRpdHkpKSA/IGVudGl0eSA6IFtlbnRpdHldO1xuXG4gICAgICAgIC8vIHVuc3Vic2NyaWJlIGZyb20gZW50aXRpZXNcbiAgICAgICAgaWYgKHN0YXRlLmhhbmRsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbaWR4LCBlXSBvZiBPYmplY3QuZW50cmllcyhlbnRpdGllcykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNfY2FsbGJhY2tfYXBpKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucmVtb3ZlX2NhbGxiYWNrKHN0YXRlLmhhbmRsZXNbaWR4XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5oYW5kbGVzID0gW107XG5cbiAgICAgICAgLy8gYXR0YXRjaCBuZXcgZW50aXR5XG4gICAgICAgIHN0YXRlLmVudGl0eSA9IGVudGl0eTtcbiAgICAgICAgc3RhdGUuaW5pdCA9IHRydWU7XG5cbiAgICAgICAgLy8gc3Vic2NyaWJlIHRvIGNhbGxiYWNrIGZyb20gc291cmNlXG4gICAgICAgIGlmICh0aGlzW2Ake05BTUV9X29uY2hhbmdlYF0pIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBmdW5jdGlvbiAoZUFyZykge1xuICAgICAgICAgICAgICAgIHRoaXNbYCR7TkFNRX1fb25jaGFuZ2VgXShwcm9wTmFtZSwgZUFyZyk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgZW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNfY2FsbGJhY2tfYXBpKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmhhbmRsZXMucHVzaChlLmFkZF9jYWxsYmFjayhoYW5kbGVyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpc1tgJHtOQU1FfV9vbmNoYW5nZWBdKHByb3BOYW1lLCBcInJlc2V0XCIpOyBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFwaSA9IHt9O1xuICAgIGFwaVtgJHtOQU1FfV9yZWdpc3RlcmBdID0gcmVnaXN0ZXI7XG4gICAgYXBpW2Ake1BSRUZJWH1fYXR0YWNoYF0gPSBhdHRhdGNoO1xuICAgIE9iamVjdC5hc3NpZ24ob2JqZWN0LCBhcGkpO1xufVxuXG4iLCJpbXBvcnQgeyBlbmRwb2ludCB9IGZyb20gXCIuL2ludGVydmFscy5qc1wiO1xuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0U09SVEVEIEFSUkFZXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qXG5cdFNvcnRlZCBhcnJheSBvZiBlbmRwb2ludHMgW3ZhbHVlLCB0eXBlXS5cblx0LSBFbGVtZW50cyBhcmUgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlci5cblx0LSBObyBkdXBsaWNhdGVzIGFyZSBhbGxvd2VkLlxuXHQtIEJpbmFyeSBzZWFyY2ggdXNlZCBmb3IgbG9va3VwXG5cblx0dmFsdWVzIGNhbiBiZSByZWd1bGFyIG51bWJlciB2YWx1ZXMgKGZsb2F0KSBvciBlbmRwb2ludHMgW2Zsb2F0LCB0eXBlXVxuKi9cblxuZXhwb3J0IGNsYXNzIFNvcnRlZEFycmF5IHtcblxuXHRjb25zdHJ1Y3Rvcigpe1xuXHRcdHRoaXMuX2FycmF5ID0gW107XG5cdH1cblxuXHRnZXQgc2l6ZSgpIHtyZXR1cm4gdGhpcy5fYXJyYXkubGVuZ3RoO31cblx0Z2V0IGFycmF5KCkge3JldHVybiB0aGlzLl9hcnJheTt9XG5cblx0Lypcblx0XHRmaW5kIGluZGV4IG9mIGdpdmVuIHZhbHVlXG5cblx0XHRyZXR1cm4gW2ZvdW5kLCBpbmRleF1cblxuXHRcdGlmIGZvdW5kIGlzIHRydWUsIHRoZW4gaW5kZXggaXMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBvYmplY3Rcblx0XHRpZiBmb3VuZCBpcyBmYWxzZSwgdGhlbiBpbmRleCBpcyB0aGUgaW5kZXggd2hlcmUgdGhlIG9iamVjdCBzaG91bGRcblx0XHRiZSBpbnNlcnRlZFxuXG5cdFx0LSB1c2VzIGJpbmFyeSBzZWFyY2hcdFx0XG5cdFx0LSBhcnJheSBkb2VzIG5vdCBpbmNsdWRlIGFueSBkdXBsaWNhdGUgdmFsdWVzXG5cdCovXG5cdGluZGV4T2YodGFyZ2V0X3ZhbHVlKSB7XG5cdFx0Y29uc3QgdGFyZ2V0X2VwID0gZW5kcG9pbnQuZnJvbV9pbnB1dCh0YXJnZXRfdmFsdWUpO1xuXHRcdGxldCBsZWZ0X2lkeCA9IDA7XG5cdFx0bGV0IHJpZ2h0X2lkeCA9IHRoaXMuX2FycmF5Lmxlbmd0aCAtIDE7XG5cdFx0d2hpbGUgKGxlZnRfaWR4IDw9IHJpZ2h0X2lkeCkge1xuXHRcdFx0Y29uc3QgbWlkX2lkeCA9IE1hdGguZmxvb3IoKGxlZnRfaWR4ICsgcmlnaHRfaWR4KSAvIDIpO1xuXHRcdFx0bGV0IG1pZF92YWx1ZSA9IHRoaXMuX2FycmF5W21pZF9pZHhdO1xuXHRcdFx0aWYgKGVuZHBvaW50LmVxKG1pZF92YWx1ZSwgdGFyZ2V0X2VwKSkge1xuXHRcdFx0XHRyZXR1cm4gW3RydWUsIG1pZF9pZHhdOyAvLyBUYXJnZXQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGFycmF5XG5cdFx0XHR9IGVsc2UgaWYgKGVuZHBvaW50Lmx0KG1pZF92YWx1ZSwgdGFyZ2V0X2VwKSkge1xuXHRcdFx0XHQgIGxlZnRfaWR4ID0gbWlkX2lkeCArIDE7IC8vIE1vdmUgc2VhcmNoIHJhbmdlIHRvIHRoZSByaWdodFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ICByaWdodF9pZHggPSBtaWRfaWR4IC0gMTsgLy8gTW92ZSBzZWFyY2ggcmFuZ2UgdG8gdGhlIGxlZnRcblx0XHRcdH1cblx0XHR9XG5cdCAgXHRyZXR1cm4gW2ZhbHNlLCBsZWZ0X2lkeF07IC8vIFJldHVybiB0aGUgaW5kZXggd2hlcmUgdGFyZ2V0IHNob3VsZCBiZSBpbnNlcnRlZFxuXHR9XG5cblx0Lypcblx0XHRmaW5kIGluZGV4IG9mIHNtYWxsZXN0IHZhbHVlIHdoaWNoIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0YXJnZXQgdmFsdWVcblx0XHRyZXR1cm5zIC0xIGlmIG5vIHN1Y2ggdmFsdWUgZXhpc3RzXG5cdCovXG5cdGdlSW5kZXhPZih0YXJnZXRfdmFsdWUpIHtcblx0XHRsZXQgW2ZvdW5kLCBpZHhdID0gdGhpcy5pbmRleE9mKHRhcmdldF92YWx1ZSk7XG5cdFx0cmV0dXJuIChpZHggPCB0aGlzLl9hcnJheS5sZW5ndGgpID8gaWR4IDogLTEgIFxuXHR9XG5cblx0Lypcblx0XHRmaW5kIGluZGV4IG9mIGxhcmdlc3QgdmFsdWUgd2hpY2ggaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRhcmdldCB2YWx1ZVxuXHRcdHJldHVybnMgLTEgaWYgbm8gc3VjaCB2YWx1ZSBleGlzdHNcblx0Ki9cblx0bGVJbmRleE9mKHRhcmdldF92YWx1ZSkge1xuXHRcdGxldCBbZm91bmQsIGlkeF0gPSB0aGlzLmluZGV4T2YodGFyZ2V0X3ZhbHVlKTtcblx0XHRpZHggPSAoZm91bmQpID8gaWR4IDogaWR4LTE7XG5cdFx0cmV0dXJuIChpZHggPj0gMCkgPyBpZHggOiAtMTtcblx0fVxuXG5cdC8qXG5cdFx0ZmluZCBpbmRleCBvZiBzbWFsbGVzdCB2YWx1ZSB3aGljaCBpcyBncmVhdGVyIHRoYW4gdGFyZ2V0IHZhbHVlXG5cdFx0cmV0dXJucyAtMSBpZiBubyBzdWNoIHZhbHVlIGV4aXN0c1xuXHQqL1xuXHRndEluZGV4T2YodGFyZ2V0X3ZhbHVlKSB7XG5cdFx0bGV0IFtmb3VuZCwgaWR4XSA9IHRoaXMuaW5kZXhPZih0YXJnZXRfdmFsdWUpO1xuXHRcdGlkeCA9IChmb3VuZCkgPyBpZHggKyAxIDogaWR4O1xuXHRcdHJldHVybiAoaWR4IDwgdGhpcy5fYXJyYXkubGVuZ3RoKSA/IGlkeCA6IC0xICBcblx0fVxuXG5cdC8qXG5cdFx0ZmluZCBpbmRleCBvZiBsYXJnZXN0IHZhbHVlIHdoaWNoIGlzIGxlc3MgdGhhbiB0YXJnZXQgdmFsdWVcblx0XHRyZXR1cm5zIC0xIGlmIG5vIHN1Y2ggdmFsdWUgZXhpc3RzXG5cdCovXG5cdGx0SW5kZXhPZih0YXJnZXRfdmFsdWUpIHtcblx0XHRsZXQgW2ZvdW5kLCBpZHhdID0gdGhpcy5pbmRleE9mKHRhcmdldF92YWx1ZSk7XG5cdFx0aWR4ID0gaWR4LTE7XG5cdFx0cmV0dXJuIChpZHggPj0gMCkgPyBpZHggOiAtMTtcdFxuXHR9XG5cblx0Lypcblx0XHRVUERBVEVcblxuXHRcdGFwcHJvYWNoIC0gbWFrZSBhbGwgbmVjY2Vzc2FyeSBjaGFuZ2VzIGFuZCB0aGVuIHNvcnRcblxuXHRcdGFzIGEgcnVsZSBvZiB0aHVtYiAtIGNvbXBhcmVkIHRvIHJlbW92aW5nIGFuZCBpbnNlcnRpbmcgZWxlbWVudHNcblx0XHRvbmUgYnkgb25lLCB0aGlzIGlzIG1vcmUgZWZmZWN0aXZlIGZvciBsYXJnZXIgYmF0Y2hlcywgc2F5ID4gMTAwLlxuXHRcdEV2ZW4gdGhvdWdoIHRoaXMgbWlnaHQgbm90IGJlIHRoZSBjb21tb24gY2FzZSwgcGVuYWx0aWVzIGZvclxuXHRcdGNob29zaW5nIHRoZSB3cm9uZyBhcHByb2FjaCBpcyBoaWdoZXIgZm9yIGxhcmdlciBiYXRjaGVzLlxuXG5cdFx0cmVtb3ZlIGlzIHByb2Nlc3NlZCBmaXJzdCwgc28gaWYgYSB2YWx1ZSBhcHBlYXJzIGluIGJvdGggXG5cdFx0cmVtb3ZlIGFuZCBpbnNlcnQsIGl0IHdpbGwgcmVtYWluLlxuXHRcdHVuZGVmaW5lZCB2YWx1ZXMgY2FuIG5vdCBiZSBpbnNlcnRlZCBcblxuXHQqL1xuXG5cdHVwZGF0ZShyZW1vdmVfbGlzdD1bXSwgaW5zZXJ0X2xpc3Q9W10pIHtcblxuXHRcdC8qXG5cdFx0XHRyZW1vdmVcblxuXHRcdFx0cmVtb3ZlIGJ5IGZsYWdnaW5nIGVsZW1lbnRzIGFzIHVuZGVmaW5lZFxuXHRcdFx0LSBjb2xsZWN0IGFsbCBpbmRleGVzIGZpcnN0XG5cdFx0XHQtIGZsYWcgYXMgdW5kZWZpbmVkIG9ubHkgYWZ0ZXIgYWxsIGluZGV4ZXMgaGF2ZSBiZWVuIGZvdW5kLFxuXHRcdFx0ICBhcyBpbnNlcnRpbmcgdW5kZWZpbmVkIHZhbHVlcyBicmVha2VzIHRoZSBhc3N1bXB0aW9uIHRoYXRcblx0XHRcdCAgdGhlIGFycmF5IGlzIHNvcnRlZC5cblx0XHRcdC0gbGF0ZXIgc29ydCB3aWxsIG1vdmUgdGhlbSB0byB0aGUgZW5kLCB3aGVyZSB0aGV5IGNhbiBiZVxuXHRcdFx0ICB0cnVuY2F0ZWQgb2ZmXG5cdFx0Ki9cblx0XHRsZXQgcmVtb3ZlX2lkeF9saXN0ID0gW107XG5cdFx0Zm9yIChsZXQgdmFsdWUgb2YgcmVtb3ZlX2xpc3QpIHtcblx0XHRcdGxldCBbZm91bmQsIGlkeF0gPSB0aGlzLmluZGV4T2YodmFsdWUpO1xuXHRcdFx0aWYgKGZvdW5kKSB7XG5cdFx0XHRcdHJlbW92ZV9pZHhfbGlzdC5wdXNoKGlkeCk7XG5cdFx0XHR9XHRcdFxuXHRcdH1cblx0XHRmb3IgKGxldCBpZHggb2YgcmVtb3ZlX2lkeF9saXN0KSB7XG5cdFx0XHR0aGlzLl9hcnJheVtpZHhdID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRsZXQgYW55X3JlbW92ZXMgPSByZW1vdmVfaWR4X2xpc3QubGVuZ3RoID4gMDtcblxuXHRcdC8qXG5cdFx0XHRpbnNlcnRcblxuXHRcdFx0aW5zZXJ0IG1pZ2h0IGludHJvZHVjZSBkdXBsaWNhdGlvbnMsIGVpdGhlciBiZWNhdXNlXG5cdFx0XHR0aGUgaW5zZXJ0IGxpc3QgaW5jbHVkZXMgZHVwbGljYXRlcywgb3IgYmVjYXVzZSB0aGVcblx0XHRcdGluc2VydCBsaXN0IGR1cGxpY2F0ZXMgcHJlZXhpc3RpbmcgdmFsdWVzLlxuXG5cdFx0XHRJbnN0ZWFkIG9mIGxvb2tpbmcgdXAgYW5kIGNoZWNraW5nIGVhY2ggaW5zZXJ0IHZhbHVlLFxuXHRcdFx0d2UgaW5zdGVhZCBpbnNlcnQgZXZlcnl0aGluZyBhdCB0aGUgZW5kIG9mIHRoZSBhcnJheSxcblx0XHRcdGFuZCByZW1vdmUgZHVwbGljYXRlcyBvbmx5IGFmdGVyIHdlIGhhdmUgc29ydGVkLlxuXHRcdCovXG5cdFx0bGV0IGFueV9pbnNlcnRzID0gaW5zZXJ0X2xpc3QubGVuZ3RoID4gMDtcblx0XHRpZiAoYW55X2luc2VydHMpIHtcblx0XHRcdGNvbmNhdF9pbl9wbGFjZSh0aGlzLl9hcnJheSwgaW5zZXJ0X2xpc3QpO1xuXHRcdH1cblxuXHRcdC8qXG5cdFx0XHRzb3J0XG5cdFx0XHR0aGlzIHB1c2hlcyBhbnkgdW5kZWZpbmVkIHZhbHVlcyB0byB0aGUgZW5kIFxuXHRcdCovXG5cdFx0aWYgKGFueV9yZW1vdmVzIHx8IGFueV9pbnNlcnRzKSB7XG5cdFx0XHR0aGlzLl9hcnJheS5zb3J0KGVuZHBvaW50LmNtcCk7XG5cdFx0fVxuXG5cdFx0Lypcblx0XHRcdHJlbW92ZSB1bmRlZmluZWQgXG5cdFx0XHRhbGwgdW5kZWZpbmVkIHZhbHVlcyBhcmUgcHVzaGVkIHRvIHRoZSBlbmRcblx0XHQqL1xuXHRcdGlmIChhbnlfcmVtb3Zlcykge1xuXHRcdFx0dGhpcy5fYXJyYXkubGVuZ3RoIC09IHJlbW92ZV9pZHhfbGlzdC5sZW5ndGg7XG5cdFx0fVxuXG5cdFx0Lypcblx0XHRcdHJlbW92ZSBkdXBsaWNhdGVzIGZyb20gc29ydGVkIGFycmF5XG5cdFx0XHQtIGFzc3VtaW5nIHRoZXJlIGFyZSBnb2luZyB0byBiZSBmZXcgZHVwbGljYXRlcyxcblx0XHRcdCAgaXQgaXMgb2sgdG8gcmVtb3ZlIHRoZW0gb25lIGJ5IG9uZVxuXG5cdFx0Ki9cblx0XHRpZiAoYW55X2luc2VydHMpIHtcblx0XHRcdHJlbW92ZV9kdXBsaWNhdGVzKHRoaXMuX2FycmF5KTtcblx0XHR9XG5cdH1cblxuXHQvKlxuXHRcdGdldCBlbGVtZW50IGJ5IGluZGV4XG5cdCovXG5cdGdldF9ieV9pbmRleChpZHgpIHtcblx0XHRpZiAoaWR4ID4gLTEgJiYgaWR4IDwgdGhpcy5fYXJyYXkubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fYXJyYXlbaWR4XTtcblx0XHR9XG5cdH1cblxuXHQvKlxuXHRcdGxvb2t1cCB2YWx1ZXMgd2l0aGluIGludGVydmFsXG5cdCovXG5cdGxvb2t1cChpdHYpIHtcblx0XHRpZiAoaXR2ID09IHVuZGVmaW5lZCkge1xuXHRcdFx0aXR2ID0gW251bGwsIG51bGwsIHRydWUsIHRydWVdO1xuXHRcdH1cblx0XHRsZXQgW2VwXzAsIGVwXzFdID0gZW5kcG9pbnQuZnJvbV9pbnRlcnZhbChpdHYpO1xuXHRcdGxldCBpZHhfMCA9IHRoaXMuZ2VJbmRleE9mKGVwXzApO1xuXHRcdGxldCBpZHhfMSA9IHRoaXMubGVJbmRleE9mKGVwXzEpO1xuXHRcdGlmIChpZHhfMCA9PSAtMSB8fCBpZHhfMSA9PSAtMSkge1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fYXJyYXkuc2xpY2UoaWR4XzAsIGlkeF8xKzEpO1xuXHRcdH1cblx0fVxuXG5cdGx0IChvZmZzZXQpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRfYnlfaW5kZXgodGhpcy5sdEluZGV4T2Yob2Zmc2V0KSk7XG5cdH1cblx0bGUgKG9mZnNldCkge1xuXHRcdHJldHVybiB0aGlzLmdldF9ieV9pbmRleCh0aGlzLmxlSW5kZXhPZihvZmZzZXQpKTtcblx0fVxuXHRnZXQgKG9mZnNldCkge1xuXHRcdGxldCBbZm91bmQsIGlkeF0gPSB0aGlzLmluZGV4T2Yob2Zmc2V0KTtcblx0XHRpZiAoZm91bmQpIHtcblx0XHRcdHJldHVybiB0aGlzLl9hcnJheVtpZHhdO1xuXHRcdH0gXG5cdH1cblx0Z3QgKG9mZnNldCkge1xuXHRcdHJldHVybiB0aGlzLmdldF9ieV9pbmRleCh0aGlzLmd0SW5kZXhPZihvZmZzZXQpKTtcblx0fVxuXHRnZSAob2Zmc2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0X2J5X2luZGV4KHRoaXMuZ2VJbmRleE9mKG9mZnNldCkpO1xuXHR9XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHRVVElMU1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKlxuXHRDb25jYXRpbmF0ZSB0d28gYXJyYXlzIGJ5IGFwcGVuZGluZyB0aGUgc2Vjb25kIGFycmF5IHRvIHRoZSBmaXJzdCBhcnJheS4gXG4qL1xuXG5mdW5jdGlvbiBjb25jYXRfaW5fcGxhY2UoZmlyc3RfYXJyLCBzZWNvbmRfYXJyKSB7XG5cdGNvbnN0IGZpcnN0X2Fycl9sZW5ndGggPSBmaXJzdF9hcnIubGVuZ3RoO1xuXHRjb25zdCBzZWNvbmRfYXJyX2xlbmd0aCA9IHNlY29uZF9hcnIubGVuZ3RoO1xuICBcdGZpcnN0X2Fyci5sZW5ndGggKz0gc2Vjb25kX2Fycl9sZW5ndGg7XG4gIFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzZWNvbmRfYXJyX2xlbmd0aDsgaSsrKSB7XG4gICAgXHRmaXJzdF9hcnJbZmlyc3RfYXJyX2xlbmd0aCArIGldID0gc2Vjb25kX2FycltpXTtcbiAgXHR9XG59XG5cbi8qXG5cdHJlbW92ZSBkdXBsaWNhdGVzIGluIGEgc29ydGVkIGFycmF5XG4qL1xuZnVuY3Rpb24gcmVtb3ZlX2R1cGxpY2F0ZXMoc29ydGVkX2Fycikge1xuXHRsZXQgaSA9IDA7XG5cdHdoaWxlICh0cnVlKSB7XG5cdFx0aWYgKGkgKyAxID49IHNvcnRlZF9hcnIubGVuZ3RoKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0aWYgKGVuZHBvaW50LmVxKHNvcnRlZF9hcnJbaV0sIHNvcnRlZF9hcnJbaSArIDFdKSkge1xuXHRcdFx0c29ydGVkX2Fyci5zcGxpY2UoaSArIDEsIDEpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpICs9IDE7XG5cdFx0fVxuXHR9XG59XG4iLCJpbXBvcnQgeyBlbmRwb2ludCB9IGZyb20gXCIuL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleEJhc2UsIG5lYXJieV9mcm9tIH0gZnJvbSBcIi4vbmVhcmJ5X2Jhc2UuanNcIjtcbmltcG9ydCB7IFNvcnRlZEFycmF5IH0gZnJvbSBcIi4vdXRpbC9zb3J0ZWRhcnJheS5qc1wiO1xuaW1wb3J0IHsgaXNfY29sbGVjdGlvbl9wcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyX2NvbGxlY3Rpb24uanNcIjtcbmltcG9ydCB7IGlzX3ZhcmlhYmxlX3Byb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJfdmFyaWFibGUuanNcIjtcblxuY29uc3Qge0xPV19DTE9TRUQsIExPV19PUEVOLCBISUdIX0NMT1NFRCwgSElHSF9PUEVOfSA9IGVuZHBvaW50LnR5cGVzO1xuY29uc3QgRVBfVFlQRVMgPSBbTE9XX0NMT1NFRCwgTE9XX09QRU4sIEhJR0hfQ0xPU0VELCBISUdIX09QRU5dO1xuXG5cbi8vIFNldCBvZiB1bmlxdWUgW3YsIHRdIGVuZHBvaW50c1xuY2xhc3MgRW5kcG9pbnRTZXQge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLl9tYXAgPSBuZXcgTWFwKFtcblx0XHRcdFtMT1dfQ0xPU0VELCBuZXcgU2V0KCldLFxuXHRcdFx0W0xPV19PUEVOLCBuZXcgU2V0KCldLCBcblx0XHRcdFtISUdIX0NMT1NFRCwgbmV3IFNldCgpXSwgXG5cdFx0XHRbSElHSF9PUEVOLCBuZXcgU2V0KCldXG5cdFx0XSk7XG5cdH1cblx0YWRkKGVwKSB7XG5cdFx0Y29uc3QgW3ZhbHVlLCB0eXBlXSA9IGVwO1xuXHRcdHJldHVybiB0aGlzLl9tYXAuZ2V0KHR5cGUpLmFkZCh2YWx1ZSk7XG5cdH1cblx0aGFzIChlcCkge1xuXHRcdGNvbnN0IFt2YWx1ZSwgdHlwZV0gPSBlcDtcblx0XHRyZXR1cm4gdGhpcy5fbWFwLmdldCh0eXBlKS5oYXModmFsdWUpO1xuXHR9XG5cdGdldChlcCkge1xuXHRcdGNvbnN0IFt2YWx1ZSwgdHlwZV0gPSBlcDtcblx0XHRyZXR1cm4gdGhpcy5fbWFwLmdldCh0eXBlKS5nZXQodmFsdWUpO1xuXHR9XG5cblx0bGlzdCgpIHtcblx0XHRjb25zdCBsaXN0cyA9IEVQX1RZUEVTLm1hcCgodHlwZSkgPT4ge1xuXHRcdFx0cmV0dXJuIFsuLi50aGlzLl9tYXAuZ2V0KHR5cGUpLnZhbHVlcygpXVxuXHRcdFx0XHQubWFwKCh2YWx1ZSkgPT4gW3ZhbHVlLCB0eXBlXSk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIFtdLmNvbmNhdCguLi5saXN0cyk7XG5cdH1cbn1cblxuLyoqXG4gKiBJVEVNUyBNQVBcbiAqIFxuICogbWFwIGVuZHBvaW50IC0+IHtcbiAqIFx0bG93OiBbaXRlbXNdLCBcbiAqICBhY3RpdmU6IFtpdGVtc10sIFxuICogIGhpZ2g6W2l0ZW1zXVxuICogfVxuICogXG4gKiBpbiBvcmRlciB0byB1c2UgZW5kcG9pbnQgW3YsdF0gYXMgYSBtYXAga2V5IHdlIGNyZWF0ZSBhIHR3byBsZXZlbFxuICogbWFwIC0gdXNpbmcgdCBhcyB0aGUgZmlyc3QgdmFyaWFibGUuIFxuICogXG4gKi9cblxuXG5jb25zdCBMT1cgPSBcImxvd1wiO1xuY29uc3QgQUNUSVZFID0gXCJhY3RpdmVcIjtcbmNvbnN0IEhJR0ggPSBcImhpZ2hcIjtcblxuXG5jbGFzcyBJdGVtc01hcCB7XG5cblx0Y29uc3RydWN0b3IgKCkge1xuXHRcdC8vIG1hcCBlbmRwb2ludCAtPiB7bG93OiBbaXRlbXNdLCBhY3RpdmU6IFtpdGVtc10sIGhpZ2g6W2l0ZW1zXX1cblx0XHR0aGlzLl9tYXAgPSBuZXcgTWFwKFtcblx0XHRcdFtMT1dfQ0xPU0VELCBuZXcgTWFwKCldLFxuXHRcdFx0W0xPV19PUEVOLCBuZXcgTWFwKCldLCBcblx0XHRcdFtISUdIX0NMT1NFRCwgbmV3IE1hcCgpXSwgXG5cdFx0XHRbSElHSF9PUEVOLCBuZXcgTWFwKCldXG5cdFx0XSk7XG5cdH1cblxuXHRnZXRfaXRlbXNfYnlfcm9sZSAoZXAsIHJvbGUpIHtcblx0XHRjb25zdCBbdmFsdWUsIHR5cGVdID0gZXA7XG5cdFx0Y29uc3QgZW50cnkgPSB0aGlzLl9tYXAuZ2V0KHR5cGUpLmdldCh2YWx1ZSk7XG5cdFx0cmV0dXJuIChlbnRyeSAhPSB1bmRlZmluZWQpID8gZW50cnlbcm9sZV0gOiBbXTtcblx0fVxuXG5cdC8qXG5cdFx0cmVnaXN0ZXIgaXRlbSB3aXRoIGVuZHBvaW50IChpZGVtcG90ZW50KVxuXHRcdHJldHVybiB0cnVlIGlmIHRoaXMgd2FzIHRoZSBmaXJzdCBMT1cgb3IgSElHSCBcblx0ICovXG5cdHJlZ2lzdGVyKGVwLCBpdGVtLCByb2xlKSB7XG5cdFx0Y29uc3QgW3ZhbHVlLCB0eXBlXSA9IGVwO1xuXHRcdGNvbnN0IHR5cGVfbWFwID0gdGhpcy5fbWFwLmdldCh0eXBlKTtcblx0XHRpZiAoIXR5cGVfbWFwLmhhcyh2YWx1ZSkpIHtcblx0XHRcdHR5cGVfbWFwLnNldCh2YWx1ZSwge2xvdzogW10sIGFjdGl2ZTpbXSwgaGlnaDpbXX0pO1xuXHRcdH1cblx0XHRjb25zdCBlbnRyeSA9IHR5cGVfbWFwLmdldCh2YWx1ZSk7XG5cdFx0Y29uc3Qgd2FzX2VtcHR5ID0gZW50cnlbTE9XXS5sZW5ndGggKyBlbnRyeVtISUdIXS5sZW5ndGggPT0gMDtcblx0XHRsZXQgaWR4ID0gZW50cnlbcm9sZV0uZmluZEluZGV4KChfaXRlbSkgPT4ge1xuXHRcdFx0cmV0dXJuIF9pdGVtLmlkID09IGl0ZW0uaWQ7XG5cdFx0fSk7XG5cdFx0aWYgKGlkeCA9PSAtMSkge1xuXHRcdFx0ZW50cnlbcm9sZV0ucHVzaChpdGVtKTtcblx0XHR9XG5cdFx0Y29uc3QgaXNfZW1wdHkgPSBlbnRyeVtMT1ddLmxlbmd0aCArIGVudHJ5W0hJR0hdLmxlbmd0aCA9PSAwO1xuXHRcdHJldHVybiB3YXNfZW1wdHkgJiYgIWlzX2VtcHR5O1xuXHR9XG5cblx0Lypcblx0XHR1bnJlZ2lzdGVyIGl0ZW0gd2l0aCBlbmRwb2ludCAoaW5kZXBlbmRlbnQgb2Ygcm9sZSlcblx0XHRyZXR1cm4gdHJ1ZSBpZiB0aGlzIHJlbW92ZWQgbGFzdCBMT1cgb3IgSElHSFxuXHQgKi9cblx0dW5yZWdpc3RlcihlcCwgaXRlbSkge1xuXHRcdGNvbnN0IFt2YWx1ZSwgdHlwZV0gPSBlcDtcblx0XHRjb25zdCB0eXBlX21hcCA9IHRoaXMuX21hcC5nZXQodHlwZSk7XG5cdFx0Y29uc3QgZW50cnkgPSB0eXBlX21hcC5nZXQodmFsdWUpO1xuXHRcdGlmIChlbnRyeSAhPSB1bmRlZmluZWQpIHtcblx0XHRcdGNvbnN0IHdhc19lbXB0eSA9IGVudHJ5W0xPV10ubGVuZ3RoICsgZW50cnlbSElHSF0ubGVuZ3RoID09IDA7XG5cdFx0XHQvLyByZW1vdmUgYWxsIG1lbnRpb25lcyBvZiBpdGVtXG5cdFx0XHRmb3IgKGNvbnN0IHJvbGUgb2YgW0xPVywgQUNUSVZFLCBISUdIXSkge1xuXHRcdFx0XHRsZXQgaWR4ID0gZW50cnlbcm9sZV0uZmluZEluZGV4KChfaXRlbSkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBfaXRlbS5pZCA9PSBpdGVtLmlkO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGlkeCA+IC0xKSB7XG5cdFx0XHRcdFx0ZW50cnlbcm9sZV0uc3BsaWNlKGlkeCwgMSk7XG5cdFx0XHRcdH1cdFxuXHRcdFx0fVxuXHRcdFx0Y29uc3QgaXNfZW1wdHkgPSBlbnRyeVtMT1ddLmxlbmd0aCArIGVudHJ5W0hJR0hdLmxlbmd0aCA9PSAwO1xuXHRcdFx0aWYgKCF3YXNfZW1wdHkgJiYgaXNfZW1wdHkpIHtcblx0XHRcdFx0Ly8gY2xlYW4gdXAgZW50cnlcblx0XHRcdFx0dHlwZV9tYXAuZGVsZXRlKHZhbHVlKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufVxuXG5cbi8qKlxuICogTmVhcmJ5SW5kZXhcbiAqIFxuICogTmVhcmJ5SW5kZXggZm9yIENvbGxlY3Rpb25Qcm92aWRlciBvciBWYXJpYWJsZVByb3ZpZGVyXG4gKi9cblxuZXhwb3J0IGNsYXNzIE5lYXJieUluZGV4IGV4dGVuZHMgTmVhcmJ5SW5kZXhCYXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgc3VwZXIoKTtcdFx0XG5cblx0XHRpZiAoXG5cdFx0XHQhaXNfY29sbGVjdGlvbl9wcm92aWRlcihzdGF0ZVByb3ZpZGVyKSAmJlxuXHRcdFx0IWlzX3ZhcmlhYmxlX3Byb3ZpZGVyKHN0YXRlUHJvdmlkZXIpXG5cdFx0KSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYHN0YXRlUHJvdmlkZXIgbXVzdCBiZSBjb2xsZWN0aW9uUHJvdmlkZXIgb3IgdmFyaWFibGVQcm92aWRlciAke3N0YXRlUHJvdmlkZXJ9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3AgPSBzdGF0ZVByb3ZpZGVyO1xuXHRcdHRoaXMuX2luaXRpYWxpc2UoKTtcblx0XHR0aGlzLnJlZnJlc2goKTtcblx0fVxuXG4gICAgZ2V0IHNyYyAoKSB7cmV0dXJuIHRoaXMuX3NwO31cblxuXG5cdF9pbml0aWFsaXNlKCkge1xuXHRcdC8vIHJlZ2lzdGVyIGl0ZW1zIHdpdGggZW5kcG9pbnRzXG5cdFx0dGhpcy5faXRlbXNtYXAgPSBuZXcgSXRlbXNNYXAoKTtcblx0XHQvLyBzb3J0ZWQgaW5kZXhcblx0XHR0aGlzLl9lbmRwb2ludHMgPSBuZXcgU29ydGVkQXJyYXkoKTtcblx0XHQvLyBzd2lwZSBpbmRleFxuXHRcdHRoaXMuX2luZGV4ID0gW107XG5cdH1cblxuXG5cdHJlZnJlc2goZGlmZnMpIHtcblxuXHRcdGNvbnN0IHJlbW92ZV9lbmRwb2ludHMgPSBuZXcgRW5kcG9pbnRTZXQoKTtcblx0XHRjb25zdCBpbnNlcnRfZW5kcG9pbnRzID0gbmV3IEVuZHBvaW50U2V0KCk7XG5cblx0XHRsZXQgaW5zZXJ0X2l0ZW1zID0gW107XG5cdFx0bGV0IHJlbW92ZV9pdGVtcyA9IFtdO1xuXG5cdFx0aWYgKGRpZmZzID09IHVuZGVmaW5lZCkge1xuXHRcdFx0aW5zZXJ0X2l0ZW1zID0gdGhpcy5zcmMuZ2V0KCkgfHwgW107XG5cdFx0XHQvLyBjbGVhciBhbGwgc3RhdGVcblx0XHRcdHRoaXMuX2luaXRpYWxpc2UoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gY29sbGVjdCBpbnNlcnQgaXRlbXMgYW5kIHJlbW92ZSBpdGVtc1xuXHRcdFx0Zm9yIChjb25zdCBkaWZmIG9mIGRpZmZzKSB7XG5cdFx0XHRcdGlmIChkaWZmLm5ldyAhPSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRpbnNlcnRfaXRlbXMucHVzaChkaWZmLm5ldyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGRpZmYub2xkICE9IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJlbW92ZV9pdGVtcy5wdXNoKGRpZmYub2xkKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qXG5cdFx0XHR1bnJlZ2lzdGVyIHJlbW92ZSBpdGVtcyBhY3Jvc3MgYWxsIGVuZHBvaW50cyBcblx0XHRcdHdoZXJlIHRoZXkgd2VyZSByZWdpc3RlcmVkIChMT1csIEFDVElWRSwgSElHSCkgXG5cdFx0Ki9cblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgcmVtb3ZlX2l0ZW1zKSB7XHRcdFx0XG5cdFx0XHRmb3IgKGNvbnN0IGVwIG9mIHRoaXMuX2VuZHBvaW50cy5sb29rdXAoaXRlbS5pdHYpKSB7XG5cdFx0XHRcdC8vIFRPRE86IGNoZWNrIGlmIHRoaXMgaXMgY29ycmVjdFxuXHRcdFx0XHRjb25zdCBiZWNhbWVfZW1wdHkgPSB0aGlzLl9pdGVtc21hcC51bnJlZ2lzdGVyKGVwLCBpdGVtKTtcblx0XHRcdFx0aWYgKGJlY2FtZV9lbXB0eSkgcmVtb3ZlX2VuZHBvaW50cy5hZGQoZXApO1xuXHRcdFx0fVx0XG5cdFx0fVxuXG5cdFx0Lypcblx0XHRcdHJlZ2lzdGVyIG5ldyBpdGVtcyBhY3Jvc3MgYWxsIGVuZHBvaW50cyBcblx0XHRcdHdoZXJlIHRoZXkgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgKExPVywgSElHSCkgXG5cdFx0Ki9cblx0XHRsZXQgYmVjYW1lX25vbmVtcHR5O1xuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBpbnNlcnRfaXRlbXMpIHtcblx0XHRcdGNvbnN0IFtsb3csIGhpZ2hdID0gZW5kcG9pbnQuZnJvbV9pbnRlcnZhbChpdGVtLml0dik7XG5cdFx0XHRiZWNhbWVfbm9uZW1wdHkgPSB0aGlzLl9pdGVtc21hcC5yZWdpc3Rlcihsb3csIGl0ZW0sIExPVyk7XG5cdFx0XHRpZiAoYmVjYW1lX25vbmVtcHR5KSBpbnNlcnRfZW5kcG9pbnRzLmFkZChsb3cpO1xuXHRcdFx0YmVjYW1lX25vbmVtcHR5ID0gdGhpcy5faXRlbXNtYXAucmVnaXN0ZXIoaGlnaCwgaXRlbSwgSElHSCk7XG5cdFx0XHRpZiAoYmVjYW1lX25vbmVtcHR5KSBpbnNlcnRfZW5kcG9pbnRzLmFkZChoaWdoKTtcblx0XHR9XG5cblx0XHQvKlxuXHRcdFx0cmVmcmVzaCBzb3J0ZWQgZW5kcG9pbnRzXG5cdFx0XHRwb3NzaWJsZSB0aGF0IGFuIGVuZHBvaW50IGlzIHByZXNlbnQgaW4gYm90aCBsaXN0c1xuXHRcdFx0dGhpcyBpcyBwcmVzdW1hYmx5IG5vdCBhIHByb2JsZW0gd2l0aCBTb3J0ZWRBcnJheS5cblx0XHQqL1xuXHRcdHRoaXMuX2VuZHBvaW50cy51cGRhdGUoXG5cdFx0XHRyZW1vdmVfZW5kcG9pbnRzLmxpc3QoKSwgXG5cdFx0XHRpbnNlcnRfZW5kcG9pbnRzLmxpc3QoKVxuXHRcdCk7XG5cblx0XHQvKlxuXHRcdFx0c3dpcGUgb3ZlciB0byBlbnN1cmUgdGhhdCBhbGwgaXRlbXMgYXJlIGFjdGl2YXRlXG5cdFx0Ki9cblx0XHRjb25zdCBhY3RpdmVTZXQgPSBuZXcgU2V0KCk7XG5cdFx0Zm9yIChjb25zdCBlcCBvZiB0aGlzLl9lbmRwb2ludHMuYXJyYXkpIHtcdFxuXHRcdFx0Ly8gQWRkIGl0ZW1zIHdpdGggZXAgYXMgbG93IHBvaW50XG5cdFx0XHRmb3IgKGxldCBpdGVtIG9mIHRoaXMuX2l0ZW1zbWFwLmdldF9pdGVtc19ieV9yb2xlKGVwLCBMT1cpKSB7XG5cdFx0XHRcdGFjdGl2ZVNldC5hZGQoaXRlbSk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gYWN0aXZhdGUgdXNpbmcgYWN0aXZlU2V0XG5cdFx0XHRmb3IgKGxldCBpdGVtIG9mIGFjdGl2ZVNldCkge1xuXHRcdFx0XHR0aGlzLl9pdGVtc21hcC5yZWdpc3RlcihlcCwgaXRlbSwgQUNUSVZFKTtcblx0XHRcdH1cblx0XHRcdC8vIFJlbW92ZSBpdGVtcyB3aXRoIHAxIGFzIGhpZ2ggcG9pbnRcblx0XHRcdGZvciAobGV0IGl0ZW0gb2YgdGhpcy5faXRlbXNtYXAuZ2V0X2l0ZW1zX2J5X3JvbGUoZXAsIEhJR0gpKSB7XG5cdFx0XHRcdGFjdGl2ZVNldC5kZWxldGUoaXRlbSk7XG5cdFx0XHR9O1x0XG5cdFx0fVxuXHR9XG5cblx0X2NvdmVycyAob2Zmc2V0KSB7XG5cdFx0Y29uc3QgZXAgPSBlbmRwb2ludC5mcm9tX2lucHV0KG9mZnNldCk7XG5cdFx0Y29uc3QgZXAxID0gdGhpcy5fZW5kcG9pbnRzLmxlKGVwKSB8fCBlbmRwb2ludC5ORUdfSU5GO1xuXHRcdGNvbnN0IGVwMiA9IHRoaXMuX2VuZHBvaW50cy5nZShlcCkgfHwgZW5kcG9pbnQuUE9TX0lORjtcblx0XHRpZiAoZW5kcG9pbnQuZXEoZXAxLCBlcDIpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5faXRlbXNtYXAuZ2V0X2l0ZW1zX2J5X3JvbGUoZXAxLCBBQ1RJVkUpO1x0XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGdldCBpdGVtcyBmb3IgYm90aCBlbmRwb2ludHNcblx0XHRcdGNvbnN0IGl0ZW1zMSA9IHRoaXMuX2l0ZW1zbWFwLmdldF9pdGVtc19ieV9yb2xlKGVwMSwgQUNUSVZFKTtcblx0XHRcdGNvbnN0IGl0ZW1zMiA9IHRoaXMuX2l0ZW1zbWFwLmdldF9pdGVtc19ieV9yb2xlKGVwMiwgQUNUSVZFKTtcblx0XHRcdC8vIHJldHVybiBhbGwgaXRlbXMgdGhhdCBhcmUgYWN0aXZlIGluIGJvdGggZW5kcG9pbnRzXG5cdFx0XHRjb25zdCBpZFNldCA9IG5ldyBTZXQoaXRlbXMxLm1hcChpdGVtID0+IGl0ZW0uaWQpKTtcblx0XHRcdHJldHVybiBpdGVtczIuZmlsdGVyKGl0ZW0gPT4gaWRTZXQuaGFzKGl0ZW0uaWQpKTtcblx0XHR9XG5cdH1cblxuICAgIC8qXG5cdFx0bmVhcmJ5IChvZmZzZXQpXG4gICAgKi9cblx0bmVhcmJ5KG9mZnNldCkge1xuXHRcdGNvbnN0IGVwID0gZW5kcG9pbnQuZnJvbV9pbnB1dChvZmZzZXQpO1xuXG5cdFx0Ly8gY2VudGVyXG5cdFx0bGV0IGNlbnRlciA9IHRoaXMuX2NvdmVycyhlcClcblx0XHRjb25zdCBjZW50ZXJfaGlnaF9saXN0ID0gW107XG5cdFx0Y29uc3QgY2VudGVyX2xvd19saXN0ID0gW107XG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGNlbnRlcikge1xuXHRcdFx0Y29uc3QgW2xvdywgaGlnaF0gPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKGl0ZW0uaXR2KTtcblx0XHRcdGNlbnRlcl9oaWdoX2xpc3QucHVzaChoaWdoKTtcblx0XHRcdGNlbnRlcl9sb3dfbGlzdC5wdXNoKGxvdyk7ICAgIFxuXHRcdH1cblxuXHRcdC8vIHByZXYgaGlnaFxuXHRcdGxldCBwcmV2X2hpZ2ggPSBlcDtcblx0XHRsZXQgaXRlbXM7XG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdHByZXZfaGlnaCA9IHRoaXMuX2VuZHBvaW50cy5sdChwcmV2X2hpZ2gpIHx8IGVuZHBvaW50Lk5FR19JTkY7XG5cdFx0XHRpZiAocHJldl9oaWdoWzBdID09IG51bGwpIHtcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHRcdGl0ZW1zID0gdGhpcy5faXRlbXNtYXAuZ2V0X2l0ZW1zX2J5X3JvbGUocHJldl9oaWdoLCBISUdIKTtcblx0XHRcdGlmIChpdGVtcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGJyZWFrXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gbmV4dCBsb3dcblx0XHRsZXQgbmV4dF9sb3cgPSBlcDtcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0bmV4dF9sb3cgPSB0aGlzLl9lbmRwb2ludHMuZ3QobmV4dF9sb3cpIHx8IGVuZHBvaW50LlBPU19JTkZcblx0XHRcdGlmIChuZXh0X2xvd1swXSA9PSBudWxsKSB7XG5cdFx0XHRcdGJyZWFrXG5cdFx0XHR9XG5cdFx0XHRpdGVtcyA9IHRoaXMuX2l0ZW1zbWFwLmdldF9pdGVtc19ieV9yb2xlKG5leHRfbG93LCBMT1cpO1xuXHRcdFx0aWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbmVhcmJ5X2Zyb20oXG5cdFx0XHRwcmV2X2hpZ2gsIFxuXHRcdFx0Y2VudGVyX2xvd19saXN0LCBcblx0XHRcdGNlbnRlcixcblx0XHRcdGNlbnRlcl9oaWdoX2xpc3QsXG5cdFx0XHRuZXh0X2xvd1xuXHRcdCk7XG5cdH1cbn0iLCJpbXBvcnQgeyBpbnRlcnZhbCB9IGZyb20gXCIuL2ludGVydmFscy5qc1wiO1xuaW1wb3J0IHsgbW90aW9uX3V0aWxzIH0gZnJvbSBcIi4vY29tbW9uLmpzXCI7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuQkFTRSBTRUdNRU5UXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKlxuXHRBYnN0cmFjdCBCYXNlIENsYXNzIGZvciBTZWdtZW50c1xuXG4gICAgY29uc3RydWN0b3IoaW50ZXJ2YWwpXG5cbiAgICAtIGludGVydmFsOiBpbnRlcnZhbCBvZiB2YWxpZGl0eSBvZiBzZWdtZW50XG4gICAgLSBkeW5hbWljOiB0cnVlIGlmIHNlZ21lbnQgaXMgZHluYW1pY1xuICAgIC0gdmFsdWUob2Zmc2V0KTogdmFsdWUgb2Ygc2VnbWVudCBhdCBvZmZzZXRcbiAgICAtIHF1ZXJ5KG9mZnNldCk6IHN0YXRlIG9mIHNlZ21lbnQgYXQgb2Zmc2V0XG4qL1xuXG5leHBvcnQgY2xhc3MgQmFzZVNlZ21lbnQge1xuXG5cdGNvbnN0cnVjdG9yKGl0dikge1xuXHRcdHRoaXMuX2l0diA9IGl0djtcblx0fVxuXG5cdGdldCBpdHYoKSB7cmV0dXJuIHRoaXMuX2l0djt9XG5cbiAgICAvKiogXG4gICAgICogaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3NcbiAgICAgKiByZXR1cm5zIHt2YWx1ZSwgZHluYW1pY307XG4gICAgKi9cbiAgICBzdGF0ZShvZmZzZXQpIHtcbiAgICBcdHRocm93IG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjb252ZW5pZW5jZSBmdW5jdGlvbiByZXR1cm5pbmcgdGhlIHN0YXRlIG9mIHRoZSBzZWdtZW50XG4gICAgICogQHBhcmFtIHsqfSBvZmZzZXQgXG4gICAgICogQHJldHVybnMgXG4gICAgICovXG4gICAgcXVlcnkob2Zmc2V0KSB7XG4gICAgICAgIGlmIChpbnRlcnZhbC5jb3ZlcnNfcG9pbnQodGhpcy5faXR2LCBvZmZzZXQpKSB7XG4gICAgICAgICAgICByZXR1cm4gey4uLnRoaXMuc3RhdGUob2Zmc2V0KSwgb2Zmc2V0fTtcbiAgICAgICAgfSBcbiAgICAgICAgcmV0dXJuIHt2YWx1ZTogdW5kZWZpbmVkLCBkeW5hbWljOmZhbHNlLCBvZmZzZXR9O1xuICAgIH1cbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgU1RBVElDIFNFR01FTlRcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZXhwb3J0IGNsYXNzIFN0YXRpY1NlZ21lbnQgZXh0ZW5kcyBCYXNlU2VnbWVudCB7XG5cblx0Y29uc3RydWN0b3IoaXR2LCBkYXRhKSB7XG4gICAgICAgIHN1cGVyKGl0dik7XG5cdFx0dGhpcy5fdmFsdWUgPSBkYXRhO1xuXHR9XG5cblx0c3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB7dmFsdWU6IHRoaXMuX3ZhbHVlLCBkeW5hbWljOmZhbHNlfVxuXHR9XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgTU9USU9OIFNFR01FTlRcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZXhwb3J0IGNsYXNzIE1vdGlvblNlZ21lbnQgZXh0ZW5kcyBCYXNlU2VnbWVudCB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoaXR2LCBkYXRhKSB7XG4gICAgICAgIHN1cGVyKGl0dik7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOnAwPTAsIFxuICAgICAgICAgICAgdmVsb2NpdHk6djA9MCwgXG4gICAgICAgICAgICBhY2NlbGVyYXRpb246YTA9MCwgXG4gICAgICAgICAgICB0aW1lc3RhbXA6dDA9MFxuICAgICAgICB9ID0gZGF0YTtcbiAgICAgICAgdGhpcy5fdmVjdG9yID0gW3AwLHYwLGEwLHQwXTtcbiAgICB9XG5cbiAgICBzdGF0ZShvZmZzZXQpIHtcbiAgICAgICAgY29uc3QgW3AsdixhLHRdID0gbW90aW9uX3V0aWxzLmNhbGN1bGF0ZSh0aGlzLl92ZWN0b3IsIG9mZnNldCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyBwb3NpdGlvbjogcCxcbiAgICAgICAgICAgIC8vIHZlbG9jaXR5OiB2LFxuICAgICAgICAgICAgLy8gYWNjZWxlcmF0aW9uOiBhLFxuICAgICAgICAgICAgLy8gdGltZXN0YW1wOiB0LFxuICAgICAgICAgICAgdmFsdWU6IHAsXG4gICAgICAgICAgICBkeW5hbWljOiAodiAhPSAwIHx8IGEgIT0gMCApXG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgVFJBTlNJVElPTiBTRUdNRU5UXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qXG4gICAgU3VwcG9ydGVkIGVhc2luZyBmdW5jdGlvbnNcbiAgICBcImVhc2UtaW5cIjpcbiAgICBcImVhc2Utb3V0XCI6XG4gICAgXCJlYXNlLWluLW91dFwiXG4qL1xuXG5mdW5jdGlvbiBlYXNlaW4gKHRzKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KHRzLDIpOyAgXG59XG5mdW5jdGlvbiBlYXNlb3V0ICh0cykge1xuICAgIHJldHVybiAxIC0gZWFzZWluKDEgLSB0cyk7XG59XG5mdW5jdGlvbiBlYXNlaW5vdXQgKHRzKSB7XG4gICAgaWYgKHRzIDwgLjUpIHtcbiAgICAgICAgcmV0dXJuIGVhc2VpbigyICogdHMpIC8gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKDIgLSBlYXNlaW4oMiAqICgxIC0gdHMpKSkgLyAyO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRyYW5zaXRpb25TZWdtZW50IGV4dGVuZHMgQmFzZVNlZ21lbnQge1xuXG5cdGNvbnN0cnVjdG9yKGl0diwgZGF0YSkge1xuXHRcdHN1cGVyKGl0dik7XG4gICAgICAgIGxldCB7djAsIHYxLCBlYXNpbmd9ID0gZGF0YTtcbiAgICAgICAgbGV0IFt0MCwgdDFdID0gdGhpcy5faXR2LnNsaWNlKDAsMik7XG5cbiAgICAgICAgLy8gY3JlYXRlIHRoZSB0cmFuc2l0aW9uIGZ1bmN0aW9uXG4gICAgICAgIHRoaXMuX2R5bmFtaWMgPSB2MS12MCAhPSAwO1xuICAgICAgICB0aGlzLl90cmFucyA9IGZ1bmN0aW9uICh0cykge1xuICAgICAgICAgICAgLy8gY29udmVydCB0cyB0byBbdDAsdDFdLXNwYWNlXG4gICAgICAgICAgICAvLyAtIHNoaWZ0IGZyb20gW3QwLHQxXS1zcGFjZSB0byBbMCwodDEtdDApXS1zcGFjZVxuICAgICAgICAgICAgLy8gLSBzY2FsZSBmcm9tIFswLCh0MS10MCldLXNwYWNlIHRvIFswLDFdLXNwYWNlXG4gICAgICAgICAgICB0cyA9IHRzIC0gdDA7XG4gICAgICAgICAgICB0cyA9IHRzL3BhcnNlRmxvYXQodDEtdDApO1xuICAgICAgICAgICAgLy8gZWFzaW5nIGZ1bmN0aW9ucyBzdHJldGNoZXMgb3IgY29tcHJlc3NlcyB0aGUgdGltZSBzY2FsZSBcbiAgICAgICAgICAgIGlmIChlYXNpbmcgPT0gXCJlYXNlLWluXCIpIHtcbiAgICAgICAgICAgICAgICB0cyA9IGVhc2Vpbih0cyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVhc2luZyA9PSBcImVhc2Utb3V0XCIpIHtcbiAgICAgICAgICAgICAgICB0cyA9IGVhc2VvdXQodHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlYXNpbmcgPT0gXCJlYXNlLWluLW91dFwiKSB7XG4gICAgICAgICAgICAgICAgdHMgPSBlYXNlaW5vdXQodHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbGluZWFyIHRyYW5zaXRpb24gZnJvbSB2MCB0byB2MSwgZm9yIHRpbWUgdmFsdWVzIFswLDFdXG4gICAgICAgICAgICB0cyA9IE1hdGgubWF4KHRzLCAwKTtcbiAgICAgICAgICAgIHRzID0gTWF0aC5taW4odHMsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHYwICsgKHYxLXYwKSp0cztcbiAgICAgICAgfVxuXHR9XG5cblx0c3RhdGUob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7dmFsdWU6IHRoaXMuX3RyYW5zKG9mZnNldCksIGR5bmFtaWM6dGhpcy5fZHluYW1pY31cblx0fVxufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgSU5URVJQT0xBVElPTiBTRUdNRU5UXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogRnVuY3Rpb24gdG8gY3JlYXRlIGFuIGludGVycG9sYXRvciBmb3IgbmVhcmVzdCBuZWlnaGJvciBpbnRlcnBvbGF0aW9uIHdpdGhcbiAqIGV4dHJhcG9sYXRpb24gc3VwcG9ydC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0dXBsZXMgLSBBbiBhcnJheSBvZiBbdmFsdWUsIG9mZnNldF0gcGFpcnMsIHdoZXJlIHZhbHVlIGlzIHRoZVxuICogcG9pbnQncyB2YWx1ZSBhbmQgb2Zmc2V0IGlzIHRoZSBjb3JyZXNwb25kaW5nIG9mZnNldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gLSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gb2Zmc2V0IGFuZCByZXR1cm5zIHRoZVxuICogaW50ZXJwb2xhdGVkIG9yIGV4dHJhcG9sYXRlZCB2YWx1ZS5cbiAqL1xuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZSh0dXBsZXMpIHtcblxuICAgIGlmICh0dXBsZXMubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gaW50ZXJwb2xhdG9yICgpIHtyZXR1cm4gdW5kZWZpbmVkO31cbiAgICB9IGVsc2UgaWYgKHR1cGxlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gaW50ZXJwb2xhdG9yICgpIHtyZXR1cm4gdHVwbGVzWzBdWzBdO31cbiAgICB9XG5cbiAgICAvLyBTb3J0IHRoZSB0dXBsZXMgYnkgdGhlaXIgb2Zmc2V0c1xuICAgIGNvbnN0IHNvcnRlZFR1cGxlcyA9IFsuLi50dXBsZXNdLnNvcnQoKGEsIGIpID0+IGFbMV0gLSBiWzFdKTtcbiAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludGVycG9sYXRvcihvZmZzZXQpIHtcbiAgICAgIC8vIEhhbmRsZSBleHRyYXBvbGF0aW9uIGJlZm9yZSB0aGUgZmlyc3QgcG9pbnRcbiAgICAgIGlmIChvZmZzZXQgPD0gc29ydGVkVHVwbGVzWzBdWzFdKSB7XG4gICAgICAgIGNvbnN0IFt2YWx1ZTEsIG9mZnNldDFdID0gc29ydGVkVHVwbGVzWzBdO1xuICAgICAgICBjb25zdCBbdmFsdWUyLCBvZmZzZXQyXSA9IHNvcnRlZFR1cGxlc1sxXTtcbiAgICAgICAgcmV0dXJuIHZhbHVlMSArICgob2Zmc2V0IC0gb2Zmc2V0MSkgKiAodmFsdWUyIC0gdmFsdWUxKSAvIChvZmZzZXQyIC0gb2Zmc2V0MSkpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgZXh0cmFwb2xhdGlvbiBhZnRlciB0aGUgbGFzdCBwb2ludFxuICAgICAgaWYgKG9mZnNldCA+PSBzb3J0ZWRUdXBsZXNbc29ydGVkVHVwbGVzLmxlbmd0aCAtIDFdWzFdKSB7XG4gICAgICAgIGNvbnN0IFt2YWx1ZTEsIG9mZnNldDFdID0gc29ydGVkVHVwbGVzW3NvcnRlZFR1cGxlcy5sZW5ndGggLSAyXTtcbiAgICAgICAgY29uc3QgW3ZhbHVlMiwgb2Zmc2V0Ml0gPSBzb3J0ZWRUdXBsZXNbc29ydGVkVHVwbGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4gdmFsdWUxICsgKChvZmZzZXQgLSBvZmZzZXQxKSAqICh2YWx1ZTIgLSB2YWx1ZTEpIC8gKG9mZnNldDIgLSBvZmZzZXQxKSk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gRmluZCB0aGUgbmVhcmVzdCBwb2ludHMgdG8gdGhlIGxlZnQgYW5kIHJpZ2h0XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZFR1cGxlcy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKG9mZnNldCA+PSBzb3J0ZWRUdXBsZXNbaV1bMV0gJiYgb2Zmc2V0IDw9IHNvcnRlZFR1cGxlc1tpICsgMV1bMV0pIHtcbiAgICAgICAgICBjb25zdCBbdmFsdWUxLCBvZmZzZXQxXSA9IHNvcnRlZFR1cGxlc1tpXTtcbiAgICAgICAgICBjb25zdCBbdmFsdWUyLCBvZmZzZXQyXSA9IHNvcnRlZFR1cGxlc1tpICsgMV07XG4gICAgICAgICAgLy8gTGluZWFyIGludGVycG9sYXRpb24gZm9ybXVsYTogeSA9IHkxICsgKCAoeCAtIHgxKSAqICh5MiAtIHkxKSAvICh4MiAtIHgxKSApXG4gICAgICAgICAgcmV0dXJuIHZhbHVlMSArICgob2Zmc2V0IC0gb2Zmc2V0MSkgKiAodmFsdWUyIC0gdmFsdWUxKSAvIChvZmZzZXQyIC0gb2Zmc2V0MSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgLy8gSW4gY2FzZSB0aGUgb2Zmc2V0IGRvZXMgbm90IGZhbGwgd2l0aGluIGFueSByYW5nZSAoc2hvdWxkIGJlIGNvdmVyZWQgYnkgdGhlIHByZXZpb3VzIGNvbmRpdGlvbnMpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG59XG4gIFxuXG5leHBvcnQgY2xhc3MgSW50ZXJwb2xhdGlvblNlZ21lbnQgZXh0ZW5kcyBCYXNlU2VnbWVudCB7XG5cbiAgICBjb25zdHJ1Y3RvcihpdHYsIHR1cGxlcykge1xuICAgICAgICBzdXBlcihpdHYpO1xuICAgICAgICAvLyBzZXR1cCBpbnRlcnBvbGF0aW9uIGZ1bmN0aW9uXG4gICAgICAgIHRoaXMuX3RyYW5zID0gaW50ZXJwb2xhdGUodHVwbGVzKTtcbiAgICB9XG5cbiAgICBzdGF0ZShvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHt2YWx1ZTogdGhpcy5fdHJhbnMob2Zmc2V0KSwgZHluYW1pYzp0cnVlfTtcbiAgICB9XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIExPQUQgU0VHTUVOVFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5leHBvcnQgZnVuY3Rpb24gbG9hZF9zZWdtZW50KGl0diwgaXRlbSkge1xuICAgIGxldCB7dHlwZT1cInN0YXRpY1wiLCBkYXRhfSA9IGl0ZW07XG4gICAgaWYgKHR5cGUgPT0gXCJzdGF0aWNcIikge1xuICAgICAgICByZXR1cm4gbmV3IFN0YXRpY1NlZ21lbnQoaXR2LCBkYXRhKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJ0cmFuc2l0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2l0aW9uU2VnbWVudChpdHYsIGRhdGEpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImludGVycG9sYXRpb25cIikge1xuICAgICAgICByZXR1cm4gbmV3IEludGVycG9sYXRpb25TZWdtZW50KGl0diwgZGF0YSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwibW90aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNb3Rpb25TZWdtZW50KGl0diwgZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ1bnJlY29nbml6ZWQgc2VnbWVudCB0eXBlXCIsIHR5cGUpO1xuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIHNyY3Byb3AgZnJvbSBcIi4vdXRpbC9hcGlfc3JjcHJvcC5qc1wiO1xuaW1wb3J0IHsgTGF5ZXIgfSBmcm9tIFwiLi9sYXllcl9iYXNlLmpzXCI7XG5pbXBvcnQgeyBpc19jb2xsZWN0aW9uX3Byb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJfY29sbGVjdGlvbi5qc1wiO1xuaW1wb3J0IHsgaXNfdmFyaWFibGVfcHJvdmlkZXJ9IGZyb20gXCIuL3Byb3ZpZGVyX3ZhcmlhYmxlLmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleCB9IGZyb20gXCIuL25lYXJieV9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbG9hZF9zZWdtZW50IH0gZnJvbSBcIi4vdXRpbC9zZWdtZW50cy5qc1wiO1xuaW1wb3J0IHsgdG9TdGF0ZSB9IGZyb20gXCIuL3V0aWwvY29tbW9uLmpzXCI7XG5pbXBvcnQgeyBlbmRwb2ludCwgaW50ZXJ2YWwgfSBmcm9tIFwiLi91dGlsL2ludGVydmFscy5qc1wiO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgSVRFTVMgTEFZRVJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBJdGVtcyBMYXllciBoYXMgYSBzdGF0ZVByb3ZpZGVyIChlaXRoZXIgY29sbGVjdGlvblByb3ZpZGVyIG9yIHZhcmlhYmxlUHJvdmlkZXIpXG4gKiBhcyBzcmMgcHJvcGVydHkuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzX2l0ZW1zX2xheWVyIChvYmopIHtcbiAgICBpZiAob2JqID09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIGlzIGxheWVyXG4gICAgaWYgKCEob2JqIGluc3RhbmNlb2YgTGF5ZXIpKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gaGFzIHNyYyBwcm9wZXJ0eVxuICAgIGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgXCJzcmNcIik7XG4gICAgaWYgKCEhKGRlc2M/LmdldCAmJiBkZXNjPy5zZXQpID09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpdGVtc19sYXllcihvcHRpb25zPXt9KSB7XG5cbiAgICBjb25zdCB7c3JjLCAuLi5vcHRzfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXIoe0NhY2hlQ2xhc3M6SXRlbXNMYXllckNhY2hlLCAuLi5vcHRzfSk7XG5cbiAgICAvLyBzZXR1cCBzcmMgcHJvcGVydHlcbiAgICBzcmNwcm9wLmFkZFN0YXRlKGxheWVyKTtcbiAgICBzcmNwcm9wLmFkZE1ldGhvZHMobGF5ZXIpO1xuXG4gICAgbGF5ZXIuc3JjcHJvcF9yZWdpc3RlcihcInNyY1wiKTtcbiAgICBsYXllci5zcmNwcm9wX2NoZWNrID0gZnVuY3Rpb24gKHByb3BOYW1lLCBzcmMpIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwic3JjXCIpIHtcbiAgICAgICAgICAgIGlmICghKGlzX2NvbGxlY3Rpb25fcHJvdmlkZXIoc3JjKSkgJiYgIShpc192YXJpYWJsZV9wcm92aWRlcihzcmMpKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCJzcmNcIiBtdXN0IGNvbGxlY3Rpb25Qcm92aWRlciBvciB2YXJpYWJsZVByb3ZpZGVyICR7c3JjfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNyYzsgICAgXG4gICAgICAgIH1cbiAgICB9XG4gICAgbGF5ZXIuc3JjcHJvcF9vbmNoYW5nZSA9IGZ1bmN0aW9uIChwcm9wTmFtZSwgZUFyZykge1xuICAgICAgICBpZiAocHJvcE5hbWUgPT0gXCJzcmNcIikge1xuICAgICAgICAgICAgaWYgKGVBcmcgPT0gXCJyZXNldFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzX2NvbGxlY3Rpb25fcHJvdmlkZXIobGF5ZXIuc3JjKSkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5pbmRleCA9IG5ldyBOZWFyYnlJbmRleChsYXllci5zcmMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNfdmFyaWFibGVfcHJvdmlkZXIobGF5ZXIuc3JjKSkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5pbmRleCA9IG5ldyBOZWFyYnlJbmRleChsYXllci5zcmMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBpZiAobGF5ZXIuaW5kZXggIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzX2NvbGxlY3Rpb25fcHJvdmlkZXIobGF5ZXIuc3JjKSkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5pbmRleC5yZWZyZXNoKGVBcmcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNfdmFyaWFibGVfcHJvdmlkZXIobGF5ZXIuc3JjKSkge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5pbmRleC5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxheWVyLm9uY2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gICAgICAgIFxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogY29udmVuaWVuY2UgbWV0aG9kIGZvciBnZXR0aW5nIGl0ZW1zIHZhbGlkIGF0IG9mZnNldFxuICAgICAqIG9ubHkgaXRlbXMgbGF5ZXIgc3VwcG9ydHMgdGhpcyBtZXRob2RcbiAgICAgKi9cbiAgICBsYXllci5nZXRfaXRlbXMgPSBmdW5jdGlvbiBnZXRfaXRlbXMob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiBbLi4ubGF5ZXIuaW5kZXgubmVhcmJ5KG9mZnNldCkuY2VudGVyXTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogTEFZRVIgVVBEQVRFIEFQSVxuICAgICAqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICBsYXllci51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gbGF5ZXJfdXBkYXRlKGxheWVyLCBjaGFuZ2VzKTtcbiAgICB9XG4gICAgbGF5ZXIuYXBwZW5kID0gZnVuY3Rpb24gYXBwZW5kKGl0ZW1zLCBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIGxheWVyX2FwcGVuZChsYXllciwgaXRlbXMsIG9mZnNldCk7XG4gICAgfVxuXG4gICAgLy8gaW5pdGlhbGlzZVxuICAgIGxheWVyLnNyYyA9IHNyYztcblxuICAgIHJldHVybiBsYXllcjtcbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgSVRFTVMgTEFZRVIgQ0FDSEVcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLypcbiAgICBMYXllcnMgd2l0aCBhIENvbGxlY3Rpb25Qcm92aWRlciBvciBhIFZhcmlhYmxlUHJvdmlkZXIgYXMgc3JjIFxuICAgIHVzZSBhIHNwZWNpZmljIGNhY2hlIGltcGxlbWVudGF0aW9uLCBhcyBvYmplY3RzIGluIHRoZSBcbiAgICBpbmRleCBhcmUgYXNzdW1lZCB0byBiZSBpdGVtcyBmcm9tIHRoZSBwcm92aWRlciwgbm90IGxheWVyIG9iamVjdHMuIFxuICAgIFRodXMsIHF1ZXJpZXMgYXJlIG5vdCByZXNvbHZlZCBkaXJlY3RseSBvbiB0aGUgaXRlbXMgaW4gdGhlIGluZGV4LCBidXRcbiAgICByYXRoZXIgZnJvbSBjb3JyZXNwb25kaW5nIHNlZ21lbnQgb2JqZWN0cywgaW5zdGFudGlhdGVkIGZyb20gaXRlbXMuXG5cbiAgICBDYWNoaW5nIGhlcmUgYXBwbGllcyB0byBuZWFyYnkgc3RhdGUgYW5kIHNlZ21lbnQgb2JqZWN0cy5cbiovXG5cbmNsYXNzIEl0ZW1zTGF5ZXJDYWNoZSB7XG4gICAgY29uc3RydWN0b3IobGF5ZXIsIG9wdGlvbnM9e30pIHtcbiAgICAgICAgLy8gbGF5ZXJcbiAgICAgICAgdGhpcy5fbGF5ZXIgPSBsYXllcjtcbiAgICAgICAgLy8gY2FjaGVkIG5lYXJieSBvYmplY3RcbiAgICAgICAgdGhpcy5fbmVhcmJ5ID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBjYWNoZWQgc2VnbWVudFxuICAgICAgICB0aGlzLl9zZWdtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBkZWZhdWx0IHZhbHVlXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgfVxuXG4gICAgZ2V0IHNyYygpIHtyZXR1cm4gdGhpcy5fbGF5ZXJ9O1xuICAgIGdldCBzZWdtZW50KCkge3JldHVybiB0aGlzLl9zZWdtZW50fTtcblxuICAgIHF1ZXJ5KG9mZnNldCkge1xuICAgICAgICBjb25zdCBuZWVkX2luZGV4X2xvb2t1cCA9IChcbiAgICAgICAgICAgIHRoaXMuX25lYXJieSA9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICFpbnRlcnZhbC5jb3ZlcnNfZW5kcG9pbnQodGhpcy5fbmVhcmJ5Lml0diwgb2Zmc2V0KVxuICAgICAgICApO1xuICAgICAgICBpZiAobmVlZF9pbmRleF9sb29rdXApIHtcbiAgICAgICAgICAgIC8vIGNhY2hlIG1pc3NcbiAgICAgICAgICAgIHRoaXMuX25lYXJieSA9IHRoaXMuX2xheWVyLmluZGV4Lm5lYXJieShvZmZzZXQpO1xuICAgICAgICAgICAgbGV0IHtpdHYsIGNlbnRlcn0gPSB0aGlzLl9uZWFyYnk7XG4gICAgICAgICAgICB0aGlzLl9zZWdtZW50cyA9IGNlbnRlci5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZF9zZWdtZW50KGl0diwgaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwZXJmb3JtIHF1ZXJpZXNcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gdGhpcy5fc2VnbWVudHMubWFwKChzZWcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzZWcucXVlcnkob2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBzaW5nbGUgcmVzdWx0IHN0YXRlXG4gICAgICAgIHJldHVybiB0b1N0YXRlKHRoaXMuX3NlZ21lbnRzLCBzdGF0ZXMsIG9mZnNldCwgdGhpcy5fbGF5ZXIub3B0aW9ucyk7XG4gICAgfVxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuX25lYXJieSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fc2VnbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cblxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBMQVlFUiBVUERBVEVcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBOT1RFIC0gbGF5ZXIgdXBkYXRlIGlzIGVzc2VudGlhbGx5IGFib3V0IHN0YXRlUHJvdmlkZXIgdXBkYXRlLlxuICogc28gdGhlc2UgbWV0aG9kcyBjb3VsZCAoZm9yIHRoZSBtb3N0IHBhcnQpIGJlIG1vdmVkIHRvIHRoZSBwcm92aWRlci5cbiAqIEhvd2V2ZXIsIHVwZGF0ZV9hcHBlbmQgYmVuZWZpdHMgZnJvbSB1c2luZyB0aGUgaW5kZXggb2YgdGhlIGxheWVyLFxuICogc28gd2Uga2VlcCBpdCBoZXJlIGZvciBub3cuIFxuICovXG5cblxuLypcbiAgICBJdGVtcyBMYXllciBmb3J3YXJkcyB1cGRhdGUgdG8gc3RhdGVQcm92aWRlclxuKi9cbmZ1bmN0aW9uIGxheWVyX3VwZGF0ZShsYXllciwgY2hhbmdlcz17fSkge1xuICAgIGlmIChpc19jb2xsZWN0aW9uX3Byb3ZpZGVyKGxheWVyLnNyYykpIHtcbiAgICAgICAgcmV0dXJuIGxheWVyLnNyYy51cGRhdGUoY2hhbmdlcyk7XG4gICAgfSBlbHNlIGlmIChpc192YXJpYWJsZV9wcm92aWRlcihsYXllci5zcmMpKSB7ICAgICBcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIGluc2VydD1bXSxcbiAgICAgICAgICAgIHJlbW92ZT1bXSxcbiAgICAgICAgICAgIHJlc2V0PWZhbHNlXG4gICAgICAgIH0gPSBjaGFuZ2VzO1xuICAgICAgICBpZiAocmVzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXllci5zcmMuc2V0KGluc2VydCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKChsYXllci5zcmMuZ2V0KCkgfHwgW10pXG4gICAgICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gW2l0ZW0uaWQsIGl0ZW1dKSk7XG4gICAgICAgICAgICAvLyByZW1vdmVcbiAgICAgICAgICAgIHJlbW92ZS5mb3JFYWNoKChpZCkgPT4gbWFwLmRlbGV0ZShpZCkpO1xuICAgICAgICAgICAgLy8gaW5zZXJ0XG4gICAgICAgICAgICBpbnNlcnQuZm9yRWFjaCgoaXRlbSkgPT4gbWFwLnNldChpdGVtLmlkLCBpdGVtKSk7XG4gICAgICAgICAgICAvLyBzZXRcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShtYXAudmFsdWVzKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGxheWVyLnNyYy5zZXQoaXRlbXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuICAgIFxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgTEFZRVIgQVBQRU5EXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogYXBwZW5kIGl0ZW1zIHRvIGxheWVyIGF0IG9mZnNldFxuICogXG4gKiBhcHBlbmQgaW1wbGllcyB0aGF0IHByZS1leGlzdGluZyBpdGVtcyBiZXlvbmQgb2Zmc2V0LFxuICogd2lsbCBlaXRoZXIgYmUgcmVtb3ZlZCBvciB0cnVuY2F0ZWQsIHNvIHRoYXQgdGhlIGxheWVyXG4gKiBpcyBlbXB0eSBhZnRlciBvZmZzZXQuXG4gKiBcbiAqIGl0ZW1zIHdpbGwgb25seSBiZSBpbnNlcnRlZCBhZnRlciBvZmZzZXQsIHNvIGFueSBuZXdcbiAqIGl0ZW0gYmVmb3JlIG9mZnNldCB3aWxsIGJlIHRydW5jYXRlZCBvciBkcm9wcGVkLlxuICogXG4gKiBuZXcgaXRlbXMgd2lsbCBvbmx5IGJlIGJlIGFwcGxpZWQgZm9yIHQgPj0gb2Zmc2V0XG4gKiBvbGQgaXRlbXMgd2lsbCBiZSBrZXB0IGZvciB0IDwgb2Zmc2V0XG4gKiBcbiAqIFxuICogVE9ETyAtIG5vdCBzYWZlIGZvciByZXBldGluZyBzdGF0ZVxuICogXG4gKi9cbmZ1bmN0aW9uIGxheWVyX2FwcGVuZChsYXllciwgaXRlbXMsIG9mZnNldCkge1xuICAgIGNvbnN0IGVwID0gZW5kcG9pbnQuZnJvbV9pbnB1dChvZmZzZXQpO1xuICAgIFxuICAgIC8vIGNvbnNvbGUubG9nKFwiYWxsIGl0ZW1zXCIsIGl0ZW1zLmxlbmd0aCk7XG5cbiAgICAvLyB0cnVuY2F0ZSBvciByZW1vdmUgbmV3IGl0ZW1zIGJlZm9yZSBvZmZzZXRcbiAgICBjb25zdCBpbnNlcnRfaXRlbXMgPSBpdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAvLyBrZWVwIG9ubHkgaXRlbXMgd2l0aCBpdHYuaGlnaCA+PSBvZmZzZXRcbiAgICAgICAgICAgIGNvbnN0IGhpZ2hFcCA9IGVuZHBvaW50LmZyb21faW50ZXJ2YWwoaXRlbS5pdHYpWzFdO1xuICAgICAgICAgICAgcmV0dXJuIGVuZHBvaW50LmdlKGhpZ2hFcCwgZXApO1xuICAgICAgICB9KVxuICAgICAgICAubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAvLyB0cnVuY2F0ZSBpdGVtIG92ZXJsYXBwaW5nIG9mZnNldCBpdHYubG93PW9mZnNldFxuICAgICAgICAgICAgaWYgKGludGVydmFsLmNvdmVyc19lbmRwb2ludChpdGVtLml0diwgZXApKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3X2l0ZW0gPSB7Li4uaXRlbX07XG4gICAgICAgICAgICAgICAgbmV3X2l0ZW0uaXR2ID0gW29mZnNldCwgaXRlbS5pdHZbMV0sIHRydWUsIGl0ZW0uaXR2WzNdXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3X2l0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgLy8gY29uc29sZS5sb2coXCJpbnNlcnRcIiwgaW5zZXJ0X2l0ZW1zLmxlbmd0aCk7XG5cbiAgICAvLyB0cnVuY2F0ZSBwcmUtZXhpc3RpbmcgaXRlbXMgb3ZlcmxhcHBpbmcgb2Zmc2V0XG4gICAgY29uc3QgbW9kaWZ5X2l0ZW1zID0gbGF5ZXIuaW5kZXgubmVhcmJ5KG9mZnNldCkuY2VudGVyLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdfaXRlbSA9IHsuLi5pdGVtfTtcbiAgICAgICAgbmV3X2l0ZW0uaXR2ID0gW2l0ZW0uaXR2WzBdLCBvZmZzZXQsIGl0ZW0uaXR2WzJdLCBmYWxzZV07XG4gICAgICAgIHJldHVybiBuZXdfaXRlbTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBjb25zb2xlLmxvZyhcIm1vZGlmeVwiLCBtb2RpZnlfaXRlbXMubGVuZ3RoKTtcblxuICAgIC8vcmVtb3ZlIHByZS1leGlzdGluZyBpdGVtcyB3aGVyZSBpdHYubG93ID4gb2Zmc2V0XG4gICAgY29uc3QgcmVtb3ZlID0gbGF5ZXIuc3JjLmdldCgpXG4gICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvd0VwID0gZW5kcG9pbnQuZnJvbV9pbnRlcnZhbChpdGVtLml0dilbMF07XG4gICAgICAgICAgICByZXR1cm4gZW5kcG9pbnQuZ3QobG93RXAsIGVwKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQ7XG4gICAgICAgIH0pO1xuXG4gICAgLy8gY29uc29sZS5sb2coXCJyZW1vdmVcIiwgcmVtb3ZlLmxlbmd0aCk7XG5cbiAgICAvLyBsYXllciB1cGRhdGVcbiAgICBjb25zdCBpbnNlcnQgPSBbLi4ubW9kaWZ5X2l0ZW1zLCAuLi5pbnNlcnRfaXRlbXNdO1xuICAgIHJldHVybiBsYXllcl91cGRhdGUobGF5ZXIsIHtyZW1vdmUsIGluc2VydCwgcmVzZXQ6ZmFsc2V9KVxufVxuXG5cblxuIiwiaW1wb3J0IHsgQ3Vyc29yIH0gZnJvbSBcIi4vY3Vyc29yX2Jhc2UuanNcIjtcbmltcG9ydCB7IGlzX2Nsb2NrX3Byb3ZpZGVyLCBMT0NBTF9DTE9DS19QUk9WSURFUiB9IGZyb20gXCIuL3Byb3ZpZGVyX2Nsb2NrLmpzXCI7XG4vKipcbiAqIENsb2NrIGN1cnNvciBpcyBhIHRoaW4gd3JhcHBlciBhcm91bmQgYSBjbG9ja1Byb3ZpZGVyLFxuICogc28gdGhhdCBpdCBjYW4gYmUgY29uc3VtZWQgYXMgYSBjdXJzb3IuXG4gKiBcbiAqIFRoZSBjdHJsIHByb3BlcnR5IG9mIGFueSBDdXJzb3IgaXMgcmVxdWlyZWQgdG8gYmUgYSBDdXJzb3Igb3IgdW5kZWZpbmVkLFxuICogc28gaW4gdGhlIGNhc2Ugb2YgYSBjbG9jayBjdXJzb3IsIHdoaWNoIGlzIHRoZSBzdGFydGluZyBwb2ludCxcbiAqIHRoZSBjdHJsIHByb3BlcnR5IGlzIGFsd2F5cyBzZXQgdG8gdW5kZWZpbmVkLlxuICogXG4gKiBBZGRpdGlvbmFsbHksIGNsb2NrIGN1cnNvci5zcmMgaXMgYWxzbyB1bmRlZmluZWQuXG4gKiBcbiAqIEN1cnNvciB0cmFuc2Zvcm1hdGlvbiBvZiBhIGNsb2NrIGN1cnNvciB3aWxsIHJlc3VsdCBpbiBhIG5ldyBjbG9jayBjdXJzb3IuXG4gKiAgXG4gKiBJZGVuZmlmeWluZyBhIGN1cnNvciBhcyBhIGNsb2NrIGN1cnNvciBvciBub3QgaXMgaW1wb3J0YW50IGZvciBwbGF5YmFja1xuICogbG9naWMgaW4gY3Vyc29yIGltcGxlbW1lbnRhdGlvbi5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNfY2xvY2tfY3Vyc29yKG9iaikge1xuICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBDdXJzb3IgJiYgb2JqLmN0cmwgPT0gdW5kZWZpbmVkICYmIG9iai5zcmMgPT0gdW5kZWZpbmVkOyBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb2NrX2N1cnNvcihzcmM9TE9DQUxfQ0xPQ0tfUFJPVklERVIpIHtcbiAgICBpZiAoIWlzX2Nsb2NrX3Byb3ZpZGVyKHNyYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzcmMgbXVzdCBiZSBjbG9ja1Byb3ZpZGVyICR7c3JjfWApO1xuICAgIH1cbiAgICBjb25zdCBjdXJzb3IgPSBuZXcgQ3Vyc29yKCk7XG4gICAgY3Vyc29yLnF1ZXJ5ID0gZnVuY3Rpb24gKGxvY2FsX3RzKSB7XG4gICAgICAgIGNvbnN0IGNsb2NrX3RzID0gc3JjLm5vdyhsb2NhbF90cyk7XG4gICAgICAgIHJldHVybiB7dmFsdWU6Y2xvY2tfdHMsIGR5bmFtaWM6dHJ1ZSwgb2Zmc2V0OmxvY2FsX3RzfTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnNvcjtcbn1cbiIsImltcG9ydCB7IEN1cnNvciB9IGZyb20gXCIuL2N1cnNvcl9iYXNlLmpzXCI7XG5pbXBvcnQgeyBpc19pdGVtc19sYXllciwgaXRlbXNfbGF5ZXIgfSBmcm9tIFwiLi9sYXllcl9pdGVtcy5qc1wiO1xuaW1wb3J0ICogYXMgc3JjcHJvcCBmcm9tIFwiLi91dGlsL2FwaV9zcmNwcm9wLmpzXCI7XG5pbXBvcnQgeyByYW5kb21fc3RyaW5nLCBzZXRfdGltZW91dCwgY2hlY2tfbnVtYmVyLCBtb3Rpb25fdXRpbHMgfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuaW1wb3J0IHsgaXNfY2xvY2tfY3Vyc29yLCBjbG9ja19jdXJzb3IgfSBmcm9tIFwiLi9jdXJzb3JfY2xvY2suanNcIjtcbmltcG9ydCB7IGlzX2Nsb2NrX3Byb3ZpZGVyLCBMT0NBTF9DTE9DS19QUk9WSURFUiB9IGZyb20gXCIuL3Byb3ZpZGVyX2Nsb2NrLmpzXCI7XG5pbXBvcnQgeyBpc19jb2xsZWN0aW9uX3Byb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJfY29sbGVjdGlvbi5qc1wiO1xuaW1wb3J0IHsgaXNfdmFyaWFibGVfcHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcl92YXJpYWJsZS5qc1wiO1xuXG5jb25zdCBjaGVja19yYW5nZSA9IG1vdGlvbl91dGlscy5jaGVja19yYW5nZTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBWQVJJQUJMRSBDVVJTT1JcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBcInNyY1wiIGlzIGEgbGF5ZXIgb3IgYSBzdGF0ZVByb3ZpZGVyXG4gKiBcImNsb2NrXCIgaXMgYSBjbG9ja0N1cnNvciBvciBhIGNsb2NrUHJvdmlkZXJcbiAqIFxuICogLSBjbG9ja1Byb3ZpZGVyIGlzIHdyYXBwZWQgYXMgY2xvY2tDdXJzb3JcbiAqIHRvIGVuc3VyZSB0aGF0IFwiY2xvY2tcIiBwcm9wZXJ0eSBvZiBjdXJzb3JzIGlzIGFsd2F5cyBhIGN1cnNvclxuICogXG4gKiBpZiBubyBcImNsb2NrXCIgaXMgcHJvdmlkZWQgLSBsb2NhbCBjbG9ja1Byb3ZpZGVyIGlzIHVzZWRcbiAqIFxuICogLSBzdGF0ZVByb3ZpZGVyIGlzIHdyYXBwZWQgYXMgaXRlbXNMYXllclxuICogdG8gZW5zdXJlIHRoYXQgXCJzcmNcIiBwcm9wZXJ0eSBvZiBjdXJzb3JzIGlzIGFsd2F5cyBhIGxheWVyXG4gKiB0aGlzIGFsc28gZW5zdXJlcyB0aGF0IHZhcmlhYmxlIGN1cnNvciBjYW4gZWFzaWx5XG4gKiBzdXBwb3J0IGxpdmUgcmVjb3JkaW5nLCB3aGljaCBkZXBlbmRzIG9uIHRoZSBuZWFyYnlpbmRleCBvZiB0aGUgbGF5ZXIuXG4gKiBcbiAqL1xuXG4vKipcbiAqIFRPRE8gLSBtZWRpYSBjb250cm9sIGlzIGEgc3BlY2lhbCBjYXNlIG9mIHZhcmlhYmxlIGN1cnNvcnNcbiAqIHdoZXJlIHNyYyBsYXllciBpcyBudW1iZXIgdHlwZSBhbmQgZGVmaW5lZCBvbiB0aGUgZW50aXJlXG4gKiB0aW1lbGluZS4gQW5kIHByb3RlY3RlZCBhZ29pbnN0IG90aGVyIHR5cGVzIG9mIHN0YXRlXG4gKiBDb3VsZCBwZXJoYXBzIG1ha2UgYSBzcGVjaWFsIHR5cGUgb2YgbGF5ZXIgZm9yIHRoaXMsXG4gKiBhbmQgdGhlbiBtYWtlIGEgc3BlY2lhbCB0eXBlIG9mIGNvbnRyb2wgY3Vyc29yIHdpdGhcbiAqIHRoZSBhcHByb3ByaWF0ZSByZXN0cmljdGlvbiBvbiB0aGUgc3JjIGxheWVyLlxuICovXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHZhcmlhYmxlX2N1cnNvcihjdHJsLCBzcmMpIHtcblxuICAgIGNvbnN0IGN1cnNvciA9IG5ldyBDdXJzb3IoKTtcblxuICAgIC8vIGNhY2hlIGZvciBzcmNcbiAgICBsZXQgc3JjX2NhY2hlO1xuICAgIC8vIHRpbWVvdXRcbiAgICBsZXQgdGlkO1xuXG4gICAgLy8gc2V0dXAgc3JjIHByb3BlcnR5XG4gICAgc3JjcHJvcC5hZGRTdGF0ZShjdXJzb3IpO1xuICAgIHNyY3Byb3AuYWRkTWV0aG9kcyhjdXJzb3IpO1xuICAgIGN1cnNvci5zcmNwcm9wX3JlZ2lzdGVyKFwiY3RybFwiKTtcbiAgICBjdXJzb3Iuc3JjcHJvcF9yZWdpc3RlcihcInNyY1wiKTtcblxuICAgIGN1cnNvci5zcmNwcm9wX2NoZWNrID0gZnVuY3Rpb24gKHByb3BOYW1lLCBvYmo9TE9DQUxfQ0xPQ0tfUFJPVklERVIpIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwiY3RybFwiKSB7XG4gICAgICAgICAgICBpZiAoaXNfY2xvY2tfcHJvdmlkZXIob2JqKSkge1xuICAgICAgICAgICAgICAgIG9iaiA9IGNsb2NrX2N1cnNvcihvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc19jbG9ja19jdXJzb3Iob2JqKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCJjdHJsXCIgcHJvcGVydHkgbXVzdCBiZSBhIGNsb2NrIGN1cnNvciAke29ian1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwic3JjXCIpIHtcbiAgICAgICAgICAgIGlmIChpc19jb2xsZWN0aW9uX3Byb3ZpZGVyKG9iaikgfHwgaXNfdmFyaWFibGVfcHJvdmlkZXIob2JqKSkge1xuICAgICAgICAgICAgICAgIG9iaiA9IGl0ZW1zX2xheWVyKHtzcmM6b2JqfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzX2l0ZW1zX2xheWVyKG9iaikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwic3JjXCIgcHJvcGVydHkgbXVzdCBiZSBhbiBpdGVtIGxheWVyICR7b2JqfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjdXJzb3Iuc3JjcHJvcF9vbmNoYW5nZSA9IGZ1bmN0aW9uIChwcm9wTmFtZSwgZUFyZykge1xuICAgICAgICBpZiAoY3Vyc29yLnNyYyA9PSB1bmRlZmluZWQgfHwgY3Vyc29yLmN0cmwgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwic3JjXCIpIHtcbiAgICAgICAgICAgIGlmIChlQXJnID09IFwicmVzZXRcIikge1xuICAgICAgICAgICAgICAgIHNyY19jYWNoZSA9IGN1cnNvci5zcmMuY3JlYXRlQ2FjaGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3JjX2NhY2hlLmNsZWFyKCk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGN0cmwgbWF5IGNoYW5nZSBpZiBjbG9ja1Byb3ZpZGVyIGlzIHJlc2V0IC0gYnV0XG4gICAgICAgIC8vIHRoaXMgZG9lcyBub3QgcmVxdWlyZSBhbnkgcGFydGljdWxhciBjaGFuZ2VzIHRvIHRoZSBzcmMgY2FjaGUgICAgICAgIFxuICAgICAgICBkZXRlY3RfZnV0dXJlX2V2ZW50KCk7XG4gICAgICAgIGN1cnNvci5vbmNoYW5nZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGN1cnNvci5jdHJsIGRlZmluZXMgYW4gYWN0aXZlIHJlZ2lvbiBvZiBjdXJzb3Iuc3JjIChsYXllcilcbiAgICAgKiBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUsIHRoZSBjdXJzb3IuY3RybCB3aWxsIGxlYXZlIHRoaXMgcmVnaW9uLlxuICAgICAqIGluIHRoYXQgbW9tZW50LCBjdXJzb3Igc2hvdWxkIHJlZXZhbHVhdGUgaXRzIHN0YXRlIC0gc28gd2UgbmVlZCB0byBcbiAgICAgKiBkZXRlY3QgdGhpcyBldmVudCBieSB0aW1lb3V0ICBcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIGRldGVjdF9mdXR1cmVfZXZlbnQoKSB7XG4gICAgICAgIGlmICh0aWQpIHt0aWQuY2FuY2VsKCk7fVxuICAgICAgICBjb25zdCB0cyA9IGN1cnNvci5jdHJsLnZhbHVlO1xuICAgICAgICAvLyBuZWFyYnkgZnJvbSBzcmNcbiAgICAgICAgY29uc3QgbmVhcmJ5ID0gY3Vyc29yLnNyYy5pbmRleC5uZWFyYnkodHMpO1xuICAgICAgICBjb25zdCByZWdpb25faGlnaCA9IG5lYXJieS5pdHZbMV0gfHwgSW5maW5pdHk7ICAgICAgICBcblxuICAgICAgICBpZiAocmVnaW9uX2hpZ2ggPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIC8vIG5vIGZ1dHVyZSBsZWF2ZSBldmVudFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlbHRhX21zID0gKHJlZ2lvbl9oaWdoIC0gdHMpICogMTAwMDtcbiAgICAgICAgdGlkID0gc2V0X3RpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY3Vyc29yLm9uY2hhbmdlKCk7XG4gICAgICAgIH0sIGRlbHRhX21zKTtcbiAgICB9XG5cbiAgICBjdXJzb3IucXVlcnkgPSBmdW5jdGlvbiBxdWVyeShsb2NhbF90cykge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBjdXJzb3IuY3RybC5xdWVyeShsb2NhbF90cykudmFsdWU7XG4gICAgICAgIHJldHVybiBzcmNfY2FjaGUucXVlcnkob2Zmc2V0KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogVVBEQVRFIEFQSSBmb3IgVmFyaWFibGUgQ3Vyc29yXG4gICAgICovICAgIFxuICAgIGN1cnNvci5zZXQgPSBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHNldF92YWx1ZShjdXJzb3IsIHZhbHVlKTtcbiAgICB9XG4gICAgY3Vyc29yLm1vdGlvbiA9IGZ1bmN0aW9uIG1vdGlvbih2ZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHNldF9tb3Rpb24oY3Vyc29yLCB2ZWN0b3IpO1xuICAgIH1cbiAgICBjdXJzb3IudHJhbnNpdGlvbiA9IGZ1bmN0aW9uIHRyYW5zaXRpb24oe3RhcmdldCwgZHVyYXRpb24sIGVhc2luZ30pIHtcbiAgICAgICAgcmV0dXJuIHNldF90cmFuc2l0aW9uKGN1cnNvciwgdGFyZ2V0LCBkdXJhdGlvbiwgZWFzaW5nKTtcbiAgICB9XG4gICAgY3Vyc29yLmludGVycG9sYXRlID0gZnVuY3Rpb24gaW50ZXJwb2xhdGUgKHt0dXBsZXMsIGR1cmF0aW9ufSkge1xuICAgICAgICByZXR1cm4gc2V0X2ludGVycG9sYXRpb24oY3Vyc29yLCB0dXBsZXMsIGR1cmF0aW9uKTtcbiAgICB9XG4gICAgXG4gICAgLy8gaW5pdGlhbGl6ZVxuICAgIGN1cnNvci5jdHJsID0gY3RybDtcbiAgICBjdXJzb3Iuc3JjID0gc3JjO1xuICAgIHJldHVybiBjdXJzb3I7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogQ1VSU09SIFVQREFURSBBUElcbiAqICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBzZXQgdmFsdWUgb2YgY3Vyc29yXG4gKi9cblxuZnVuY3Rpb24gc2V0X3ZhbHVlKGN1cnNvciwgdmFsdWUpIHtcbiAgICBjb25zdCBpdGVtcyA9IFt7XG4gICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgaXR2OiBbbnVsbCwgbnVsbCwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgIHR5cGU6IFwic3RhdGljXCIsXG4gICAgICAgIGRhdGE6IHZhbHVlICAgICAgICAgICAgICAgICBcbiAgICB9XTtcbiAgICByZXR1cm4gY3Vyc29yLnNyYy51cGRhdGUoe2luc2VydDppdGVtcywgcmVzZXQ6dHJ1ZX0pO1xufVxuXG4vKipcbiAqIHNldCBtb3Rpb24gc3RhdGVcbiAqICBcbiAqIG1vdGlvbiBvbmx5IG1ha2VzIHNlbnNlIGlmIHZhcmlhYmxlIGN1cnNvciBpcyByZXN0cmljdGVkIHRvIG51bWJlciB2YWx1ZXMsXG4gKiB3aGljaCBpbiB0dXJuIGltcGxpZXMgdGhhdCB0aGUgY3Vyc29yLnNyYyAoSXRlbXMgTGF5ZXIpIHNob3VsZCBiZVxuICogcmVzdHJpY3RlZCB0byBudW1iZXIgdmFsdWVzLiBcbiAqIElmIG5vbi1udW1iZXIgdmFsdWVzIG9jY3VyIC0gd2Ugc2ltcGx5IHJlcGxhY2Ugd2l0aCAwLlxuICogQWxzbywgaXRlbXMgbGF5ZXIgc2hvdWxkIGhhdmUgYSBzaW5nbGUgaXRlbSBpbiBuZWFyYnkgY2VudGVyLlxuICogXG4gKiBpZiBwb3NpdGlvbiBpcyBvbWl0dGVkIGluIHZlY3RvciAtIGN1cnJlbnQgcG9zaXRpb24gd2lsbCBiZSBhc3N1bWVkXG4gKiBpZiB0aW1lc3RhbXAgaXMgb21pdHR0ZWQgaW4gdmVjdG9yIC0gY3VycmVudCB0aW1lc3RhbXAgd2lsbCBiZSBhc3N1bWVkXG4gKiBpZiB2ZWxvY2l0eSBhbmQgYWNjZWxlcmF0aW9uIGFyZSBvbW1pdHRlZCBpbiB2ZWN0b3IgXG4gKiAtIHRoZXNlIHdpbGwgYmUgc2V0IHRvIHplcm8uXG4gKi9cblxuZnVuY3Rpb24gc2V0X21vdGlvbihjdXJzb3IsIHZlY3Rvcj17fSkge1xuICAgIC8vIGdldCB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY3Vyc29yXG4gICAgbGV0IHt2YWx1ZTpwMCwgb2Zmc2V0OnQwfSA9IGN1cnNvci5xdWVyeSgpO1xuICAgIC8vIGVuc3VyZSB0aGF0IHAwIGlzIG51bWJlciB0eXBlXG4gICAgaWYgKHR5cGVvZiBwMCAhPT0gJ251bWJlcicgfHwgIWlzRmluaXRlKHAwKSkge1xuICAgICAgICBwMCA9IDA7XG4gICAgfVxuICAgIC8vIGZldGNoIG5ldyB2YWx1ZXMgZnJvbSB2ZWN0b3JcbiAgICBjb25zdCB7XG4gICAgICAgIHBvc2l0aW9uOnAxPXAwLFxuICAgICAgICB2ZWxvY2l0eTp2MT0wLFxuICAgICAgICBhY2NlbGVyYXRpb246YTE9MCxcbiAgICAgICAgdGltZXN0YW1wOnQxPXQwLFxuICAgICAgICByYW5nZT1bbnVsbCwgbnVsbF1cbiAgICB9ID0gdmVjdG9yO1xuICAgIGNoZWNrX3JhbmdlKHJhbmdlKTtcbiAgICBjaGVja19udW1iZXIoXCJwb3NpdGlvblwiLCBwMSk7XG4gICAgY2hlY2tfbnVtYmVyKFwidmVsb2NpdHlcIiwgdjEpO1xuICAgIGNoZWNrX251bWJlcihcImFjY2VsZXJhdGlvblwiLCBhMSk7XG4gICAgY2hlY2tfbnVtYmVyKFwidGltZXN0YW1wXCIsIHQxKTtcblxuICAgIGNvbnN0IGl0ZW1zID0gW107XG5cbiAgICAvKipcbiAgICAgKiBpZiBwb3MgcmFuZ2UgaXMgYm91bmRlZCBsb3cgb3IgaGlnaCBvciBib3RoLFxuICAgICAqIHRoaXMgcG90ZW50aWFsbHkgY29ycmVzcG9uZHMgdG8gbXVsdGlwbGUgdGltZSByYW5nZXMgW1t0MCwgdDFdXSBcbiAgICAgKiB3aGVyZSB0aGUgbW90aW9uIHBvc2l0aW9uIGlzIGxlZ2FsICBcbiAgICAgKiBsb3cgPD0gcCA8PSBoaWdoIFxuICAgICAqL1xuICAgIGNvbnN0IGN0ciA9IG1vdGlvbl91dGlscy5jYWxjdWxhdGVfdGltZV9yYW5nZXM7XG4gICAgY29uc3QgdGltZV9yYW5nZXMgPSBjdHIoW3AxLHYxLGExLHQxXSwgcmFuZ2UpO1xuICAgIC8vIHBpY2sgYSB0aW1lIHJhbmdlIHdoaWNoIGNvbnRhaW5zIHQxXG4gICAgY29uc3QgdHMgPSBjdXJzb3IuY3RybC52YWx1ZTtcblxuICAgIGNvbnN0IHRpbWVfcmFuZ2UgPSB0aW1lX3Jhbmdlcy5maW5kKCh0cikgPT4ge1xuICAgICAgICBjb25zdCBsb3cgPSB0clswXSA/PyAtSW5maW5pdHk7XG4gICAgICAgIGNvbnN0IGhpZ2ggPSB0clsxXSA/PyBJbmZpbml0eTtcbiAgICAgICAgcmV0dXJuIGxvdyA8PSB0cyAmJiB0cyA8PSBoaWdoO1xuICAgIH0pO1xuICAgIGlmICh0aW1lX3JhbmdlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBbbG93LCBoaWdoXSA9IHRpbWVfcmFuZ2U7XG4gICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgaWQ6IHJhbmRvbV9zdHJpbmcoMTApLFxuICAgICAgICAgICAgaXR2OiBbbG93LCBoaWdoLCB0cnVlLCB0cnVlXSxcbiAgICAgICAgICAgIHR5cGU6IFwibW90aW9uXCIsXG4gICAgICAgICAgICBkYXRhOiB7cG9zaXRpb246cDEsIHZlbG9jaXR5OnYxLCBhY2NlbGVyYXRpb246YTEsIHRpbWVzdGFtcDp0MX1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGFkZCBsZWZ0IGlmIG5lZWRlZFxuICAgICAgICBpZiAobG93ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgICAgICAgICBpdHY6IFtudWxsLCBsb3csIHRydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN0YXRpY1wiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJhbmdlWzBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGQgcmlnaHQgaWYgbmVlZGVkXG4gICAgICAgIGlmIChoaWdoICE9IG51bGwpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgICAgICAgICBpdHY6IFtoaWdoLCBudWxsLCBmYWxzZSwgdHJ1ZV0sXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzdGF0aWNcIixcbiAgICAgICAgICAgICAgICBkYXRhOiByYW5nZVsxXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvKiBcbiAgICAgICAgICAgIG5vIHRpbWVfcmFuZ2UgZm91bmRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcDEgaXMgb3V0c2lkZSB0aGUgcG9zX3JhbmdlXG4gICAgICAgICAgICBpZiBwMSBpcyBsZXNzIHRoYW4gbG93LCB0aGVuIHVzZSBsb3dcbiAgICAgICAgICAgIGlmIHAxIGlzIGdyZWF0ZXIgdGhhbiBoaWdoLCB0aGVuIHVzZSBoaWdoXG4gICAgICAgICovXG4gICAgICAgIGNvbnN0IHZhbCA9IChwMSA8IHJhbmdlWzBdKSA/IHJhbmdlWzBdIDogcmFuZ2VbMV07XG4gICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgaWQ6IHJhbmRvbV9zdHJpbmcoMTApLFxuICAgICAgICAgICAgaXR2OiBbbnVsbCwgbnVsbCwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgICAgICB0eXBlOiBcInN0YXRpY1wiLFxuICAgICAgICAgICAgZGF0YTogdmFsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY3Vyc29yLnNyYy51cGRhdGUoe2luc2VydDppdGVtcywgcmVzZXQ6dHJ1ZX0pO1xufVxuXG4vKipcbiAqIHNldCB0cmFuc2l0aW9uIC0gdG8gdGFyZ2V0IHBvc2l0aW9uIHVzaW5nIGluIDxkdXJhdGlvbj4gc2Vjb25kcy5cbiAqL1xuXG5mdW5jdGlvbiBzZXRfdHJhbnNpdGlvbihjdXJzb3IsIHRhcmdldCwgZHVyYXRpb24sIGVhc2luZykge1xuICAgIGNvbnN0IHt2YWx1ZTp2MCwgb2Zmc2V0OnQwfSA9IGN1cnNvci5xdWVyeSgpO1xuICAgIGNvbnN0IHYxID0gdGFyZ2V0O1xuICAgIGNvbnN0IHQxID0gdDAgKyBkdXJhdGlvbjtcbiAgICBjaGVja19udW1iZXIoXCJwb3NpdGlvblwiLCB2MCk7XG4gICAgY2hlY2tfbnVtYmVyKFwicG9zaXRpb25cIiwgdjEpO1xuICAgIGNoZWNrX251bWJlcihcInBvc2l0aW9uXCIsIHQwKTtcbiAgICBjaGVja19udW1iZXIoXCJwb3NpdGlvblwiLCB0MSk7XG4gICAgbGV0IGl0ZW1zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogcmFuZG9tX3N0cmluZygxMCksXG4gICAgICAgICAgICBpdHY6IFtudWxsLCB0MCwgdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgdHlwZTogXCJzdGF0aWNcIixcbiAgICAgICAgICAgIGRhdGE6IHYwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgICAgIGl0djogW3QwLCB0MSwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgICAgICB0eXBlOiBcInRyYW5zaXRpb25cIixcbiAgICAgICAgICAgIGRhdGE6IHt2MCwgdjEsIHQwLCB0MSwgZWFzaW5nfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogcmFuZG9tX3N0cmluZygxMCksXG4gICAgICAgICAgICBpdHY6IFt0MSwgbnVsbCwgZmFsc2UsIHRydWVdLFxuICAgICAgICAgICAgdHlwZTogXCJzdGF0aWNcIixcbiAgICAgICAgICAgIGRhdGE6IHYxXG4gICAgICAgIH1cbiAgICBdXG4gICAgcmV0dXJuIGN1cnNvci5zcmMudXBkYXRlKHtpbnNlcnQ6aXRlbXMsIHJlc2V0OnRydWV9KTtcbn1cblxuLyoqXG4gKiBzZXQgaW50ZXJwb2xhdGlvblxuICogXG4gKiBhc3N1bWVzIHRpbWVzdGFtcHMgYXJlIGluIHJhbmdlIFswLDFdXG4gKiBzY2FsZSB0aW1lc3RhbXBzIHRvIGR1cmF0aW9uIGFuZCBvZmZzZXQgYnkgdDBcbiAqIGFzc3VtaW5nIGludGVycG9sYXRpb24gc3RhcnRzIGF0IHQwXG4gKi9cblxuZnVuY3Rpb24gc2V0X2ludGVycG9sYXRpb24oY3Vyc29yLCB0dXBsZXMsIGR1cmF0aW9uKSB7XG4gICAgY29uc3Qgbm93ID0gY3Vyc29yLmN0cmwudmFsdWU7XG4gICAgdHVwbGVzID0gdHVwbGVzLm1hcCgoW3YsdF0pID0+IHtcbiAgICAgICAgY2hlY2tfbnVtYmVyKFwidHNcIiwgdCk7XG4gICAgICAgIGNoZWNrX251bWJlcihcInZhbFwiLCB2KTtcbiAgICAgICAgcmV0dXJuIFt2LCBub3cgKyB0KmR1cmF0aW9uXTtcbiAgICB9KVxuICAgIGNvbnN0IFt2MCwgdDBdID0gdHVwbGVzWzBdO1xuICAgIGNvbnN0IFt2MSwgdDFdID0gdHVwbGVzW3R1cGxlcy5sZW5ndGgtMV07XG4gICAgY29uc3QgaXRlbXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgICAgIGl0djogWy1JbmZpbml0eSwgdDAsIHRydWUsIGZhbHNlXSxcbiAgICAgICAgICAgIHR5cGU6IFwic3RhdGljXCIsXG4gICAgICAgICAgICBkYXRhOiB2MFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogcmFuZG9tX3N0cmluZygxMCksXG4gICAgICAgICAgICBpdHY6IFt0MCwgdDEsIHRydWUsIGZhbHNlXSxcbiAgICAgICAgICAgIHR5cGU6IFwiaW50ZXJwb2xhdGlvblwiLFxuICAgICAgICAgICAgZGF0YTogdHVwbGVzXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgICAgIGl0djogW3QxLCBJbmZpbml0eSwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgICAgICB0eXBlOiBcInN0YXRpY1wiLFxuICAgICAgICAgICAgZGF0YTogdjFcbiAgICAgICAgfVxuICAgIF1cbiAgICByZXR1cm4gY3Vyc29yLnNyYy51cGRhdGUoe2luc2VydDppdGVtcywgcmVzZXQ6dHJ1ZX0pO1xufVxuIiwiaW1wb3J0IHsgQ3Vyc29yLCBnZXRfY3Vyc29yX2N0cmxfc3RhdGUgfSBmcm9tIFwiLi9jdXJzb3JfYmFzZS5qc1wiO1xuaW1wb3J0IHsgTGF5ZXIgfSBmcm9tIFwiLi9sYXllcl9iYXNlLmpzXCI7XG5pbXBvcnQgeyBpc19pdGVtc19sYXllciwgaXRlbXNfbGF5ZXIgfSBmcm9tIFwiLi9sYXllcl9pdGVtcy5qc1wiO1xuaW1wb3J0ICogYXMgc3JjcHJvcCBmcm9tIFwiLi91dGlsL2FwaV9zcmNwcm9wLmpzXCI7XG5pbXBvcnQgeyBpbnRlcnZhbCB9IGZyb20gXCIuL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyBzZXRfdGltZW91dCB9IGZyb20gXCIuL3V0aWwvY29tbW9uLmpzXCI7XG5pbXBvcnQgeyBpc19jbG9ja19jdXJzb3IsIGNsb2NrX2N1cnNvciB9IGZyb20gXCIuL2N1cnNvcl9jbG9jay5qc1wiO1xuaW1wb3J0IHsgaXNfY2xvY2tfcHJvdmlkZXIsIExPQ0FMX0NMT0NLX1BST1ZJREVSIH0gZnJvbSBcIi4vcHJvdmlkZXJfY2xvY2suanNcIjtcbmltcG9ydCB7IGlzX2NvbGxlY3Rpb25fcHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcl9jb2xsZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBpc192YXJpYWJsZV9wcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyX3ZhcmlhYmxlLmpzXCI7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogUExBWUJBQ0sgQ1VSU09SXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogc3JjIGlzIGEgbGF5ZXIgb3IgYSBzdGF0ZVByb3ZpZGVyXG4gKiBjdHJsIGlzIGEgY3Vyc29yIG9yIGEgY2xvY2tQcm92aWRlclxuICogXG4gKiBjbG9ja1Byb3ZpZGVyIGlzIHdyYXBwZWQgYXMgY2xvY2tDdXJzb3JcbiAqIHRvIGVuc3VyZSB0aGF0IFwiY3RybFwiIHByb3BlcnR5IG9mIGN1cnNvcnMgaXMgYWx3YXlzIGEgY3Vyc29yXG4gKiBcbiAqIHN0YXRlUHJvdmlkZXIgaXMgd3JhcHBlZCBhcyBpdGVtc0xheWVyXG4gKiB0byBlbnN1cmUgdGhhdCBcInNyY1wiIHByb3BlcnR5IG9mIGN1cnNvcnMgaXMgYWx3YXlzIGEgbGF5ZXJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGxheWJhY2tfY3Vyc29yKGN0cmwsIHNyYykge1xuXG4gICAgY29uc3QgY3Vyc29yID0gbmV3IEN1cnNvcigpO1xuXG4gICAgLy8gc3JjIGNhY2hlXG4gICAgbGV0IHNyY19jYWNoZTtcbiAgICAvLyB0aW1lb3V0XG4gICAgbGV0IHRpZDtcbiAgICAvLyBwb2xsaW5nXG4gICAgbGV0IHBpZDtcblxuICAgIC8vIHNldHVwIHNyYyBwcm9wZXJ0eVxuICAgIHNyY3Byb3AuYWRkU3RhdGUoY3Vyc29yKTtcbiAgICBzcmNwcm9wLmFkZE1ldGhvZHMoY3Vyc29yKTtcbiAgICBjdXJzb3Iuc3JjcHJvcF9yZWdpc3RlcihcImN0cmxcIik7XG4gICAgY3Vyc29yLnNyY3Byb3BfcmVnaXN0ZXIoXCJzcmNcIik7XG5cbiAgICAvKipcbiAgICAgKiBzcmMgcHJvcGVydHkgaW5pdGlhbGl6YXRpb24gY2hlY2tcbiAgICAgKi9cbiAgICBjdXJzb3Iuc3JjcHJvcF9jaGVjayA9IGZ1bmN0aW9uIChwcm9wTmFtZSwgb2JqPUxPQ0FMX0NMT0NLX1BST1ZJREVSKSB7XG4gICAgICAgIGlmIChwcm9wTmFtZSA9PSBcImN0cmxcIikge1xuICAgICAgICAgICAgaWYgKGlzX2Nsb2NrX3Byb3ZpZGVyKG9iaikpIHtcbiAgICAgICAgICAgICAgICBvYmogPSBjbG9ja19jdXJzb3Iob2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBDdXJzb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgY3RybCBtdXN0IGJlIGNsb2NrUHJvdmlkZXIgb3IgQ3Vyc29yICR7b2JqfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wTmFtZSA9PSBcInNyY1wiKSB7XG4gICAgICAgICAgICBpZiAoaXNfY29sbGVjdGlvbl9wcm92aWRlcihvYmopIHx8IGlzX3ZhcmlhYmxlX3Byb3ZpZGVyKG9iaikpIHtcbiAgICAgICAgICAgICAgICBvYmogPSBpdGVtc19sYXllcih7c3JjOm9ian0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIExheWVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzcmMgbXVzdCBiZSBMYXllciAke29ian1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhhbmRsZSBzcmMgcHJvcGVydHkgY2hhbmdlXG4gICAgICovXG4gICAgY3Vyc29yLnNyY3Byb3Bfb25jaGFuZ2UgPSBmdW5jdGlvbiAocHJvcE5hbWUsIGVBcmcpIHtcbiAgICAgICAgaWYgKGN1cnNvci5zcmMgPT0gdW5kZWZpbmVkIHx8IGN1cnNvci5jdHJsID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wTmFtZSA9PSBcInNyY1wiKSB7XG4gICAgICAgICAgICBpZiAoZUFyZyA9PSBcInJlc2V0XCIpIHtcbiAgICAgICAgICAgICAgICBzcmNfY2FjaGUgPSBjdXJzb3Iuc3JjLmNyZWF0ZUNhY2hlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNyY19jYWNoZS5jbGVhcigpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXJzb3Jfb25jaGFuZ2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBtYWluIGN1cnNvciBjaGFuZ2UgaGFuZGxlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGN1cnNvcl9vbmNoYW5nZSgpIHtcbiAgICAgICAgY3Vyc29yLm9uY2hhbmdlKCk7XG4gICAgICAgIGRldGVjdF9mdXR1cmVfZXZlbnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjdXJzb3IuY3RybCAoY3Vyc29yL2Nsb2NrKSBkZWZpbmVzIGFuIGFjdGl2ZSByZWdpb24gb2YgY3Vyc29yLnNyYyAobGF5ZXIpXG4gICAgICogYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLCB0aGUgY3Vyc29yLmN0cmwgd2lsbCBsZWF2ZSB0aGlzIHJlZ2lvbi5cbiAgICAgKiBpbiB0aGF0IG1vbWVudCwgY3Vyc29yIHNob3VsZCByZWV2YWx1YXRlIGl0cyBzdGF0ZSAtIHNvIHdlIG5lZWQgdG8gXG4gICAgICogZGV0ZWN0IHRoaXMgZXZlbnQsIGlkZWFsbHkgYnkgdGltZW91dCwgYWx0ZXJuYXRpdmVseSBieSBwb2xsaW5nLiAgXG4gICAgICovXG4gICAgZnVuY3Rpb24gZGV0ZWN0X2Z1dHVyZV9ldmVudCgpIHtcbiAgICAgICAgaWYgKHRpZCkgeyB0aWQuY2FuY2VsKCk7IH1cbiAgICAgICAgaWYgKHBpZCkgeyBjbGVhckludGVydmFsKHBpZCk7IH1cblxuICAgICAgICAvLyBjdXJyZW50IHN0YXRlIG9mIGN1cnNvci5jdHJsIFxuICAgICAgICBjb25zdCBjdHJsX3N0YXRlID0gZ2V0X2N1cnNvcl9jdHJsX3N0YXRlKGN1cnNvcik7XG4gICAgICAgIC8vIGN1cnJlbnQgKHBvc2l0aW9uLCB0aW1lKSBvZiBjdXJzb3IuY3RybFxuICAgICAgICBjb25zdCBjdXJyZW50X3BvcyA9IGN0cmxfc3RhdGUudmFsdWU7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRfdHMgPSBjdHJsX3N0YXRlLm9mZnNldDtcblxuICAgICAgICAvLyBubyBmdXR1cmUgZXZlbnQgaWYgdGhlIGN0cmwgaXMgc3RhdGljXG4gICAgICAgIGlmICghY3RybF9zdGF0ZS5keW5hbWljKSB7XG4gICAgICAgICAgICAvLyB3aWxsIG5ldmVyIGxlYXZlIHJlZ2lvblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY3VycmVudCByZWdpb24gb2YgY3Vyc29yLnNyY1xuICAgICAgICBjb25zdCBzcmNfbmVhcmJ5ID0gY3Vyc29yLnNyYy5pbmRleC5uZWFyYnkoY3VycmVudF9wb3MpO1xuXG4gICAgICAgIGNvbnN0IHJlZ2lvbl9sb3cgPSBzcmNfbmVhcmJ5Lml0dlswXSA/PyAtSW5maW5pdHk7XG4gICAgICAgIGNvbnN0IHJlZ2lvbl9oaWdoID0gc3JjX25lYXJieS5pdHZbMV0gPz8gSW5maW5pdHk7XG5cbiAgICAgICAgLy8gbm8gZnV0dXJlIGxlYXZlIGV2ZW50IGlmIHRoZSByZWdpb24gY292ZXJzIHRoZSBlbnRpcmUgdGltZWxpbmUgXG4gICAgICAgIGlmIChyZWdpb25fbG93ID09IC1JbmZpbml0eSAmJiByZWdpb25faGlnaCA9PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgLy8gd2lsbCBuZXZlciBsZWF2ZSByZWdpb25cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc19jbG9ja19jdXJzb3IoY3Vyc29yLmN0cmwpKSB7XG4gICAgICAgICAgICAvKiBcbiAgICAgICAgICAgICAgICBjdXJzb3IuY3RybCBpcyBhIGNsb2NrIHByb3ZpZGVyXG5cbiAgICAgICAgICAgICAgICBwb3NzaWJsZSB0aW1lb3V0IGFzc29jaWF0ZWQgd2l0aCBsZWF2aW5nIHJlZ2lvblxuICAgICAgICAgICAgICAgIHRocm91Z2ggcmVnaW9uX2hpZ2ggLSBhcyBjbG9jayBpcyBpbmNyZWFzaW5nLlxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgY29uc3QgdGFyZ2V0X3BvcyA9IHJlZ2lvbl9oaWdoO1xuICAgICAgICAgICAgY29uc3QgZGVsdGFfbXMgPSAodGFyZ2V0X3BvcyAtIGN1cnJlbnRfcG9zKSAqIDEwMDA7XG4gICAgICAgICAgICB0aWQgPSBzZXRfdGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY3Vyc29yX29uY2hhbmdlKCk7XG4gICAgICAgICAgICB9LCBkZWx0YV9tcyk7XG4gICAgICAgICAgICAvLyBsZWF2ZSBldmVudCBzY2hlZHVsZWRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBcbiAgICAgICAgXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzX2Nsb2NrX2N1cnNvcihjdXJzb3IuY3RybC5jdHJsKSAmJiBcbiAgICAgICAgICAgIGlzX2l0ZW1zX2xheWVyKGN1cnNvci5jdHJsLnNyYylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvKiBcbiAgICAgICAgICAgICAgICBjdXJzb3IuY3RybCBpcyBhIGN1cnNvciB3aXRoIGEgY2xvY2sgcHJvdmlkZXJcblxuICAgICAgICAgICAgICAgIHBvc3NpYmxlIHRpbWVvdXQgYXNzb2NpYXRlZCB3aXRoIGxlYXZpbmcgcmVnaW9uXG4gICAgICAgICAgICAgICAgdGhyb3VnaCByZWdpb25fbG93IG9yIHJlZ2lvbl9oaWdoLlxuXG4gICAgICAgICAgICAgICAgSG93ZXZlciwgdGhpcyBjYW4gb25seSBiZSBwcmVkaWN0ZWQgaWYgY3Vyc29yLmN0cmxcbiAgICAgICAgICAgICAgICBpbXBsZW1lbnRzIGEgZGV0ZXJtaW5pc3RpYyBmdW5jdGlvbiBvZiB0aW1lLlxuXG4gICAgICAgICAgICAgICAgVGhpcyBjYW4gYmUgdGhlIGNhc2UgaWYgY3Vyc29yLmN0ci5zcmMgaXMgYW4gaXRlbXMgbGF5ZXIsXG4gICAgICAgICAgICAgICAgYW5kIGEgc2luZ2xlIGFjdGl2ZSBpdGVtIGRlc2NyaWJlcyBlaXRoZXIgYSBtb3Rpb24gb3IgYSB0cmFuc2l0aW9uICh3aXRoIGxpbmVhciBlYXNpbmcpLiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVfaXRlbXMgPSBjdXJzb3IuY3RybC5zcmMuZ2V0X2l0ZW1zKGN1cnJlbnRfdHMpO1xuICAgICAgICAgICAgbGV0IHRhcmdldF9wb3M7XG5cbiAgICAgICAgICAgIGlmIChhY3RpdmVfaXRlbXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVfaXRlbSA9IGFjdGl2ZV9pdGVtc1swXTtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlX2l0ZW0udHlwZSA9PSBcIm1vdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHt2ZWxvY2l0eSwgYWNjZWxlcmF0aW9ufSA9IGFjdGl2ZV9pdGVtLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gY2FsY3VsYXRlIHRpbWVvdXQgd2l0aCBhY2NlbGVyYXRpb24gdG9vXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2NlbGVyYXRpb24gPT0gMC4wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaWd1cmUgb3V0IHdoaWNoIHJlZ2lvbiBib3VuZGFyeSB3ZSBoaXQgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWxvY2l0eSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfcG9zID0gcmVnaW9uX2hpZ2g7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9wb3MgPSByZWdpb25fbG93O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsdGFfbXMgPSAodGFyZ2V0X3BvcyAtIGN1cnJlbnRfcG9zKSAqIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWQgPSBzZXRfdGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yX29uY2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBkZWx0YV9tcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZWF2ZS1ldmVudCBzY2hlZHVsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlX2l0ZW0udHlwZSA9PSBcInRyYW5zaXRpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7djAsIHYxLCB0MCwgdDEsIGVhc2luZz1cImxpbmVhclwifSA9IGFjdGl2ZV9pdGVtLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlYXNpbmcgPT0gXCJsaW5lYXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGluZWFyIHRyYW5zdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZlbG9jaXR5ID0gKHYxLXYwKS8odDEtdDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlbG9jaXR5ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9wb3MgPSBNYXRoLm1pbihyZWdpb25faGlnaCwgdjEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X3BvcyA9IE1hdGgubWF4KHJlZ2lvbl9sb3csIHYxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhX21zID0gKHRhcmdldF9wb3MgLSBjdXJyZW50X3BvcykgKiAxMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlkID0gc2V0X3RpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcl9vbmNoYW5nZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZGVsdGFfbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGVhdmUtZXZlbnQgc2NoZWR1bGVkXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogZGV0ZWN0aW9uIG9mIGxlYXZlIGV2ZW50cyBmYWxscyBiYWNrIG9uIHBvbGxpbmdcbiAgICAgICAgICovXG4gICAgICAgIHN0YXJ0X3BvbGxpbmcoc3JjX25lYXJieS5pdHYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHN0YXJ0IHBvbGxpbmdcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzdGFydF9wb2xsaW5nKGl0dikge1xuICAgICAgICBwaWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBoYW5kbGVfcG9sbGluZyhpdHYpO1xuICAgICAgICB9LCAxMDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhhbmRsZSBwb2xsaW5nXG4gICAgICovXG4gICAgZnVuY3Rpb24gaGFuZGxlX3BvbGxpbmcoaXR2KSB7XG4gICAgICAgIGxldCBvZmZzZXQgPSBjdXJzb3IuY3RybC52YWx1ZTtcbiAgICAgICAgaWYgKCFpbnRlcnZhbC5jb3ZlcnNfZW5kcG9pbnQoaXR2LCBvZmZzZXQpKSB7XG4gICAgICAgICAgICBjdXJzb3Jfb25jaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogbWFpbiBxdWVyeSBmdW5jdGlvbiAtIHJlc29sdmluZyBxdWVyeVxuICAgICAqIGZyb20gY2FjaGUgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCBjdXJzb3Iuc3JjXG4gICAgICovXG5cbiAgICBjdXJzb3IucXVlcnkgPSBmdW5jdGlvbiBxdWVyeShsb2NhbF90cykge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBnZXRfY3Vyc29yX2N0cmxfc3RhdGUoY3Vyc29yLCBsb2NhbF90cykudmFsdWU7IFxuICAgICAgICByZXR1cm4gc3JjX2NhY2hlLnF1ZXJ5KG9mZnNldCk7XG4gICAgfVxuICAgIFxuICAgIC8vIGluaXRpYWxpemVcbiAgICBjdXJzb3IuY3RybCA9IGN0cmw7XG4gICAgY3Vyc29yLnNyYyA9IHNyYztcbiAgICByZXR1cm4gY3Vyc29yO1xufSIsImltcG9ydCB7IGVuZHBvaW50fSBmcm9tIFwiLi4vdXRpbC9pbnRlcnZhbHMuanNcIjtcbmltcG9ydCB7IE5lYXJieUluZGV4QmFzZSB9IGZyb20gXCIuLi9uZWFyYnlfYmFzZS5qc1wiO1xuaW1wb3J0IHsgTGF5ZXIgfSBmcm9tIFwiLi4vbGF5ZXJfYmFzZS5qc1wiXG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tIFwiLi4vY3Vyc29yX2Jhc2UuanNcIjtcblxuLyoqXG4gKiBUaGlzIHdyYXBzIGEgY3Vyc29yIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgYXMgYSBsYXllci5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGF5ZXJfZnJvbV9jdXJzb3Ioc3JjKSB7XG5cbiAgICBpZiAoIShzcmMgaW5zdGFuY2VvZiBDdXJzb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgc3JjIG11c3QgYmUgYSBDdXJzb3IgJHtzcmN9YCk7XG4gICAgfVxuIFxuICAgIGNvbnN0IGxheWVyID0gbmV3IExheWVyKCk7XG4gICAgbGF5ZXIuaW5kZXggPSBuZXcgQ3Vyc29ySW5kZXgoc3JjKTtcbiAgICBcbiAgICAvLyBzdWJzY3JpYmVcbiAgICBzcmMuYWRkX2NhbGxiYWNrKChlQXJnKSA9PiB7XG4gICAgICAgIGxheWVyLm9uY2hhbmdlKGVBcmcpO1xuICAgIH0pO1xuXG4gICAgLy8gaW5pdGlhbGlzZVxuICAgIGxheWVyLnNyYyA9IHNyYztcbiAgICByZXR1cm4gbGF5ZXI7XG59IFxuXG5cbi8qKlxuICogQ3JlYXRlIGEgTmVhcmJ5SW5kZXggZm9yIHRoZSBDdXJzb3IuXG4gKiBcbiAqIFRoZSBjdXJzb3IgdmFsdWUgaXMgaW5kZXBlbmRlbnQgb2YgdGltZWxpbmUgb2Zmc2V0LCBcbiAqIHdoaWNoIGlzIHRvIHNheSB0aGF0IGl0IGhhcyB0aGUgc2FtZSB2YWx1ZSBmb3IgYWxsIFxuICogdGltZWxpbmUgb2Zmc2V0cy5cbiAqIFxuICogSW4gb3JkZXIgZm9yIHRoZSBkZWZhdWx0IExheWVyQ2FjaGUgdG8gd29yaywgYW5cbiAqIG9iamVjdCB3aXRoIGEgLnF1ZXJ5KG9mZnNldCkgbWV0aG9kIGlzIG5lZWRlZCBpbiBcbiAqIG5lYXJieS5jZW50ZXIuIFNpbmNlIGN1cnNvcnMgc3VwcG9ydCB0aGlzIG1ldGhvZFxuICogKGlnbm9yaW5nIHRoZSBvZmZzZXQpLCB3ZSBjYW4gdXNlIHRoZSBjdXJzb3IgZGlyZWN0bHkuXG4gKi9cblxuY2xhc3MgQ3Vyc29ySW5kZXggZXh0ZW5kcyBOZWFyYnlJbmRleEJhc2Uge1xuXG4gICAgY29uc3RydWN0b3IoY3Vyc29yKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2N1cnNvciA9IGN1cnNvcjtcbiAgICB9XG5cbiAgICBuZWFyYnkob2Zmc2V0KSB7XG4gICAgICAgIC8vIGN1cnNvciBpbmRleCBpcyBkZWZpbmVkIGZvciBlbnRpcmUgdGltZWxpbmVcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGl0djogW251bGwsIG51bGwsIHRydWUsIHRydWVdLFxuICAgICAgICAgICAgY2VudGVyOiBbdGhpcy5fY3Vyc29yXSxcbiAgICAgICAgICAgIGxlZnQ6IGVuZHBvaW50Lk5FR19JTkYsXG4gICAgICAgICAgICBwcmV2OiBlbmRwb2ludC5ORUdfSU5GLFxuICAgICAgICAgICAgcmlnaHQ6IGVuZHBvaW50LlBPU19JTkYsXG4gICAgICAgICAgICBuZXh0OiBlbmRwb2ludC5QT1NfSU5GLFxuICAgICAgICB9XG4gICAgfVxufVxuXG4iLCJpbXBvcnQgKiBhcyBzcmNwcm9wIGZyb20gXCIuLi91dGlsL2FwaV9zcmNwcm9wLmpzXCI7XG5pbXBvcnQgeyBMYXllciB9IGZyb20gXCIuLi9sYXllcl9iYXNlLmpzXCJcbmltcG9ydCB7IGVuZHBvaW50IH0gZnJvbSBcIi4uL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleEJhc2UsIG5lYXJieV9mcm9tIH0gZnJvbSBcIi4uL25lYXJieV9iYXNlLmpzXCI7XG5cblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXJnZSBvcHRpb25zXG4gKi9cbmNvbnN0IE1FUkdFX09QVElPTlMgPSB7XG4gICAgc3VtOiB7XG4gICAgICAgIHZhbHVlRnVuYzogZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIC8vIHJldHVybnMgdGhlIHN1bSBvZiB2YWx1ZXMgb2YgYWN0aXZlIGxheWVyc1xuICAgICAgICAgICAgcmV0dXJuIGluZm8uc3RhdGVzXG4gICAgICAgICAgICAgICAgLm1hcChzdGF0ZSA9PiBzdGF0ZS52YWx1ZSkgXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUsIDApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzdGFjazoge1xuICAgICAgICBzdGF0ZUZ1bmM6IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICAvLyByZXR1cm5zIHZhbHVlcyBmcm9tIGZpcnN0IGFjdGl2ZSBsYXllclxuICAgICAgICAgICAgcmV0dXJuIHsuLi5pbmZvLnN0YXRlc1swXX1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgYXJyYXk6IHtcbiAgICAgICAgdmFsdWVGdW5jOiBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgICAgICAgLy8gcmV0dXJucyBhbiBhcnJheSB3aXRoIHZhbHVlcyBmcm9tIGFjdGl2ZSBsYXllcnNcbiAgICAgICAgICAgIHJldHVybiBpbmZvLnN0YXRlcy5tYXAoc3RhdGUgPT4gc3RhdGUudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFxuICogVGhpcyBpbXBsZW1lbnRzIGEgbWVyZ2Ugb3BlcmF0aW9uIGZvciBsYXllcnMuXG4gKiBMaXN0IG9mIHNvdXJjZXMgaXMgaW1tdXRhYmxlLlxuICogXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlX2xheWVyIChzb3VyY2VzLCBvcHRpb25zPXt9KSB7XG4gICAgbGV0IHt0eXBlPVwiXCIsIC4uLm9wdHN9ID0gb3B0aW9ucztcblxuICAgIC8vIHR5cGUgc3BlY2lmaWVzIHByZWRlZmluZWQgb3B0aW9ucyBmb3IgTGF5ZXJcbiAgICBpZiAodHlwZSBpbiBNRVJHRV9PUFRJT05TKSB7XG4gICAgICAgIG9wdHMgPSBNRVJHRV9PUFRJT05TW3R5cGVdO1xuICAgIH1cbiAgICBjb25zdCBsYXllciA9IG5ldyBMYXllcihvcHRzKTsgICAgXG5cbiAgICAvLyBzZXR1cCBzb3VyY2VzIHByb3BlcnR5XG4gICAgc3JjcHJvcC5hZGRTdGF0ZShsYXllcik7XG4gICAgc3JjcHJvcC5hZGRNZXRob2RzKGxheWVyKTtcbiAgICBsYXllci5zcmNwcm9wX3JlZ2lzdGVyKFwic291cmNlc1wiKTtcblxuICAgIGxheWVyLnNyY3Byb3BfY2hlY2sgPSBmdW5jdGlvbihwcm9wTmFtZSwgc291cmNlcykge1xuICAgICAgICBpZiAocHJvcE5hbWUgPT0gXCJzb3VyY2VzXCIpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIHRoYXQgc291cmNlcyBpcyBhcnJheSBvZiBsYXllcnNcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzb3VyY2VzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc291cmNlcyBtdXN0IGJlIGFycmF5ICR7c291cmNlc31gKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWxsX2xheWVycyA9IHNvdXJjZXMubWFwKChlKSA9PiBlIGluc3RhbmNlb2YgTGF5ZXIpLmV2ZXJ5KGUgPT4gZSk7XG4gICAgICAgICAgICBpZiAoIWFsbF9sYXllcnMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNvdXJjZXMgbXVzdCBhbGwgYmUgbGF5ZXJzICR7c291cmNlc31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc291cmNlcztcbiAgICB9XG5cbiAgICBsYXllci5zcmNwcm9wX29uY2hhbmdlID0gZnVuY3Rpb24ocHJvcE5hbWUsIGVBcmcpIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwic291cmNlc1wiKSB7XG4gICAgICAgICAgICBpZiAoZUFyZyA9PSBcInJlc2V0XCIpIHtcbiAgICAgICAgICAgICAgICBsYXllci5pbmRleCA9IG5ldyBOZWFyYnlJbmRleE1lcmdlKGxheWVyLnNvdXJjZXMpXG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgbGF5ZXIub25jaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGluaXRpYWxpc2VcbiAgICBsYXllci5zb3VyY2VzID0gc291cmNlcztcblxuICAgIHJldHVybiBsYXllclxufVxuXG5cblxuLyoqXG4gKiBDcmVhdGluZyBhIG1lcmdlZCBOZWFyYnlJbmRleCBmb3Igc2V0IG9mIExheWVycy5cbiAqICBcbiAqIEEgcmVnaW9uIHdpdGhpbiB0aGUgbWVyZ2VkIGluZGV4IHdpbGwgY29udGFpblxuICogYSBsaXN0IG9mIHJlZmVyZW5jZXMgdG8gKGNhY2hlIG9iamVjdHMpIGZvciBcbiAqIHRoZSBMYXllcnMgd2hpY2ggYXJlIGRlZmluZWQgaW4gdGhpcyByZWdpb24uXG4gKiBcbiAqIEltcGxlbWVudGF0aW9uIGlzIHN0YXRlbGVzcy5cbiAqIFNldCBvZiBsYXllcnMgaXMgYXNzdW1lZCB0byBiZSBzdGF0aWMuXG4gKi9cblxuZnVuY3Rpb24gY21wX2FzY2VuZGluZyhwMSwgcDIpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuY21wKHAxLCBwMilcbn1cblxuZnVuY3Rpb24gY21wX2Rlc2NlbmRpbmcocDEsIHAyKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmNtcChwMiwgcDEpXG59XG5cbmV4cG9ydCBjbGFzcyBOZWFyYnlJbmRleE1lcmdlIGV4dGVuZHMgTmVhcmJ5SW5kZXhCYXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHNvdXJjZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICAgIHRoaXMuX2NhY2hlcyA9IG5ldyBNYXAoc291cmNlcy5tYXAoKHNyYykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFtzcmMsIHNyYy5jcmVhdGVDYWNoZSgpXTtcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIG5lYXJieShvZmZzZXQpIHtcbiAgICAgICAgb2Zmc2V0ID0gZW5kcG9pbnQuZnJvbV9pbnB1dChvZmZzZXQpO1xuICAgICAgICAvLyBhY2N1bXVsYXRlIG5lYXJieSBmcm9tIGFsbCBzb3VyY2VzXG4gICAgICAgIGNvbnN0IHByZXZfbGlzdCA9IFtdLCBuZXh0X2xpc3QgPSBbXTtcbiAgICAgICAgY29uc3QgY2VudGVyID0gW107XG4gICAgICAgIGNvbnN0IGNlbnRlcl9oaWdoX2xpc3QgPSBbXTtcbiAgICAgICAgY29uc3QgY2VudGVyX2xvd19saXN0ID0gW11cbiAgICAgICAgZm9yIChsZXQgc3JjIG9mIHRoaXMuX3NvdXJjZXMpIHtcbiAgICAgICAgICAgIGxldCBuZWFyYnkgPSBzcmMuaW5kZXgubmVhcmJ5KG9mZnNldCk7XG4gICAgICAgICAgICBsZXQgcHJldl9yZWdpb24gPSBzcmMuaW5kZXguZmluZF9yZWdpb24obmVhcmJ5LCB7ZGlyZWN0aW9uOi0xfSk7XG4gICAgICAgICAgICBsZXQgbmV4dF9yZWdpb24gPSBzcmMuaW5kZXguZmluZF9yZWdpb24obmVhcmJ5LCB7ZGlyZWN0aW9uOjF9KTtcbiAgICAgICAgICAgIGlmIChwcmV2X3JlZ2lvbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwcmV2X2xpc3QucHVzaChlbmRwb2ludC5mcm9tX2ludGVydmFsKHByZXZfcmVnaW9uLml0dilbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHRfcmVnaW9uICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5leHRfbGlzdC5wdXNoKGVuZHBvaW50LmZyb21faW50ZXJ2YWwobmV4dF9yZWdpb24uaXR2KVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmVhcmJ5LmNlbnRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY2VudGVyLnB1c2godGhpcy5fY2FjaGVzLmdldChzcmMpKTtcbiAgICAgICAgICAgICAgICBsZXQgW2xvdywgaGlnaF0gPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKG5lYXJieS5pdHYpO1xuICAgICAgICAgICAgICAgIGNlbnRlcl9oaWdoX2xpc3QucHVzaChoaWdoKTtcbiAgICAgICAgICAgICAgICBjZW50ZXJfbG93X2xpc3QucHVzaChsb3cpOyAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gZmluZCBjbG9zZXN0IGVuZHBvaW50IHRvIHRoZSByaWdodCAobm90IGluIGNlbnRlcilcbiAgICAgICAgbmV4dF9saXN0LnNvcnQoY21wX2FzY2VuZGluZyk7XG4gICAgICAgIGNvbnN0IG5leHRfbG93ID0gbmV4dF9saXN0WzBdIHx8IGVuZHBvaW50LlBPU19JTkY7XG5cbiAgICAgICAgLy8gZmluZCBjbG9zZXN0IGVuZHBvaW50IHRvIHRoZSBsZWZ0IChub3QgaW4gY2VudGVyKVxuICAgICAgICBwcmV2X2xpc3Quc29ydChjbXBfZGVzY2VuZGluZyk7XG4gICAgICAgIGNvbnN0IHByZXZfaGlnaCA9IHByZXZfbGlzdFswXSB8fCBlbmRwb2ludC5ORUdfSU5GO1xuXG4gICAgICAgIHJldHVybiBuZWFyYnlfZnJvbShcbiAgICAgICAgICAgICAgICBwcmV2X2hpZ2gsIFxuICAgICAgICAgICAgICAgIGNlbnRlcl9sb3dfbGlzdCwgXG4gICAgICAgICAgICAgICAgY2VudGVyLFxuICAgICAgICAgICAgICAgIGNlbnRlcl9oaWdoX2xpc3QsXG4gICAgICAgICAgICAgICAgbmV4dF9sb3dcbiAgICAgICAgICAgICk7XG4gICAgfVxufTtcbiIsImltcG9ydCB7IGludGVydmFsLCBlbmRwb2ludH0gZnJvbSBcIi4uL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleEJhc2UgfSBmcm9tIFwiLi4vbmVhcmJ5X2Jhc2UuanNcIjtcbmltcG9ydCB7IExheWVyIH0gZnJvbSBcIi4uL2xheWVyX2Jhc2UuanNcIlxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgQk9PTEVBTiBMQVlFUlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5leHBvcnQgZnVuY3Rpb24gYm9vbGVhbl9sYXllcihzcmMpIHtcblxuICAgIGNvbnN0IGxheWVyID0gbmV3IExheWVyKCk7XG4gICAgbGF5ZXIuaW5kZXggPSBuZXcgTmVhcmJ5SW5kZXhCb29sZWFuKHNyYy5pbmRleCk7XG4gICAgXG4gICAgLy8gc3Vic2NyaWJlXG4gICAgc3JjLmFkZF9jYWxsYmFjaygoZUFyZykgPT4ge1xuICAgICAgICBsYXllci5vbmNoYW5nZShlQXJnKTtcbiAgICB9KTtcblxuICAgIC8vIGluaXRpYWxpc2VcbiAgICBsYXllci5zcmMgPSBzcmM7XG4gICAgcmV0dXJuIGxheWVyO1xufSBcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgQk9PTEVBTiBORUFSQlkgSU5ERVhcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBXcmFwcGVyIEluZGV4IHdoZXJlIHJlZ2lvbnMgYXJlIHRydWUvZmFsc2UsIGJhc2VkIG9uIFxuICogY29uZGl0aW9uIG9uIG5lYXJieS5jZW50ZXIuXG4gKiBCYWNrLXRvLWJhY2sgcmVnaW9ucyB3aGljaCBhcmUgdHJ1ZSBhcmUgY29sbGFwc2VkIFxuICogaW50byBvbmUgcmVnaW9uXG4gKiBcbiAqL1xuXG5mdW5jdGlvbiBxdWVyeU9iamVjdCAodmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBxdWVyeTogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZSwgZHluYW1pYzpmYWxzZSwgb2Zmc2V0fTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5lYXJieUluZGV4Qm9vbGVhbiBleHRlbmRzIE5lYXJieUluZGV4QmFzZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihpbmRleCwgb3B0aW9ucz17fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICAgICAgICBsZXQge2NvbmRpdGlvbiA9IChjZW50ZXIpID0+IGNlbnRlci5sZW5ndGggPiAwfSA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuX2NvbmRpdGlvbiA9IGNvbmRpdGlvbjtcbiAgICB9XG5cbiAgICBuZWFyYnkob2Zmc2V0KSB7XG4gICAgICAgIG9mZnNldCA9IGVuZHBvaW50LmZyb21faW5wdXQob2Zmc2V0KTtcbiAgICAgICAgY29uc3QgbmVhcmJ5ID0gdGhpcy5faW5kZXgubmVhcmJ5KG9mZnNldCk7XG4gICAgICAgIFxuICAgICAgICBsZXQgZXZhbHVhdGlvbiA9IHRoaXMuX2NvbmRpdGlvbihuZWFyYnkuY2VudGVyKTsgXG4gICAgICAgIC8qIFxuICAgICAgICAgICAgc2VlayBsZWZ0IGFuZCByaWdodCBmb3IgZmlyc3QgcmVnaW9uXG4gICAgICAgICAgICB3aGljaCBkb2VzIG5vdCBoYXZlIHRoZSBzYW1lIGV2YWx1YXRpb24gXG4gICAgICAgICovXG4gICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IChjZW50ZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb25kaXRpb24oY2VudGVyKSAhPSBldmFsdWF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXhwYW5kIHJpZ2h0XG4gICAgICAgIGxldCByaWdodDtcbiAgICAgICAgbGV0IHJpZ2h0X25lYXJieSA9IHRoaXMuX2luZGV4LmZpbmRfcmVnaW9uKG5lYXJieSwge1xuICAgICAgICAgICAgZGlyZWN0aW9uOjEsIGNvbmRpdGlvblxuICAgICAgICB9KTsgICAgICAgIFxuICAgICAgICBpZiAocmlnaHRfbmVhcmJ5ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmlnaHQgPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKHJpZ2h0X25lYXJieS5pdHYpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXhwYW5kIGxlZnRcbiAgICAgICAgbGV0IGxlZnQ7XG4gICAgICAgIGxldCBsZWZ0X25lYXJieSA9IHRoaXMuX2luZGV4LmZpbmRfcmVnaW9uKG5lYXJieSwge1xuICAgICAgICAgICAgZGlyZWN0aW9uOi0xLCBjb25kaXRpb25cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsZWZ0X25lYXJieSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxlZnQgPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKGxlZnRfbmVhcmJ5Lml0dilbMV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBleHBhbmQgdG8gaW5maW5pdHlcbiAgICAgICAgbGVmdCA9IGxlZnQgfHwgZW5kcG9pbnQuTkVHX0lORjtcbiAgICAgICAgcmlnaHQgPSByaWdodCB8fCBlbmRwb2ludC5QT1NfSU5GO1xuICAgICAgICBjb25zdCBsb3cgPSBlbmRwb2ludC5mbGlwKGxlZnQpO1xuICAgICAgICBjb25zdCBoaWdoID0gZW5kcG9pbnQuZmxpcChyaWdodClcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGl0djogaW50ZXJ2YWwuZnJvbV9lbmRwb2ludHMobG93LCBoaWdoKSxcbiAgICAgICAgICAgIGNlbnRlciA6IFtxdWVyeU9iamVjdChldmFsdWF0aW9uKV0sXG4gICAgICAgICAgICBsZWZ0LFxuICAgICAgICAgICAgcmlnaHQsXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMYXllciB9IGZyb20gXCIuLi9sYXllcl9iYXNlLmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleEJvb2xlYW4gfSBmcm9tIFwiLi9ib29sZWFuLmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleE1lcmdlIH0gZnJvbSBcIi4vbWVyZ2UuanNcIjtcblxuXG5leHBvcnQgZnVuY3Rpb24gbG9naWNhbF9tZXJnZV9sYXllcihzb3VyY2VzLCBvcHRpb25zPXt9KSB7XG5cbiAgICBjb25zdCB7ZXhwcn0gPSBvcHRpb25zO1xuICAgIGxldCBjb25kaXRpb247XG4gICAgaWYgKGV4cHIpIHtcbiAgICAgICAgY29uZGl0aW9uID0gKGNlbnRlcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGV4cHIuZXZhbChjZW50ZXIpO1xuICAgICAgICB9ICAgIFxuICAgIH1cblxuICAgIGNvbnN0IGxheWVyID0gbmV3IExheWVyKCk7XG4gICAgY29uc3QgaW5kZXggPSBuZXcgTmVhcmJ5SW5kZXhNZXJnZShzb3VyY2VzKTtcbiAgICBsYXllci5pbmRleCA9IG5ldyBOZWFyYnlJbmRleEJvb2xlYW4oaW5kZXgsIHtjb25kaXRpb259KTtcblxuICAgIC8vIHN1YnNjcmliZSB0byBjYWxsYmFja3MgZnJvbSBzb3VyY2VzXG4gICAgc291cmNlcy5tYXAoKHNyYykgPT4ge1xuICAgICAgICByZXR1cm4gc3JjLmFkZF9jYWxsYmFjayhsYXllci5vbmNoYW5nZSk7XG4gICAgfSk7XG4gICAgXG4gICAgbGF5ZXIuc291cmNlcyA9IHNvdXJjZXM7XG5cbiAgICByZXR1cm4gbGF5ZXI7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ2ljYWxfZXhwciAoc3JjKSB7XG4gICAgaWYgKCEoc3JjIGluc3RhbmNlb2YgTGF5ZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgbXVzdCBiZSBsYXllciAke3NyY31gKVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBldmFsOiBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjYWNoZSBvZiBjZW50ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGUuc3JjID09IHNyYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmxvZ2ljYWxfZXhwci5hbmQgPSBmdW5jdGlvbiBhbmQoLi4uZXhwcnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBldmFsOiBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwcnMuZXZlcnkoKGV4cHIpID0+IGV4cHIuZXZhbChjZW50ZXIpKTtcbiAgICAgICAgfSAgICBcbiAgICB9XG59XG5cbmxvZ2ljYWxfZXhwci5vciA9IGZ1bmN0aW9uIG9yKC4uLmV4cHJzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNlbnRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGV4cHJzLnNvbWUoKGV4cHIpID0+IGV4cHIuZXZhbChjZW50ZXIpKTtcbiAgICAgICAgfSAgICBcbiAgICB9XG59XG5cbmxvZ2ljYWxfZXhwci54b3IgPSBmdW5jdGlvbiB4b3IoZXhwcjEsIGV4cHIyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZXZhbDogZnVuY3Rpb24gKGNlbnRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGV4cHIxLmV2YWwoY2VudGVyKSAhPSBleHByMi5ldmFsKGNlbnRlcik7XG4gICAgICAgIH0gICAgXG4gICAgfVxufVxuXG5sb2dpY2FsX2V4cHIubm90ID0gZnVuY3Rpb24gbm90KGV4cHIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBldmFsOiBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gIWV4cHIuZXZhbChjZW50ZXIpO1xuICAgICAgICB9ICAgIFxuICAgIH1cbn1cblxuXG5cblxuIiwiaW1wb3J0IHsgZW5kcG9pbnQgfSBmcm9tIFwiLi4vdXRpbC9pbnRlcnZhbHMuanNcIjtcbmltcG9ydCB7IE5lYXJieUluZGV4QmFzZSB9IGZyb20gXCIuLi9uZWFyYnlfYmFzZS5qc1wiO1xuaW1wb3J0IHsgTGF5ZXIgfSBmcm9tIFwiLi4vbGF5ZXJfYmFzZS5qc1wiXG5pbXBvcnQgKiBhcyBzcmNwcm9wIGZyb20gXCIuLi91dGlsL2FwaV9zcmNwcm9wLmpzXCI7XG5cblxuLyoqXG4gKiBhZmZpbmUgdHJhbnNmb3JtIDFEIGJ5IHNoaWZ0IGFuZCBzY2FsZSBmYWN0b3JcbiAqL1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm0ocCwge3NoaWZ0PTAsIHNjYWxlPTF9KSB7XG4gICAgaWYgKHAgPT0gdW5kZWZpbmVkIHx8ICFpc0Zpbml0ZShwKSkge1xuICAgICAgICAvLyBwIC0gbm9vcFxuICAgICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHAgPT0gXCJudW1iZXJcIikge1xuICAgICAgICAvLyBwIGlzIG51bWJlciAtIHRyYW5zZm9ybVxuICAgICAgICByZXR1cm4gKHAqc2NhbGUpICsgc2hpZnQ7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHApICYmIHAubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBwIGlzIGVuZHBvaW50IC0gdHJhbnNmb3JtIHZhbHVlXG4gICAgICAgIGxldCBbdmFsLCBicmFja2V0XSA9IHA7XG4gICAgICAgIHJldHVybiBlbmRwb2ludC5mcm9tX2lucHV0KFsodmFsKnNjYWxlKStzaGlmdCwgYnJhY2tldF0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmV2ZXJzZShwLCB7c2hpZnQ9MCwgc2NhbGU9MX0pIHtcbiAgICBpZiAocCA9PSB1bmRlZmluZWQgfHwgIWlzRmluaXRlKHApKSB7XG4gICAgICAgIC8vIHAgLSBub29wXG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgcCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIC8vIHAgaXMgbnVtYmVyIC0gdHJhbnNmb3JtXG4gICAgICAgIHJldHVybiAocC1zaGlmdCkvc2NhbGU7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHApICYmIHAubGVuZ3RoID4gMSkge1xuICAgICAgICAvLyBwIGlzIGVuZHBvaW50IC0gdHJhbnNmb3JtIHZhbHVlXG4gICAgICAgIGxldCBbdmFsLCBicmFja2V0XSA9IHA7XG4gICAgICAgIHJldHVybiBlbmRwb2ludC5mcm9tX2lucHV0KFsoKHZhbC1zaGlmdCkvc2NhbGUpLCBicmFja2V0XSk7XG4gICAgfVxufVxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBORUFSQlkgSU5ERVggLSBBRkZJTkUgVElNRUxJTkUgVFJBTlNGT1JNXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmNsYXNzIE5lYXJieUluZGV4QVRUIGV4dGVuZHMgTmVhcmJ5SW5kZXhCYXNlIHtcblxuICAgIGNvbnN0cnVjdG9yIChsYXllciwgb3B0aW9ucz17fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLl9jYWNoZSA9IGxheWVyLmNyZWF0ZUNhY2hlKCk7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBcbiAgICAgICAgLy8gdHJhbnNmb3JtIGNhY2hlXG4gICAgICAgIHRoaXMuX3RyYW5zZm9ybV9jYWNoZSA9IHtcbiAgICAgICAgICAgIHF1ZXJ5OiBmdW5jdGlvbiAob2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gcmV2ZXJzZSB0cmFuc2Zvcm0gcXVlcnlcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX2NhY2hlLnF1ZXJ5KHJldmVyc2Uob2Zmc2V0LCB0aGlzLl9vcHRpb25zKSk7XG4gICAgICAgICAgICAgICAgLy8ga2VlcCBvcmlnaW5hbCBvZmZzZXQgKGluc3RlYWQgb2YgcmV2ZXJzaW5nIHJlc3VsdClcbiAgICAgICAgICAgICAgICByZXR1cm4gey4uLnN0YXRlLCBvZmZzZXR9O1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbmVhcmJ5KG9mZnNldCkge1xuICAgICAgICBvZmZzZXQgPSBlbmRwb2ludC5mcm9tX2lucHV0KG9mZnNldCk7XG4gICAgICAgIC8vIHJldmVyc2UgdHJhbnNmb3JtIHF1ZXJ5IG9mZnNldFxuICAgICAgICBjb25zdCBuZWFyYnkgPSB0aGlzLl9sYXllci5pbmRleC5uZWFyYnkocmV2ZXJzZShvZmZzZXQsIHRoaXMuX29wdGlvbnMpKTtcbiAgICAgICAgLy8gdHJhbnNmb3JtIHF1ZXJ5IHJlc3VsdCBcbiAgICAgICAgY29uc3QgaXR2ID0gbmVhcmJ5Lml0di5zbGljZSgpO1xuICAgICAgICBpdHZbMF0gPSB0cmFuc2Zvcm0obmVhcmJ5Lml0dlswXSwgdGhpcy5fb3B0aW9ucyk7XG4gICAgICAgIGl0dlsxXSA9IHRyYW5zZm9ybShuZWFyYnkuaXR2WzFdLCB0aGlzLl9vcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGl0dixcbiAgICAgICAgICAgIGxlZnQ6IHRyYW5zZm9ybShuZWFyYnkubGVmdCwgdGhpcy5fb3B0aW9ucyksXG4gICAgICAgICAgICByaWdodDogdHJhbnNmb3JtKG5lYXJieS5yaWdodCwgdGhpcy5fb3B0aW9ucyksXG4gICAgICAgICAgICBjZW50ZXI6IG5lYXJieS5jZW50ZXIubWFwKCgpID0+IHRoaXMuX3RyYW5zZm9ybV9jYWNoZSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgVElNRUxJTkUgVFJBTlNGT1JNIExBWUVSXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogU2hpZnRpbmcgYW5kIHNjYWxpbmcgdGhlIHRpbWVsaW5lIG9mIGEgbGF5ZXJcbiAqIFxuICogb3B0aW9uczpcbiAqIC0gc2hpZnQ6IGEgdmFsdWUgb2YgMiBlZmZlY3RpdmVseSBtZWFucyB0aGF0IGxheWVyIGNvbnRlbnRzIFxuICogICBhcmUgc2hpZnRlZCB0byB0aGUgcmlnaHQgb24gdGhlIHRpbWVsaW5lLCBieSAyIHVuaXRzXG4gKiAtIHNjYWxlOiBhIHZhbHVlIG9mIDIgbWVhbnMgdGhhdCB0aGUgbGF5ZXIgaXMgc3RyZXRjaGVkXG4gKiAgIGJ5IGEgZmFjdG9yIG9mIDJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdGltZWxpbmVfdHJhbnNmb3JtIChzcmMsIG9wdGlvbnM9e30pIHtcblxuICAgIGNvbnN0IGxheWVyID0gbmV3IExheWVyKCk7XG5cbiAgICAvLyBzZXR1cCBzcmMgcHJvcGVydHlcbiAgICBzcmNwcm9wLmFkZFN0YXRlKGxheWVyKTtcbiAgICBzcmNwcm9wLmFkZE1ldGhvZHMobGF5ZXIpO1xuICAgIGxheWVyLnNyY3Byb3BfcmVnaXN0ZXIoXCJzcmNcIik7XG4gICAgICAgIFxuICAgIGxheWVyLnNyY3Byb3BfY2hlY2sgPSBmdW5jdGlvbihwcm9wTmFtZSwgc3JjKSB7XG4gICAgICAgIGlmIChwcm9wTmFtZSA9PSBcInNyY1wiKSB7XG4gICAgICAgICAgICBpZiAoIShzcmMgaW5zdGFuY2VvZiBMYXllcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwic3JjXCIgbXVzdCBiZSBMYXllciAke3NyY31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzcmM7ICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGF5ZXIuc3JjcHJvcF9vbmNoYW5nZSA9IGZ1bmN0aW9uKHByb3BOYW1lLCBlQXJnKSB7XG4gICAgICAgIGlmIChwcm9wTmFtZSA9PSBcInNyY1wiKSB7XG4gICAgICAgICAgICBpZiAoZUFyZyA9PSBcInJlc2V0XCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbmV3IE5lYXJieUluZGV4QVRUKHRoaXMuc3JjLCBvcHRpb25zKVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGxheWVyLm9uY2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBpbml0aWFsaXNlXG4gICAgbGF5ZXIuc3JjID0gc3JjO1xuICAgIFxuICAgIHJldHVybiBsYXllcjtcbn1cblxuIiwiaW1wb3J0IHsgQ3Vyc29yIH0gZnJvbSBcIi4uL2N1cnNvcl9iYXNlLmpzXCI7XG5pbXBvcnQgeyBMYXllciB9IGZyb20gXCIuLi9sYXllcl9iYXNlLmpzXCJcbmltcG9ydCB7IE5lYXJieUluZGV4U3JjIH0gZnJvbSBcIi4uL25lYXJieV9iYXNlLmpzXCJcbmltcG9ydCB7IGlzX2Nsb2NrX2N1cnNvciB9IGZyb20gXCIuLi9jdXJzb3JfY2xvY2suanNcIjtcblxuXG5mdW5jdGlvbiB0b1N0YXRlKHN0YXRlLCBvcHRpb25zPXt9KSB7XG4gICAgY29uc3Qge3ZhbHVlRnVuYywgc3RhdGVGdW5jfSA9IG9wdGlvbnM7XG4gICAgaWYgKHZhbHVlRnVuYyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3RhdGUudmFsdWUgPSB2YWx1ZUZ1bmMoc3RhdGUudmFsdWUpO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSBlbHNlIGlmIChzdGF0ZUZ1bmMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZUZ1bmMoc3RhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3Vyc29yIFRyYW5zZm9ybVxuICogQ3JlYXRlIGEgbmV3IEN1cnNvciB3aGljaCBpcyBhIHRyYW5zZm9ybWF0aW9uIG9mIHRoZSBzcmMgQ3Vyc29yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjdXJzb3JfdHJhbnNmb3JtKHNyYywgb3B0aW9ucz17fSkge1xuXG4gICAgaWYgKCEoc3JjIGluc3RhbmNlb2YgQ3Vyc29yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNyYyBtdXN0IGJlIGEgQ3Vyc29yICR7c3JjfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvciA9IG5ldyBDdXJzb3IoKTtcblxuICAgIC8vIGltcGxlbWVudCBxdWVyeVxuICAgIGN1cnNvci5xdWVyeSA9IGZ1bmN0aW9uIHF1ZXJ5KCkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHNyYy5xdWVyeSgpO1xuICAgICAgICByZXR1cm4gdG9TdGF0ZShzdGF0ZSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gYWRvcHQgdGhlIGN0cmwgb2YgdGhlIHNyYy1jdXJzb3JcbiAgICBpZiAoIWlzX2Nsb2NrX2N1cnNvcihzcmMpKSB7XG4gICAgICAgIGN1cnNvci5jdHJsID0gc3JjLmN0cmw7XG4gICAgICAgIC8vIGFkZCBjYWxsYmFja3NcbiAgICAgICAgY3Vyc29yLmN0cmwuYWRkX2NhbGxiYWNrKCgpID0+IHtjdXJzb3Iub25jaGFuZ2UoKX0pO1xuICAgIH1cblxuICAgIC8qIFxuICAgICAgICBDdXJyZW50IGRlZmluaXRpb24gb2YgQ3Vyc29yIHNyYyBwcm9wZXJ0eSBpcyB0aGF0IGl0IGlzIGEgbGF5ZXIgb3IgdW5kZWZpbmVkLlxuICAgICAgICBUaGlzIGxlYXZlcyBjdXJzb3IgdHJhbnNmb3JtIG9wdGlvbnMuXG4gICAgICAgIDEpIHdyYXAgc3JjIGN1cnNvciBhcyBhIGxheWVyLFxuICAgICAgICAyKSBsZXQgc3JjIHByb3BlcnR5IGJlIHVuZGVmaW5lZFxuICAgICAgICAzKSBhZG9wdCB0aGUgc3JjIHByb3BlcnR5IG9mIHRoZSBzcmMgY3Vyc29yIGFzIGl0cyBvd24gc3JjXG5cbiAgICAgICAgV2UgZ28gZm9yIDMpXG4gICAgKi9cblxuICAgIC8vIGFkb3B0IHRoZSBzcmMgb2YgdGhlIHNyYy1jdXJzb3IgYXMgc3JjXG4gICAgaWYgKCFpc19jbG9ja19jdXJzb3Ioc3JjKSkge1xuICAgICAgICBjdXJzb3Iuc3JjID0gc3JjLnNyYztcbiAgICB9XG5cbiAgICAvLyBjYWxsYmFja3MgZnJvbSBzcmMtY3Vyc29yXG4gICAgc3JjLmFkZF9jYWxsYmFjaygoKSA9PiB7Y3Vyc29yLm9uY2hhbmdlKCl9KTtcbiAgICByZXR1cm4gY3Vyc29yO1xufVxuXG5cbi8qKlxuICogTGF5ZXIgVHJhbnNmb3JtXG4gKiBDcmVhdGUgYSBuZXcgTGF5ZXIgd2hpY2ggaXMgYSB0cmFuc2Zvcm1hdGlvbiBvZiB0aGUgc3JjIExheWVyXG4gKi9cblxuZnVuY3Rpb24gd3JhcHBlZFZhbHVlRnVuYyh2YWx1ZUZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHtzb3VyY2VzLCBzdGF0ZXMsIG9mZnNldH0pIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlRnVuYyhzdGF0ZXNbMF0udmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gd3JhcHBlZFN0YXRlRnVuYyhzdGF0ZUZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHtzb3VyY2VzLCBzdGF0ZXMsIG9mZnNldH0pIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlRnVuYyhzdGF0ZXNbMF0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxheWVyX3RyYW5zZm9ybShzcmMsIG9wdGlvbnM9e30pIHtcblxuICAgIGlmICghKHNyYyBpbnN0YW5jZW9mIExheWVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNyYyBtdXN0IGJlIGEgTGF5ZXIgJHtzcmN9YCk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3BzID0ge307XG4gICAgb3BzLnZhbHVlRnVuYyA9IHdyYXBwZWRWYWx1ZUZ1bmMob3B0aW9ucy52YWx1ZUZ1bmMpO1xuICAgIG9wcy5zdGF0ZUZ1bmMgPSB3cmFwcGVkU3RhdGVGdW5jKG9wdGlvbnMuc3RhdGVGdW5jKTtcblxuICAgIGNvbnN0IGxheWVyID0gbmV3IExheWVyKG9wcyk7XG4gICAgbGF5ZXIuaW5kZXggPSBuZXcgTmVhcmJ5SW5kZXhTcmMoc3JjKTtcbiAgICBsYXllci5zcmMgPSBzcmM7XG4gICAgbGF5ZXIuc3JjLmFkZF9jYWxsYmFjaygoZUFyZykgPT4ge2xheWVyLm9uY2hhbmdlKGVBcmcpfSk7XG4gICAgcmV0dXJuIGxheWVyO1xufVxuXG5cblxuIiwiaW1wb3J0IHtlbmRwb2ludH0gZnJvbSBcIi4vaW50ZXJ2YWxzLmpzXCI7XG5cbi8qXG4gICAgU3RhdGUgUHJvdmlkZXIgVmlld2VyXG4qL1xuXG5mdW5jdGlvbiBpdGVtMnN0cmluZyhpdGVtLCBvcHRpb25zKSB7XG4gICAgLy8gdHh0XG4gICAgY29uc3QgaWRfdHh0ID0gaXRlbS5pZDtcbiAgICBjb25zdCB0eXBlX3R4dCA9IGl0ZW0udHlwZTtcbiAgICBsZXQgaXR2X3R4dCA9IFwiXCI7XG4gICAgaWYgKGl0ZW0uaXR2ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBbbG93LCBoaWdoLCBsb3dJbmNsdWRlLCBoaWdoSW5jbHVkZV0gPSBpdGVtLml0djtcbiAgICAgICAgY29uc3QgbG93X3R4dCA9IChsb3cgPT0gbnVsbCkgPyBcIm51bGxcIiA6IGxvdy50b0ZpeGVkKDIpO1xuICAgICAgICBjb25zdCBoaWdoX3R4dCA9IChoaWdoID09IG51bGwpID8gXCJudWxsXCIgOiBoaWdoLnRvRml4ZWQoMik7XG4gICAgICAgIGl0dl90eHQgPSBgWyR7bG93X3R4dH0sJHtoaWdoX3R4dH0sJHtsb3dJbmNsdWRlfSwke2hpZ2hJbmNsdWRlfV1gOyBcbiAgICB9XG4gICAgbGV0IGRhdGFfdHh0ID0gSlNPTi5zdHJpbmdpZnkoaXRlbS5kYXRhKTtcblxuICAgIC8vIGh0bWxcbiAgICBsZXQgaWRfaHRtbCA9IGA8c3BhbiBjbGFzcz1cIml0ZW0taWRcIj4ke2lkX3R4dH08L3NwYW4+YDtcbiAgICBsZXQgaXR2X2h0bWwgPSBgPHNwYW4gY2xhc3M9XCJpdGVtLWl0dlwiPiR7aXR2X3R4dH08L3NwYW4+YDtcbiAgICBsZXQgdHlwZV9odG1sID0gYDxzcGFuIGNsYXNzPVwiaXRlbS10eXBlXCI+JHt0eXBlX3R4dH08L3NwYW4+YFxuICAgIGxldCBkYXRhX2h0bWwgPSBgPHNwYW4gY2xhc3M9XCJpdGVtLWRhdGFcIj4ke2RhdGFfdHh0fTwvc3Bhbj5gO1xuICAgIFxuICAgIC8vIGRlbGV0ZSBCdXR0b25cbiAgICBjb25zdCB7ZGVsZXRlX2FsbG93ZWQ9ZmFsc2V9ID0gb3B0aW9ucztcbiAgICBpZiAoZGVsZXRlX2FsbG93ZWQpIHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJkZWxldGVcIj5YPC9idXR0b24+XG4gICAgICAgICAgICAke2lkX2h0bWx9OiAke3R5cGVfaHRtbH0gJHtpdHZfaHRtbH0gJHtkYXRhX2h0bWx9XG4gICAgICAgIDwvZGl2PmA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICR7aWRfaHRtbH06ICR7dHlwZV9odG1sfSAke2l0dl9odG1sfSAke2RhdGFfaHRtbH1cbiAgICAgICAgPC9kaXY+YDsgICAgICAgIFxuICAgIH1cbn1cblxuXG5leHBvcnQgY2xhc3MgU3RhdGVQcm92aWRlclZpZXdlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihzdGF0ZVByb3ZpZGVyLCBlbGVtLCBvcHRpb25zPXt9KSB7XG4gICAgICAgIHRoaXMuX3NwID0gc3RhdGVQcm92aWRlcjtcbiAgICAgICAgdGhpcy5fZWxlbSA9IGVsZW07XG4gICAgICAgIHRoaXMuX2hhbmRsZSA9IHRoaXMuX3NwLmFkZF9jYWxsYmFjayh0aGlzLl9vbmNoYW5nZS5iaW5kKHRoaXMpKTsgXG5cbiAgICAgICAgLy8gb3B0aW9uc1xuICAgICAgICBsZXQgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICB0b1N0cmluZzppdGVtMnN0cmluZ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gey4uLmRlZmF1bHRzLCAuLi5vcHRpb25zfTtcblxuICAgICAgICAvKlxuICAgICAgICAgICAgU3VwcG9ydCBkZWxldGVcbiAgICAgICAgKi9cbiAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuZGVsZXRlX2FsbG93ZWQpIHtcbiAgICAgICAgICAgIC8vIGxpc3RlbiBmb3IgY2xpY2sgZXZlbnRzIG9uIHJvb3QgZWxlbWVudFxuICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjYXRjaCBjbGljayBldmVudCBmcm9tIGRlbGV0ZSBidXR0b25cbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBlLnRhcmdldC5jbG9zZXN0KFwiI2RlbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlQnRuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gZGVsZXRlQnRuLmNsb3Nlc3QoXCIubGlzdC1pdGVtXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NwLnVwZGF0ZSh7cmVtb3ZlOltsaXN0SXRlbS5pZF19KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAgICByZW5kZXIgaW5pdGlhbCBzdGF0ZVxuICAgICAgICAqLyBcbiAgICAgICAgdGhpcy5fb25jaGFuZ2UoKTtcbiAgICB9XG5cbiAgICBfb25jaGFuZ2UoKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5fc3AuZ2V0KCkgfHwgW107XG5cbiAgICAgICAgLy8gc29ydCBieSBsb3cgZW5kcG9pbnRcbiAgICAgICAgaXRlbXMuc29ydCgoaXRlbV9hLCBpdGVtX2IpID0+IHtcbiAgICAgICAgICAgIGxldCBsb3dFcF9hID0gZW5kcG9pbnQuZnJvbV9pbnRlcnZhbChpdGVtX2EuaXR2KVswXTtcbiAgICAgICAgICAgIGxldCBsb3dFcF9iID0gZW5kcG9pbnQuZnJvbV9pbnRlcnZhbChpdGVtX2IuaXR2KVswXTtcbiAgICAgICAgICAgIHJldHVybiBlbmRwb2ludC5jbXAobG93RXBfYSwgbG93RXBfYik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNsZWFyXG4gICAgICAgIHRoaXMuX2VsZW0ucmVwbGFjZUNoaWxkcmVuKCk7XG4gICAgICAgIC8vIHJlYnVpbGRcbiAgICAgICAgY29uc3Qge3RvU3RyaW5nfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIGZvciAobGV0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIC8vIGFkZFxuICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLl9lbGVtLnF1ZXJ5U2VsZWN0b3IoYCMke2l0ZW0uaWR9YCk7XG4gICAgICAgICAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBpdGVtLmlkKTtcbiAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbS5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gdG9TdHJpbmcoaXRlbSwgdGhpcy5fb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvLyBjbGFzc2VzXG5pbXBvcnQgeyBOZWFyYnlJbmRleEJhc2UgfSBmcm9tIFwiLi9uZWFyYnlfYmFzZS5qc1wiO1xuaW1wb3J0IHsgTGF5ZXIgfSBmcm9tIFwiLi9sYXllcl9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tIFwiLi9jdXJzb3JfYmFzZS5qc1wiO1xuXG4vLyBzdGF0ZVByb3ZpZGVyc1xuaW1wb3J0IHsgXG4gICAgTE9DQUxfQ0xPQ0tfUFJPVklERVJcbn0gZnJvbSBcIi4vcHJvdmlkZXJfY2xvY2suanNcIjtcbmltcG9ydCB7IENvbGxlY3Rpb25Qcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyX2NvbGxlY3Rpb24uanNcIjtcbmltcG9ydCB7IFZhcmlhYmxlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcl92YXJpYWJsZS5qc1wiO1xuXG4vLyBmYWN0b3J5IGZ1bmN0aW9uc1xuaW1wb3J0IHsgaXRlbXNfbGF5ZXIgfSBmcm9tIFwiLi9sYXllcl9pdGVtcy5qc1wiO1xuaW1wb3J0IHsgY2xvY2tfY3Vyc29yIH0gZnJvbSBcIi4vY3Vyc29yX2Nsb2NrLmpzXCJcbmltcG9ydCB7IHZhcmlhYmxlX2N1cnNvciB9IGZyb20gXCIuL2N1cnNvcl92YXJpYWJsZS5qc1wiO1xuaW1wb3J0IHsgcGxheWJhY2tfY3Vyc29yIH0gZnJvbSBcIi4vY3Vyc29yX3BsYXliYWNrLmpzXCI7XG5pbXBvcnQgeyBsYXllcl9mcm9tX2N1cnNvciB9IGZyb20gXCIuL29wcy9sYXllcl9mcm9tX2N1cnNvci5qc1wiO1xuaW1wb3J0IHsgbWVyZ2VfbGF5ZXIgfSBmcm9tIFwiLi9vcHMvbWVyZ2UuanNcIjtcbmltcG9ydCB7IGJvb2xlYW5fbGF5ZXIgfSBmcm9tIFwiLi9vcHMvYm9vbGVhbi5qc1wiXG5pbXBvcnQgeyBsb2dpY2FsX21lcmdlX2xheWVyLCBsb2dpY2FsX2V4cHJ9IGZyb20gXCIuL29wcy9sb2dpY2FsX21lcmdlLmpzXCI7XG5pbXBvcnQgeyB0aW1lbGluZV90cmFuc2Zvcm0gfSBmcm9tIFwiLi9vcHMvdGltZWxpbmVfdHJhbnNmb3JtLmpzXCI7XG5pbXBvcnQgeyBjdXJzb3JfdHJhbnNmb3JtLCBsYXllcl90cmFuc2Zvcm0gfSBmcm9tIFwiLi9vcHMvdHJhbnNmb3JtLmpzXCI7XG5pbXBvcnQgeyByZWNvcmRfbGF5ZXIgfSBmcm9tIFwiLi9vcHMvcmVjb3JkLmpzXCI7XG5cblxuLy8gdXRpbFxuaW1wb3J0IHsgbG9jYWxfY2xvY2sgfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuaW1wb3J0IHsgU3RhdGVQcm92aWRlclZpZXdlciB9IGZyb20gXCIuL3V0aWwvcHJvdmlkZXJfdmlld2VyLmpzXCI7XG5cbmZ1bmN0aW9uIHJlbmRlcl9wcm92aWRlcihzdGF0ZVByb3ZpZGVyLCBzZWxlY3Rvciwgb3B0aW9ucz17fSkge1xuICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgcmV0dXJuIG5ldyBTdGF0ZVByb3ZpZGVyVmlld2VyKHN0YXRlUHJvdmlkZXIsIGVsZW1zLCBvcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyX2N1cnNvciAoY3Vyc29yLCBzZWxlY3Rvciwgb3B0aW9ucz17fSkge1xuICAgIGNvbnN0IHtkZWxheT0yMDAsIGh0bWxGdW5jLCBub3ZhbHVlfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICBmdW5jdGlvbiByZW5kZXIoc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlLnZhbHVlID09IHVuZGVmaW5lZCAmJiBub3ZhbHVlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RhdGUudmFsdWUgPSBub3ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChodG1sRnVuYyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVsZW1zLmlubmVySFRNTCA9IGh0bWxGdW5jKHN0YXRlLCBlbGVtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtcy5pbm5lckhUTUwgPSAoc3RhdGUudmFsdWUgIT0gdW5kZWZpbmVkKSA/IGAke3N0YXRlLnZhbHVlfWAgOiBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjdXJzb3IuYmluZChyZW5kZXIsIGRlbGF5KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgTEFZRVIgRkFDVE9SSUVTXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmZ1bmN0aW9uIGxheWVyKG9wdGlvbnM9e30pIHtcbiAgICBsZXQge3NyYywgaW5zZXJ0LCB2YWx1ZSwgLi4ub3B0c30gPSBvcHRpb25zO1xuICAgIGlmIChzcmMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICByZXR1cm4gc3JjO1xuICAgIH1cbiAgICBpZiAoc3JjID09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzcmMgPSBuZXcgVmFyaWFibGVQcm92aWRlcih7dmFsdWV9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNyYyA9IG5ldyBDb2xsZWN0aW9uUHJvdmlkZXIoe2luc2VydH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc19sYXllcih7c3JjLCAuLi5vcHRzfSk7IFxufVxuXG5mdW5jdGlvbiByZWNvcmQgKG9wdGlvbnM9e30pIHtcbiAgICBsZXQge2N0cmw9TE9DQUxfQ0xPQ0tfUFJPVklERVIsIHNyYywgZHN0LCAuLi5vcHN9ID0gb3B0aW9ucztcbiAgICBkc3QgPSBsYXllcih7ZHN0OnNyYywgLi4ub3BzfSk7XG4gICAgcmVjb3JkX2xheWVyKGN0cmwsIHNyYywgZHN0KTtcbiAgICByZXR1cm4gZHN0O1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgQ1VSU09SIEZBQ1RPUklFU1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5mdW5jdGlvbiBjbG9jayAoc3JjKSB7XG4gICAgcmV0dXJuIGNsb2NrX2N1cnNvcihzcmMpO1xufVxuXG5mdW5jdGlvbiB2YXJpYWJsZShvcHRpb25zPXt9KSB7XG4gICAgbGV0IHtjbG9jaywgLi4ub3B0c30gPSBvcHRpb25zO1xuICAgIGNvbnN0IHNyYyA9IGxheWVyKG9wdHMpO1xuICAgIHJldHVybiB2YXJpYWJsZV9jdXJzb3IoY2xvY2ssIHNyYyk7XG59XG5cbmZ1bmN0aW9uIHBsYXliYWNrKG9wdGlvbnM9e30pIHtcbiAgICBsZXQge2N0cmwsIC4uLm9wdHN9ID0gb3B0aW9ucztcbiAgICBjb25zdCBzcmMgPSBsYXllcihvcHRzKTtcbiAgICByZXR1cm4gcGxheWJhY2tfY3Vyc29yKGN0cmwsIHNyYyk7XG59XG5cbmZ1bmN0aW9uIHNrZXcgKHNyYywgb2Zmc2V0KSB7XG4gICAgZnVuY3Rpb24gdmFsdWVGdW5jKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSArIG9mZnNldDtcbiAgICB9IFxuICAgIHJldHVybiBjdXJzb3JfdHJhbnNmb3JtKHNyYywge3ZhbHVlRnVuY30pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBFWFBPUlRTXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmV4cG9ydCB7XG4gICAgTGF5ZXIsIEN1cnNvciwgTmVhcmJ5SW5kZXhCYXNlLFxuICAgIGxheWVyLCBcbiAgICBtZXJnZV9sYXllciBhcyBtZXJnZSwgXG4gICAgYm9vbGVhbl9sYXllciBhcyBib29sZWFuLFxuICAgIGxvZ2ljYWxfbWVyZ2VfbGF5ZXIgYXMgbG9naWNhbF9tZXJnZSwgXG4gICAgbG9naWNhbF9leHByLFxuICAgIGNsb2NrLFxuICAgIHZhcmlhYmxlLFxuICAgIHBsYXliYWNrLFxuICAgIGxheWVyX2Zyb21fY3Vyc29yLFxuICAgIGxheWVyX3RyYW5zZm9ybSxcbiAgICBjdXJzb3JfdHJhbnNmb3JtLFxuICAgIHRpbWVsaW5lX3RyYW5zZm9ybSxcbiAgICByZWNvcmQsXG4gICAgc2tldyxcbiAgICByZW5kZXJfcHJvdmlkZXIsXG4gICAgcmVuZGVyX2N1cnNvcixcbiAgICBsb2NhbF9jbG9ja1xufSIsImltcG9ydCB7IEN1cnNvciB9IGZyb20gXCIuLi9jdXJzb3JfYmFzZS5qc1wiO1xuaW1wb3J0IHsgaXNfY2xvY2tfY3Vyc29yLCBjbG9ja19jdXJzb3IgfSBmcm9tIFwiLi4vY3Vyc29yX2Nsb2NrLmpzXCI7XG5pbXBvcnQgeyBpc19pdGVtc19sYXllciB9IGZyb20gXCIuLi9sYXllcl9pdGVtcy5qc1wiO1xuaW1wb3J0IHsgaXNfY2xvY2tfcHJvdmlkZXIsIExPQ0FMX0NMT0NLX1BST1ZJREVSIH0gZnJvbSBcIi4uL3Byb3ZpZGVyX2Nsb2NrLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWNvcmRfbGF5ZXIoY3RybD1MT0NBTF9DTE9DS19QUk9WSURFUiwgc3JjLCBkc3QpIHtcblxuICAgIGlmIChpc19jbG9ja19wcm92aWRlcihjdHJsKSkge1xuICAgICAgICBjdHJsID0gY2xvY2tfY3Vyc29yKGN0cmwpO1xuICAgIH1cbiAgICAvLyBjdHJsIG11c3QgYmUgY2xvY2sgY3Vyc29yIG9yIG1lZGlhIGN1cnNvclxuICAgIGlmIChcbiAgICAgICAgIWlzX2Nsb2NrX2N1cnNvcihjdHJsKSAmJlxuICAgICAgICAhaXNfY2xvY2tfY3Vyc29yKGN0cmwuY3RybClcbiAgICApe1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGN0cmwgb3IgY3RybC5jdHJsIG11c3QgYmUgYSBjbG9jayBjdXJzb3IgJHtjdHJsfWApO1xuICAgIH0gICAgXG5cbiAgICAvLyBzcmMgbXVzdCBiZSBjdXJzb3Igd2l0aCBhIHNlZ21lbnRzIGxheWVyIGFzIHNyY1xuICAgIGlmICghKHNyYyBpbnN0YW5jZW9mIEN1cnNvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzcmMgbXVzdCBiZSBhIGN1cnNvciAke3NyY31gKTtcbiAgICB9XG4gICAgaWYgKCFpc19pdGVtc19sYXllcihzcmMuc3JjKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGN1cnNvciBzcmMgbXVzdCBiZSBhIHNlZ21lbnQgbGF5ZXIgJHtzcmMuc3JjfWApO1xuICAgIH1cblxuICAgIC8vIGRzdCBtdXN0IGJlIHNlZ21lbnRzIGxheWVyXG4gICAgaWYgKCFpc19pdGVtc19sYXllcihkc3QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZHN0IG11c3QgYmUgYSBzZWdtZW50IGxheWVyICR7ZHN0fWApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlY29yZCBzdGF0ZVByb3ZpZGVyIG9mIGN1cnNvciAoc3JjKVxuICAgICAqL1xuICAgIHNyYy5zcmMuc3JjLmFkZF9jYWxsYmFjayhvbl9zcmNfY2hhbmdlKTtcblxuICAgIGZ1bmN0aW9uIG9uX3NyY19jaGFuZ2UgKCkge1xuICAgICAgICAvLyByZWNvcmQgdGltZXN0YW1wXG4gICAgICAgIGNvbnN0IHRzID0gY3RybC52YWx1ZTtcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgaXRlbXMgZnJvbSBzdGF0ZVByb3ZpZGVyXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gc3JjLnNyYy5zcmMuZ2V0KCk7XG4gICAgICAgIC8vIGFwcGVuZCBpdGVtcyB0byBkc3RcbiAgICAgICAgZHN0LmFwcGVuZChpdGVtcywgdHMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRPRE8gXG4gICAgICogLSBjbG9jayBzaG91bGQgYmUgdXNlZCBhcyBhIHJlY29yZCBjbG9jaywgaW1wbHlpbmcgdGhhdFxuICAgICAqICAgaXRlbXMgc2hvdWxkIGJlIHJlY29kZWQgYWNjb3JkaW5nIHRvIHRoaXMgY2xvY2s/XG4gICAgICogLSB0aGlzIGltcGxpZXMgc2Vuc2l0aXZpdHkgdG8gYSBkaWZmZXJlbmNlIGJldHdlZW4gXG4gICAgICogICBjdXJzb3IgY2xvY2sgYW5kIHJlY29yZCBjbG9jayBcbiAgICAgKi9cblxuXG4gICAgcmV0dXJuIGRzdDtcbn0iXSwibmFtZXMiOlsiaXNOdW1iZXIiLCJuIiwiRVBfVFlQRSIsIk9iamVjdCIsImZyZWV6ZSIsIkhJR0hfT1BFTiIsIkhJR0hfQ0xPU0VEIiwiVkFMVUUiLCJMT1dfQ0xPU0VEIiwiTE9XX09QRU4iLCJFUF9PUkRFUiIsIk1hcCIsImVuZHBvaW50X2lzX2xvdyIsImVwIiwiZW5kcG9pbnRfZnJvbV9pbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIkVycm9yIiwidiIsInQiLCJ2YWx1ZSIsInZhbHVlcyIsImluY2x1ZGVzIiwiSW5maW5pdHkiLCJ1bmRlZmluZWQiLCJlbmRwb2ludF9QT1NfSU5GIiwiZW5kcG9pbnRfTkVHX0lORiIsImVuZHBvaW50X2ludGVybmFsIiwibnVtYmVyX2NtcCIsImEiLCJiIiwiZW5kcG9pbnRfY21wIiwiZXAxIiwiZXAyIiwidjEiLCJ0MSIsInYyIiwidDIiLCJkaWZmIiwiZ2V0IiwiZW5kcG9pbnRfbGUiLCJwMSIsInAyIiwiZW5kcG9pbnRfZ2UiLCJlbmRwb2ludF9lcSIsImVuZHBvaW50c19mcm9tX2ludGVydmFsIiwiaXR2IiwibG93IiwiaGlnaCIsImxvd0Nsb3NlZCIsImhpZ2hDbG9zZWQiLCJsb3dUeXBlIiwiaGlnaFR5cGUiLCJpbnRlcnZhbF9jb3ZlcnNfZW5kcG9pbnQiLCJsb3dfZXAiLCJoaWdoX2VwIiwiZW5kcG9pbnQiLCJsZSIsImx0IiwiZ2UiLCJndCIsImNtcCIsImVxIiwibWluIiwibWF4IiwiZmxpcCIsInRhcmdldCIsImZyb21faW50ZXJ2YWwiLCJmcm9tX2lucHV0IiwidHlwZXMiLCJQT1NfSU5GIiwiTkVHX0lORiIsImludGVydmFsIiwiY292ZXJzX2VuZHBvaW50IiwiY292ZXJzX3BvaW50IiwicCIsImlzX3Npbmd1bGFyIiwiZnJvbV9lbmRwb2ludHMiLCJpbnB1dCIsImxvd0luY2x1ZGUiLCJoaWdoSW5jbHVkZSIsIk5lYXJieUluZGV4QmFzZSIsIm5lYXJieSIsIm9mZnNldCIsImVtcHR5IiwidGhpcyIsImZpcnN0IiwiY2VudGVyIiwicmlnaHQiLCJsYXN0IiwibGVmdCIsInJpZ2h0X3JlZ2lvbiIsInJpZ2h0X2VuZHBvaW50IiwibGVmdF9yZWdpb24iLCJsZWZ0X2VuZHBvaW50IiwiZmluZF9yZWdpb24iLCJvcHRpb25zIiwibmV4dF9uZWFyYnkiLCJkaXJlY3Rpb24iLCJjb25kaXRpb24iLCJyZWdpb25zIiwiUmVnaW9uSXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsImluZGV4Iiwic3RhcnQiLCJzdG9wIiwiaW5jbHVkZUVtcHR5IiwiX2luZGV4IiwiX3N0YXJ0IiwiX3N0b3AiLCJfY29uZGl0aW9uIiwiX2N1cnJlbnQiLCJuZXh0IiwiZG9uZSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY21wX2FzY2VuZGluZyIsImNtcF9kZXNjZW5kaW5nIiwibmVhcmJ5X2Zyb20iLCJwcmV2X2hpZ2giLCJjZW50ZXJfbG93X2xpc3QiLCJjZW50ZXJfaGlnaF9saXN0IiwibmV4dF9sb3ciLCJyZXN1bHQiLCJzb3J0IiwibWluX2NlbnRlcl9oaWdoIiwibWF4X2NlbnRlcl9oaWdoIiwic2xpY2UiLCJtdWx0aXBsZV9jZW50ZXJfaGlnaCIsIm1heF9jZW50ZXJfbG93IiwibWluX2NlbnRlcl9sb3ciLCJtdWx0aXBsZV9jZW50ZXJfbG93IiwicHJldiIsIk5lYXJieUluZGV4U3JjIiwic3JjIiwic3VwZXIiLCJfc3JjIiwiX2NhY2hlIiwiY3JlYXRlQ2FjaGUiLCJFdmVudCIsInB1Ymxpc2hlciIsIm5hbWUiLCJpbml0Iiwic3Vic2NyaXB0aW9ucyIsInN1YnNjcmliZSIsImNhbGxiYWNrIiwic3ViIiwiU3Vic2NyaXB0aW9uIiwicHVzaCIsImluaXRfcGVuZGluZyIsInNlbGYiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJlQXJncyIsImV2ZW50aWZ5SW5pdEV2ZW50QXJncyIsImVBcmciLCJ0cmlnZ2VyIiwic3VicyIsImVJbmZvIiwiY3R4IiwidGVybWluYXRlZCIsImNhbGwiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwidW5zdWJzY3JpYmUiLCJpZHgiLCJpbmRleE9mIiwic3BsaWNlIiwidGVybWluYXRlIiwiZXZlbnQiLCJldmVudGlmeUluc3RhbmNlIiwib2JqZWN0IiwiX19ldmVudGlmeV9ldmVudE1hcCIsIl9fZXZlbnRpZnlfYnVmZmVyIiwiZXZlbnRpZnlQcm90b3R5cGUiLCJfcHJvdG90eXBlIiwiZXZlbnRpZnlHZXRFdmVudCIsImV2ZW50aWZ5RGVmaW5lIiwiaGFzIiwic2V0IiwiZXZlbnRpZnlUcmlnZ2VyIiwiZXZlbnRpZnlUcmlnZ2VyQWxsIiwiZXZlbnRpZnlUcmlnZ2VyQWxpa2UiLCJtYXAiLCJldmVudEl0ZW1zIiwidHJpZ2dlckl0ZW1zIiwiaXRlbSIsImV2IiwiZmlsdGVyIiwibGVuIiwiYnVmIiwiYnVmX2xlbiIsImkiLCJldmVudGlmeVN1YnNjcmlwdGlvbnMiLCJvbiIsIm9mZiIsIl92YWx1ZSIsInByb3RvdHlwZSIsIlBSRUZJWCIsImFkZFN0YXRlIiwiYWRkX2NhbGxiYWNrIiwiaGFuZGxlciIsImhhbmRsZSIsInJlbW92ZV9jYWxsYmFjayIsIm5vdGlmeV9jYWxsYmFja3MiLCJmb3JFYWNoIiwiYWRkTWV0aG9kcyIsIm9iaiIsImFwaSIsImFzc2lnbiIsImlzX2NhbGxiYWNrX2FwaSIsIm1ldGhvZHMiLCJwcm9wIiwiaXNfZmluaXRlX251bWJlciIsImlzRmluaXRlIiwiY2hlY2tfbnVtYmVyIiwibG9jYWxfY2xvY2siLCJub3ciLCJwZXJmb3JtYW5jZSIsImxvY2FsX2Vwb2NoIiwiRGF0ZSIsInRvU3RhdGUiLCJzb3VyY2VzIiwic3RhdGVzIiwidmFsdWVGdW5jIiwic3RhdGVGdW5jIiwiZHluYW1pYyIsImR5bWFtaWMiLCJzb21lIiwiZSIsInJhbmRvbV9zdHJpbmciLCJ0ZXh0IiwicG9zc2libGUiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzZXRfdGltZW91dCIsImRlbHRhX21zIiwidGlkIiwidGFyZ2V0X21zIiwic2V0VGltZW91dCIsImhhbmRsZV90aW1lb3V0IiwiY2FuY2VsIiwiY2xlYXJUaW1lb3V0IiwibW90aW9uX2hhc19yZWFsX3NvbHV0aW9ucyIsInZlY3RvciIsInAwIiwidjAiLCJhMCIsInQwIiwicG93IiwibW90aW9uX2dldF9yZWFsX3NvbHV0aW9ucyIsInNxcnQiLCJkMSIsImQyIiwibW90aW9uX3V0aWxzIiwiY2FsY3VsYXRlIiwiZCIsImhhc19yZWFsX3NvbHV0aW9ucyIsImdldF9yZWFsX3NvbHV0aW9ucyIsImNhbGN1bGF0ZV90aW1lX3JhbmdlcyIsInBvc19yYW5nZSIsInNvbHV0aW9ucyIsIlNldCIsImNoZWNrX3JhbmdlIiwiTGF5ZXIiLCJDYWNoZUNsYXNzIiwiTGF5ZXJDYWNoZSIsIm9wdHMiLCJfb3B0aW9ucyIsImNhbGxiYWNrLmFkZFN0YXRlIiwiZXZlbnRpZnkuYWRkU3RhdGUiLCJfQ2FjaGVDbGFzcyIsIl9wcml2YXRlX2NhY2hlIiwiX2NvbnN1bWVyX2NhY2hlcyIsImNhY2hlIiwicXVlcnkiLCJyZWxlYXNlQ2FjaGUiLCJjbGVhckNhY2hlcyIsImNsZWFyIiwib25jaGFuZ2UiLCJzYW1wbGUiLCJzdGVwIiwic2FtcGxlcyIsImVuZCIsImluY2x1ZGVfZW5kIiwicmFuZ2UiLCJjYWxsYmFjay5hZGRNZXRob2RzIiwiZXZlbnRpZnkuYWRkTWV0aG9kcyIsImxheWVyIiwiX2xheWVyIiwiX25lYXJieSIsIl9zdGF0ZSIsIm5lZWRfaW5kZXhfbG9va3VwIiwic3RhdGUiLCJQb2xsZXIiLCJfY2FsbGJhY2siLCJfaGFuZGxlIiwiX2RlbGF5IiwiZGVsYXkiLCJkZWxheV9tcyIsImlzX3BvbGxpbmciLCJwYXVzZSIsInBvbGwiLCJyZXN1bWUiLCJhaWQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJtb25pdG9yIiwiX2JpbmRpbmdfc2V0IiwiX2N1cnNvcl9tYXAiLCJfcG9sbGVyIiwib25wb2xsIiwiY3Vyc29yIiwiYmluZGluZyIsImFkZCIsImJpbmRpbmdzIiwib25jdXJzb3JjaGFuZ2UiLCJwb2xsaW5nIiwicmVsZWFzZSIsImRlbGV0ZSIsInBvbGxpbmdfY3Vyc29ycyIsImVudHJ5IiwicmVldmFsdWF0ZV9wb2xsaW5nIiwidHMiLCJkZWxheXMiLCJtaW5fZGVsYXkiLCJnZXRfY3Vyc29yX2N0cmxfc3RhdGUiLCJ0c19sb2NhbCIsImN0cmwiLCJDdXJzb3IiLCJpc19jbG9ja19wcm92aWRlciIsIkxPQ0FMX0NMT0NLX1BST1ZJREVSIiwidDBfZXBvY2giLCJsb2NhbF90cyIsImNoZWNrX2l0ZW0iLCJpZCIsImlzX2NvbGxlY3Rpb25fcHJvdmlkZXIiLCJjYWxsYmFjay5pc19jYWxsYmFja19hcGkiLCJ1cGRhdGUiLCJDb2xsZWN0aW9uUHJvdmlkZXIiLCJfbWFwIiwiaW5zZXJ0IiwiX3VwZGF0ZSIsInJlc2V0IiwiY2hhbmdlcyIsImRpZmZzIiwiZGlmZl9tYXAiLCJyZW1vdmUiLCJlbnRyaWVzIiwibmV3Iiwib2xkIiwiaXNfdmFyaWFibGVfcHJvdmlkZXIiLCJWYXJpYWJsZVByb3ZpZGVyIiwiX2l0ZW1zIiwidHlwZSIsImRhdGEiLCJpdGVtcyIsIk5BTUUiLCJwcm9wTmFtZSIsIm11dGFibGUiLCJlbnRpdHkiLCJoYW5kbGVzIiwiZGVmaW5lUHJvcGVydHkiLCJlbnRpdGllcyIsIlNvcnRlZEFycmF5IiwiX2FycmF5Iiwic2l6ZSIsImFycmF5IiwidGFyZ2V0X3ZhbHVlIiwidGFyZ2V0X2VwIiwibGVmdF9pZHgiLCJyaWdodF9pZHgiLCJtaWRfaWR4IiwibWlkX3ZhbHVlIiwiZ2VJbmRleE9mIiwiZm91bmQiLCJsZUluZGV4T2YiLCJndEluZGV4T2YiLCJsdEluZGV4T2YiLCJyZW1vdmVfbGlzdCIsImluc2VydF9saXN0IiwicmVtb3ZlX2lkeF9saXN0IiwiYW55X3JlbW92ZXMiLCJhbnlfaW5zZXJ0cyIsImZpcnN0X2FyciIsInNlY29uZF9hcnIiLCJmaXJzdF9hcnJfbGVuZ3RoIiwic2Vjb25kX2Fycl9sZW5ndGgiLCJjb25jYXRfaW5fcGxhY2UiLCJzb3J0ZWRfYXJyIiwicmVtb3ZlX2R1cGxpY2F0ZXMiLCJnZXRfYnlfaW5kZXgiLCJsb29rdXAiLCJlcF8wIiwiZXBfMSIsImlkeF8wIiwiaWR4XzEiLCJFUF9UWVBFUyIsIkVuZHBvaW50U2V0IiwibGlzdCIsImxpc3RzIiwiY29uY2F0IiwiTE9XIiwiQUNUSVZFIiwiSElHSCIsIkl0ZW1zTWFwIiwiZ2V0X2l0ZW1zX2J5X3JvbGUiLCJyb2xlIiwicmVnaXN0ZXIiLCJ0eXBlX21hcCIsImFjdGl2ZSIsIndhc19lbXB0eSIsImZpbmRJbmRleCIsIl9pdGVtIiwiaXNfZW1wdHkiLCJ1bnJlZ2lzdGVyIiwiTmVhcmJ5SW5kZXgiLCJzdGF0ZVByb3ZpZGVyIiwiX3NwIiwiX2luaXRpYWxpc2UiLCJyZWZyZXNoIiwiX2l0ZW1zbWFwIiwiX2VuZHBvaW50cyIsInJlbW92ZV9lbmRwb2ludHMiLCJpbnNlcnRfZW5kcG9pbnRzIiwiYmVjYW1lX25vbmVtcHR5IiwiaW5zZXJ0X2l0ZW1zIiwicmVtb3ZlX2l0ZW1zIiwiYWN0aXZlU2V0IiwiX2NvdmVycyIsIml0ZW1zMSIsIml0ZW1zMiIsImlkU2V0IiwiQmFzZVNlZ21lbnQiLCJfaXR2IiwiU3RhdGljU2VnbWVudCIsIk1vdGlvblNlZ21lbnQiLCJwb3NpdGlvbiIsInZlbG9jaXR5IiwiYWNjZWxlcmF0aW9uIiwidGltZXN0YW1wIiwiX3ZlY3RvciIsImVhc2VpbiIsIlRyYW5zaXRpb25TZWdtZW50IiwiZWFzaW5nIiwiX2R5bmFtaWMiLCJfdHJhbnMiLCJwYXJzZUZsb2F0IiwiZWFzZW91dCIsImVhc2Vpbm91dCIsIkludGVycG9sYXRpb25TZWdtZW50IiwidHVwbGVzIiwic29ydGVkVHVwbGVzIiwidmFsdWUxIiwib2Zmc2V0MSIsInZhbHVlMiIsIm9mZnNldDIiLCJpbnRlcnBvbGF0ZSIsImlzX2l0ZW1zX2xheWVyIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIml0ZW1zX2xheWVyIiwiSXRlbXNMYXllckNhY2hlIiwic3JjcHJvcC5hZGRTdGF0ZSIsInNyY3Byb3AuYWRkTWV0aG9kcyIsInNyY3Byb3BfcmVnaXN0ZXIiLCJzcmNwcm9wX2NoZWNrIiwic3JjcHJvcF9vbmNoYW5nZSIsImdldF9pdGVtcyIsImxheWVyX3VwZGF0ZSIsImFwcGVuZCIsImhpZ2hFcCIsIm5ld19pdGVtIiwibW9kaWZ5X2l0ZW1zIiwibG93RXAiLCJsYXllcl9hcHBlbmQiLCJfc2VnbWVudCIsInNlZ21lbnQiLCJfc2VnbWVudHMiLCJsb2FkX3NlZ21lbnQiLCJzZWciLCJmcm9tIiwiaXNfY2xvY2tfY3Vyc29yIiwiY2xvY2tfY3Vyc29yIiwidmFyaWFibGVfY3Vyc29yIiwic3JjX2NhY2hlIiwicmVnaW9uX2hpZ2giLCJkZXRlY3RfZnV0dXJlX2V2ZW50Iiwic2V0X3ZhbHVlIiwibW90aW9uIiwiYTEiLCJ0aW1lX3JhbmdlcyIsImN0ciIsInRpbWVfcmFuZ2UiLCJmaW5kIiwidHIiLCJ2YWwiLCJzZXRfbW90aW9uIiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwic2V0X3RyYW5zaXRpb24iLCJzZXRfaW50ZXJwb2xhdGlvbiIsInBsYXliYWNrX2N1cnNvciIsInBpZCIsImN1cnNvcl9vbmNoYW5nZSIsImNsZWFySW50ZXJ2YWwiLCJjdHJsX3N0YXRlIiwiY3VycmVudF9wb3MiLCJjdXJyZW50X3RzIiwic3JjX25lYXJieSIsInJlZ2lvbl9sb3ciLCJhY3RpdmVfaXRlbXMiLCJ0YXJnZXRfcG9zIiwiYWN0aXZlX2l0ZW0iLCJzZXRJbnRlcnZhbCIsImhhbmRsZV9wb2xsaW5nIiwic3RhcnRfcG9sbGluZyIsIkN1cnNvckluZGV4IiwiX2N1cnNvciIsIk1FUkdFX09QVElPTlMiLCJzdW0iLCJpbmZvIiwicmVkdWNlIiwiYWNjIiwic3RhY2siLCJOZWFyYnlJbmRleE1lcmdlIiwiX3NvdXJjZXMiLCJfY2FjaGVzIiwicHJldl9saXN0IiwibmV4dF9saXN0IiwicHJldl9yZWdpb24iLCJuZXh0X3JlZ2lvbiIsIk5lYXJieUluZGV4Qm9vbGVhbiIsImV2YWx1YXRpb24iLCJyaWdodF9uZWFyYnkiLCJsZWZ0X25lYXJieSIsImxvZ2ljYWxfZXhwciIsImV2YWwiLCJ0cmFuc2Zvcm0iLCJzaGlmdCIsInNjYWxlIiwiYnJhY2tldCIsInJldmVyc2UiLCJhbmQiLCJleHBycyIsImV2ZXJ5IiwiZXhwciIsIm9yIiwieG9yIiwiZXhwcjEiLCJleHByMiIsIm5vdCIsIk5lYXJieUluZGV4QVRUIiwiX3RyYW5zZm9ybV9jYWNoZSIsImN1cnNvcl90cmFuc2Zvcm0iLCJpdGVtMnN0cmluZyIsImlkX3R4dCIsInR5cGVfdHh0IiwiaXR2X3R4dCIsInRvRml4ZWQiLCJpZF9odG1sIiwiaXR2X2h0bWwiLCJ0eXBlX2h0bWwiLCJkYXRhX2h0bWwiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlX2FsbG93ZWQiLCJTdGF0ZVByb3ZpZGVyVmlld2VyIiwiZWxlbSIsIl9lbGVtIiwiX29uY2hhbmdlIiwiZGVmYXVsdHMiLCJ0b1N0cmluZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWxldGVCdG4iLCJjbG9zZXN0IiwibGlzdEl0ZW0iLCJzdG9wUHJvcGFnYXRpb24iLCJpdGVtX2EiLCJpdGVtX2IiLCJsb3dFcF9hIiwibG93RXBfYiIsInJlcGxhY2VDaGlsZHJlbiIsIm5vZGUiLCJxdWVyeVNlbGVjdG9yIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJvcHMiLCJkc3QiLCJyZWNvcmRfbGF5ZXIiLCJzZWxlY3RvciIsImh0bWxGdW5jIiwibm92YWx1ZSIsImVsZW1zIiwiY2xvY2siXSwibWFwcGluZ3MiOiJvQ0EyQ0EsU0FBU0EsRUFBU0MsR0FDZCxNQUFtQixpQkFBTEEsQ0FDbEIsQ0FFQSxNQUFNQyxFQUFVQyxPQUFPQyxPQUFPLENBQzFCQyxVQUFXLElBQ1hDLFlBQWEsSUFDYkMsTUFBTyxHQUNQQyxXQUFZLElBQ1pDLFNBQVUsTUFPZCxNQUFNQyxFQUFXLElBQUlDLElBQUksQ0FDckIsQ0FBQ1QsRUFBUUcsV0FBWSxHQUNyQixDQUFDSCxFQUFRSSxZQUFhLEdBQ3RCLENBQUNKLEVBQVFLLE1BQU8sR0FDaEIsQ0FBQ0wsRUFBUU0sV0FBWSxHQUNyQixDQUFDTixFQUFRTyxTQUFVLEtBR3ZCLFNBQVNHLEVBQWdCQyxHQUNyQixPQUFPQSxFQUFHLElBQU1YLEVBQVFNLFlBQWNLLEVBQUcsSUFBTVgsRUFBUU8sUUFDM0QsQ0FTQSxTQUFTSyxFQUFvQkQsR0FJekIsR0FIS0UsTUFBTUMsUUFBUUgsS0FDZkEsRUFBSyxDQUFDQSxFQUFJWCxFQUFRSyxRQUVMLEdBQWJNLEVBQUdJLE9BQ0gsTUFBTSxJQUFJQyxNQUFNLG9DQUFxQ0wsR0FFekQsSUFBS00sRUFBRUMsR0FBS1AsRUFDWixHQS9CZ0JRLEVBK0JBRCxHQTlCVGpCLE9BQU9tQixPQUFPcEIs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
