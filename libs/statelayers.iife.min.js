var STATELAYERS=function(t){"use strict";function e(t){return"number"==typeof t}const n=Object.freeze({HIGH_OPEN:")",HIGH_CLOSED:"]",VALUE:"",LOW_CLOSED:"[",LOW_OPEN:"("});const r=new Map([[n.HIGH_OPEN,-1],[n.HIGH_CLOSED,0],[n.VALUE,0],[n.LOW_CLOSED,0],[n.LOW_OPEN,1]]);function i(t){return t[1]==n.LOW_CLOSED||t[1]==n.LOW_OPEN}function s(t){if(Array.isArray(t)||(t=[t,n.VALUE]),2!=t.length)throw new Error("Endpoint must be a length-2 array",t);let[r,i]=t;if(s=i,!Object.values(n).includes(s))throw new Error("Unsupported endpoint type",i);var s;if(r==-1/0)return[null,n.LOW_CLOSED];if(r==1/0)return[null,n.HIGH_CLOSED];if(null==r||null==r||e(r))return[r,i];throw new Error("endpoint must be null or number",r)}const o=s(1/0),c=s(-1/0);function l(t){return null!=t[0]?[t[0],t[1]]:i(t)?[-1/0,n.LOW_CLOSED]:[1/0,n.HIGH_CLOSED]}function u(t,e){return t<e?-1:t>e?1:0}function a(t,e){const[n,i]=l(t),[s,o]=l(e),c=u(n,s);if(0==c){return u(r.get(i),r.get(o))}return c}function h(t,e){return a(t,e)<=0}function f(t,e){return a(t,e)>=0}function _(t,e){return 0==a(t,e)}function d(t){const[e,r,i,o]=t,c=i?n.LOW_CLOSED:n.LOW_OPEN,l=o?n.HIGH_CLOSED:n.HIGH_OPEN;return[s([e,c]),s([r,l])]}function p(t,e){const[n,r]=d(t);return h(n,e=s(e))&&h(e,r)}const m={le:h,lt:function(t,e){return a(t,e)<0},ge:f,gt:function(t,e){return a(t,e)>0},cmp:a,eq:_,min:function(t,e){return h(t,e)?t:e},max:function(t,e){return f(t,e)?t:e},flip:function(t,e){if(e)throw new Error("target is deprecated");let[r,i]=t;if(null==r)return t;if(i==n.HIGH_OPEN)return[r,n.LOW_CLOSED];if(i==n.HIGH_CLOSED)return[r,n.LOW_OPEN];if(i==n.LOW_OPEN)return[r,n.HIGH_CLOSED];if(i==n.LOW_CLOSED)return[r,n.HIGH_OPEN];throw new Error("illegal endpoint type",i)},from_interval:d,from_input:s,types:{...n},POS_INF:o,NEG_INF:c},g={covers_endpoint:p,covers_point:function(t,e){return p(t,e)},is_singular:function(t){const[e,n]=d(itv);return _(e,n)},from_endpoints:function(t,e){let[r,s]=t,[o,c]=e;if(!i(t))throw new Error("illegal low endpoint",t);if((l=e)[1]!=n.HIGH_CLOSED&&l[1]!=n.HIGH_OPEN)throw new Error("illegal high endpoint",e);var l;return[r,o,s==n.LOW_CLOSED,c==n.HIGH_CLOSED]},from_input:function(t){let n=t;if(null==n||null==n)throw new Error("input is undefined");if(!Array.isArray(n)){if(!e(n))throw new Error(`input: ${t}: must be Array or Number`);n=[n,n,!0,!0]}1==n.length?n=[n[0],n[0],!0,!0]:2==n.length?n=[n[0],n[1],!0,!1]:3==n.length?n=[n[0],n[1],n[2],!1]:n.length>4&&(n=[n[0],n[1],n[2],n[4]]);let[r,i,s,o]=n;if(null!=r&&r!=-1/0||(r=null),null!=i&&i!=1/0||(i=null),null==r)s=!0;else if(!e(r))throw new Error("low not a number",r);if(null==i)o=!0;else if(!e(i))throw new Error("high not a number",i);if(null!=r&&null!=i){if(r>i)throw new Error("low > high",r,i);r==i&&(s=!0,o=!0)}if("boolean"!=typeof s)throw new Error("lowInclude not boolean");if("boolean"!=typeof o)throw new Error("highInclude not boolean");return[r,i,s,o]}};class v{nearby(t){throw new Error("Not implemented")}empty(){return null==this.first()}first(){let{center:t,right:e}=this.nearby(m.NEG_INF);return t.length>0?m.NEG_INF:m.lt(e,m.POS_INF)?e:void 0}last(){let{left:t,center:e}=this.nearby(m.POS_INF);return e.length>0?m.POS_INF:m.gt(t,m.NEG_INF)?t:void 0}right_region(t){const e=function(t){const e=m.from_interval(t.itv)[1];return m.flip(e)}(t);if(null!=e[0])return this.nearby(e)}left_region(t){const e=function(t){const e=m.from_interval(t.itv)[0];return m.flip(e)}(t);if(null!=e[0])return this.nearby(e)}find_region(t,e={}){let n,{direction:r=1,condition:i=t=>t.length>0}=e;for(;;){if(n=1==r?this.right_region(t):this.left_region(t),null==n)return;if(i(n.center))return n;t=n}}regions(t){return new y(this,t)}}class y{constructor(t,e={}){let{start:n=-1/0,stop:r=1/0,includeEmpty:i=!0}=e;if(n>r)throw new Error("stop must be larger than start",n,r);this._index=t,this._start=m.from_input(n),this._stop=m.from_input(r),this._condition=i?()=>!0:t=>t.length>0,this._current}next(){if(null==this._current&&(this._current=this._index.nearby(this._start),this._condition(this._current.center)))return{value:this._current,done:!1};let t={condition:this._condition,direction:1};return this._current=this._index.find_region(this._current,t),null==this._current?{value:void 0,done:!0}:{value:this._current,done:!1}}[Symbol.iterator](){return this}}function b(t,e){return m.cmp(t,e)}function w(t,e){return m.cmp(e,t)}function O(t,e,n,r,i){const s={center:n};if(0==n.length)s.right=i,s.left=t;else{r.sort(b);let n=r[0],o=r.slice(-1)[0],c=!m.eq(n,o);e.sort(w);let l=e[0],u=e.slice(-1)[0],a=!m.eq(l,u);m.le(i,n)?s.right=i:s.right=m.flip(n),s.next=c?s.right:i,m.ge(t,l)?s.left=t:s.left=m.flip(l),s.prev=a?s.left:t}let o=m.flip(s.left),c=m.flip(s.right);return s.itv=g.from_endpoints(o,c),s}class E extends v{constructor(t){super(),this._src=t,this._cache=t.createCache()}nearby(t){const e=this._src.index.nearby(t);return e.center=[this._cache],e}}class x{constructor(t,e,n){n=n||{},this.publisher=t,this.name=e,this.init=void 0!==n.init&&n.init,this.subscriptions=[]}subscribe(t,e){if(!t||"function"!=typeof t)throw new Error("Callback not a function",t);const n=new $(this,t,e);if(this.subscriptions.push(n),this.init&&n.init){n.init_pending=!0;let t=this;Promise.resolve().then((function(){const e=t.publisher.eventifyInitEventArgs(t.name)||[];n.init_pending=!1;for(let r of e)t.trigger(r,[n],!0)}))}return n}trigger(t,e,n){let r,i;for(const s of e)if(!s.terminated){r={src:this.publisher,name:this.name,sub:s,init:n},i=s.ctx||this.publisher;try{s.callback.call(i,t,r)}catch(t){console.log(`Error in ${this.name}: ${s.callback} ${t}`)}}}unsubscribe(t){let e=this.subscriptions.indexOf(t);e>-1&&(this.subscriptions.splice(e,1),t.terminate())}}class ${constructor(t,e,n){n=n||{},this.event=t,this.name=t.name,this.callback=e,this.init=void 0===n.init?this.event.init:n.init,this.init_pending=!1,this.terminated=!1,this.ctx=n.ctx}terminate(){this.terminated=!0,this.callback=void 0,this.event.unsubscribe(this)}}function k(t){return t.__eventify_eventMap=new Map,t.__eventify_buffer=[],t}function F(t){function e(t,e){const n=t.__eventify_eventMap.get(e);if(null==n)throw new Error("Event undefined",e);return n}t.eventifyDefine=function(t,e){if(this.__eventify_eventMap.has(t))throw new Error("Event already defined",t);this.__eventify_eventMap.set(t,new x(this,t,e))},t.eventifyTrigger=function(t,e){return this.eventifyTriggerAll([{name:t,eArg:e}])},t.eventifyTriggerAlike=function(t,e){return this.eventifyTriggerAll(e.map((e=>({name:t,eArg:e}))))},t.eventifyTriggerAll=function(t){if(0==t.length)return;let n=t.map((t=>{let{name:n,eArg:r}=t,i=e(this,n),s=i.subscriptions.filter((t=>0==t.init_pending));return[i,r,s]}),this);const r=n.length,i=this.__eventify_buffer,s=this.__eventify_buffer.length;this.__eventify_buffer.length=s+r;for(let t=0;t<r;t++)i[s+t]=n[t];if(0==s){let t=this;Promise.resolve().then((function(){for(let[e,n,r]of t.__eventify_buffer)e.trigger(n,r,!1);t.__eventify_buffer=[]}))}},t.eventifySubscriptions=function(t){return e(this,t).subscriptions},t.on=function(t,n,r){return e(this,t).subscribe(n,r)},t.off=function(t){return e(this,t.name).unsubscribe(t)}}F(class{constructor(t){k(this),this._value=t,this.eventifyDefine("change",{init:!0})}eventifyInitEventArgs(t){if("change"==t)return[this._value]}get value(){return this._value}set value(t){t!=this._value&&(this._value=t,this.eventifyTrigger("change",t))}}.prototype);const I="__callback";function P(t){t[`${I}_handlers`]=[]}function N(t){let e={handler:t};return this[`${I}_handlers`].push(e),e}function C(t){let e=this[`${I}_handlers`].indexOf(t);e>-1&&this[`${I}_handlers`].splice(e,1)}function S(t){this[`${I}_handlers`].forEach((function(e){e.handler(t)}))}function q(t){const e={add_callback:N,remove_callback:C,notify_callbacks:S};Object.assign(t,e)}function L(t){if(null==t)return!1;const e=["add_callback","remove_callback"];for(const n of e){if(!(n in t))return!1;if("function"!=typeof t[n])return!1}return!0}function A(t){return"number"==typeof t&&isFinite(t)}function j(t,e){if(!A(e))throw new Error(`${t} must be finite number ${e}`)}const H={now:()=>performance.now()/1e3};function M(t,e,n,r={}){let i,{valueFunc:s,stateFunc:o,numeric:c=!1,mask:l}=r;if(null!=s){i={value:s({sources:t,states:e,offset:n}),dynamic:e.map((t=>t.dymamic)).some((t=>t)),offset:n}}else i=null!=o?{...o({sources:t,states:e,offset:n}),offset:n}:0==e.length?{value:void 0,dynamic:!1,offset:n}:{...e[0],offset:n};return c&&null!=i.value&&(A(i.value)||(i={value:l,dynamic:!1,offset:n})),i}function G(t){if(!Array.isArray(t))throw new Error("Input must be an array");for(const e of t)e.id=e.id||D(10),e.itv=g.from_input(e.itv);return t}function D(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",r=0;r<t;r++)e+=n.charAt(Math.floor(52*Math.random()));return e}function R(t,e){const[n,r,i,s]=t;return Math.pow(r,2)-2*i*(n-e)>=0}function T(t,e){const[n,r,i,s]=t;if(0===i&&0===r)return n!=e?[]:void 0;if(0===i)return[s+(e-n)/r];if(!1===R(t,e))return[];if(0===Math.pow(r,2)-2*i*(n-e))return[s-r/i];var o=Math.sqrt(Math.pow(r,2)-2*i*(n-e)),c=s+(-r+o)/i,l=s+(-r-o)/i;return[Math.min(c,l),Math.max(c,l)]}const W={calculate:function(t,e){const[n,r,i,s]=t,o=e-s;return[n+r*o+.5*i*Math.pow(o,2),r+i*o,i,e]},has_real_solutions:R,get_real_solutions:T,calculate_time_ranges:function(t,e){const[n,r,i,s]=t;let[o,c]=e;if(null==o&&(o=-1/0),null==c&&(c=1/0),o==-1/0&&c==1/0)return[[null,null]];if(0===r&&0===i)return n>=o&&n<=c?[[null,null]]:[];let l=[];if(-1/0<o&&l.push(...T(t,o)),c<1/0&&l.push(...T(t,c)),l=[...new Set(l)],l.sort(((t,e)=>t-e)),o==-1/0){if(0==l.length)return n<=c?[[null,null]]:[];if(1==l.length)return i>0?[]:i<0?[[null,null]]:r>0?[[null,l[0]]]:[[l[0],null]];if(2==l.length){if(i>0)return[[l[0],l[1]]];if(i<0)return[[null,l[0]],[l[1],null]]}}else if(c==1/0){if(0==l.length)return n>=o?[[null,null]]:[];if(1==l.length)return i>0?[[null,null]]:i<0?[]:r>0?[[l[0],null]]:[[null,l[0]]];if(2==l.length){if(i>0)return[[null,l[0]],[l[1],null]];if(i<0)return[[l[0],l[1]]]}}else{if(0==l.length)return[];if(1==l.length)return[];if(2==l.length)return[[l[0],l[1]]];if(3==l.length)return[[l[0],l[2]]];if(4==l.length)return[[l[0],l[1]],[l[2],l[3]]]}},check_range:function(t){if(Array.isArray(t)&&2!=t.length)throw new Error(`range must have two elements ${t}`);null==t[0]||j("low",t[0]),null==t[1]||j("high",t[1])}};class z{constructor(t={}){const{CacheClass:e=U,valueFunc:n,stateFunc:r}=t;P(this),k(this),this.eventifyDefine("change",{init:!1}),this.index,this._CacheClass=e,this._private_cache,this._consumer_caches=[],this._valueFunc=n,this._stateFunc=r}get numeric(){return!1}get mutable(){return!1}get itemsOnly(){return!1}get valueFunc(){return this._valueFunc}get stateFunc(){return this._stateFunc}get cache(){return null==this._private_cache&&(this._private_cache=new this._CacheClass(this)),this._private_cache}query(t){return this.cache.query(t)}createCache(){const t=new this._CacheClass(this);return this._consumer_caches.push(t),t}releaseCache(t){const e=this._consumer_caches.indexOf(t);e>-1&&this._consumer_caches.splice(e,1)}clearCaches(){for(const t of this._consumer_caches)t.clear();null!=this._private_cache&&this._private_cache.clear()}onchange(){this.clearCaches(),this.notify_callbacks(),this.eventifyTrigger("change")}regions(t){return this.index.regions(t)}sample(t={}){if(this.index.empty())return[];let{start:e,stop:n,step:r=1}=t;if(null==e){const t=this.index.first();if(null==t[0])throw new Error("undefined start");e=t[0]}if(null==n){const t=this.index.last();if(null==t[0])throw new Error("undefined stop");n=t[0]}if(e>n)throw new Error("stop must be larger than start",e,n);const i=this.createCache(),s=function(t,e,n=1,r={}){const i=[],{include_end:s=!1}=r;if(0===n)throw new Error("Step cannot be zero.");if(t<e)for(let r=t;r<e;r+=n)i.push(r);else if(t>e)for(let r=t;r>e;r-=n)i.push(r);return s&&i.push(e),i}(e,n,r,{include_end:!0}).map((t=>[i.query(t).value,t]));return this.releaseCache(i),s}}q(z.prototype),F(z.prototype);class U{constructor(t){this._layer=t,this._nearby,this._state,this._query_options={valueFunc:this._layer.valueFunc,stateFunc:this._layer.stateFunc,numberOnly:this._layer.isNumberOnly}}get layer(){return this._layer}query(t){const e=null==this._nearby||!g.covers_endpoint(this._nearby.itv,t);if(!e&&null!=this._state&&!this._state.dynamic)return{...this._state,offset:t};e&&(this._nearby=this._layer.index.nearby(t));const n=this._nearby.center.map((e=>e.query(t))),r=M(this._nearby.center,n,t,this._query_options);return this._state=r.dynamic?void 0:r,r}clear(){this._nearby=void 0,this._state=void 0}}class V{constructor(t){this._callback=t,this._handle,this._delay}set delay(t){if("number"!=typeof t)throw new Error(`delay must be a number ${t}`);this._delay!=t&&(this._delay=t)}get delay(){return this._delay}is_polling(){return null!=this._handle}pause(){null!=this._handle&&(this._handle.cancel(),this._handle=void 0)}poll(){this._callback(),this.pause(),this.resume()}resume(){if(null==this._handle)if(0==this._delay){const t=requestAnimationFrame(this.poll.bind(this));this._handle={cancel:()=>cancelAnimationFrame(t)}}else{const t=setTimeout(this.poll.bind(this),this._delay);this._handle={cancel:()=>clearTimeout(t)}}}}const B=new class{constructor(){this._binding_set=new Set,this._cursor_map=new Map,this._poller=new V(this.onpoll.bind(this))}bind(t,e,n){if(null==n)n=0;else if("number"!=typeof n)throw new Error(`delay must be a number ${n}`);let r={cursor:t,callback:e,delay:n};if(this._binding_set.add(r),this._cursor_map.has(t))this._cursor_map.get(t).bindings.push(r);else{let e=t.on("change",this.oncursorchange.bind(this));this._cursor_map.set(t,{sub:e,polling:!1,bindings:[r]})}return r}release(t){if(!this._binding_set.delete(t))return;const e=t.cursor,{sub:n,bindings:r}=this._cursor_map.get(e),i=r.indexOf(t);i>=0&&r.splice(i,1),0==r.length&&(e.off(n),this._cursor_map.delete(e))}oncursorchange(t,e){const n=e.src,r=t;this._cursor_map.get(n).polling=r.dynamic;const i=[...this._cursor_map.values()].filter((t=>t.polling));this.reevaluate_polling(i);const{bindings:s}=this._cursor_map.get(n);for(const t of s)t.callback(r)}onpoll(){const t=H.now();for(const[e,n]of this._cursor_map)if(n.polling){const r=e.query(t);for(const t of n.bindings)t.callback(r)}}reevaluate_polling(t){if(0==t.length)this._poller.pause();else{const e=[];for(const n of t)for(const t of n.bindings)e.push(t.delay);const n=Math.min(...e);this._poller.delay=n,this._poller.pause(),this._poller.resume()}}};class J{constructor(){P(this),k(this),this.eventifyDefine("change",{init:!0})}get mutable(){return!1}get numeric(){return!1}get itemsOnly(){return!1}get fixedRate(){return!1}query(t){throw new Error("query() not implemented")}get value(){return this.query().value}get(){return this.query().value}eventifyInitEventArgs(t){if("change"==t)return[this.query()]}bind(t,e,n={}){return function(t,e,n){return B.bind(t,e,n)}(this,t,e)}release(t){return e=t,B.release(e);var e}onchange(){this.notify_callbacks(),this.eventifyTrigger("change",this.query()),this.detect_future_event()}detect_future_event(){}}q(J.prototype),F(J.prototype);class X{constructor(t={}){const{clock:e,vector:n=Y}=t;if(void 0!==e&&("now"in(r=e)&&"function"==typeof r.now))this._clock={now:t=>{const n=null!=t?H.now()-t:0;return e.now()-n}},this._rate=1;else{let{ts:t,value:e,rate:r=1}=n;null==t&&(t=H.now()),j("ts",t),j("value",e),j("rate",r),this._t0=t,this._value=e,this._rate=r,this._clock={now:(t=H.now())=>this._value+(t-this._t0)*this._rate}}var r}now(){return this._clock.now()}get rate(){return this._rate}}const Y={ts:H.now(),value:new Date/1e3,rate:1},K=new X({vector:Y});function Q(t){return!!L(t)&&("get"in t&&("function"==typeof t.get&&("update"in t&&"function"==typeof t.update)))}class Z{constructor(t={}){P(this),this._map=new Map;let{items:e}=t;if(null!=e)for(const t of e)this._map.set(t.id,t)}update(t){return t.insert=G(t.insert),Promise.resolve().then((()=>{let e;return null!=t&&(e=this._update(t),this.notify_callbacks(e)),e}))}_update(t){const e=new Map;let{insert:n=[],remove:r=[],reset:i=!1}=t;if(i){for(const[t,n]of this._map.entries())e.set(t,{id:t,new:void 0,old:n});this._map=new Map}else for(const t of r){let n=this._map.get(t);null!=n&&(e.set(n.id,{id:n.id,new:void 0,old:n}),this._map.delete(t))}for(let t of n){const n=e.get(t.id),r=null!=n?n.old:this._map.get(t.id);e.set(t.id,{id:t.id,new:t,old:r}),this._map.set(t.id,t)}return[...e.values()]}get(){return[...this._map.values()]}}function tt(t){return!!L(t)&&("get"in t&&("function"==typeof t.get&&("set"in t&&"function"==typeof t.set)))}q(Z.prototype);class et{constructor(t={}){const{items:e}=t;P(this),this._object=e}set(t){return t=G(t),Promise.resolve().then((()=>{this._object=t,this.notify_callbacks()}))}get(){return this._object}}q(et.prototype);const nt="srcprop",rt=`__${nt}`;function it(t){t[`${rt}`]=new Map}function st(t){const e={};e[`${nt}_register`]=function(t,e={}){let{mutable:n=!0}=e;const r=this[`${rt}`];r.set(t,{init:!1,mutable:n,entity:void 0,handles:[]}),Object.defineProperty(this,t,{get:function(){return r.get(t).entity},set:function(e){this[`${nt}_check`]&&(e=this[`${nt}_check`](t,e)),e!=r.get(t).entity&&this[`${rt}_attach`](t,e)}})},e[`${rt}_attach`]=function(t,e){const n=this[`${rt}`].get(t);if(n.init&&!n.mutable)throw new Error(`${t} can not be reassigned`);const r=Array.isArray(e)?e:[e];if(n.handles.length>0)for(const[t,e]of Object.entries(r))L(e)&&e.remove_callback(n.handles[t]);if(n.handles=[],n.entity=e,n.init=!0,this[`${nt}_onchange`]){const e=function(e){this[`${nt}_onchange`](t,e)}.bind(this);for(const t of r)L(t)&&n.handles.push(t.add_callback(e));this[`${nt}_onchange`](t,"reset")}},Object.assign(t,e)}class ot{constructor(){this._array=[]}get size(){return this._array.length}get array(){return this._array}indexOf(t){const e=m.from_input(t);let n=0,r=this._array.length-1;for(;n<=r;){const t=Math.floor((n+r)/2);let i=this._array[t];if(m.eq(i,e))return[!0,t];m.lt(i,e)?n=t+1:r=t-1}return[!1,n]}geIndexOf(t){let[e,n]=this.indexOf(t);return n<this._array.length?n:-1}leIndexOf(t){let[e,n]=this.indexOf(t);return n=e?n:n-1,n>=0?n:-1}gtIndexOf(t){let[e,n]=this.indexOf(t);return n=e?n+1:n,n<this._array.length?n:-1}ltIndexOf(t){let[e,n]=this.indexOf(t);return n-=1,n>=0?n:-1}update(t=[],e=[]){let n=[];for(let e of t){let[t,r]=this.indexOf(e);t&&n.push(r)}for(let t of n)this._array[t]=void 0;let r=n.length>0,i=e.length>0;i&&function(t,e){const n=t.length,r=e.length;t.length+=r;for(let i=0;i<r;i++)t[n+i]=e[i]}(this._array,e),(r||i)&&this._array.sort(m.cmp),r&&(this._array.length-=n.length),i&&function(t){let e=0;for(;!(e+1>=t.length);)m.eq(t[e],t[e+1])?t.splice(e+1,1):e+=1}(this._array)}get_by_index(t){if(t>-1&&t<this._array.length)return this._array[t]}lookup(t){null==t&&(t=[null,null,!0,!0]);let[e,n]=m.from_interval(t),r=this.geIndexOf(e),i=this.leIndexOf(n);return-1==r||-1==i?[]:this._array.slice(r,i+1)}lt(t){return this.get_by_index(this.ltIndexOf(t))}le(t){return this.get_by_index(this.leIndexOf(t))}get(t){let[e,n]=this.indexOf(t);if(e)return this._array[n]}gt(t){return this.get_by_index(this.gtIndexOf(t))}ge(t){return this.get_by_index(this.geIndexOf(t))}}const{LOW_CLOSED:ct,LOW_OPEN:lt,HIGH_CLOSED:ut,HIGH_OPEN:at}=m.types,ht=[ct,lt,ut,at];class ft{constructor(){this._map=new Map([[ct,new Set],[lt,new Set],[ut,new Set],[at,new Set]])}add(t){const[e,n]=t;return this._map.get(n).add(e)}has(t){const[e,n]=t;return this._map.get(n).has(e)}get(t){const[e,n]=t;return this._map.get(n).get(e)}list(){const t=ht.map((t=>[...this._map.get(t).values()].map((e=>[e,t]))));return[].concat(...t)}}const _t="low",dt="active",pt="high";class mt{constructor(){this._map=new Map([[ct,new Map],[lt,new Map],[ut,new Map],[at,new Map]])}get_items_by_role(t,e){const[n,r]=t,i=this._map.get(r).get(n);return null!=i?i[e]:[]}register(t,e,n){const[r,i]=t,s=this._map.get(i);s.has(r)||s.set(r,{low:[],active:[],high:[]});const o=s.get(r),c=o[_t].length+o[pt].length==0;-1==o[n].findIndex((t=>t.id==e.id))&&o[n].push(e);const l=o[_t].length+o[pt].length==0;return c&&!l}unregister(t,e){const[n,r]=t,i=this._map.get(r),s=i.get(n);if(null!=s){const t=s[_t].length+s[pt].length==0;for(const t of[_t,dt,pt]){let n=s[t].findIndex((t=>t.id==e.id));n>-1&&s[t].splice(n,1)}const r=s[_t].length+s[pt].length==0;if(!t&&r)return i.delete(n),!0}return!1}}class gt extends v{constructor(t){if(super(),!Q(t)&&!tt(t))throw new Error(`stateProvider must be collectionProvider or variableProvider ${t}`);this._sp=t,this._initialise(),this.refresh()}get src(){return this._sp}_initialise(){this._itemsmap=new mt,this._endpoints=new ot,this._index=[]}refresh(t){const e=new ft,n=new ft;let r,i=[],s=[];if(null==t)i=this.src.get()||[],this._initialise();else for(const e of t)null!=e.new&&i.push(e.new),null!=e.old&&s.push(e.old);for(const t of s)for(const n of this._endpoints.lookup(t.itv)){this._itemsmap.unregister(n,t)&&e.add(n)}for(const t of i){const[e,i]=m.from_interval(t.itv);r=this._itemsmap.register(e,t,_t),r&&n.add(e),r=this._itemsmap.register(i,t,pt),r&&n.add(i)}this._endpoints.update(e.list(),n.list());const o=new Set;for(const t of this._endpoints.array){for(let e of this._itemsmap.get_items_by_role(t,_t))o.add(e);for(let e of o)this._itemsmap.register(t,e,dt);for(let e of this._itemsmap.get_items_by_role(t,pt))o.delete(e)}}_covers(t){const e=m.from_input(t),n=this._endpoints.le(e)||m.NEG_INF,r=this._endpoints.ge(e)||m.POS_INF;if(m.eq(n,r))return this._itemsmap.get_items_by_role(n,dt);{const t=this._itemsmap.get_items_by_role(n,dt),e=this._itemsmap.get_items_by_role(r,dt),i=new Set(t.map((t=>t.id)));return e.filter((t=>i.has(t.id)))}}nearby(t){const e=m.from_input(t);let n=this._covers(e);const r=[],i=[];for(const t of n){const[e,n]=m.from_interval(t.itv);r.push(n),i.push(e)}let s,o=e;for(;!(o=this._endpoints.lt(o)||m.NEG_INF,null==o[0]||(s=this._itemsmap.get_items_by_role(o,pt),s.length>0)););let c=e;for(;!(c=this._endpoints.gt(c)||m.POS_INF,null==c[0]||(s=this._itemsmap.get_items_by_role(c,_t),s.length>0)););return O(o,i,n,r,c)}}class vt{constructor(t){this._itv=t}get itv(){return this._itv}state(t){throw new Error("not implemented")}query(t){return g.covers_point(this._itv,t)?{...this.state(t),offset:t}:{value:void 0,dynamic:!1,offset:t}}}class yt extends vt{constructor(t,e){super(t),this._value=e}state(){return{value:this._value,dynamic:!1}}}class bt extends vt{constructor(t,e){super(t),this._vector=e}state(t){const[e,n,r,i]=W.calculate(this._vector,t);return{value:e,dynamic:0!=n||0!=r,vector:[e,n,r,i]}}}function wt(t){return Math.pow(t,2)}class Ot extends vt{constructor(t,e){super(t);let{v0:n,v1:r,easing:i}=e,[s,o]=this._itv.slice(0,2);this._dynamic=r-n!=0,this._trans=function(t){return t-=s,t/=parseFloat(o-s),"ease-in"==i?t=wt(t):"ease-out"==i?t=function(t){return 1-wt(1-t)}(t):"ease-in-out"==i&&(t=function(t){return t<.5?wt(2*t)/2:(2-wt(2*(1-t)))/2}(t)),t=Math.max(t,0),t=Math.min(t,1),n+(r-n)*t}}state(t){return{value:this._trans(t),dynamic:this._dynamic}}}class Et extends vt{constructor(t,e){super(t),this._trans=function(t){if(t.length<1)return function(){};if(1==t.length)return function(){return t[0][0]};const e=[...t].sort(((t,e)=>t[1]-e[1]));return function(t){if(t<=e[0][1]){const[n,r]=e[0],[i,s]=e[1];return n+(t-r)*(i-n)/(s-r)}if(t>=e[e.length-1][1]){const[n,r]=e[e.length-2],[i,s]=e[e.length-1];return n+(t-r)*(i-n)/(s-r)}for(let n=0;n<e.length-1;n++)if(t>=e[n][1]&&t<=e[n+1][1]){const[r,i]=e[n],[s,o]=e[n+1];return r+(t-i)*(s-r)/(o-i)}}}(e)}state(t){return{value:this._trans(t),dynamic:!0}}}function xt(t,e){let{type:n="static",data:r}=e;return"static"==n?new yt(t,r):"transition"==n?new Ot(t,r):"interpolation"==n?new Et(t,r):"motion"==n?new bt(t,r):void console.log("unrecognized segment type",n)}function $t(t={}){const{provider:e,numeric:n=!1,mutable:r=!0,mask:i,...s}=t,o=new z({CacheClass:kt,...s});return Object.defineProperty(o,"numeric",{get:()=>n}),Object.defineProperty(o,"mutable",{get:()=>r}),Object.defineProperty(o,"itemsOnly",{get:()=>!0}),null!=i&&j("mask",i),o.mask=i,it(o),st(o),o.srcprop_register("provider"),o.srcprop_check=function(t,e){if("provider"==t){if(!Q(e)&&!tt(e))throw new Error(`"obj" must collectionProvider or objectProvider ${e}`);return e}},o.srcprop_onchange=function(t,e){"provider"==t&&("reset"==e&&(Q(o.provider)||tt(o.provider))&&(o.index=new gt(o.provider)),null!=o.index&&(Q(o.provider)?o.index.refresh(e):tt(o.provider)&&o.index.refresh(),o.onchange()))},o.get_items=function(t){return[...o.index.nearby(t).center]},o.readOnly||(o.update=function(t){return Ft(o,t)},o.append=function(t,e){return function(t,e,n){const r=m.from_input(n),i=e.filter((t=>{const e=m.from_interval(t.itv)[1];return m.ge(e,r)})).map((t=>{if(g.covers_endpoint(t.itv,r)){const e={...t};return e.itv=[n,t.itv[1],!0,t.itv[3]],e}return t})),s=t.index.nearby(n).center.map((t=>{const e={...t};return e.itv=[t.itv[0],n,t.itv[2],!1],e})),o=t.provider.get().filter((t=>{const e=m.from_interval(t.itv)[0];return m.gt(e,r)})).map((t=>t.id)),c=[...s,...i];return Ft(t,{remove:o,insert:c,reset:!1})}(o,t,e)}),o.provider=e,o}class kt{constructor(t){this._layer=t,this._nearby=void 0,this._segment=void 0,this._query_options={valueFunc:this._layer.valueFunc,stateFunc:this._layer.stateFunc,numeric:this._layer.numeric,mask:this._layer.mask}}get src(){return this._layer}get segment(){return this._segment}query(t){if(null==this._nearby||!g.covers_endpoint(this._nearby.itv,t)){this._nearby=this._layer.index.nearby(t);let{itv:e,center:n}=this._nearby;this._segments=n.map((t=>xt(e,t)))}const e=this._segments.map((e=>e.query(t)));return M(this._segments,e,t,this._query_options)}clear(){this._nearby=void 0,this._segment=void 0}}function Ft(t,e={}){if(e.insert??=[],t.isNumberOnly)for(let t of e.insert)if(t.type??="static","static"==t.type&&!A(t.data))throw new Error(`Layer is number only, but item ${t} is not a number`);if(Q(t.provider))return t.provider.update(e);if(tt(t.provider)){let{insert:n=[],remove:r=[],reset:i=!1}=e;if(i)return t.provider.set(n);{const e=new Map((t.provider.get()||[]).map((t=>[t.id,t])));r.forEach((t=>e.delete(t))),n.forEach((t=>e.set(t.id,t)));const i=Array.from(e.values());return t.provider.set(i)}}}function It(t={}){const{ctrl:e,src:n,mutable:r=!1}=t;let i,s,o;const c=new J;function l(t,e){const[n,r,i,o]=t;if(0!=i)throw new Error("timeout not yet implemented for acceleration");if(e==1/0||e==-1/0)return;const c=(e-n)/r;if(c<=0)return console.log("Warning - timeout <= 0 - dropping",c),console.log("vector",t),void console.log("target",e);s=function(t,e){let n,r=performance.now()+(e=Math.max(e,0));return n=setTimeout((function e(){const i=r-performance.now();i>0?n=setTimeout(e,i+1):t()}),e+1),{cancel:function(){clearTimeout(n)}}}(u,1e3*c)}function u(){c.onchange()}return Object.defineProperty(c,"numeric",{get:()=>null!=c.src&&c.src.numeric}),Object.defineProperty(c,"mutable",{get:()=>null!=c.src&&(c.src.mutable&&r)}),Object.defineProperty(c,"itemsOnly",{get:()=>null!=c.src&&c.src.itemsOnly}),it(c),st(c),c.srcprop_register("ctrl"),c.srcprop_register("src"),c.srcprop_check=function(t,e){if("ctrl"==t){if(!(e instanceof J)||0==e.numeric)throw new Error(`"ctrl" property must be a numeric cursor ${e}`);return e}if("src"==t){if(!(e instanceof z))throw new Error(`"src" property must be a layer ${e}`);return e}},c.srcprop_onchange=function(t,e){null!=c.src&&null!=c.ctrl&&("src"==t&&("reset"==e?i=c.src.createCache():i.clear()),c.onchange())},c.query=function(t){let e=c.ctrl.query(t).value;j("cursor.ctrl.offset",e);const n=i.query(e);return c.src.numeric&&null==n.value&&(n.value=0),n},c.active_items=function(t){if(c.itemsOnly){const e=c.ctrl.query(t).value;return c.src.index.nearby(e).center}},c.detect_future_event=function(){if(null!=s&&s.cancel(),null!=o&&clearInterval(o),c.fixedRate)return;if(null==c.ctrl)throw new Error("cursor.ctrl can not be undefined with isFixedRate=false");if(null==c.src)throw new Error("cursor.src can not be undefined with isFixedRate=false");const{value:t,dynamic:e,offset:n}=c.ctrl.query();if(!e)return;const r=c.src.index.nearby(t),i=r.itv[0]??-1/0,u=r.itv[1]??1/0;if(i!=-1/0||u!=1/0)if(c.ctrl.fixedRate){l([t,c.ctrl.rate,0,n],u)}else{if(c.ctrl.ctrl.fixedRate&&c.ctrl.src.itemsOnly){const e=c.ctrl.src.get_items(n);if(1==e.length){const r=e[0];if("motion"==r.type){const[e,s,o,c]=r.data;if(0==o){return void l([t,s,0,n],s>0?u:i)}}else if("transition"==r.type){const{v0:e,v1:s,t0:o,t1:c,easing:a="linear"}=r.data;if("linear"==a){const r=(s-e)/(c-o);return void l([t,r,0,n],r>0?u:i)}}}}var a,h;a=i,h=u,o=setInterval((()=>{!function(t,e){let n=c.ctrl.value;(t>-1/0&&n<t||e<1/0&&n>e)&&c.onchange()}(a,h)}),100)}},c.ctrl=e,c.src=n,c}function Pt(t={}){const{ctrl:e,src:n,record:r=!1}=t,i=new It({ctrl:e,src:n,mutable:!0}),s=i.srcprop_check;return i.srcprop_check=function(t,e){if(e=s(t,e),"ctrl"==t){if(!e.fixedRate)throw new Error(`"ctrl" property must be a fixedrate cursor ${e}`);return e}if("src"==t){if(!e.mutable)throw new Error(`"src" property must be mutable layer ${e}`);return e}},i.set=t=>{const e=function(t,e){let n=[];null!=e&&(n=[{id:D(10),itv:[null,null,!0,!0],type:"static",data:e}]);return n}(0,t);return i.update(e)},i.motion=t=>{const e=function(t,e={}){let{value:n,offset:r}=t.query();"number"==typeof n&&isFinite(n)||(n=0);const{position:i=n,velocity:s=0,acceleration:o=0,timestamp:c=r,range:l=[null,null]}=e;W.check_range(l),j("position",i),j("velocity",s),j("acceleration",o),j("timestamp",c);const u=[],a=(0,W.calculate_time_ranges)([i,s,o,c],l),h=t.ctrl.value,f=a.find((t=>{const e=t[0]??-1/0,n=t[1]??1/0;return e<=h&&h<=n}));if(null!=f){const[t,e]=f;u.push({id:D(10),itv:[t,e,!0,!0],type:"motion",data:[i,s,o,c]}),null!=t&&u.push({id:D(10),itv:[null,t,!0,!1],type:"static",data:l[0]}),null!=e&&u.push({id:D(10),itv:[e,null,!1,!0],type:"static",data:l[1]})}else{const t=i<l[0]?l[0]:l[1];u.push({id:D(10),itv:[null,null,!0,!0],type:"static",data:t})}return u}(i,t);return i.update(e)},i.transition=({target:t,duration:e,easing:n})=>{const r=function(t,e,n,r){const{value:i,offset:s}=t.query(),o=e,c=s+n;if(o==i)return;return j("position",i),j("position",o),j("position",s),j("position",c),[{id:D(10),itv:[null,s,!0,!1],type:"static",data:i},{id:D(10),itv:[s,c,!0,!0],type:"transition",data:{v0:i,v1:o,t0:s,t1:c,easing:r}},{id:D(10),itv:[c,null,!1,!0],type:"static",data:o}]}(i,t,e,n);return i.update(r)},i.interpolate=({tuples:t,duration:e})=>{const n=function(t,e,n){const r=t.ctrl.value;e=e.map((([t,e])=>(j("ts",e),j("val",t),[t,r+e])));const i=xt([null,null,!0,!0],{type:"interpolation",data:e}),s=r,o=s+n,c=i.state(s).value,l=i.state(o).value;return[{id:D(10),itv:[-1/0,s,!0,!1],type:"static",data:c},{id:D(10),itv:[s,o,!0,!1],type:"interpolation",data:e},{id:D(10),itv:[o,1/0,!0,!0],type:"static",data:l}]}(i,t,e);return i.update(n)},i.update=t=>{if(null!=t)return r?i.src.append(t,i.ctrl.value):i.src.update({insert:t,reset:!0})},i}class Nt extends v{constructor(t){super(),this._cursor=t}nearby(t){return{itv:[null,null,!0,!0],center:[this._cursor],left:m.NEG_INF,prev:m.NEG_INF,right:m.POS_INF,next:m.POS_INF}}}const Ct={sum:{valueFunc:function(t){return t.states.map((t=>t.value)).reduce(((t,e)=>t+e),0)}},stack:{stateFunc:function(t){return{...t.states[0]}}},array:{valueFunc:function(t){return t.states.map((t=>t.value))}}};function St(t,e){return m.cmp(t,e)}function qt(t,e){return m.cmp(e,t)}class Lt extends v{constructor(t){super(),this._sources=t,this._caches=new Map(t.map((t=>[t,t.createCache()])))}nearby(t){t=m.from_input(t);const e=[],n=[],r=[],i=[],s=[];for(let o of this._sources){let c=o.index.nearby(t),l=o.index.find_region(c,{direction:-1}),u=o.index.find_region(c,{direction:1});if(null!=l&&e.push(m.from_interval(l.itv)[1]),null!=u&&n.push(m.from_interval(u.itv)[0]),c.center.length>0){r.push(this._caches.get(o));let[t,e]=m.from_interval(c.itv);i.push(e),s.push(t)}}n.sort(St);const o=n[0]||m.POS_INF;e.sort(qt);return O(e[0]||m.NEG_INF,s,r,i,o)}}function At(t){return{query:function(e){return{value:t,dynamic:!1,offset:e}}}}class jt extends v{constructor(t,e={}){super(),this._index=t;let{condition:n=t=>t.length>0}=e;this._condition=n}nearby(t){t=m.from_input(t);const e=this._index.nearby(t);let n=this._condition(e.center);const r=t=>this._condition(t)!=n;let i,s,o=this._index.find_region(e,{direction:1,condition:r});null!=o&&(i=m.from_interval(o.itv)[0]);let c=this._index.find_region(e,{direction:-1,condition:r});null!=c&&(s=m.from_interval(c.itv)[1]),s=s||m.NEG_INF,i=i||m.POS_INF;const l=m.flip(s),u=m.flip(i),a=n?1:0;return{itv:g.from_endpoints(l,u),center:[At(a)],left:s,right:i}}}function Ht(t){if(!(t instanceof z))throw new Error(`must be layer ${t}`);return{eval:function(e){for(let n of e)if(n.src==t)return!0;return!1}}}function Mt(t,{shift:e=0,scale:n=1}){if(null==t||!isFinite(t))return t;if("number"==typeof t)return t*n+e;if(Array.isArray(t)&&t.length>1){let[r,i]=t;return m.from_input([r*n+e,i])}}function Gt(t,{shift:e=0,scale:n=1}){if(null==t||!isFinite(t))return t;if("number"==typeof t)return(t-e)/n;if(Array.isArray(t)&&t.length>1){let[r,i]=t;return m.from_input([(r-e)/n,i])}}Ht.and=function(...t){return{eval:function(e){return t.every((t=>t.eval(e)))}}},Ht.or=function(...t){return{eval:function(e){return t.some((t=>t.eval(e)))}}},Ht.xor=function(t,e){return{eval:function(n){return t.eval(n)!=e.eval(n)}}},Ht.not=function(t){return{eval:function(e){return!t.eval(e)}}};class Dt extends v{constructor(t,e={}){super(),this._layer=t,this._cache=t.createCache(),this._options=e,this._transform_cache={query:function(t){return{...this._cache.query(Gt(t,this._options)),offset:t}}.bind(this)}}nearby(t){t=m.from_input(t);const e=this._layer.index.nearby(Gt(t,this._options)),n=e.itv.slice();return n[0]=Mt(e.itv[0],this._options),n[1]=Mt(e.itv[1],this._options),{itv:n,left:Mt(e.left,this._options),right:Mt(e.right,this._options),center:e.center.map((()=>this._transform_cache))}}}function Rt(t={}){const{ctrl:e,src:n,dst:r}=t;if(!(e instanceof J))throw new Error(`ctrl must be a cursor ${e}`);if(!e.fixedRate&&!e.ctrl.fixedRate)throw new Error(`ctrl or ctrl.ctrl must be fixedRate ${e}`);if(!e.fixedRate&&e.ctrl.fixedRate&&!e.itemsOnly)throw new Error(`given ctrl.ctrl.fixedRate, ctrl must be itemsOnly ${e}`);if(!(n instanceof J))throw new Error(`src must be a cursor ${n}`);if(n.fixedRate)throw new Error(`cursor src can not be fixedRate cursor ${n}`);if(!n.itemsOnly)throw new Error(`cursor src must be itemsOnly ${n}`);if(!n.mutable)throw new Error(`cursor src must be mutable ${n}`);const i=n.src.provider,s=r.provider;if(i===s)throw new Error("src and dst can not have the same stateProvider");let o=!1;function c(){const t=o;if(o=!1,e.fixedRate)o=!0;else{const t=e.ctrl.value,n=e.src.index.nearby(t).center;if(1==n.length&&"motion"==n[0].type){const[t,e,r,i]=n[0].data;(e>0||0==e&&r>0)&&(o=!0)}}!t&&o?(console.log("start recording"),l()):t&&!o&&function(){console.log("stop recording");const t=H.now(),n=e.query(t).value,i=r.index.nearby(n).center,s=i.map((t=>{const e={...t};return e.itv[1]=n,e.itv[3]=!1,e}));i.length>0&&r.update({insert:s,reset:!1})}()}function l(){const t=H.now(),s=n.query(t).offset,o=e.query(t).value;let c=structuredClone(i.get());const l=o-s;if(0!=l){const t=c.map((t=>function(t,e){t={...t},t.itv[0]=null!=t.itv[0]?t.itv[0]+e:null,t.itv[1]=null!=t.itv[1]?t.itv[1]+e:null,"motion"==t.type?t.data.timestamp=t.data.timestamp+e:"transition"==t.type&&(t.data.t0=t.data.t0+e,t.data.t1=t.data.t1+e);return t}(t,l)));r.append(t,o)}else r.append(c,s)}return i.add_callback((function(){o&&l()})),e.add_callback(c),c(),r}function Tt(t,e){const n=t.id,r=t.type;let i="";if(null!=t.itv){const[e,n,r,s]=t.itv;i=`[${null==e?"null":e.toFixed(2)},${null==n?"null":n.toFixed(2)},${r},${s}]`}let s=`<span class="item-id">${n}</span>`,o=`<span class="item-itv">${i}</span>`,c=`<span class="item-type">${r}</span>`,l=`<span class="item-data">${JSON.stringify(t.data)}</span>`;const{delete_allowed:u=!1}=e;return u?`\n        <div>\n            <button id="delete">X</button>\n            ${s}: ${c} ${o} ${l}\n        </div>`:`\n        <div>\n            ${s}: ${c} ${o} ${l}\n        </div>`}class Wt{constructor(t,e,n={}){this._sp=t,this._elem=e,this._handle=this._sp.add_callback(this._onchange.bind(this));let r={toString:Tt};this._options={...r,...n},this._options.delete_allowed&&e.addEventListener("click",(t=>{const e=t.target.closest("#delete");if(e){const n=e.closest(".list-item");n&&(this._sp.update({remove:[n.id]}),t.stopPropagation())}})),this._onchange()}_onchange(){const t=this._sp.get()||[];t.sort(((t,e)=>{let n=m.from_interval(t.itv)[0],r=m.from_interval(e.itv)[0];return m.cmp(n,r)})),this._elem.replaceChildren();const{toString:e}=this._options;for(let n of t){let t=this._elem.querySelector(`#${n.id}`);null==t&&(t=document.createElement("div"),t.setAttribute("id",n.id),t.classList.add("list-item"),this._elem.appendChild(t)),t.innerHTML=e(n,this._options)}}}function zt(t={}){let{src:e,provider:n,items:r=[],value:i,...s}=t;if(null!=e&&e instanceof z)return e;if(null==n)if(null!=i){const t=G([{itv:[null,null,!0,!0],data:i}]);n=new et({items:t})}else r=G(r),n=new Z({items:r});return $t({provider:n,...s})}function Ut(t={}){const{clock:e,vector:n,...r}=t,i=((t={})=>{const{clock:e,vector:n}=t;return null==e&&null==n?K:new X(t)})({clock:e,vector:n});return function(t={}){const{provider:e,shift:n=0,scale:r=1}=t,i=new J;return Object.defineProperty(i,"numeric",{get:()=>!0}),Object.defineProperty(i,"fixedRate",{get:()=>!0}),i.query=function(t=H.now()){return{value:e.now(t)*r+n,dynamic:!0,offset:t}},it(i),st(i),i.srcprop_register("provider"),i.srcprop_check=function(t,n){if("provider"==t){if(!(n instanceof X))throw new Error(`provider must be clockProvider ${e}`);return n}},i.srcprop_onchange=function(t,e){"provider"==t&&"reset"==e&&i.onchange()},i.rate=1*r,i.provider=e,i}({provider:i,...r})}return t.CollectionProvider=Z,t.Cursor=J,t.Layer=z,t.NearbyIndexBase=v,t.ObjectProvider=et,t.boolean=function(t){const e=new z;return e.index=new jt(t.index),t.add_callback((t=>{e.onchange(t)})),Object.defineProperty(e,"numeric",{get:()=>!0}),e.src=t,e},t.clock=Ut,t.cursor_from_timingobject=function(t){if("TimingObject"!=t.constructor.name)throw new Error(`src must be a TimingObject ${t}`);const e=new J;return e.query=function(){const{position:e,velocity:n,acceleration:r,timestamp:i}=t.query();return{value:e,dynamic:0!=n||0!=r,offset:i}},Object.defineProperty(e,"numeric",{get:()=>!0}),Object.defineProperty(e,"fixedRate",{get:()=>!1}),t.on("change",(()=>{e.onchange()})),e},t.cursor_transform=function(t,e={}){if(!(t instanceof J))throw new Error(`src must be a Cursor ${t}`);const{numeric:n,valueFunc:r,stateFunc:i}=e,s=new J;return s.query=function(){return function(t,e={}){const{valueFunc:n,stateFunc:r}=e;return null!=n?(t.value=n(t.value),t):null!=r?r(t):t}(t.query(),{stateFunc:i,valueFunc:r})},Object.defineProperty(s,"numeric",{get:()=>null==n?t.numeric:n}),Object.defineProperty(s,"fixedRate",{get:()=>t.fixedRate}),t.fixedRate&&Object.defineProperty(s,"rate",{get:()=>t.rate}),t.add_callback((()=>{s.onchange()})),s},t.layer=zt,t.layer_from_cursor=function(t){if(!(t instanceof J))throw new Error(`src must be a Cursor ${t}`);const e=new z;return e.index=new Nt(t),Object.defineProperty(e,"numeric",{get:()=>t.numeric}),t.add_callback((t=>{e.onchange(t)})),e.src=t,e},t.layer_transform=function(t,e={}){if(!(t instanceof z))throw new Error(`src must be a Layer ${t}`);const n={};var r,i;n.valueFunc=(r=e.valueFunc,function({sources:t,states:e,offset:n}){return r(e[0].value)}),n.stateFunc=(i=e.stateFunc,function({sources:t,states:e,offset:n}){return i(e[0])});const s=new z(n);return s.index=new E(t),s.src=t,s.src.add_callback((t=>{s.onchange(t)})),Object.defineProperty(s,"numeric",{get:()=>t.numeric}),s},t.local_clock=H,t.logical_expr=Ht,t.logical_merge=function(t,e={}){const{expr:n}=e;let r;n&&(r=t=>n.eval(t));const i=new z,s=new Lt(t);return i.index=new jt(s,{condition:r}),t.map((t=>t.add_callback(i.onchange))),i.sources=t,Object.defineProperty(i,"numeric",{get:()=>!0}),i},t.merge=function(t,e={}){let{type:n="",...r}=e;n in Ct&&(r=Ct[n]);const i=new z(r);it(i),st(i),i.srcprop_register("sources"),i.srcprop_check=function(t,e){if("sources"==t){if(!Array.isArray(e))throw new Error(`sources must be array ${e}`);if(!e.map((t=>t instanceof z)).every((t=>t)))throw new Error(`sources must all be layers ${e}`)}return e},i.srcprop_onchange=function(t,e){"sources"==t&&("reset"==e&&(i.index=new Lt(i.sources)),i.onchange())};const s=t.map((t=>t.numeric)).every((t=>t));return Object.defineProperty(i,"numeric",{get:()=>s}),i.sources=t,i},t.object=function(t={}){let{ctrl:e,src:n,...r}=t;return null==e&&(e=Ut()),null==n&&(n=zt(r)),Pt({ctrl:e,src:n})},t.playback=function(t={}){let{ctrl:e,src:n,...r}=t;return null==e&&(e=Ut()),null==n&&(n=zt(r)),It({ctrl:e,src:n})},t.record=function(t={}){const e=zt({mutable:!0});let{ctrl:n,src:r}=t;return null==n&&(n=Ut()),Rt({ctrl:n,src:r,dst:e})},t.render_cursor=function(t,e,n={}){const{delay:r=200,render:i,novalue:s}=n,o=document.querySelector(e);return t.bind((function(t){null==t.value&&null!=s&&(t.value=s),null!=i?i(t,o):o.textContent=null!=t.value?`${t.value}`:""}),r)},t.render_provider=function(t,e,n={}){const r=document.querySelector(e);return new Wt(t,r,n)},t.timeline_transform=function(t,e={}){const n=new z;return it(n),st(n),n.srcprop_register("src"),n.srcprop_check=function(t,e){if("src"==t){if(!(e instanceof z))throw new Error(`"src" must be Layer ${e}`);return e}},n.srcprop_onchange=function(t,r){"src"==t&&("reset"==r&&(this.index=new Dt(this.src,e)),n.onchange())},Object.defineProperty(n,"numeric",{get:()=>t.numeric}),n.src=t,n},t}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdGVsYXllcnMuaWlmZS5taW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2ludGVydmFscy5qcyIsIi4uLy4uL3NyYy9uZWFyYnlfYmFzZS5qcyIsIi4uLy4uL3NyYy91dGlsL2FwaV9ldmVudGlmeS5qcyIsIi4uLy4uL3NyYy91dGlsL2FwaV9jYWxsYmFjay5qcyIsIi4uLy4uL3NyYy91dGlsL2NvbW1vbi5qcyIsIi4uLy4uL3NyYy9sYXllcl9iYXNlLmpzIiwiLi4vLi4vc3JjL3V0aWwvY3Vyc29yX21vbml0b3IuanMiLCIuLi8uLi9zcmMvY3Vyc29yX2Jhc2UuanMiLCIuLi8uLi9zcmMvcHJvdmlkZXJfY2xvY2suanMiLCIuLi8uLi9zcmMvcHJvdmlkZXJfY29sbGVjdGlvbi5qcyIsIi4uLy4uL3NyYy9wcm92aWRlcl9vYmplY3QuanMiLCIuLi8uLi9zcmMvdXRpbC9hcGlfc3JjcHJvcC5qcyIsIi4uLy4uL3NyYy91dGlsL3NvcnRlZGFycmF5LmpzIiwiLi4vLi4vc3JjL25lYXJieV9pbmRleC5qcyIsIi4uLy4uL3NyYy91dGlsL3NlZ21lbnRzLmpzIiwiLi4vLi4vc3JjL2xheWVyX2xlYWYuanMiLCIuLi8uLi9zcmMvY3Vyc29yX3BsYXliYWNrLmpzIiwiLi4vLi4vc3JjL2N1cnNvcl9vYmplY3QuanMiLCIuLi8uLi9zcmMvb3BzL2xheWVyX2Zyb21fY3Vyc29yLmpzIiwiLi4vLi4vc3JjL29wcy9tZXJnZS5qcyIsIi4uLy4uL3NyYy9vcHMvYm9vbGVhbi5qcyIsIi4uLy4uL3NyYy9vcHMvbG9naWNhbF9tZXJnZS5qcyIsIi4uLy4uL3NyYy9vcHMvdGltZWxpbmVfdHJhbnNmb3JtLmpzIiwiLi4vLi4vc3JjL29wcy9yZWNvcmQuanMiLCIuLi8uLi9zcmMvdXRpbC9wcm92aWRlcl92aWV3ZXIuanMiLCIuLi8uLi9zcmMvaW5kZXguanMiLCIuLi8uLi9zcmMvY3Vyc29yX2Nsb2NrLmpzIiwiLi4vLi4vc3JjL29wcy9jdXJzb3JfZnJvbV90aW1pbmdvYmplY3QuanMiLCIuLi8uLi9zcmMvb3BzL3RyYW5zZm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICAgIFxuICAgIElOVEVSVkFMIEVORFBPSU5UU1xuXG4gICAgKiBpbnRlcnZhbCBlbmRwb2ludHMgYXJlIGRlZmluZWQgYnkgdHJpcGxldCBbdmFsdWUsIHR5cGVdXG4gICAgKlxuICAgICogICB0aGVyZSBhcmUgNCB0eXBlcyBvZiBpbnRlcnZhbCBlbmRwb2ludHMgXG4gICAgKiAgIC0gdikgLSBoaWdoIGVuZHBvaW50IGF0IHYsIG5vdCBpbmNsdXNpdmVcbiAgICAqICAgLSB2XSAtIGhpZ2ggZW5kcG9pbnQgYXQgdiwgaW5jbHVzaXZlXG4gICAgKiAgIC0gW3YgLSBsb3cgZW5kcG9pbnQgYXQgdiwgbm90IGluY2x1c2l2ZVxuICAgICogICAtICh2IC0gbG93IGVuZHBvaW50IGF0IHYsIGluY2x1c2l2ZVxuICAgICogXG4gICAgKiAgIEEgc2luZ3VsYXIgaW50ZXJ2YWwgWzIsMix0cnVlLHRydWVdIHdpbGwgaGF2ZSBlbmRwb2ludHMgWzIgYW5kIDJdXG4gICAgKiBcbiAgICAqICAgQWRkaXRpb25hbGx5LCB0byBzaW1wbGlmeSBjb21wYXJpc29uIGJldHdlZW4gZW5kcG9pbnRzIGFuZCBudW1iZXJzXG4gICAgKiAgIHdpIGludHJvZHVjZSBhIHNwZWNpYWwgZW5kcG9pbnQgdHlwZSAtIFZBTFVFXG4gICAgKiBcbiAgICAqICAgVGh1cyB3ZSBkZWZpbmUgNSB0eXBlcyBvZiBlbmRwb2ludHNcbiAgICAqIFxuICAgICogICBISUdIX09QRU4gOiB2KVxuICAgICogICBISUdIX0NMT1NFRDogdl1cbiAgICAqICAgVkFMVUU6IHZcbiAgICAqICAgTE9XX0NMT1NFRDogW3ZcbiAgICAqICAgTE9XX09QRU46ICh2KVxuICAgICogXG4gICAgKiAgIEZvciB0aGUgcHVycG9zZSBvZiBlbmRwb2ludCBjb21wYXJpc29uIHdlIG1haW50YWluXG4gICAgKiAgIGEgbG9naWNhbCBvcmRlcmluZyBmb3IgZW5kcG9pbnRzIHdpdGggdGhlIHNhbWUgdmFsdWUuXG4gICAgKiAgIFxuICAgICogICB2KSA8IFt2ID09IHYgPT0gdl0gPCAodlxuICAgICogIFxuICAgICogICBXZSBhc3NpZ24gb3JkZXJpbmcgdmFsdWVzXG4gICAgKiAgIFxuICAgICogICBISUdIX09QRU46IC0xXG4gICAgKiAgIEhJR0hfQ0xPU0VELCBWQUxVRSwgTE9XX0NMT1NFRDogMFxuICAgICogICBMT1dfT1BFTjogMVxuICAgICogXG4gICAgKiAgIHZhbHVlIGNhbiBiZSBudWxsIG9yIG51bWJlci4gSWYgdmFsdWUgaXMgbnVsbCwgdGhpcyBtZWFucyB1bmJvdW5kZWQgZW5kcG9pbnRcbiAgICAqICAgaS5lLiBubyBvdGhlciBlbmRwb2ludCBjYW4gYmUgbGFyZ2VyIG9yIHNtYWxsZXIuXG4gICAgKiAgIGFuIHVuYm91bmRlZCBsb3cgZW5kcG9pbnQgbWVhbnMgLUluZmluaXR5XG4gICAgKiAgIGFuIHVuYm91bmRlZCBoaWdoIGVuZHBvaW50IG1lYW5zIEluZmluaXR5XG4gICAgKlxuKi9cblxuZnVuY3Rpb24gaXNOdW1iZXIobikge1xuICAgIHJldHVybiB0eXBlb2YgbiA9PSBcIm51bWJlclwiO1xufVxuXG5jb25zdCBFUF9UWVBFID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgSElHSF9PUEVOOiBcIilcIixcbiAgICBISUdIX0NMT1NFRDogXCJdXCIsXG4gICAgVkFMVUU6IFwiXCIsXG4gICAgTE9XX0NMT1NFRDogXCJbXCIsXG4gICAgTE9XX09QRU46IFwiKFwiXG59KTtcblxuZnVuY3Rpb24gaXNfRVBfVFlQRSh2YWx1ZSkge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKEVQX1RZUEUpLmluY2x1ZGVzKHZhbHVlKTtcbn1cblxuY29uc3QgRVBfT1JERVIgPSBuZXcgTWFwKFtcbiAgICBbRVBfVFlQRS5ISUdIX09QRU4sIC0xXSxcbiAgICBbRVBfVFlQRS5ISUdIX0NMT1NFRCwgMF0sXG4gICAgW0VQX1RZUEUuVkFMVUUsIDBdLFxuICAgIFtFUF9UWVBFLkxPV19DTE9TRUQsIDBdLFxuICAgIFtFUF9UWVBFLkxPV19PUEVOLCAxXVxuXSk7XG5cbmZ1bmN0aW9uIGVuZHBvaW50X2lzX2xvdyhlcCkge1xuICAgIHJldHVybiBlcFsxXSA9PSBFUF9UWVBFLkxPV19DTE9TRUQgfHwgZXBbMV0gPT0gRVBfVFlQRS5MT1dfT1BFTjtcbn1cblxuZnVuY3Rpb24gZW5kcG9pbnRfaXNfaGlnaChlcCkge1xuICAgIHJldHVybiBlcFsxXSA9PSBFUF9UWVBFLkhJR0hfQ0xPU0VEIHx8IGVwWzFdID09IEVQX1RZUEUuSElHSF9PUEVOO1xufVxuXG4vKlxuICAgIHJldHVybiBlbmRwb2ludCBmcm9tIGlucHV0XG4qL1xuZnVuY3Rpb24gZW5kcG9pbnRfZnJvbV9pbnB1dChlcCkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShlcCkpIHtcbiAgICAgICAgZXAgPSBbZXAsIEVQX1RZUEUuVkFMVUVdO1xuICAgIH1cbiAgICBpZiAoZXAubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW5kcG9pbnQgbXVzdCBiZSBhIGxlbmd0aC0yIGFycmF5XCIsIGVwKTtcbiAgICB9XG4gICAgbGV0IFt2LHRdID0gZXA7XG4gICAgaWYgKCFpc19FUF9UWVBFKHQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIGVuZHBvaW50IHR5cGVcIiwgdCk7XG4gICAgfVxuICAgIGlmICh2ID09IC1JbmZpbml0eSkge1xuICAgICAgICByZXR1cm4gW251bGwsIEVQX1RZUEUuTE9XX0NMT1NFRF07XG4gICAgfVxuICAgIGlmICh2ID09IEluZmluaXR5KSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgRVBfVFlQRS5ISUdIX0NMT1NFRF07XG4gICAgfVxuICAgIGlmICh2ID09IHVuZGVmaW5lZCB8fCB2ID09IG51bGwgfHwgaXNOdW1iZXIodikpIHtcbiAgICAgICAgcmV0dXJuIFt2LCB0XTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZW5kcG9pbnQgbXVzdCBiZSBudWxsIG9yIG51bWJlclwiLCB2KTtcbn1cblxuY29uc3QgZW5kcG9pbnRfUE9TX0lORiA9IGVuZHBvaW50X2Zyb21faW5wdXQoSW5maW5pdHkpO1xuY29uc3QgZW5kcG9pbnRfTkVHX0lORiA9IGVuZHBvaW50X2Zyb21faW5wdXQoLUluZmluaXR5KTtcblxuLyoqXG4gKiBJbnRlcm5hbCByZXByZXNlbnRhdGlvbiBcbiAqIHJlcGxhY2luZyBudWxsIHZhbHVzZSB3aXRoIC1JbmZpbml0eSBvciBJbmZpbml0eVxuICogaW4gb3JkZXIgdG8gc2ltcGxpZnkgbnVtZXJpY2FsIGNvbXBhcmlzb25cbiAqL1xuZnVuY3Rpb24gZW5kcG9pbnRfaW50ZXJuYWwoZXApIHtcbiAgICBpZiAoZXBbMF0gIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW2VwWzBdLCBlcFsxXV07XG4gICAgfVxuICAgIGlmIChlbmRwb2ludF9pc19sb3coZXApKSB7XG4gICAgICAgIHJldHVybiBbLUluZmluaXR5LCBFUF9UWVBFLkxPV19DTE9TRURdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbSW5maW5pdHksIEVQX1RZUEUuSElHSF9DTE9TRURdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJpc29uIGZ1bmN0aW9uIGZvciBudW1iZXJzXG4gKiBhdm9pZCBzdWJ0cmFjdGlvbiB0byBzdXBwb3J0IEluZmluaXR5IHZhbHVlc1xuICovXG5mdW5jdGlvbiBudW1iZXJfY21wKGEsIGIpIHtcbiAgICBpZiAoYSA8IGIpIHJldHVybiAtMTsgLy8gY29ycmVjdCBvcmRlclxuICAgIGlmIChhID4gYikgcmV0dXJuIDE7IC8vIHdyb25nIG9yZGVyXG4gICAgcmV0dXJuIDA7IC8vIGVxdWFsaXR5XG59XG5cbi8qXG4gICAgRW5kcG9pbnQgY29tcGFyaXNvblxuICAgIHJldHVybnMgXG4gICAgICAgIC0gbmVnYXRpdmUgOiBjb3JyZWN0IG9yZGVyXG4gICAgICAgIC0gMCA6IGVxdWFsXG4gICAgICAgIC0gcG9zaXRpdmUgOiB3cm9uZyBvcmRlclxuKi8gXG5mdW5jdGlvbiBlbmRwb2ludF9jbXAoZXAxLCBlcDIpIHsgICAgXG4gICAgY29uc3QgW3YxLCB0MV0gPSBlbmRwb2ludF9pbnRlcm5hbChlcDEpO1xuICAgIGNvbnN0IFt2MiwgdDJdID0gZW5kcG9pbnRfaW50ZXJuYWwoZXAyKTtcbiAgICBjb25zdCBkaWZmID0gbnVtYmVyX2NtcCh2MSwgdjIpO1xuICAgIGlmIChkaWZmID09IDApIHtcbiAgICAgICAgY29uc3QgbzEgPSBFUF9PUkRFUi5nZXQodDEpO1xuICAgICAgICBjb25zdCBvMiA9IEVQX09SREVSLmdldCh0Mik7XG4gICAgICAgIHJldHVybiBudW1iZXJfY21wKG8xLCBvMik7XG4gICAgfVxuICAgIHJldHVybiBkaWZmO1xufVxuXG5mdW5jdGlvbiBlbmRwb2ludF9sdCAocDEsIHAyKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50X2NtcChwMSwgcDIpIDwgMFxufVxuZnVuY3Rpb24gZW5kcG9pbnRfbGUgKHAxLCBwMikge1xuICAgIHJldHVybiBlbmRwb2ludF9jbXAocDEsIHAyKSA8PSAwXG59XG5mdW5jdGlvbiBlbmRwb2ludF9ndCAocDEsIHAyKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50X2NtcChwMSwgcDIpID4gMFxufVxuZnVuY3Rpb24gZW5kcG9pbnRfZ2UgKHAxLCBwMikge1xuICAgIHJldHVybiBlbmRwb2ludF9jbXAocDEsIHAyKSA+PSAwXG59XG5mdW5jdGlvbiBlbmRwb2ludF9lcSAocDEsIHAyKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50X2NtcChwMSwgcDIpID09IDBcbn1cbmZ1bmN0aW9uIGVuZHBvaW50X21pbihwMSwgcDIpIHtcbiAgICByZXR1cm4gKGVuZHBvaW50X2xlKHAxLCBwMikpID8gcDEgOiBwMjtcbn1cbmZ1bmN0aW9uIGVuZHBvaW50X21heChwMSwgcDIpIHtcbiAgICByZXR1cm4gKGVuZHBvaW50X2dlKHAxLCBwMikpID8gcDEgOiBwMjtcbn1cblxuLyoqXG4gKiBmbGlwIGVuZHBvaW50OlxuICogLSBpZS4gZ2V0IGFkamFjZW50IGVuZHBvbml0IG9uIHRoZSB0aW1lbGluZVxuICogXG4gKiB2KSA8LT4gW3ZcbiAqIHZdIDwtPiAodlxuICogXG4gKiBmbGlwcGluZyBoYXMgbm8gZWZmZWN0IG9uIGVuZHBvaW50cyB3aXRoIHVuYm91bmRlZCB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIGVuZHBvaW50X2ZsaXAoZXAsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGFyZ2V0IGlzIGRlcHJlY2F0ZWRcIik7XG4gICAgfVxuICAgIGxldCBbdix0XSA9IGVwO1xuICAgIGlmICh2ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGVwO1xuICAgIH1cbiAgICBpZiAodCA9PSBFUF9UWVBFLkhJR0hfT1BFTikge1xuICAgICAgICByZXR1cm4gW3YsIEVQX1RZUEUuTE9XX0NMT1NFRF07XG4gICAgfSBlbHNlIGlmICh0ID09IEVQX1RZUEUuSElHSF9DTE9TRUQpIHtcbiAgICAgICAgcmV0dXJuIFt2LCBFUF9UWVBFLkxPV19PUEVOXTtcbiAgICB9IGVsc2UgaWYgKHQgPT0gRVBfVFlQRS5MT1dfT1BFTikge1xuICAgICAgICByZXR1cm4gW3YsIEVQX1RZUEUuSElHSF9DTE9TRURdO1xuICAgIH0gZWxzZSBpZiAodCA9PSBFUF9UWVBFLkxPV19DTE9TRUQpIHtcbiAgICAgICAgcmV0dXJuIFt2LCBFUF9UWVBFLkhJR0hfT1BFTl07XG4gICAgfSBlbHNlIHtcbiAgICBcdHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgZW5kcG9pbnQgdHlwZVwiLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG59XG5cbi8qXG4gICAgcmV0dXJucyBsb3cgYW5kIGhpZ2ggZW5kcG9pbnRzIGZyb20gaW50ZXJ2YWxcbiovXG5mdW5jdGlvbiBlbmRwb2ludHNfZnJvbV9pbnRlcnZhbChpdHYpIHtcbiAgICBjb25zdCBbbG93LCBoaWdoLCBsb3dDbG9zZWQsIGhpZ2hDbG9zZWRdID0gaXR2O1xuICAgIGNvbnN0IGxvd1R5cGUgPSAobG93Q2xvc2VkKSA/ICBFUF9UWVBFLkxPV19DTE9TRUQgOiBFUF9UWVBFLkxPV19PUEVOO1xuICAgIGNvbnN0IGhpZ2hUeXBlID0gKGhpZ2hDbG9zZWQpID8gIEVQX1RZUEUuSElHSF9DTE9TRUQgOiBFUF9UWVBFLkhJR0hfT1BFTjtcbiAgICBjb25zdCBsb3dFcCA9IGVuZHBvaW50X2Zyb21faW5wdXQoW2xvdywgbG93VHlwZV0pO1xuICAgIGNvbnN0IGhpZ2hFcCA9IGVuZHBvaW50X2Zyb21faW5wdXQoW2hpZ2gsIGhpZ2hUeXBlXSk7XG4gICAgcmV0dXJuIFtsb3dFcCwgaGlnaEVwXTtcbn1cblxuXG4vKlxuICAgIElOVEVSVkFMU1xuXG4gICAgSW50ZXJ2YWxzIGFyZSBbbG93LCBoaWdoLCBsb3dDbG9zZWQsIGhpZ2hDbG9zZWRdXG5cbiovIFxuXG5cbi8qXG4gICAgcmV0dXJuIHRydWUgaWYgcG9pbnQgb3IgZW5kcG9pbnQgaXMgY292ZXJlZCBieSBpbnRlcnZhbFxuICAgIHBvaW50IHAgY2FuIGJlIG51bWJlciB2YWx1ZSBvciBhbiBlbmRwb2ludFxuKi9cbmZ1bmN0aW9uIGludGVydmFsX2NvdmVyc19lbmRwb2ludChpdHYsIGVwKSB7XG4gICAgY29uc3QgW2xvd19lcCwgaGlnaF9lcF0gPSBlbmRwb2ludHNfZnJvbV9pbnRlcnZhbChpdHYpO1xuICAgIGVwID0gZW5kcG9pbnRfZnJvbV9pbnB1dChlcCk7XG4gICAgLy8gY292ZXJzOiBsb3cgPD0gcCA8PSBoaWdoXG4gICAgcmV0dXJuIGVuZHBvaW50X2xlKGxvd19lcCwgZXApICYmIGVuZHBvaW50X2xlKGVwLCBoaWdoX2VwKTtcbn1cbi8vIGNvbnZlbmllbmNlXG5mdW5jdGlvbiBpbnRlcnZhbF9jb3ZlcnNfcG9pbnQoaXR2LCBwKSB7XG4gICAgcmV0dXJuIGludGVydmFsX2NvdmVyc19lbmRwb2ludChpdHYsIHApO1xufVxuXG4vKlxuICAgIFJldHVybiB0cnVlIGlmIGludGVydmFsIGVuZHBvaW50cyBhcmUgZXF1YWxcbiovXG5mdW5jdGlvbiBpbnRlcnZhbF9pc19zaW5ndWxhcihpbnRlcnZhbCkge1xuICAgIGNvbnN0IFtsb3dfZXAsIGhpZ2hfZXBdID0gZW5kcG9pbnRzX2Zyb21faW50ZXJ2YWwoaXR2KTtcbiAgICByZXR1cm4gZW5kcG9pbnRfZXEobG93X2VwLCBoaWdoX2VwKTtcbn1cblxuLypcbiAgICBDcmVhdGUgaW50ZXJ2YWwgZnJvbSBlbmRwb2ludHNcbiovXG5mdW5jdGlvbiBpbnRlcnZhbF9mcm9tX2VuZHBvaW50cyhlcDEsIGVwMikge1xuICAgIGxldCBbdjEsIHQxXSA9IGVwMTtcbiAgICBsZXQgW3YyLCB0Ml0gPSBlcDI7XG4gICAgaWYgKCFlbmRwb2ludF9pc19sb3coZXAxKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGxvdyBlbmRwb2ludFwiLCBlcDEpO1xuICAgIH1cbiAgICBpZiAoIWVuZHBvaW50X2lzX2hpZ2goZXAyKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGhpZ2ggZW5kcG9pbnRcIiwgZXAyKTtcbiAgICB9XG4gICAgcmV0dXJuIFt2MSwgdjIsIHQxID09IEVQX1RZUEUuTE9XX0NMT1NFRCwgdDIgPT0gRVBfVFlQRS5ISUdIX0NMT1NFRF07XG59XG5cblxuZnVuY3Rpb24gaW50ZXJ2YWxfZnJvbV9pbnB1dChpbnB1dCl7XG4gICAgbGV0IGl0diA9IGlucHV0O1xuICAgIGlmIChpdHYgPT0gdW5kZWZpbmVkIHx8IGl0diA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImlucHV0IGlzIHVuZGVmaW5lZFwiKTtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGl0dikpIHtcbiAgICAgICAgaWYgKGlzTnVtYmVyKGl0dikpIHtcbiAgICAgICAgICAgIC8vIGlucHV0IGlzIHNpbmd1bGFyIG51bWJlclxuICAgICAgICAgICAgaXR2ID0gW2l0diwgaXR2LCB0cnVlLCB0cnVlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgaW5wdXQ6ICR7aW5wdXR9OiBtdXN0IGJlIEFycmF5IG9yIE51bWJlcmApXG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIG1ha2Ugc3VyZSBpbnRlcnZhbCBpcyBsZW5ndGggNFxuICAgIGlmIChpdHYubGVuZ3RoID09IDEpIHtcbiAgICAgICAgaXR2ID0gW2l0dlswXSwgaXR2WzBdLCB0cnVlLCB0cnVlXTtcbiAgICB9IGVsc2UgaWYgKGl0di5sZW5ndGggPT0gMikge1xuICAgICAgICBpdHYgPSBbaXR2WzBdLCBpdHZbMV0sIHRydWUsIGZhbHNlXTtcbiAgICB9IGVsc2UgaWYgKGl0di5sZW5ndGggPT0gMykge1xuICAgICAgICBpdHYgPSBbaXR2WzBdLCBpdHZbMV0sIGl0dlsyXSwgZmFsc2VdO1xuICAgIH0gZWxzZSBpZiAoaXR2Lmxlbmd0aCA+IDQpIHtcbiAgICAgICAgaXR2ID0gW2l0dlswXSwgaXR2WzFdLCBpdHZbMl0sIGl0dls0XV07XG4gICAgfVxuICAgIGxldCBbbG93LCBoaWdoLCBsb3dJbmNsdWRlLCBoaWdoSW5jbHVkZV0gPSBpdHY7XG4gICAgLy8gYm91bmRhcnkgY29uZGl0aW9ucyBhcmUgbnVtYmVyIG9yIG51bGxcbiAgICBpZiAobG93ID09IHVuZGVmaW5lZCB8fCBsb3cgPT0gLUluZmluaXR5KSB7XG4gICAgICAgIGxvdyA9IG51bGw7XG4gICAgfVxuICAgIGlmIChoaWdoID09IHVuZGVmaW5lZCB8fCBoaWdoID09IEluZmluaXR5KSB7XG4gICAgICAgIGhpZ2ggPSBudWxsO1xuICAgIH1cbiAgICAvLyBjaGVjayBsb3dcbiAgICBpZiAobG93ID09IG51bGwpIHtcbiAgICAgICAgbG93SW5jbHVkZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFpc051bWJlcihsb3cpKSB0aHJvdyBuZXcgRXJyb3IoXCJsb3cgbm90IGEgbnVtYmVyXCIsIGxvdyk7XG4gICAgfVxuICAgIC8vIGNoZWNrIGhpZ2hcbiAgICBpZiAoaGlnaCA9PSBudWxsKSB7XG4gICAgICAgIGhpZ2hJbmNsdWRlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWlzTnVtYmVyKGhpZ2gpKSB0aHJvdyBuZXcgRXJyb3IoXCJoaWdoIG5vdCBhIG51bWJlclwiLCBoaWdoKTtcbiAgICB9ICAgIFxuICAgIC8vIGNoZWNrIHRoYXQgbG93IDw9IGhpZ2hcbiAgICBpZiAobG93ICE9IG51bGwgJiYgaGlnaCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChsb3cgPiBoaWdoKSB0aHJvdyBuZXcgRXJyb3IoXCJsb3cgPiBoaWdoXCIsIGxvdywgaGlnaCk7XG4gICAgICAgIC8vIHNpbmdsZXRvblxuICAgICAgICBpZiAobG93ID09IGhpZ2gpIHtcbiAgICAgICAgICAgIGxvd0luY2x1ZGUgPSB0cnVlO1xuICAgICAgICAgICAgaGlnaEluY2x1ZGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGNoZWNrIHRoYXQgbG93SW5jbHVkZSwgaGlnaEluY2x1ZGUgYXJlIGJvb2xlYW5zXG4gICAgaWYgKHR5cGVvZiBsb3dJbmNsdWRlICE9PSBcImJvb2xlYW5cIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJsb3dJbmNsdWRlIG5vdCBib29sZWFuXCIpO1xuICAgIH0gXG4gICAgaWYgKHR5cGVvZiBoaWdoSW5jbHVkZSAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaGlnaEluY2x1ZGUgbm90IGJvb2xlYW5cIik7XG4gICAgfVxuICAgIHJldHVybiBbbG93LCBoaWdoLCBsb3dJbmNsdWRlLCBoaWdoSW5jbHVkZV07XG59XG5cbmV4cG9ydCBjb25zdCBlbmRwb2ludCA9IHtcbiAgICBsZTogZW5kcG9pbnRfbGUsXG4gICAgbHQ6IGVuZHBvaW50X2x0LFxuICAgIGdlOiBlbmRwb2ludF9nZSxcbiAgICBndDogZW5kcG9pbnRfZ3QsXG4gICAgY21wOiBlbmRwb2ludF9jbXAsXG4gICAgZXE6IGVuZHBvaW50X2VxLFxuICAgIG1pbjogZW5kcG9pbnRfbWluLFxuICAgIG1heDogZW5kcG9pbnRfbWF4LFxuICAgIGZsaXA6IGVuZHBvaW50X2ZsaXAsXG4gICAgZnJvbV9pbnRlcnZhbDogZW5kcG9pbnRzX2Zyb21faW50ZXJ2YWwsXG4gICAgZnJvbV9pbnB1dDogZW5kcG9pbnRfZnJvbV9pbnB1dCxcbiAgICB0eXBlczogey4uLkVQX1RZUEV9LFxuICAgIFBPU19JTkYgOiBlbmRwb2ludF9QT1NfSU5GLFxuICAgIE5FR19JTkYgOiBlbmRwb2ludF9ORUdfSU5GXG59XG5leHBvcnQgY29uc3QgaW50ZXJ2YWwgPSB7XG4gICAgY292ZXJzX2VuZHBvaW50OiBpbnRlcnZhbF9jb3ZlcnNfZW5kcG9pbnQsXG4gICAgY292ZXJzX3BvaW50OiBpbnRlcnZhbF9jb3ZlcnNfcG9pbnQsIFxuICAgIGlzX3Npbmd1bGFyOiBpbnRlcnZhbF9pc19zaW5ndWxhcixcbiAgICBmcm9tX2VuZHBvaW50czogaW50ZXJ2YWxfZnJvbV9lbmRwb2ludHMsXG4gICAgZnJvbV9pbnB1dDogaW50ZXJ2YWxfZnJvbV9pbnB1dFxufVxuIiwiaW1wb3J0IHsgZW5kcG9pbnQsIGludGVydmFsIH0gZnJvbSBcIi4vdXRpbC9pbnRlcnZhbHMuanNcIjtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIE5FQVJCWSBJTkRFWFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIEFic3RyYWN0IHN1cGVyY2xhc3MgZm9yIE5lYXJieUluZGV4ZS5cbiAqIFxuICogU3VwZXJjbGFzcyB1c2VkIHRvIGNoZWNrIHRoYXQgYSBjbGFzcyBpbXBsZW1lbnRzIHRoZSBuZWFyYnkoKSBtZXRob2QsIFxuICogYW5kIHByb3ZpZGUgc29tZSBjb252ZW5pZW5jZSBtZXRob2RzLlxuICogXG4gKiBORUFSQlkgSU5ERVhcbiAqIFxuICogTmVhcmJ5SW5kZXggcHJvdmlkZXMgaW5kZXhpbmcgc3VwcG9ydCBvZiBlZmZlY3RpdmVseVxuICogbG9va2luZyB1cCByZWdpb25zIGJ5IG9mZnNldCwgXG4gKiBnaXZlbiB0aGF0XG4gKiAoaSkgZWFjaCByZWdpb24gaXMgYXNzb2NpYXRlZCB3aXRoIGFuIGludGVydmFsIGFuZCxcbiAqIChpaSkgcmVnaW9ucyBhcmUgbm9uLW92ZXJsYXBwaW5nLlxuICogXG4gKiBORUFSQllcbiAqIFRoZSBuZWFyYnkgbWV0aG9kIHJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG5laWdoYm9yaG9vZCBcbiAqIGFyb3VuZCBlbmRwb2ludC4gXG4gKiBcbiAqIFJldHVybnMge1xuICogICAgICBjZW50ZXI6IGxpc3Qgb2Ygb2JqZWN0cyBjb3ZlcmVkIGJ5IHJlZ2lvbixcbiAqICAgICAgaXR2OiByZWdpb24gaW50ZXJ2YWwgLSB2YWxpZGl0eSBvZiBjZW50ZXIgXG4gKiAgICAgIGxlZnQ6XG4gKiAgICAgICAgICBmaXJzdCBpbnRlcnZhbCBlbmRwb2ludCB0byB0aGUgbGVmdCBcbiAqICAgICAgICAgIHdoaWNoIHdpbGwgcHJvZHVjZSBkaWZmZXJlbnQge2NlbnRlcn1cbiAqICAgICAgICAgIGFsd2F5cyBhIGhpZ2gtZW5kcG9pbnQgb3IgZW5kcG9pbnQuTkVHX0lORlxuICogICAgICByaWdodDpcbiAqICAgICAgICAgIGZpcnN0IGludGVydmFsIGVuZHBvaW50IHRvIHRoZSByaWdodFxuICogICAgICAgICAgd2hpY2ggd2lsbCBwcm9kdWNlIGRpZmZlcmVudCB7Y2VudGVyfVxuICogICAgICAgICAgYWx3YXlzIGEgbG93LWVuZHBvaW50IG9yIGVuZHRwb2ludC5QT1NfSU5GXG4gKiBcbiAqIFxuICogVGhlIG5lYXJieSBzdGF0ZSBpcyB3ZWxsLWRlZmluZWQgZm9yIGV2ZXJ5IGVuZHBvaW50XG4gKiBvbiB0aGUgdGltZWxpbmUuXG4gKiBcbiAqIElOVEVSVkFMU1xuICogXG4gKiBbbG93LCBoaWdoLCBsb3dJbmNsdXNpdmUsIGhpZ2hJbmNsdXNpdmVdXG4gKiBcbiAqIFRoaXMgcmVwcmVzZW50YXRpb24gZW5zdXJlcyB0aGF0IHRoZSBpbnRlcnZhbCBlbmRwb2ludHMgXG4gKiBhcmUgb3JkZXJlZCBhbmQgYWxsb3dzIGludGVydmFscyB0byBiZSBleGNsdXNpdmUgb3IgaW5jbHVzaXZlLCBcbiAqIHlldCBjb3ZlciB0aGUgZW50aXJlIHJlYWwgbGluZSBcbiAqIFxuICogW2EsYl0sIChhLGIpLCBbYSxiKSwgW2EsIGIpIGFyZSBhbGwgdmFsaWQgaW50ZXJ2YWxzXG4gKiBcbiAqIFxuICogSU5URVJWQUwgRU5EUE9JTlRTXG4gKiBcbiAqIGludGVydmFsIGVuZHBvaW50cyBhcmUgZGVmaW5lZCBieSBbdmFsdWUsIHR5cGVdLCBmb3IgZXhhbXBsZVxuICogXG4gKiA0KSAtPiBbNCxcIilcIl0gLSBoaWdoIGVuZHBvaW50IGxlZnQgb2YgNFxuICogWzQgLT4gWzQsIFwiW1wiXSAtIGxvdyBlbmRwb2ludCBpbmNsdWRlcyA0XG4gKiA0ICAtPiBbNCwgXCJcIl0gLSB2YWx1ZSA0XG4gKiA0XSAtPiBbNCwgXCJdXCJdIC0gaGlnaCBlbmRwb2ludCBpbmNsdWRlcyA0XG4gKiAoNCAtPiBbNCwgXCIoXCJdIC0gbG93IGVuZHBvaW50IGlzIHJpZ2h0IG9mIDRcbiAqIFxuICovXG5cblxuLyoqXG4gKiByZXR1cm4gZmlyc3QgaGlnaCBlbmRwb2ludCBvbiB0aGUgbGVmdCBmcm9tIG5lYXJieSxcbiAqIHdoaWNoIGlzIG5vdCBpbiBjZW50ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxlZnRfZW5kcG9pbnQgKG5lYXJieSkge1xuICAgIGNvbnN0IGxvdyA9IGVuZHBvaW50LmZyb21faW50ZXJ2YWwobmVhcmJ5Lml0dilbMF07XG4gICAgcmV0dXJuIGVuZHBvaW50LmZsaXAobG93KTtcbn1cblxuLyoqXG4gKiByZXR1cm4gZmlyc3QgbG93IGVuZHBvaW50IG9uIHRoZSByaWdodCBmcm9tIG5lYXJieSxcbiAqIHdoaWNoIGlzIG5vdCBpbiBjZW50ZXJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmlnaHRfZW5kcG9pbnQgKG5lYXJieSkge1xuICAgIGNvbnN0IGhpZ2ggPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKG5lYXJieS5pdHYpWzFdO1xuICAgIHJldHVybiBlbmRwb2ludC5mbGlwKGhpZ2gpO1xufVxuXG5cblxuZXhwb3J0IGNsYXNzIE5lYXJieUluZGV4QmFzZSB7XG5cblxuICAgIC8qIFxuICAgICAgICBOZWFyYnkgbWV0aG9kXG4gICAgKi9cbiAgICBuZWFyYnkob2Zmc2V0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgICB9XG5cbiAgICBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3QoKSA9PSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLypcbiAgICAgICAgcmV0dXJuIGxvdyBwb2ludCBvZiBsZWZ0bW9zdCBlbnRyeVxuICAgICovXG4gICAgZmlyc3QoKSB7XG4gICAgICAgIGxldCB7Y2VudGVyLCByaWdodH0gPSB0aGlzLm5lYXJieShlbmRwb2ludC5ORUdfSU5GKTtcbiAgICAgICAgaWYgKGNlbnRlci5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgcmV0dXJuIGVuZHBvaW50Lk5FR19JTkY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZHBvaW50Lmx0KHJpZ2h0LCBlbmRwb2ludC5QT1NfSU5GKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZW1wdHlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAgICByZXR1cm4gaGlnaCBwb2ludCBvZiByaWdodG1vc3QgZW50cnlcbiAgICAqL1xuICAgIGxhc3QoKSB7XG4gICAgICAgIGxldCB7bGVmdCwgY2VudGVyfSA9IHRoaXMubmVhcmJ5KGVuZHBvaW50LlBPU19JTkYpO1xuICAgICAgICBpZiAoY2VudGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBlbmRwb2ludC5QT1NfSU5GO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRwb2ludC5ndChsZWZ0LCBlbmRwb2ludC5ORUdfSU5GKSkge1xuICAgICAgICAgICAgcmV0dXJuIGxlZnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBlbXB0eVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogcmV0dXJuIG5lYXJieSBvZiBmaXJzdCByZWdpb24gdG8gdGhlIHJpZ2h0XG4gICAgICogd2hpY2ggaXMgbm90IHRoZSBjZW50ZXIgcmVnaW9uLiBJZiBub3QgZXhpc3RzLCByZXR1cm5cbiAgICAgKiB1bmRlZmluZWQuIFxuICAgICAqL1xuICAgIHJpZ2h0X3JlZ2lvbihuZWFyYnkpIHtcbiAgICAgICAgY29uc3QgcmlnaHQgPSByaWdodF9lbmRwb2ludChuZWFyYnkpO1xuICAgICAgICBpZiAocmlnaHRbMF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5uZWFyYnkocmlnaHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybiBuZWFyYnkgb2YgZmlyc3QgcmVnaW9uIHRvIHRoZSBsZWZ0XG4gICAgICogd2hpY2ggaXMgbm90IHRoZSBjZW50ZXIgcmVnaW9uLiBJZiBub3QgZXhpc3RzLCByZXR1cm5cbiAgICAgKiB1bmRlZmluZWQuIFxuICAgICAqL1xuICAgIGxlZnRfcmVnaW9uKG5lYXJieSkge1xuICAgICAgICBjb25zdCBsZWZ0ID0gbGVmdF9lbmRwb2ludChuZWFyYnkpO1xuICAgICAgICBpZiAobGVmdFswXSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5lYXJieShsZWZ0KTsgICAgXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmluZCBmaXJzdCByZWdpb24gdG8gdGhlIFwicmlnaHRcIiBvciBcImxlZnRcIlxuICAgICAqIHdoaWNoIGlzIG5vdCB0aGUgY2VudGVyIHJlZ2lvbiwgYW5kIHdoaWNoIG1lZXRzXG4gICAgICogYSBjb25kaXRpb24gb24gbmVhcmJ5LmNlbnRlci5cbiAgICAgKiBEZWZhdWx0IGNvbmRpdGlvbiBpcyBjZW50ZXIgbm9uLWVtcHR5XG4gICAgICogSWYgbm90IGV4aXN0cywgcmV0dXJuIHVuZGVmaW5lZC4gXG4gICAgICovXG4gICAgXG4gICAgZmluZF9yZWdpb24obmVhcmJ5LCBvcHRpb25zPXt9KSB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSAxLFxuICAgICAgICAgICAgY29uZGl0aW9uID0gKGNlbnRlcikgPT4gY2VudGVyLmxlbmd0aCA+IDBcbiAgICAgICAgfSA9IG9wdGlvbnM7XG4gICAgICAgIGxldCBuZXh0X25lYXJieTtcbiAgICAgICAgd2hpbGUodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAxKSB7XG4gICAgICAgICAgICAgICAgbmV4dF9uZWFyYnkgPSB0aGlzLnJpZ2h0X3JlZ2lvbihuZWFyYnkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXh0X25lYXJieSA9IHRoaXMubGVmdF9yZWdpb24obmVhcmJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXh0X25lYXJieSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvbihuZXh0X25lYXJieS5jZW50ZXIpKSB7XG4gICAgICAgICAgICAgICAgLy8gZm91bmQgcmVnaW9uIFxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0X25lYXJieTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJlZ2lvbiBub3QgZm91bmRcbiAgICAgICAgICAgIC8vIGNvbnRpbnVlIHNlYXJjaGluZyB0aGUgcmlnaHRcbiAgICAgICAgICAgIG5lYXJieSA9IG5leHRfbmVhcmJ5O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVnaW9ucyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnaW9uSXRlcmF0b3IodGhpcywgb3B0aW9ucyk7XG4gICAgfVxuXG59XG5cblxuLypcbiAgICBJdGVyYXRlIHJlZ2lvbnMgb2YgaW5kZXggZnJvbSBsZWZ0IHRvIHJpZ2h0XG5cbiAgICBJdGVyYXRpb24gbGltaXRlZCB0byBpbnRlcnZhbCBbc3RhcnQsIHN0b3BdIG9uIHRoZSB0aW1lbGluZS5cbiAgICBSZXR1cm5zIGxpc3Qgb2YgaXRlbS1saXN0cy5cbiAgICBvcHRpb25zXG4gICAgLSBzdGFydFxuICAgIC0gc3RvcFxuICAgIC0gaW5jbHVkZUVtcHR5XG4qL1xuXG5jbGFzcyBSZWdpb25JdGVyYXRvciB7XG5cbiAgICBjb25zdHJ1Y3RvcihpbmRleCwgb3B0aW9ucz17fSkge1xuICAgICAgICBsZXQge1xuICAgICAgICAgICAgc3RhcnQ9LUluZmluaXR5LCBcbiAgICAgICAgICAgIHN0b3A9SW5maW5pdHksIFxuICAgICAgICAgICAgaW5jbHVkZUVtcHR5PXRydWVcbiAgICAgICAgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmIChzdGFydCA+IHN0b3ApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciAoXCJzdG9wIG11c3QgYmUgbGFyZ2VyIHRoYW4gc3RhcnRcIiwgc3RhcnQsIHN0b3ApXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSBlbmRwb2ludC5mcm9tX2lucHV0KHN0YXJ0KTtcbiAgICAgICAgdGhpcy5fc3RvcCA9IGVuZHBvaW50LmZyb21faW5wdXQoc3RvcCk7XG5cbiAgICAgICAgaWYgKGluY2x1ZGVFbXB0eSkge1xuICAgICAgICAgICAgdGhpcy5fY29uZGl0aW9uID0gKCkgPT4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbmRpdGlvbiA9IChjZW50ZXIpID0+IGNlbnRlci5sZW5ndGggPiAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2N1cnJlbnQ7XG4gICAgfVxuXG4gICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBpbml0aWFsc2VcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSB0aGlzLl9pbmRleC5uZWFyYnkodGhpcy5fc3RhcnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbmRpdGlvbih0aGlzLl9jdXJyZW50LmNlbnRlcikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge3ZhbHVlOnRoaXMuX2N1cnJlbnQsIGRvbmU6ZmFsc2V9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0ge2NvbmRpdGlvbjp0aGlzLl9jb25kaXRpb24sIGRpcmVjdGlvbjoxfVxuICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5faW5kZXguZmluZF9yZWdpb24odGhpcy5fY3VycmVudCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZTp1bmRlZmluZWQsIGRvbmU6dHJ1ZX07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge3ZhbHVlOnRoaXMuX2N1cnJlbnQsIGRvbmU6ZmFsc2V9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG4vKipcbiAqIG5lYXJieV9mcm9tXG4gKiBcbiAqIHV0aWxpdHkgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmVhcmJ5IG9iamVjdCBpbiBjaXJjdW1zdGFuY2VzXG4gKiB3aGVyZSB0aGVyZSBhcmUgb3ZlcmxhcHBpbmcgaW50ZXJ2YWxzIFRoaXMgY291bGQgYmUgd2hlbiBhIFxuICogc3RhdGVwcm92aWRlciBmb3IgYSBsYXllciBoYXMgb3ZlcmxhcHBpbmcgaXRlbXMgb3Igd2hlbiBcbiAqIG11bHRpcGxlIG5lYXJieSBpbmRleGVzIGFyZSBtZXJnZWQgaW50byBvbmUuXG4gKiBcbiAqIFxuICogQHBhcmFtIHsqfSBwcmV2X2hpZ2ggOiB0aGUgcmlnaHRtb3N0IGhpZ2gtZW5kcG9pbnQgbGVmdCBvZiBvZmZzZXRcbiAqIEBwYXJhbSB7Kn0gY2VudGVyX2xvd19saXN0IDogbG93LWVuZHBvaW50cyBvZiBjZW50ZXJcbiAqIEBwYXJhbSB7Kn0gY2VudGVyIDogY2VudGVyXG4gKiBAcGFyYW0geyp9IGNlbnRlcl9oaWdoX2xpc3QgOiBoaWdoLWVuZHBvaW50cyBvZiBjZW50ZXJcbiAqIEBwYXJhbSB7Kn0gbmV4dF9sb3cgOiB0aGUgbGVmdG1vc3QgbG93LWVuZHBvaW50IHJpZ2h0IG9mIG9mZnNldFxuICogQHJldHVybnMgXG4gKi9cblxuZnVuY3Rpb24gY21wX2FzY2VuZGluZyhwMSwgcDIpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuY21wKHAxLCBwMilcbn1cblxuZnVuY3Rpb24gY21wX2Rlc2NlbmRpbmcocDEsIHAyKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmNtcChwMiwgcDEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZWFyYnlfZnJvbSAoXG4gICAgcHJldl9oaWdoLCBcbiAgICBjZW50ZXJfbG93X2xpc3QsIFxuICAgIGNlbnRlcixcbiAgICBjZW50ZXJfaGlnaF9saXN0LFxuICAgIG5leHRfbG93KSB7XG5cbiAgICAvLyBuZWFyYnlcbiAgICBjb25zdCByZXN1bHQgPSB7Y2VudGVyfTtcblxuICAgIGlmIChjZW50ZXIubGVuZ3RoID09IDApIHtcbiAgICAgICAgLy8gZW1wdHkgY2VudGVyXG4gICAgICAgIHJlc3VsdC5yaWdodCA9IG5leHRfbG93O1xuICAgICAgICByZXN1bHQubGVmdCA9IHByZXZfaGlnaDtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBub24tZW1wdHkgY2VudGVyXG4gICAgICAgIFxuICAgICAgICAvLyBjZW50ZXIgaGlnaFxuICAgICAgICBjZW50ZXJfaGlnaF9saXN0LnNvcnQoY21wX2FzY2VuZGluZyk7XG4gICAgICAgIGxldCBtaW5fY2VudGVyX2hpZ2ggPSBjZW50ZXJfaGlnaF9saXN0WzBdO1xuICAgICAgICBsZXQgbWF4X2NlbnRlcl9oaWdoID0gY2VudGVyX2hpZ2hfbGlzdC5zbGljZSgtMSlbMF07XG4gICAgICAgIGxldCBtdWx0aXBsZV9jZW50ZXJfaGlnaCA9ICFlbmRwb2ludC5lcShtaW5fY2VudGVyX2hpZ2gsIG1heF9jZW50ZXJfaGlnaClcblxuICAgICAgICAvLyBjZW50ZXIgbG93XG4gICAgICAgIGNlbnRlcl9sb3dfbGlzdC5zb3J0KGNtcF9kZXNjZW5kaW5nKTtcbiAgICAgICAgbGV0IG1heF9jZW50ZXJfbG93ID0gY2VudGVyX2xvd19saXN0WzBdO1xuICAgICAgICBsZXQgbWluX2NlbnRlcl9sb3cgPSBjZW50ZXJfbG93X2xpc3Quc2xpY2UoLTEpWzBdO1xuICAgICAgICBsZXQgbXVsdGlwbGVfY2VudGVyX2xvdyA9ICFlbmRwb2ludC5lcShtYXhfY2VudGVyX2xvdywgbWluX2NlbnRlcl9sb3cpXG5cbiAgICAgICAgLy8gbmV4dC9yaWdodFxuICAgICAgICBpZiAoZW5kcG9pbnQubGUobmV4dF9sb3csIG1pbl9jZW50ZXJfaGlnaCkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5yaWdodCA9IG5leHRfbG93O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzdWx0LnJpZ2h0ID0gZW5kcG9pbnQuZmxpcChtaW5fY2VudGVyX2hpZ2gpXG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0Lm5leHQgPSAobXVsdGlwbGVfY2VudGVyX2hpZ2gpID8gcmVzdWx0LnJpZ2h0IDogbmV4dF9sb3c7XG5cbiAgICAgICAgLy8gcHJldi9sZWZ0XG4gICAgICAgIGlmIChlbmRwb2ludC5nZShwcmV2X2hpZ2gsIG1heF9jZW50ZXJfbG93KSkge1xuICAgICAgICAgICAgcmVzdWx0LmxlZnQgPSBwcmV2X2hpZ2g7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQubGVmdCA9IGVuZHBvaW50LmZsaXAobWF4X2NlbnRlcl9sb3cpO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5wcmV2ID0gKG11bHRpcGxlX2NlbnRlcl9sb3cpID8gcmVzdWx0LmxlZnQgOiBwcmV2X2hpZ2g7XG5cbiAgICB9XG5cbiAgICAvLyBpbnRlcnZhbCBmcm9tIGxlZnQvcmlnaHRcbiAgICBsZXQgbG93ID0gZW5kcG9pbnQuZmxpcChyZXN1bHQubGVmdCk7XG4gICAgbGV0IGhpZ2ggPSBlbmRwb2ludC5mbGlwKHJlc3VsdC5yaWdodCk7XG4gICAgcmVzdWx0Lml0diA9IGludGVydmFsLmZyb21fZW5kcG9pbnRzKGxvdywgaGlnaCk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgTmVhcmJ5SW5kZXggZm9yIGEgc3JjIG9iamVjdCBMYXllci5cbiAqIFxuICogVGhlIHNyYyBvYmplY3QgcmVzb2x2ZXMgcXVlcmllcyBmb3IgdGhlIGVudGlyZSB0aW1lbGluZS5cbiAqIEluIG9yZGVyIGZvciB0aGUgZGVmYXVsdCBMYXllckNhY2hlIHRvIHdvcmssIGFuXG4gKiBvYmplY3Qgd2l0aCBhIC5xdWVyeShvZmZzZXQpIG1ldGhvZCBpcyBuZWVkZWQgaW4gXG4gKiBuZWFyYnkuY2VudGVyLlxuICovXG5cbmV4cG9ydCBjbGFzcyBOZWFyYnlJbmRleFNyYyBleHRlbmRzIE5lYXJieUluZGV4QmFzZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihzcmMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fc3JjID0gc3JjO1xuICAgICAgICB0aGlzLl9jYWNoZSA9IHNyYy5jcmVhdGVDYWNoZSgpO1xuICAgIH1cblxuICAgIG5lYXJieShvZmZzZXQpIHtcbiAgICAgICAgY29uc3QgbmVhcmJ5ID0gdGhpcy5fc3JjLmluZGV4Lm5lYXJieShvZmZzZXQpO1xuICAgICAgICBuZWFyYnkuY2VudGVyID0gW3RoaXMuX2NhY2hlXTtcbiAgICAgICAgcmV0dXJuIG5lYXJieTtcbiAgICB9XG59XG4iLCIvKlxuXHRDb3B5cmlnaHQgMjAyMFxuXHRBdXRob3IgOiBJbmdhciBBcm50emVuXG5cblx0VGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIFRpbWluZ3NyYyBtb2R1bGUuXG5cblx0VGltaW5nc3JjIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnlcblx0aXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5XG5cdHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yXG5cdChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uXG5cblx0VGltaW5nc3JjIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsXG5cdGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mXG5cdE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGVcblx0R05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuXG5cblx0WW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlXG5cdGFsb25nIHdpdGggVGltaW5nc3JjLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LlxuKi9cblxuXG5cbi8qXG5cdEV2ZW50XG5cdC0gbmFtZTogZXZlbnQgbmFtZVxuXHQtIHB1Ymxpc2hlcjogdGhlIG9iamVjdCB3aGljaCBkZWZpbmVkIHRoZSBldmVudFxuXHQtIGluaXQ6IHRydWUgaWYgdGhlIGV2ZW50IHN1cHBwb3J0cyBpbml0IGV2ZW50c1xuXHQtIHN1YnNjcmlwdGlvbnM6IHN1YnNjcmlwdGlucyB0byB0aGlzIGV2ZW50XG5cbiovXG5cbmNsYXNzIEV2ZW50IHtcblxuXHRjb25zdHJ1Y3RvciAocHVibGlzaGVyLCBuYW1lLCBvcHRpb25zKSB7XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge31cblx0XHR0aGlzLnB1Ymxpc2hlciA9IHB1Ymxpc2hlcjtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHRcdHRoaXMuaW5pdCA9IChvcHRpb25zLmluaXQgPT09IHVuZGVmaW5lZCkgPyBmYWxzZSA6IG9wdGlvbnMuaW5pdDtcblx0XHR0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcblx0fVxuXG5cdC8qXG5cdFx0c3Vic2NyaWJlIHRvIGV2ZW50XG5cdFx0LSBzdWJzY3JpYmVyOiBzdWJzY3JpYmluZyBvYmplY3Rcblx0XHQtIGNhbGxiYWNrOiBjYWxsYmFjayBmdW5jdGlvbiB0byBpbnZva2Vcblx0XHQtIG9wdGlvbnM6XG5cdFx0XHRpbml0OiBpZiB0cnVlIHN1YnNjcmliZXIgd2FudHMgaW5pdCBldmVudHNcblx0Ki9cblx0c3Vic2NyaWJlIChjYWxsYmFjaywgb3B0aW9ucykge1xuXHRcdGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNhbGxiYWNrIG5vdCBhIGZ1bmN0aW9uXCIsIGNhbGxiYWNrKTtcblx0XHR9XG5cdFx0Y29uc3Qgc3ViID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzLCBjYWxsYmFjaywgb3B0aW9ucyk7XG5cdFx0dGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc3ViKTtcblx0ICAgIC8vIEluaXRpYXRlIGluaXQgY2FsbGJhY2sgZm9yIHRoaXMgc3Vic2NyaXB0aW9uXG5cdCAgICBpZiAodGhpcy5pbml0ICYmIHN1Yi5pbml0KSB7XG5cdCAgICBcdHN1Yi5pbml0X3BlbmRpbmcgPSB0cnVlO1xuXHQgICAgXHRsZXQgc2VsZiA9IHRoaXM7XG5cdCAgICBcdFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgXHRcdGNvbnN0IGVBcmdzID0gc2VsZi5wdWJsaXNoZXIuZXZlbnRpZnlJbml0RXZlbnRBcmdzKHNlbGYubmFtZSkgfHwgW107XG5cdCAgICBcdFx0c3ViLmluaXRfcGVuZGluZyA9IGZhbHNlO1xuXHQgICAgXHRcdGZvciAobGV0IGVBcmcgb2YgZUFyZ3MpIHtcblx0ICAgIFx0XHRcdHNlbGYudHJpZ2dlcihlQXJnLCBbc3ViXSwgdHJ1ZSk7XG5cdCAgICBcdFx0fVxuXHQgICAgXHR9KTtcblx0ICAgIH1cblx0XHRyZXR1cm4gc3ViXG5cdH1cblxuXHQvKlxuXHRcdHRyaWdnZXIgZXZlbnRcblxuXHRcdC0gaWYgc3ViIGlzIHVuZGVmaW5lZCAtIHB1Ymxpc2ggdG8gYWxsIHN1YnNjcmlwdGlvbnNcblx0XHQtIGlmIHN1YiBpcyBkZWZpbmVkIC0gcHVibGlzaCBvbmx5IHRvIGdpdmVuIHN1YnNjcmlwdGlvblxuXHQqL1xuXHR0cmlnZ2VyIChlQXJnLCBzdWJzLCBpbml0KSB7XG5cdFx0bGV0IGVJbmZvLCBjdHg7XG5cdFx0Zm9yIChjb25zdCBzdWIgb2Ygc3Vicykge1xuXHRcdFx0Ly8gaWdub3JlIHRlcm1pbmF0ZWQgc3Vic2NyaXB0aW9uc1xuXHRcdFx0aWYgKHN1Yi50ZXJtaW5hdGVkKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0ZUluZm8gPSB7XG5cdFx0XHRcdHNyYzogdGhpcy5wdWJsaXNoZXIsXG5cdFx0XHRcdG5hbWU6IHRoaXMubmFtZSxcblx0XHRcdFx0c3ViOiBzdWIsXG5cdFx0XHRcdGluaXQ6IGluaXRcblx0XHRcdH1cblx0XHRcdGN0eCA9IHN1Yi5jdHggfHwgdGhpcy5wdWJsaXNoZXI7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRzdWIuY2FsbGJhY2suY2FsbChjdHgsIGVBcmcsIGVJbmZvKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgRXJyb3IgaW4gJHt0aGlzLm5hbWV9OiAke3N1Yi5jYWxsYmFja30gJHtlcnJ9YCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Lypcblx0dW5zdWJzY3JpYmUgZnJvbSBldmVudFxuXHQtIHVzZSBzdWJzY3JpcHRpb24gcmV0dXJuZWQgYnkgcHJldmlvdXMgc3Vic2NyaWJlXG5cdCovXG5cdHVuc3Vic2NyaWJlKHN1Yikge1xuXHRcdGxldCBpZHggPSB0aGlzLnN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWIpO1xuXHRcdGlmIChpZHggPiAtMSkge1xuXHRcdFx0dGhpcy5zdWJzY3JpcHRpb25zLnNwbGljZShpZHgsIDEpO1xuXHRcdFx0c3ViLnRlcm1pbmF0ZSgpO1xuXHRcdH1cblx0fVxufVxuXG5cbi8qXG5cdFN1YnNjcmlwdGlvbiBjbGFzc1xuKi9cblxuY2xhc3MgU3Vic2NyaXB0aW9uIHtcblxuXHRjb25zdHJ1Y3RvcihldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXHRcdHRoaXMuZXZlbnQgPSBldmVudDtcblx0XHR0aGlzLm5hbWUgPSBldmVudC5uYW1lO1xuXHRcdHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFja1xuXHRcdHRoaXMuaW5pdCA9IChvcHRpb25zLmluaXQgPT09IHVuZGVmaW5lZCkgPyB0aGlzLmV2ZW50LmluaXQgOiBvcHRpb25zLmluaXQ7XG5cdFx0dGhpcy5pbml0X3BlbmRpbmcgPSBmYWxzZTtcblx0XHR0aGlzLnRlcm1pbmF0ZWQgPSBmYWxzZTtcblx0XHR0aGlzLmN0eCA9IG9wdGlvbnMuY3R4O1xuXHR9XG5cblx0dGVybWluYXRlKCkge1xuXHRcdHRoaXMudGVybWluYXRlZCA9IHRydWU7XG5cdFx0dGhpcy5jYWxsYmFjayA9IHVuZGVmaW5lZDtcblx0XHR0aGlzLmV2ZW50LnVuc3Vic2NyaWJlKHRoaXMpO1xuXHR9XG59XG5cblxuLypcblxuXHRFVkVOVElGWSBJTlNUQU5DRVxuXG5cdEV2ZW50aWZ5IGJyaW5ncyBldmVudGluZyBjYXBhYmlsaXRpZXMgdG8gYW55IG9iamVjdC5cblxuXHRJbiBwYXJ0aWN1bGFyLCBldmVudGlmeSBzdXBwb3J0cyB0aGUgaW5pdGlhbC1ldmVudCBwYXR0ZXJuLlxuXHRPcHQtaW4gZm9yIGluaXRpYWwgZXZlbnRzIHBlciBldmVudCB0eXBlLlxuXG5cdGV2ZW50aWZ5SW5pdEV2ZW50QXJncyhuYW1lKSB7XG5cdFx0aWYgKG5hbWUgPT0gXCJjaGFuZ2VcIikge1xuXHRcdFx0cmV0dXJuIFt0aGlzLl92YWx1ZV07XG5cdFx0fVxuXHR9XG5cbiovXG5cbmV4cG9ydCBmdW5jdGlvbiBldmVudGlmeUluc3RhbmNlIChvYmplY3QpIHtcblx0b2JqZWN0Ll9fZXZlbnRpZnlfZXZlbnRNYXAgPSBuZXcgTWFwKCk7XG5cdG9iamVjdC5fX2V2ZW50aWZ5X2J1ZmZlciA9IFtdO1xuXHRyZXR1cm4gb2JqZWN0O1xufTtcblxuXG4vKlxuXHRFVkVOVElGWSBQUk9UT1RZUEVcblxuXHRBZGQgZXZlbnRpZnkgZnVuY3Rpb25hbGl0eSB0byBwcm90b3R5cGUgb2JqZWN0XG4qL1xuXG5leHBvcnQgZnVuY3Rpb24gZXZlbnRpZnlQcm90b3R5cGUoX3Byb3RvdHlwZSkge1xuXG5cdGZ1bmN0aW9uIGV2ZW50aWZ5R2V0RXZlbnQob2JqZWN0LCBuYW1lKSB7XG5cdFx0Y29uc3QgZXZlbnQgPSBvYmplY3QuX19ldmVudGlmeV9ldmVudE1hcC5nZXQobmFtZSk7XG5cdFx0aWYgKGV2ZW50ID09IHVuZGVmaW5lZCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRXZlbnQgdW5kZWZpbmVkXCIsIG5hbWUpO1xuXHRcdH1cblx0XHRyZXR1cm4gZXZlbnQ7XG5cdH1cblxuXHQvKlxuXHRcdERFRklORSBFVkVOVFxuXHRcdC0gdXNlZCBvbmx5IGJ5IGV2ZW50IHNvdXJjZVxuXHRcdC0gbmFtZTogbmFtZSBvZiBldmVudFxuXHRcdC0gb3B0aW9uczoge2luaXQ6dHJ1ZX0gc3BlY2lmaWVzIGluaXQtZXZlbnQgc2VtYW50aWNzIGZvciBldmVudFxuXHQqL1xuXHRmdW5jdGlvbiBldmVudGlmeURlZmluZShuYW1lLCBvcHRpb25zKSB7XG5cdFx0Ly8gY2hlY2sgdGhhdCBldmVudCBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0XG5cdFx0aWYgKHRoaXMuX19ldmVudGlmeV9ldmVudE1hcC5oYXMobmFtZSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkV2ZW50IGFscmVhZHkgZGVmaW5lZFwiLCBuYW1lKTtcblx0XHR9XG5cdFx0dGhpcy5fX2V2ZW50aWZ5X2V2ZW50TWFwLnNldChuYW1lLCBuZXcgRXZlbnQodGhpcywgbmFtZSwgb3B0aW9ucykpO1xuXHR9O1xuXG5cdC8qXG5cdFx0T05cblx0XHQtIHVzZWQgYnkgc3Vic2NyaWJlclxuXHRcdHJlZ2lzdGVyIGNhbGxiYWNrIG9uIGV2ZW50LlxuXHQqL1xuXHRmdW5jdGlvbiBvbihuYW1lLCBjYWxsYmFjaywgb3B0aW9ucykge1xuXHRcdHJldHVybiBldmVudGlmeUdldEV2ZW50KHRoaXMsIG5hbWUpLnN1YnNjcmliZShjYWxsYmFjaywgb3B0aW9ucyk7XG5cdH07XG5cblx0Lypcblx0XHRPRkZcblx0XHQtIHVzZWQgYnkgc3Vic2NyaWJlclxuXHRcdFVuLXJlZ2lzdGVyIGEgaGFuZGxlciBmcm9tIGEgc3BlY2ZpYyBldmVudCB0eXBlXG5cdCovXG5cdGZ1bmN0aW9uIG9mZihzdWIpIHtcblx0XHRyZXR1cm4gZXZlbnRpZnlHZXRFdmVudCh0aGlzLCBzdWIubmFtZSkudW5zdWJzY3JpYmUoc3ViKTtcblx0fTtcblxuXG5cdGZ1bmN0aW9uIGV2ZW50aWZ5U3Vic2NyaXB0aW9ucyhuYW1lKSB7XG5cdFx0cmV0dXJuIGV2ZW50aWZ5R2V0RXZlbnQodGhpcywgbmFtZSkuc3Vic2NyaXB0aW9ucztcblx0fVxuXG5cblxuXHQvKlxuXHRcdFRyaWdnZXIgbGlzdCBvZiBldmVudEl0ZW1zIG9uIG9iamVjdFxuXG5cdFx0ZXZlbnRJdGVtOiAge25hbWU6Li4sIGVBcmc6Li59XG5cblx0XHRjb3B5IGFsbCBldmVudEl0ZW1zIGludG8gYnVmZmVyLlxuXHRcdHJlcXVlc3QgZW1wdHlpbmcgdGhlIGJ1ZmZlciwgaS5lLiBhY3R1YWxseSB0cmlnZ2VyaW5nIGV2ZW50cyxcblx0XHRldmVyeSB0aW1lIHRoZSBidWZmZXIgZ29lcyBmcm9tIGVtcHR5IHRvIG5vbi1lbXB0eVxuXHQqL1xuXHRmdW5jdGlvbiBldmVudGlmeVRyaWdnZXJBbGwoZXZlbnRJdGVtcykge1xuXHRcdGlmIChldmVudEl0ZW1zLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gbWFrZSB0cmlnZ2VyIGl0ZW1zXG5cdFx0Ly8gcmVzb2x2ZSBub24tcGVuZGluZyBzdWJzY3JpcHRpb25zIG5vd1xuXHRcdC8vIGVsc2Ugc3Vic2NyaXB0aW9ucyBtYXkgY2hhbmdlIGZyb20gcGVuZGluZyB0byBub24tcGVuZGluZ1xuXHRcdC8vIGJldHdlZW4gaGVyZSBhbmQgYWN0dWFsIHRyaWdnZXJpbmdcblx0XHQvLyBtYWtlIGxpc3Qgb2YgW2V2LCBlQXJnLCBzdWJzXSB0dXBsZXNcblx0XHRsZXQgdHJpZ2dlckl0ZW1zID0gZXZlbnRJdGVtcy5tYXAoKGl0ZW0pID0+IHtcblx0XHRcdGxldCB7bmFtZSwgZUFyZ30gPSBpdGVtO1xuXHRcdFx0bGV0IGV2ID0gZXZlbnRpZnlHZXRFdmVudCh0aGlzLCBuYW1lKTtcblx0XHRcdGxldCBzdWJzID0gZXYuc3Vic2NyaXB0aW9ucy5maWx0ZXIoc3ViID0+IHN1Yi5pbml0X3BlbmRpbmcgPT0gZmFsc2UpO1xuXHRcdFx0cmV0dXJuIFtldiwgZUFyZywgc3Vic107XG5cdFx0fSwgdGhpcyk7XG5cblx0XHQvLyBhcHBlbmQgdHJpZ2dlciBJdGVtcyB0byBidWZmZXJcblx0XHRjb25zdCBsZW4gPSB0cmlnZ2VySXRlbXMubGVuZ3RoO1xuXHRcdGNvbnN0IGJ1ZiA9IHRoaXMuX19ldmVudGlmeV9idWZmZXI7XG5cdFx0Y29uc3QgYnVmX2xlbiA9IHRoaXMuX19ldmVudGlmeV9idWZmZXIubGVuZ3RoO1xuXHRcdC8vIHJlc2VydmUgbWVtb3J5IC0gc2V0IG5ldyBsZW5ndGhcblx0XHR0aGlzLl9fZXZlbnRpZnlfYnVmZmVyLmxlbmd0aCA9IGJ1Zl9sZW4gKyBsZW47XG5cdFx0Ly8gY29weSB0cmlnZ2VySXRlbXMgdG8gYnVmZmVyXG5cdFx0Zm9yIChsZXQgaT0wOyBpPGxlbjsgaSsrKSB7XG5cdFx0XHRidWZbYnVmX2xlbitpXSA9IHRyaWdnZXJJdGVtc1tpXTtcblx0XHR9XG5cdFx0Ly8gcmVxdWVzdCBlbXB0eWluZyBvZiB0aGUgYnVmZmVyXG5cdFx0aWYgKGJ1Zl9sZW4gPT0gMCkge1xuXHRcdFx0bGV0IHNlbGYgPSB0aGlzO1xuXHRcdFx0UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdFx0Zm9yIChsZXQgW2V2LCBlQXJnLCBzdWJzXSBvZiBzZWxmLl9fZXZlbnRpZnlfYnVmZmVyKSB7XG5cdFx0XHRcdFx0Ly8gYWN0dWFsIGV2ZW50IHRyaWdnZXJpbmdcblx0XHRcdFx0XHRldi50cmlnZ2VyKGVBcmcsIHN1YnMsIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLl9fZXZlbnRpZnlfYnVmZmVyID0gW107XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKlxuXHRcdFRyaWdnZXIgbXVsdGlwbGUgZXZlbnRzIG9mIHNhbWUgdHlwZSAobmFtZSlcblx0Ki9cblx0ZnVuY3Rpb24gZXZlbnRpZnlUcmlnZ2VyQWxpa2UobmFtZSwgZUFyZ3MpIHtcblx0XHRyZXR1cm4gdGhpcy5ldmVudGlmeVRyaWdnZXJBbGwoZUFyZ3MubWFwKGVBcmcgPT4ge1xuXHRcdFx0cmV0dXJuIHtuYW1lLCBlQXJnfTtcblx0XHR9KSk7XG5cdH1cblxuXHQvKlxuXHRcdFRyaWdnZXIgc2luZ2xlIGV2ZW50XG5cdCovXG5cdGZ1bmN0aW9uIGV2ZW50aWZ5VHJpZ2dlcihuYW1lLCBlQXJnKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXZlbnRpZnlUcmlnZ2VyQWxsKFt7bmFtZSwgZUFyZ31dKTtcblx0fVxuXG5cdF9wcm90b3R5cGUuZXZlbnRpZnlEZWZpbmUgPSBldmVudGlmeURlZmluZTtcblx0X3Byb3RvdHlwZS5ldmVudGlmeVRyaWdnZXIgPSBldmVudGlmeVRyaWdnZXI7XG5cdF9wcm90b3R5cGUuZXZlbnRpZnlUcmlnZ2VyQWxpa2UgPSBldmVudGlmeVRyaWdnZXJBbGlrZTtcblx0X3Byb3RvdHlwZS5ldmVudGlmeVRyaWdnZXJBbGwgPSBldmVudGlmeVRyaWdnZXJBbGw7XG5cdF9wcm90b3R5cGUuZXZlbnRpZnlTdWJzY3JpcHRpb25zID0gZXZlbnRpZnlTdWJzY3JpcHRpb25zO1xuXHRfcHJvdG90eXBlLm9uID0gb247XG5cdF9wcm90b3R5cGUub2ZmID0gb2ZmO1xufTtcblxuXG5leHBvcnQge2V2ZW50aWZ5SW5zdGFuY2UgYXMgYWRkU3RhdGV9O1xuZXhwb3J0IHtldmVudGlmeVByb3RvdHlwZSBhcyBhZGRNZXRob2RzfTtcblxuLypcblx0RXZlbnQgVmFyaWFibGVcblxuXHRPYmplY3RzIHdpdGggYSBzaW5nbGUgXCJjaGFuZ2VcIiBldmVudFxuKi9cblxuZXhwb3J0IGNsYXNzIEV2ZW50VmFyaWFibGUge1xuXG5cdGNvbnN0cnVjdG9yICh2YWx1ZSkge1xuXHRcdGV2ZW50aWZ5SW5zdGFuY2UodGhpcyk7XG5cdFx0dGhpcy5fdmFsdWUgPSB2YWx1ZTtcblx0XHR0aGlzLmV2ZW50aWZ5RGVmaW5lKFwiY2hhbmdlXCIsIHtpbml0OnRydWV9KTtcblx0fVxuXG5cdGV2ZW50aWZ5SW5pdEV2ZW50QXJncyhuYW1lKSB7XG5cdFx0aWYgKG5hbWUgPT0gXCJjaGFuZ2VcIikge1xuXHRcdFx0cmV0dXJuIFt0aGlzLl92YWx1ZV07XG5cdFx0fVxuXHR9XG5cblx0Z2V0IHZhbHVlICgpIHtyZXR1cm4gdGhpcy5fdmFsdWV9O1xuXHRzZXQgdmFsdWUgKHZhbHVlKSB7XG5cdFx0aWYgKHZhbHVlICE9IHRoaXMuX3ZhbHVlKSB7XG5cdFx0XHR0aGlzLl92YWx1ZSA9IHZhbHVlO1xuXHRcdFx0dGhpcy5ldmVudGlmeVRyaWdnZXIoXCJjaGFuZ2VcIiwgdmFsdWUpO1xuXHRcdH1cblx0fVxufVxuZXZlbnRpZnlQcm90b3R5cGUoRXZlbnRWYXJpYWJsZS5wcm90b3R5cGUpO1xuXG4vKlxuXHRFdmVudCBCb29sZWFuXG5cblxuXHROb3RlIDogaW1wbGVtZW50YXRpb24gdXNlcyBmYWxzaW5lc3Mgb2YgaW5wdXQgcGFyYW1ldGVyIHRvIGNvbnN0cnVjdG9yIGFuZCBzZXQoKSBvcGVyYXRpb24sXG5cdHNvIGV2ZW50Qm9vbGVhbigtMSkgd2lsbCBhY3R1YWxseSBzZXQgaXQgdG8gdHJ1ZSBiZWNhdXNlXG5cdCgtMSkgPyB0cnVlIDogZmFsc2UgLT4gdHJ1ZSAhXG4qL1xuXG5leHBvcnQgY2xhc3MgRXZlbnRCb29sZWFuIGV4dGVuZHMgRXZlbnRWYXJpYWJsZSB7XG5cdGNvbnN0cnVjdG9yKHZhbHVlKSB7XG5cdFx0c3VwZXIoQm9vbGVhbih2YWx1ZSkpO1xuXHR9XG5cblx0c2V0IHZhbHVlICh2YWx1ZSkge1xuXHRcdHN1cGVyLnZhbHVlID0gQm9vbGVhbih2YWx1ZSk7XG5cdH1cblx0Z2V0IHZhbHVlICgpIHtyZXR1cm4gc3VwZXIudmFsdWV9O1xufVxuXG5cbi8qXG5cdG1ha2UgYSBwcm9taXNlIHdoaWNoIGlzIHJlc29sdmVkIHdoZW4gRXZlbnRCb29sZWFuIGNoYW5nZXNcblx0dmFsdWUuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQcm9taXNlKGV2ZW50T2JqZWN0LCBjb25kaXRpb25GdW5jKSB7XG5cdGNvbmRpdGlvbkZ1bmMgPSBjb25kaXRpb25GdW5jIHx8IGZ1bmN0aW9uKHZhbCkge3JldHVybiB2YWwgPT0gdHJ1ZX07XG5cdHJldHVybiBuZXcgUHJvbWlzZSAoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdGxldCBzdWIgPSBldmVudE9iamVjdC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdGlmIChjb25kaXRpb25GdW5jKHZhbHVlKSkge1xuXHRcdFx0XHRyZXNvbHZlKHZhbHVlKTtcblx0XHRcdFx0ZXZlbnRPYmplY3Qub2ZmKHN1Yik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuLy8gbW9kdWxlIGFwaVxuZXhwb3J0IGRlZmF1bHQge1xuXHRldmVudGlmeVByb3RvdHlwZSxcblx0ZXZlbnRpZnlJbnN0YW5jZSxcblx0RXZlbnRWYXJpYWJsZSxcblx0RXZlbnRCb29sZWFuLFxuXHRtYWtlUHJvbWlzZVxufTtcblxuIiwiLypcbiAgICBUaGlzIGRlY29yYXRlcyBhbiBvYmplY3QvcHJvdG90eXBlIHdpdGggYmFzaWMgKHN5bmNocm9ub3VzKSBjYWxsYmFjayBzdXBwb3J0LlxuKi9cblxuY29uc3QgUFJFRklYID0gXCJfX2NhbGxiYWNrXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTdGF0ZShvYmplY3QpIHtcbiAgICBvYmplY3RbYCR7UFJFRklYfV9oYW5kbGVyc2BdID0gW107XG59XG5cbmZ1bmN0aW9uIGFkZF9jYWxsYmFjayAoaGFuZGxlcikge1xuICAgIGxldCBoYW5kbGUgPSB7XG4gICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICB9XG4gICAgdGhpc1tgJHtQUkVGSVh9X2hhbmRsZXJzYF0ucHVzaChoYW5kbGUpO1xuICAgIHJldHVybiBoYW5kbGU7XG59O1xuXG5mdW5jdGlvbiByZW1vdmVfY2FsbGJhY2sgKGhhbmRsZSkge1xuICAgIGxldCBpbmRleCA9IHRoaXNbYCR7UFJFRklYfV9oYW5kbGVyc2BdLmluZGV4T2YoaGFuZGxlKTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzW2Ake1BSRUZJWH1faGFuZGxlcnNgXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIG5vdGlmeV9jYWxsYmFja3MgKGVBcmcpIHtcbiAgICB0aGlzW2Ake1BSRUZJWH1faGFuZGxlcnNgXS5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICBoYW5kbGUuaGFuZGxlcihlQXJnKTtcbiAgICB9KTtcbn07XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE1ldGhvZHMgKG9iaikge1xuICAgIGNvbnN0IGFwaSA9IHtcbiAgICAgICAgYWRkX2NhbGxiYWNrLCByZW1vdmVfY2FsbGJhY2ssIG5vdGlmeV9jYWxsYmFja3NcbiAgICB9XG4gICAgT2JqZWN0LmFzc2lnbihvYmosIGFwaSk7XG59XG5cbi8qKlxuICogdGVzdCBpZiBvYmplY3QgaW1wbGVtZW50cyBjYWxsYmFjayBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzX2NhbGxiYWNrX2FwaSAob2JqKSB7XG4gICAgaWYgKG9iaiA9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBtZXRob2RzID0gW1wiYWRkX2NhbGxiYWNrXCIsIFwicmVtb3ZlX2NhbGxiYWNrXCJdO1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBtZXRob2RzKSB7XG4gICAgICAgIGlmICghKHByb3AgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIG9ialtwcm9wXSAhPSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuIiwiaW1wb3J0IHsgZW5kcG9pbnQsIGludGVydmFsIH0gZnJvbSBcIi4vaW50ZXJ2YWxzXCI7XG5cblxuLy8gb3Z2ZXJyaWRlIG1vZHVsbyB0byBiZWhhdmUgYmV0dGVyIGZvciBuZWdhdGl2ZSBudW1iZXJzXG5leHBvcnQgZnVuY3Rpb24gbW9kKG4sIG0pIHtcbiAgICByZXR1cm4gKChuICUgbSkgKyBtKSAlIG07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGl2bW9kKHgsIGJhc2UpIHtcbiAgICBsZXQgbiA9IE1hdGguZmxvb3IoeCAvIGJhc2UpXG4gICAgbGV0IHIgPSBtb2QoeCwgYmFzZSk7XG4gICAgcmV0dXJuIFtuLCByXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzX2Zpbml0ZV9udW1iZXIob2JqKSB7XG4gICAgcmV0dXJuICh0eXBlb2Ygb2JqID09ICdudW1iZXInKSAmJiBpc0Zpbml0ZShvYmopO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tfbnVtYmVyKG5hbWUsIG9iaikge1xuICAgIGlmICghaXNfZmluaXRlX251bWJlcihvYmopKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGZpbml0ZSBudW1iZXIgJHtvYmp9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIGNvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIHJlbmRlciBhIGN1cnNvciBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcl9jdXJzb3IgKGN1cnNvciwgc2VsZWN0b3IsIG9wdGlvbnM9e30pIHtcbiAgICBjb25zdCB7ZGVsYXk9MjAwLCByZW5kZXIsIG5vdmFsdWV9ID0gb3B0aW9ucztcbiAgICBjb25zdCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIGZ1bmN0aW9uIF9yZW5kZXIoc3RhdGUpIHtcbiAgICAgICAgaWYgKHN0YXRlLnZhbHVlID09IHVuZGVmaW5lZCAmJiBub3ZhbHVlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RhdGUudmFsdWUgPSBub3ZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZW5kZXIgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZW5kZXIoc3RhdGUsIGVsZW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1zLnRleHRDb250ZW50ID0gKHN0YXRlLnZhbHVlICE9IHVuZGVmaW5lZCkgPyBgJHtzdGF0ZS52YWx1ZX1gIDogXCJcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3Vyc29yLmJpbmQoX3JlbmRlciwgZGVsYXkpO1xufVxuXG5cblxuXG4vKlxuICAgIHNpbWlsYXIgdG8gcmFuZ2UgZnVuY3Rpb24gaW4gcHl0aG9uXG4qL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZ2UgKHN0YXJ0LCBlbmQsIHN0ZXAgPSAxLCBvcHRpb25zPXt9KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgY29uc3Qge2luY2x1ZGVfZW5kPWZhbHNlfSA9IG9wdGlvbnM7XG4gICAgaWYgKHN0ZXAgPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdGVwIGNhbm5vdCBiZSB6ZXJvLicpO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgPCBlbmQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IHN0ZXApIHtcbiAgICAgICAgICByZXN1bHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc3RhcnQgPiBlbmQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpID4gZW5kOyBpIC09IHN0ZXApIHtcbiAgICAgICAgICByZXN1bHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5jbHVkZV9lbmQpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goZW5kKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vLyB3ZWJwYWdlIGNsb2NrIC0gcGVyZm9ybWFuY2Ugbm93IC0gc2Vjb25kc1xuZXhwb3J0IGNvbnN0IGxvY2FsX2Nsb2NrID0gZnVuY3Rpb24gbG9jYWxfY2xvY2sgKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdzogKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpLzEwMDAuMDtcbiAgICAgICAgfVxuICAgIH1cbn0oKTtcblxuLy8gc3lzdGVtIGNsb2NrIC0gZXBvY2ggLSBzZWNvbmRzXG5leHBvcnQgY29uc3QgbG9jYWxfZXBvY2ggPSBmdW5jdGlvbiBsb2NhbF9lcG9jaCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbm93OiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKS8xMDAwLjA7XG4gICAgICAgIH1cbiAgICB9XG59KCk7XG5cbi8qKlxuICogQ3JlYXRlIGEgc2luZ2xlIHN0YXRlIGZyb20gYSBsaXN0IG9mIHN0YXRlcywgdXNpbmcgYSB2YWx1ZUZ1bmNcbiAqIHN0YXRlOnt2YWx1ZSwgZHluYW1pYywgb2Zmc2V0fVxuICogXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRvU3RhdGUoc291cmNlcywgc3RhdGVzLCBvZmZzZXQsIG9wdGlvbnM9e30pIHtcbiAgICBsZXQge3ZhbHVlRnVuYywgc3RhdGVGdW5jLCBudW1lcmljPWZhbHNlLCBtYXNrfSA9IG9wdGlvbnM7IFxuICAgIGxldCBzdGF0ZTtcbiAgICBpZiAodmFsdWVGdW5jICE9IHVuZGVmaW5lZCkge1xuICAgICAgICBsZXQgdmFsdWUgPSB2YWx1ZUZ1bmMoe3NvdXJjZXMsIHN0YXRlcywgb2Zmc2V0fSk7XG4gICAgICAgIGxldCBkeW5hbWljID0gc3RhdGVzLm1hcCgodikgPT4gdi5keW1hbWljKS5zb21lKGU9PmUpO1xuICAgICAgICBzdGF0ZSA9IHt2YWx1ZSwgZHluYW1pYywgb2Zmc2V0fTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlRnVuYyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3RhdGUgPSB7Li4uc3RhdGVGdW5jKHtzb3VyY2VzLCBzdGF0ZXMsIG9mZnNldH0pLCBvZmZzZXR9O1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHN0YXRlID0ge3ZhbHVlOnVuZGVmaW5lZCwgZHluYW1pYzpmYWxzZSwgb2Zmc2V0fVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlID0gey4uLnN0YXRlc1swXSwgb2Zmc2V0fVxuICAgIH1cbiAgICBpZiAobnVtZXJpYyAmJiBzdGF0ZS52YWx1ZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCFpc19maW5pdGVfbnVtYmVyKHN0YXRlLnZhbHVlKSkge1xuICAgICAgICAgICAgc3RhdGUgPSB7dmFsdWU6bWFzaywgZHluYW1pYzpmYWxzZSwgb2Zmc2V0fTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrX2l0ZW1zKGl0ZW1zKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGl0ZW1zKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnB1dCBtdXN0IGJlIGFuIGFycmF5XCIpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgLy8gbWFrZSBzdWVyIGl0ZW0gaGFzIGlkXG4gICAgICAgIGl0ZW0uaWQgPSBpdGVtLmlkIHx8IHJhbmRvbV9zdHJpbmcoMTApO1xuICAgICAgICAvLyBtYWtlIHN1cmUgaXRlbSBpbnRlcnZhbHMgYXJlIHdlbGwgZm9ybWVkXG4gICAgICAgIGl0ZW0uaXR2ID0gaW50ZXJ2YWwuZnJvbV9pbnB1dChpdGVtLml0dik7XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tX3N0cmluZyhsZW5ndGgpIHtcbiAgICB2YXIgdGV4dCA9IFwiXCI7XG4gICAgdmFyIHBvc3NpYmxlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCI7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dDtcbn1cblxuLyoqXG4gKiBJbXByb3ZlZCBzZXRfdGltZW91dFxuICogXG4gKiBUaW1lb3V0IGlzIGRlZmluZWQgYnkgYSB0YXJnZXRfbXMgcmVhZGluZyBvZiBwZXJmb3JtYW5jZS5ub3coKS5cbiAqIENhbGxiYWNrIGlzIG5vdCBpbnZva2VkIHVudGlsIHBlcmZvcm1hbmNlLm5vdygpID49IHRhcmdldF9tcy4gXG4gKiBcbiAqIFRoaXMgcHJvdGVjdHMgYWdhaW5zdCBhIHdlYWtuZXNzIGluIGJhc2ljIHNldFRpbWVvdXQsIHdoaWNoIG1heVxuICogb2NjYXRpb25hbGx5IGludm9rZSB0aGUgY2FsbGJhY2sgdG9vIGVhcmx5LiBcbiAqIFxuICogc2NoZWR1bGUgdGltZW91dCAxIG1zIGxhdGUsIHRvIHJlZHVjZSB0aGUgbGlrZWxpaG9vZCBvZiBcbiAqIGhhdmluZyB0byByZXNjaGVkdWxlIGEgdGltZW91dCBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldF90aW1lb3V0IChjYWxsYmFjaywgZGVsdGFfbXMpIHtcbiAgICBsZXQgdHMgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBkZWx0YV9tcyA9IE1hdGgubWF4KGRlbHRhX21zLCAwKTtcbiAgICBsZXQgdGFyZ2V0X21zID0gdHMgKyBkZWx0YV9tcztcbiAgICBsZXQgdGlkO1xuICAgIGZ1bmN0aW9uIGNhbmNlbF90aW1lb3V0KCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGlkKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaGFuZGxlX3RpbWVvdXQoKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhX21zID0gdGFyZ2V0X21zIC0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIGlmIChkZWx0YV9tcyA+IDApIHtcbiAgICAgICAgICAgIC8vIHJlc2NoZWR1bGUgdGltZW91dFxuICAgICAgICAgICAgdGlkID0gc2V0VGltZW91dChoYW5kbGVfdGltZW91dCwgZGVsdGFfbXMgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGlkID0gc2V0VGltZW91dChoYW5kbGVfdGltZW91dCwgZGVsdGFfbXMgKyAxKTtcbiAgICByZXR1cm4ge2NhbmNlbDpjYW5jZWxfdGltZW91dH07XG59XG5cbi8qKlxuICogIEltcGxlbWVudHMgZGV0ZXJtaW5pc3RpYyBwcm9qZWN0aW9uIGJhc2VkIG9uIGluaXRpYWwgY29uZGl0aW9ucyBcbiAqICAtIG1vdGlvbiB2ZWN0b3IgZGVzY3JpYmVzIG1vdGlvbiB1bmRlciBjb25zdGFudCBhY2NlbGVyYXRpb25cbiAqXG4gKiAgbW90aW9uIHRyYW5zaXRpb24gXG4gKiBcbiAqICB0cmFuc2l0aW9uIGZyb20gdGltZSBkb21haW4gdG8gcG9zaXRpb24gdW5kZXIgY29uc3RhbnQgYWNjZWxlcmF0aW9uIGlzIGdpdmVuIGJ5XG4gKiAgZ2l2ZW4gaW5pdGlhbCB2ZWN0b3IgW3AwLHYwLGEwLHQwXVxuICogIHAodCkgPSBwMCArIHYwKih0LXQwKSArIDAuNSphMCoodC10MCkqKHQtdDApXG4gKiAgdih0KSA9IHYwICsgYTAqKHQtdDApXG4gKiAgYSh0KSA9IGEwXG4gKiAgdCh0KSA9IHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vdGlvbl9jYWxjdWxhdGUodmVjdG9yLHQpIHtcbiAgICBjb25zdCBbcDAsdjAsYTAsdDBdID0gdmVjdG9yO1xuICAgIGNvbnN0IGQgPSB0IC0gdDA7XG4gICAgY29uc3QgcCA9IHAwICsgdjAqZCArIDAuNSphMCpNYXRoLnBvdyhkLDIpO1xuICAgIGNvbnN0IHYgPSB2MCArIGEwKmQ7XG4gICAgY29uc3QgYSA9IGEwO1xuICAgIHJldHVybiBbcCx2LGEsdF07XG59XG5cbi8qKlxuICogR2l2ZW4gbW90aW9uIGRldGVybWluZWQgZnJvbSBbcDAsdjAsYTAsdDBdLlxuICogR2l2ZW4gZXF1YXRpb24gcCh0KSA9IHAwICsgdjAqKHQtdDApICsgMC41KmEwKih0LXQwKV4yID09IHAxXG4gKiBDYWxjdWxhdGUgaWYgZXF1YXRpb24gaGFzIHNvbHV0aW9ucyBmb3Igc29tZSByZWFsIG51bWJlciB0LlxuICogQSBzb2x1dGlvbiBleGlzdHMgaWYgZGV0ZXJtaW5hbnQgb2YgcXVhZHJhdGljIGVxdWF0aW9uIGlzIG5vbi1uZWdhdGl2ZVxuICogKHYwXjIgLSAyYTAocDAtcDEpKSA+PSAwXG4gKi9cbmZ1bmN0aW9uIG1vdGlvbl9oYXNfcmVhbF9zb2x1dGlvbnModmVjdG9yLCBwMSkge1xuICAgIGNvbnN0IFtwMCx2MCxhMCx0MF0gPSB2ZWN0b3I7XG4gICAgcmV0dXJuIChNYXRoLnBvdyh2MCwyKSAtIDIqYTAqKHAwLXAxKSkgPj0gMC4wXG59O1xuXG4vKipcbiAqIEdpdmVuIG1vdGlvbiBkZXRlcm1pbmVkIGZyb20gW3AwLHYwLGEwLHQwXS5cbiAqIEdpdmVuIGVxdWF0aW9uIHAodCkgPSBwMCArIHYwKih0LXQwKSArIDAuNSphMCoodC10MCleMiA9PSBwMVxuICogQ2FsY3VsYXRlIGFuZCByZXR1cm4gcmVhbCBzb2x1dGlvbnMsIGluIGFzY2VuZGluZyBvcmRlci5cbiovICBcbmZ1bmN0aW9uIG1vdGlvbl9nZXRfcmVhbF9zb2x1dGlvbnMgKHZlY3RvciwgcDEpIHtcbiAgICBjb25zdCBbcDAsdjAsYTAsdDBdID0gdmVjdG9yO1xuICAgIC8vIENvbnN0YW50IFBvc2l0aW9uXG4gICAgaWYgKGEwID09PSAwLjAgJiYgdjAgPT09IDAuMCkge1xuICAgICAgICBpZiAocDAgIT0gcDEpIHJldHVybiBbXTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBhbnkgdCBpcyBhIHNvbHV0aW9uXG4gICAgICAgICAgICAvLyBOT1RFOiBoYXMgcmVhbCBzb2x1dGlvbnMgaXMgdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ29uc3RhbnQgbm9uLXplcm8gVmVsb2NpdHlcbiAgICBpZiAoYTAgPT09IDAuMCkgcmV0dXJuIFt0MCArIChwMS1wMCkvdjBdO1xuICAgIC8vIENvbnN0YW50IEFjY2VsZXJhdGlvblxuICAgIGlmIChtb3Rpb25faGFzX3JlYWxfc29sdXRpb25zKHZlY3RvciwgcDEpID09PSBmYWxzZSkgcmV0dXJuIFtdO1xuICAgIC8vIEV4YWN0bHkgb24gc29sdXRpb25cbiAgICB2YXIgZGlzY3JpbWluYW50ID0gTWF0aC5wb3codjAsMikgLSAyKmEwKihwMC1wMSk7XG4gICAgaWYgKGRpc2NyaW1pbmFudCA9PT0gMC4wKSB7XG4gICAgICAgIHJldHVybiBbdDAtdjAvYTBdO1xuICAgIH1cbiAgICB2YXIgc3FydCA9IE1hdGguc3FydChNYXRoLnBvdyh2MCwyKSAtIDIqYTAqKHAwLXAxKSk7XG4gICAgdmFyIGQxID0gdDAgKyAoLXYwICsgc3FydCkvYTA7XG4gICAgdmFyIGQyID0gdDAgKyAoLXYwIC0gc3FydCkvYTA7XG4gICAgcmV0dXJuIFtNYXRoLm1pbihkMSxkMiksTWF0aC5tYXgoZDEsZDIpXTtcbn07XG5cbi8qXG4gICAgY2FsY3VsYXRlIHRpbWUgcmFuZ2UgZm9yIGdpdmVuIHBvc2l0aW9uIHJhbmdlXG5cbiAgICBtb3Rpb24gdHJhbnNpdGlvbiBmcm9tIHRpbWUgdG8gcG9zaXRpb24gaXMgZ2l2ZW4gYnlcbiAgICBwKHQpID0gcDAgKyB2KnQgKyAwLjUqYSp0KnRcbiAgICBmaW5kIHNvbHV0aW9ucyBmb3IgdCBzbyB0aGF0IFxuICAgIHAodCkgPSBwb3NcblxuICAgIGRvIHRoaXMgZm9yIGJvdGggdmFsdWVzIGluIHJhbmdlIFtsb3csaGlnaF1cbiAgICBhY2N1bXVsYXRlIGFsbCBjYW5kaWRhdGUgc29sdXRpb25zIHQgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgYXZvaWQgZHVwbGljYXRlc1xuICAgIHRoaXMgY2FuIGFjY3VtdWxhdGUgMCwxLDIsMyw0IHNvbHV0aW9uXG4gICAgaWYgMCBzb2x1dGlvbnMgLSB1bmRlZmluZWQgKG1vdGlvbiBkb2VzIG5vdCBpbnRlcnNlY3Qgd2l0aCByYW5nZSBldmVyKSBcbiAgICBpZiAxIHNvbHV0aW9ucyAtIHVkZWZpbmVkIChtb3Rpb24gb25seSBpbnRlcnNlY3RzIHdpdGggcmFuZ2UgdGFuZ2VudGlhbGx5IGF0IG9uZSB0KVxuICAgIGlmIDIgc29sdXRpb25zIC0gWzAsMV0gKG1vdGlvbiBpbnRlcnNlY3RzIHdpdGggcmFuZ2UgYXQgdHdvIHRpbWVzKVxuICAgIGlmIDMgc29sdXRpb25zIC0gWzAsMl0gKG1vdGlvbiBpbnRlcnNlY3RzIHdpdGggcmFuZ2UgYXQgdGhyZWUgdGltZXMpXG4gICAgaWYgNCBzb2x1dGlvbnMgLSBbMCwxXSBhbmQgWzIsM11cblxuICAgIHJldHVybnMgYSBsaXN0IG9mIHJhbmdlIGNhbmRpZGF0ZXMgKGF0IG1vc3QgdHdvIGJ1dCBvbmx5IHdpdGggYWNjZWxlcmF0aW9uKVxuKi9cbmZ1bmN0aW9uIG1vdGlvbl9jYWxjdWxhdGVfdGltZV9yYW5nZXModmVjdG9yLCBwb3NfcmFuZ2UpIHtcbiAgICBjb25zdCBbcDAsdjAsYTAsdDBdID0gdmVjdG9yO1xuICAgIGxldCBbbG93LCBoaWdoXSA9IHBvc19yYW5nZTtcbiAgICBpZiAobG93ID09IG51bGwpIGxvdyA9IC1JbmZpbml0eTtcbiAgICBpZiAoaGlnaCA9PSBudWxsKSBoaWdoID0gSW5maW5pdHk7XG5cbiAgICAvLyBbPC0sIC0+XVxuICAgIGlmIChsb3cgPT0gLUluZmluaXR5ICYmIGhpZ2ggPT0gSW5maW5pdHkpIHtcbiAgICAgICAgLy8gbm8gcG9zIHJhbmdlID09IGVudGlyZSB2YWx1ZSBzcGFjZSA9PiB0aW1lIHJhbmdlIGVudGlyZSB0aW1lbGluZVxuICAgICAgICByZXR1cm4gW1tudWxsLCBudWxsXV07XG4gICAgfSBcblxuICAgIC8vIFtGTEFUIExJTkVdXG4gICAgLy8gcG9zIGlzIGVpdGhlciB3aXRoaW4gcG9zIHJhbmdlIGZvciBhbGwgdCBvciBuZXZlciAgXG4gICAgaWYgKHYwID09PSAwLjAgJiYgYTAgPT09IDAuMCkge1xuICAgICAgICAvLyBib3RoIGxvdyBhbmQgaGlnaCBib3VuZFxuICAgICAgICByZXR1cm4gKHAwID49IGxvdyAmJiBwMCA8PSBoaWdoKSA/IFtbbnVsbCwgbnVsbF1dIDogW107XG4gICAgfVxuXG4gICAgLy8gYWdncmVnYXRlIHNvbHV0aW9uc1xuICAgIGxldCBzb2x1dGlvbnMgPSBbXTtcbiAgICBpZiAoLUluZmluaXR5IDwgbG93KSB7XG4gICAgICAgIHNvbHV0aW9ucy5wdXNoKC4uLm1vdGlvbl9nZXRfcmVhbF9zb2x1dGlvbnModmVjdG9yLCBsb3cpKTtcbiAgICB9IFxuICAgIGlmIChoaWdoIDwgSW5maW5pdHkpIHtcbiAgICAgICAgc29sdXRpb25zLnB1c2goLi4ubW90aW9uX2dldF9yZWFsX3NvbHV0aW9ucyh2ZWN0b3IsIGhpZ2gpKTtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICBzb2x1dGlvbnMgPSBbLi4ubmV3IFNldChzb2x1dGlvbnMpXTtcbiAgICAvLyBzb3J0IGluIGFzY2VuZGluZyBvcmRlclxuICAgIHNvbHV0aW9ucy5zb3J0KChhLGIpID0+IGEtYik7XG5cbiAgICAvLyBbPC0sIEhJR0hdXG4gICAgaWYgKGxvdyA9PSAtSW5maW5pdHkpIHtcbiAgICAgICAgLy8gb25seSBoaWdoIGJvdW5kXG4gICAgICAgIGlmIChzb2x1dGlvbnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIC8vIHBhcmFib2xhIG5vdCB0b3VjaGluZyBsb3dcbiAgICAgICAgICAgIC8vIHBvcyA8IGhpZ2ggb3IgcG9zID4gaGlnaCBmb3IgYWxsIHQgLSBqdXN0IHRlc3Qgd2l0aCB0MFxuICAgICAgICAgICAgcmV0dXJuIChwMCA8PSBoaWdoKSA/IFtbbnVsbCwgbnVsbF1dIDogW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc29sdXRpb25zLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBpZiAoYTAgPiAwLjApIHtcbiAgICAgICAgICAgICAgICAvLyBwYXJhYm9sYSAtIHRvdWNoaW5nIGhpZ2ggZnJvbSBvdmVyc2lkZVxuICAgICAgICAgICAgICAgIC8vIHBvcyA+IGhpZ2ggZm9yIGFsbCB0XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhMCA8IDAuMCkge1xuICAgICAgICAgICAgICAgIC8vIHBhcmFib2xhIHRvdWNoaW5nIGxvdyBmcm9tIHVuZGVyc2lkZVxuICAgICAgICAgICAgICAgIC8vIHBvcyA8IGhpZ2ggZm9yIGFsbCB0XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtbbnVsbCwgbnVsbF1dO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhMCA9PSAwLjAgPiBzdHJhaWd0aCBsaW5lXG4gICAgICAgICAgICAgICAgaWYgKHYwID4gMC4wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBvcyA8PSBoaWdoIGZvciBhbGwgdCA8PSBzb2x1dGlvbnNbMF1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtbbnVsbCwgc29sdXRpb25zWzBdXV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zIDw9IGhpZ2ggZm9yIHQgPj0gc29sdXRpb25zWzBdXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbW3NvbHV0aW9uc1swXSwgbnVsbF1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzb2x1dGlvbnMubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgIC8vIHBhcmFib2xhXG4gICAgICAgICAgICBpZiAoYTAgPiAwLjApIHtcbiAgICAgICAgICAgICAgICAvLyBvbmUgdGltZSByYW5nZSBiZXR3ZWVuIHNvbHV0aW9uc1xuICAgICAgICAgICAgICAgIHJldHVybiBbW3NvbHV0aW9uc1swXSwgc29sdXRpb25zWzFdXV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGEwIDwgMC4wKSB7XG4gICAgICAgICAgICAgICAgLy8gb25lIHRpbWUgcmFuZ2Ugb24gZWFjaCBzaWRlIFxuICAgICAgICAgICAgICAgIHJldHVybiBbW251bGwsIHNvbHV0aW9uc1swXV0sIFtzb2x1dGlvbnNbMV0sIG51bGxdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAvLyBbTE9XLCAtPl1cbiAgICB9IGVsc2UgaWYgKGhpZ2ggPT0gSW5maW5pdHkpIHtcbiAgICAgICAgLy8gb25seSBsb3cgYm91bmRcbiAgICAgICAgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgLy8gcGFyYWJvbGEgbm90IHRvdWNoaW5nIGxvd1xuICAgICAgICAgICAgLy8gcG9zID4gbG93IG9yIHBvcyA8IGxvdyBmb3IgYWxsIHQgLSBqdXN0IHRlc3Qgd2l0aCB0MFxuICAgICAgICAgICAgcmV0dXJuIChwMCA+PSBsb3cpID8gW1tudWxsLCBudWxsXV0gOiBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzb2x1dGlvbnMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGlmIChhMCA+IDAuMCkge1xuICAgICAgICAgICAgICAgIC8vIHBhcmFib2xhIC0gdG91Y2hpbmcgbG93IGZyb20gb3ZlcnNpZGVcbiAgICAgICAgICAgICAgICAvLyBwb3MgPiBsb3cgZm9yIGFsbCB0XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtbbnVsbCwgbnVsbF1dO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhMCA8IDAuMCkge1xuICAgICAgICAgICAgICAgIC8vIHBhcmFib2xhIHRvdWNoaW5nIGxvdyBmcm9tIHVuZGVyc2lkZVxuICAgICAgICAgICAgICAgIC8vIHBvcyA8IGxvdyBmb3IgYWxsIHRcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGEwID09IDAuMCA+IHN0cmFpZ3RoIGxpbmVcbiAgICAgICAgICAgICAgICBpZiAodjAgPiAwLjApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zID49IGxvdyBmb3IgYWxsIHQgPj0gc29sdXRpb25zWzBdXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbW3NvbHV0aW9uc1swXSwgbnVsbF1dO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBvcyA+PSBsb3cgZm9yIHQgPD0gc29sdXRpb25zWzBdXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbW251bGwsIHNvbHV0aW9uc1swXV1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzb2x1dGlvbnMubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgIC8vIHBhcmFib2xhXG4gICAgICAgICAgICBpZiAoYTAgPiAwLjApIHtcbiAgICAgICAgICAgICAgICAvLyBvbmUgdGltZSByYW5nZSBvbiBlYWNoIHNpZGUgXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtbbnVsbCwgc29sdXRpb25zWzBdXSwgW3NvbHV0aW9uc1sxXSwgbnVsbF1dO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhMCA8IDAuMCkge1xuICAgICAgICAgICAgICAgIC8vIG9uZSB0aW1lIHJhbmdlIGJldHdlZW4gc29sdXRpb25zXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtbc29sdXRpb25zWzBdLCBzb2x1dGlvbnNbMV1dXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgLy8gW0xPVywgSElHSF1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBib3RoIGxvdyBhbmQgaGlnaCBib3VuZFxuICAgICAgICBpZiAoc29sdXRpb25zLmxlbmd0aCA9PSAwKSByZXR1cm4gW107XG4gICAgICAgIGlmIChzb2x1dGlvbnMubGVuZ3RoID09IDEpIHJldHVybiBbXTtcbiAgICAgICAgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gMikgcmV0dXJuIFtbc29sdXRpb25zWzBdLCBzb2x1dGlvbnNbMV1dXTtcbiAgICAgICAgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gMykgcmV0dXJuIFtbc29sdXRpb25zWzBdLCBzb2x1dGlvbnNbMl1dXTtcbiAgICAgICAgaWYgKHNvbHV0aW9ucy5sZW5ndGggPT0gNCkgcmV0dXJuIFtbc29sdXRpb25zWzBdLCBzb2x1dGlvbnNbMV1dLCBbc29sdXRpb25zWzJdLCBzb2x1dGlvbnNbM11dXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG1vdGlvbl9jaGVja19yYW5nZShvYmopIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopICYmIG9iai5sZW5ndGggIT0gMikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHJhbmdlIG11c3QgaGF2ZSB0d28gZWxlbWVudHMgJHtvYmp9YCk7XG4gICAgfVxuICAgIG9ialswXSA9PSBudWxsIHx8IGNoZWNrX251bWJlcihcImxvd1wiLCBvYmpbMF0pO1xuICAgIG9ialsxXSA9PSBudWxsIHx8IGNoZWNrX251bWJlcihcImhpZ2hcIiwgb2JqWzFdKTtcbn1cblxuZXhwb3J0IGNvbnN0IG1vdGlvbl91dGlscyA9IHtcbiAgICBjYWxjdWxhdGU6IG1vdGlvbl9jYWxjdWxhdGUsXG4gICAgaGFzX3JlYWxfc29sdXRpb25zOiBtb3Rpb25faGFzX3JlYWxfc29sdXRpb25zLFxuICAgIGdldF9yZWFsX3NvbHV0aW9uczogbW90aW9uX2dldF9yZWFsX3NvbHV0aW9ucyxcbiAgICBjYWxjdWxhdGVfdGltZV9yYW5nZXM6IG1vdGlvbl9jYWxjdWxhdGVfdGltZV9yYW5nZXMsXG4gICAgY2hlY2tfcmFuZ2U6IG1vdGlvbl9jaGVja19yYW5nZVxufVxuIiwiaW1wb3J0ICogYXMgZXZlbnRpZnkgZnJvbSBcIi4vdXRpbC9hcGlfZXZlbnRpZnkuanNcIjtcbmltcG9ydCAqIGFzIGNhbGxiYWNrIGZyb20gXCIuL3V0aWwvYXBpX2NhbGxiYWNrLmpzXCI7XG5pbXBvcnQgeyBpbnRlcnZhbCB9IGZyb20gXCIuL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyByYW5nZSwgdG9TdGF0ZSB9IGZyb20gXCIuL3V0aWwvY29tbW9uLmpzXCI7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIExBWUVSXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIExheWVyIGlzIGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIExheWVyc1xuICogXG4gKiBMYXllciBpbnRlcmZhY2UgaXMgZGVmaW5lZCBieSAoaW5kZXgsIENhY2hlQ2xhc3MsIG9wdGlvbnMpXG4gKiBcbiAqIENhY2hlQ2xhc3NcbiAqIC0tLS0tLS0tLS1cbiAqIFRoZSBDYWNoZUNsYXNzIGltcGxlbWVudHMgdGhlIHF1ZXJ5IG9wZXJhdGlvbiBmb3IgdGhlIGxheWVyLCB1c2luZ1xuICogdGhlIGluZGV4IGZvciBsb29rdXBzIG9uIGNhY2hlIG1pc3MuIExheWVyIGhhcyBhIHByaXZhdGUgY2FjaGUuIFxuICogQWRkaXRpb25hbGx5LCBpZiBsYXllciBoYXMgbXVsdGlwbGUgY29uc3VtZXJzLCB0aGV5IGNhbiBlYWNoIFxuICogY3JlYXRlIHRoZWlyIG93biBwcml2YXRlIGNhY2hlLiBcbiAqIFxuICogb3B0aW9uc1xuICogLS0tLS0tLVxuICogVGhlIHRoZSByZXN1bHQgZnJvbSB0aGUgcXVlcnkgb3BlcmF0aW9uIGNhbiBiZSBjb250cm9sbGVkIGJ5IHN1cHBseWluZ1xuICogb3B0aW9uYWwgY3VzdG9tIGZ1bmN0aW9uLCBlaXRoZXIgdmFsdWVGdW5jIG9yIGEgc3RhdGVGdW5jIFxuICoge3ZhbHVlRnVuYyxzdGF0ZUZ1bmN9XG4gKiBcbiAqIGluZGV4XG4gKiAtLS0tLVxuICogVGhlIG5lYXJieSBpbmRleCBpcyBzdXBwbGllZCBieSBMYXllciBpbXBsZW1lbnRhdGlvbnMsIGVpdGhlciBieSBcbiAqIHN1YmNsYXNzaW5nIGl0LCBvciBieSBhc3NpZ25pbmcgdGhlIGluZGV4LiBcbiAqL1xuXG5leHBvcnQgY2xhc3MgTGF5ZXIge1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz17fSkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIENhY2hlQ2xhc3M9TGF5ZXJDYWNoZSwgXG4gICAgICAgICAgICB2YWx1ZUZ1bmM9dW5kZWZpbmVkLFxuICAgICAgICAgICAgc3RhdGVGdW5jPXVuZGVmaW5lZCxcbiAgICAgICAgfSA9IG9wdGlvbnM7IFxuXG4gICAgICAgIC8vIGNhbGxiYWNrc1xuICAgICAgICBjYWxsYmFjay5hZGRTdGF0ZSh0aGlzKTtcbiAgICAgICAgLy8gZGVmaW5lIGNoYW5nZSBldmVudFxuICAgICAgICBldmVudGlmeS5hZGRTdGF0ZSh0aGlzKTtcbiAgICAgICAgdGhpcy5ldmVudGlmeURlZmluZShcImNoYW5nZVwiLCB7aW5pdDpmYWxzZX0pO1xuXG4gICAgICAgIC8vIGluZGV4XG4gICAgICAgIHRoaXMuaW5kZXg7XG5cbiAgICAgICAgLy8gY2FjaGVcbiAgICAgICAgdGhpcy5fQ2FjaGVDbGFzcyA9IENhY2hlQ2xhc3M7XG4gICAgICAgIHRoaXMuX3ByaXZhdGVfY2FjaGU7XG4gICAgICAgIHRoaXMuX2NvbnN1bWVyX2NhY2hlcyA9IFtdO1xuXG4gICAgICAgIC8vIHByb3BlcnRpZXNcbiAgICAgICAgdGhpcy5fdmFsdWVGdW5jID0gdmFsdWVGdW5jO1xuICAgICAgICB0aGlzLl9zdGF0ZUZ1bmMgPSBzdGF0ZUZ1bmM7XG4gICAgfVxuXG4gICAgLy8gcmVzdHJpY3Rpb25zIChkZWZhdWx0cylcbiAgICBnZXQgbnVtZXJpYyAoKSB7cmV0dXJuIGZhbHNlO31cbiAgICBnZXQgbXV0YWJsZSAoKSB7cmV0dXJuIGZhbHNlO31cbiAgICBnZXQgaXRlbXNPbmx5ICgpIHtyZXR1cm4gZmFsc2U7fVxuXG4gICAgLy8gcXVlcnkgb3B0aW9uc1xuICAgIGdldCB2YWx1ZUZ1bmMgKCkge3JldHVybiB0aGlzLl92YWx1ZUZ1bmM7fVxuICAgIGdldCBzdGF0ZUZ1bmMgKCkge3JldHVybiB0aGlzLl9zdGF0ZUZ1bmM7fVxuXG4gICAgLy8gcHJpdmF0ZSBjYWNoZVxuICAgIGdldCBjYWNoZSAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9wcml2YXRlX2NhY2hlID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fcHJpdmF0ZV9jYWNoZSA9IG5ldyB0aGlzLl9DYWNoZUNsYXNzKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wcml2YXRlX2NhY2hlO1xuICAgIH1cblxuICAgIC8vIGludm9rZWQgYnkgbGF5ZXIgY29uc3VtZXJcbiAgICBxdWVyeShvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGUucXVlcnkob2Zmc2V0KTtcbiAgICB9XG5cbiAgICAvLyBpbnZva2VkIGJ5IGxheWVyIGNvbnN1bWVyXG4gICAgY3JlYXRlQ2FjaGUgKCkge1xuICAgICAgICBjb25zdCBjYWNoZSA9IG5ldyB0aGlzLl9DYWNoZUNsYXNzKHRoaXMpO1xuICAgICAgICB0aGlzLl9jb25zdW1lcl9jYWNoZXMucHVzaChjYWNoZSk7XG4gICAgICAgIHJldHVybiBjYWNoZTtcbiAgICB9XG4gICAgcmVsZWFzZUNhY2hlIChjYWNoZSkge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLl9jb25zdW1lcl9jYWNoZXMuaW5kZXhPZihjYWNoZSk7XG4gICAgICAgIGlmIChpZHggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5fY29uc3VtZXJfY2FjaGVzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyQ2FjaGVzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNhY2hlIG9mIHRoaXMuX2NvbnN1bWVyX2NhY2hlcyl7XG4gICAgICAgICAgICBjYWNoZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9wcml2YXRlX2NhY2hlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fcHJpdmF0ZV9jYWNoZS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaW52b2tlZCBieSBzdWJjbGFzcyB3aGVuZXZlciBsYXllciBoYXMgY2hhbmdlZFxuICAgIG9uY2hhbmdlKCkge1xuICAgICAgICB0aGlzLmNsZWFyQ2FjaGVzKCk7XG4gICAgICAgIHRoaXMubm90aWZ5X2NhbGxiYWNrcygpO1xuICAgICAgICB0aGlzLmV2ZW50aWZ5VHJpZ2dlcihcImNoYW5nZVwiKTsgICAgXG4gICAgfVxuXG4gICAgLy8gaXRlcmF0b3IgZm9yIHJlZ2lvbnMgb2YgdGhlIGxheWVyIGluZGV4XG4gICAgcmVnaW9ucyAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5yZWdpb25zKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICAgIFNhbXBsZSBsYXllciB2YWx1ZXMgYnkgdGltZWxpbmUgb2Zmc2V0IGluY3JlbWVudHNcbiAgICAgICAgcmV0dXJuIGxpc3Qgb2YgdHVwbGVzIFt2YWx1ZSwgb2Zmc2V0XVxuICAgICAgICBvcHRpb25zXG4gICAgICAgIC0gc3RhcnRcbiAgICAgICAgLSBzdG9wXG4gICAgICAgIC0gc3RlcFxuXG4gICAgICAgIFRPRE8gLSB0aGlzIHNob3VsZCBiZSBhbiBpdGVyYXRvclxuICAgICovXG4gICAgc2FtcGxlKG9wdGlvbnM9e30pIHtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXguZW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGxldCB7c3RhcnQsIHN0b3AsIHN0ZXA9MX0gPSBvcHRpb25zO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN0YXJ0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgaW5kZXguZmlyc3QgaXMgYSBudW1iZXJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0ID0gdGhpcy5pbmRleC5maXJzdCgpO1xuICAgICAgICAgICAgaWYgKGZpcnN0WzBdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IGZpcnN0WzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmRlZmluZWQgc3RhcnRcIik7XG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG4gICAgICAgIGlmIChzdG9wID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgaW5kZXgubGFzdCBpcyBhIG51bWJlclxuICAgICAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMuaW5kZXgubGFzdCgpO1xuICAgICAgICAgICAgaWYgKGxhc3RbMF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHN0b3AgPSBsYXN0WzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmRlZmluZWQgc3RvcFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnQgPiBzdG9wKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IgKFwic3RvcCBtdXN0IGJlIGxhcmdlciB0aGFuIHN0YXJ0XCIsIHN0YXJ0LCBzdG9wKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5jcmVhdGVDYWNoZSgpO1xuICAgICAgICBjb25zdCBzYW1wbGVzID0gcmFuZ2Uoc3RhcnQsIHN0b3AsIHN0ZXAsIHtpbmNsdWRlX2VuZDp0cnVlfSlcbiAgICAgICAgICAgIC5tYXAoKG9mZnNldCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBbY2FjaGUucXVlcnkob2Zmc2V0KS52YWx1ZSwgb2Zmc2V0XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlbGVhc2VDYWNoZShjYWNoZSk7XG4gICAgICAgIHJldHVybiBzYW1wbGVzO1xuICAgIH1cbn1cbmNhbGxiYWNrLmFkZE1ldGhvZHMoTGF5ZXIucHJvdG90eXBlKTtcbmV2ZW50aWZ5LmFkZE1ldGhvZHMoTGF5ZXIucHJvdG90eXBlKTtcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBMQVlFUiBDQUNIRVxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBMYXllciBDYWNoZSBpcyB0aGUgcmVndWxhciBjYWNoZSB0eXBlLCBpbnRlbmRlZCBmb3JcbiAqIF9kZXJpdmVkXyBMYXllcnMgLSB0aGF0IGlzIGEgbGF5ZXJzIHdoaWNoIGluZGV4IHJlZmVyZW5jZXNcbiAqIG90aGVyIHNvdXJjZSBsYXllcnMuXG4gKiBcbiAqIEEgcXVlcnkgaXMgcmVzb2x2ZWQgYnkgaWRlbnRpZnlpbmcgdGhlIHJlbGV2YW50IHJlZ2lvbiBpblxuICogdGhlIG5lYXJieSBpbmRleCAoaW5kZXgubmVhcmJ5KG9mZnNldCkpLCBhbmQgdGhlbiBxdWVyeWluZyBcbiAqIHRoZSBzdGF0ZSBvZiBhbGwgdGhlIG9iamVjdHMgZm91bmQgaW4gdGhlIHJlZ2lvbiAobmVhcmJ5LmNlbnRlcikuXG4gKiAgXG4gKiBPcHRpb25zIHt2YWx1ZUZ1bmMgb3Igc3RhdGVGdW5jfSBhcmUgdXNlZCB0byBjb21wdXRlIGEgXG4gKiBzaW5nbGUgcXVlcnkgcmVzdWx0IGZyb20gdGhlIGxpc3Qgb2Ygc3RhdGVzLlxuICogXG4gKiBUaGUgcmVzdWx0IHN0YXRlIGlzIG9ubHkgY2FjaGVkIGlmIGl0IGlzIHN0YXRpYy5cbiAqIENhY2hlIG1pc3MgaXMgdHJpZ2dlcmVkIGlmIG5vIHN0YXRlIGhhcyBiZWVuIGNhY2hlZCwgb3IgaWYgXG4gKiBvZmZzZXQgaXMgb3V0c2lkZSB0aGUgcmVnaW9uIG9mIHRoZSBjYWNoZWQgc3RhdGUuXG4gKiBcbiAqL1xuXG5leHBvcnQgY2xhc3MgTGF5ZXJDYWNoZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihsYXllcikge1xuICAgICAgICAvLyBjYWNoZSBiZWxvbmdzIHRvIGxheWVyXG4gICAgICAgIHRoaXMuX2xheWVyID0gbGF5ZXI7XG4gICAgICAgIC8vIGNhY2hlZCBuZWFyYnkgc3RhdGVcbiAgICAgICAgdGhpcy5fbmVhcmJ5O1xuICAgICAgICAvLyBjYWNoZWQgc3RhdGVcbiAgICAgICAgdGhpcy5fc3RhdGU7XG4gICAgICAgIC8vIHF1ZXJ5IG9wdGlvbnNcbiAgICAgICAgdGhpcy5fcXVlcnlfb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHZhbHVlRnVuYzogdGhpcy5fbGF5ZXIudmFsdWVGdW5jLFxuICAgICAgICAgICAgc3RhdGVGdW5jOiB0aGlzLl9sYXllci5zdGF0ZUZ1bmMsXG4gICAgICAgICAgICBudW1iZXJPbmx5OiB0aGlzLl9sYXllci5pc051bWJlck9ubHksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0IGxheWVyKCkge3JldHVybiB0aGlzLl9sYXllcn07XG5cbiAgICAvKipcbiAgICAgKiBxdWVyeSBjYWNoZVxuICAgICAqL1xuICAgIHF1ZXJ5KG9mZnNldCkge1xuICAgICAgICBjb25zdCBuZWVkX2luZGV4X2xvb2t1cCA9IChcbiAgICAgICAgICAgIHRoaXMuX25lYXJieSA9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICFpbnRlcnZhbC5jb3ZlcnNfZW5kcG9pbnQodGhpcy5fbmVhcmJ5Lml0diwgb2Zmc2V0KVxuICAgICAgICApO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhbmVlZF9pbmRleF9sb29rdXAgJiYgXG4gICAgICAgICAgICB0aGlzLl9zdGF0ZSAhPSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICF0aGlzLl9zdGF0ZS5keW5hbWljXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gY2FjaGUgaGl0XG4gICAgICAgICAgICByZXR1cm4gey4uLnRoaXMuX3N0YXRlLCBvZmZzZXR9O1xuICAgICAgICB9XG4gICAgICAgIC8vIGNhY2hlIG1pc3NcbiAgICAgICAgaWYgKG5lZWRfaW5kZXhfbG9va3VwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZWFyYnkgPSB0aGlzLl9sYXllci5pbmRleC5uZWFyYnkob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwZXJmb3JtIHF1ZXJpZXNcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gdGhpcy5fbmVhcmJ5LmNlbnRlci5tYXAoKGNhY2hlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGUucXVlcnkob2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBzaW5nbGUgcmVzdWx0IHN0YXRlXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdG9TdGF0ZSh0aGlzLl9uZWFyYnkuY2VudGVyLCBzdGF0ZXMsIG9mZnNldCwgdGhpcy5fcXVlcnlfb3B0aW9ucyk7XG4gICAgICAgIC8vIGNhY2hlIHN0YXRlIG9ubHkgaWYgbm90IGR5bmFtaWNcbiAgICAgICAgdGhpcy5fc3RhdGUgPSAoc3RhdGUuZHluYW1pYykgPyB1bmRlZmluZWQgOiBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIHN0YXRlICAgIFxuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9uZWFyYnkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuIiwiaW1wb3J0IHsgbG9jYWxfY2xvY2sgfSBmcm9tIFwiLi9jb21tb24uanNcIjtcblxuLyoqXG4gKiBwb2xsaW5nIGEgY2FsbGJhY2sgZnVuY3Rpb24gcGVyaW9kaWNhbGx5IHdpdGggXG4gKiBhIGZpeGVkIGRlbGF5IChtcykuXG4gKiBJZiBkZWxheSBpcyAwLCB1c2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLFxuICogZWxzZSB1c2Ugc2V0VGltZW91dC5cbiAqIERlbGF5IGNhbiBiZSBzZXQgZHluYW1pY2FsbHkuIFBhdXNlIGFuZCByZXN1bWVcbiAqIGlzIG5lZWRlZCBmb3IgbmV3IGRlbGF5IHRvIHRha2UgZWZmZWN0LlxuICovXG5cbmNsYXNzIFBvbGxlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGU7XG4gICAgICAgIHRoaXMuX2RlbGF5O1xuICAgIH1cbiAgICBcbiAgICBzZXQgZGVsYXkgKGRlbGF5X21zKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGVsYXlfbXMgIT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBkZWxheSBtdXN0IGJlIGEgbnVtYmVyICR7ZGVsYXlfbXN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2RlbGF5ICE9IGRlbGF5X21zKSB7ICAgXG4gICAgICAgICAgICB0aGlzLl9kZWxheSA9IGRlbGF5X21zO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkZWxheSAoKSB7cmV0dXJuIHRoaXMuX2RlbGF5O31cblxuICAgIGlzX3BvbGxpbmcgKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlICE9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhbmRsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZS5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBvbGwoKSB7XG4gICAgICAgIC8vIHBvbGwgY2FsbGJhY2tcbiAgICAgICAgdGhpcy5fY2FsbGJhY2soKTtcbiAgICAgICAgLy8gc2NoZWR1bGUgbmV4dCBwb2xsXG4gICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgdGhpcy5yZXN1bWUoKTtcbiAgICB9XG5cbiAgICByZXN1bWUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9oYW5kbGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsYXkgPT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGZyYW1lcmF0ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGFpZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnBvbGwuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlID0ge2NhbmNlbDogKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUoYWlkKX07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHRpbWVvdXRcbiAgICAgICAgICAgICAgICBjb25zdCB0aWQgPSBzZXRUaW1lb3V0KHRoaXMucG9sbC5iaW5kKHRoaXMpLCB0aGlzLl9kZWxheSk7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlID0ge2NhbmNlbDogKCkgPT4gY2xlYXJUaW1lb3V0KHRpZCl9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEN1cnNvciBNb25pdG9yXG4gKi9cblxuY2xhc3MgQ3Vyc29yTW9uaXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAgICBzZXQgb2YgYmluZGluZ3NcbiAgICAgICAgICAgIHBvbGwgY3Vyc29yICh3aGVuIGR5bmFtaWMpIHBlcmlvZGljYWxseSB3aXRoIGdpdmVuIChtaW5pbXVtKSBkZWxheSwgYW5kIGludm9rZSBjYWxsYmFjayB3aXRoIGN1cnNvciBzdGF0ZSBcbiAgICAgICAgICAgIGJpbmRpbmcgOiB7Y3Vyc29yLCBjYWxsYmFjaywgZGVsYXlfbXN9XG4gICAgICAgICAgICAtIGN1cnNvcjpcbiAgICAgICAgICAgIC0gY2FsbGJhY2s6IGZ1bmN0aW9uKHN0YXRlKVxuICAgICAgICAgICAgLSBkZWxheTogKG1zKSBiZXR3ZWVuIHNhbXBsZXMgKHdoZW4gdmFyaWFibGUgaXMgZHluYW1pYylcbiAgICAgICAgICAgIHRoZXJlIGNhbiBiZSBtdWx0aXBsZSBiaW5kaW5ncyBmb3IgdGhlIHNhbWUgY3Vyc29yXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuX2JpbmRpbmdfc2V0ID0gbmV3IFNldCgpO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAgICBjdXJzb3JzXG4gICAgICAgICAgICBtYXA6IGN1cnNvciAtPiB7c3ViLCBwb2xsaW5nLCBiaW5kaW5nczpbXX1cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fY3Vyc29yX21hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBQb2xsZXJcbiAgICAgICAgdGhpcy5fcG9sbGVyID0gbmV3IFBvbGxlcih0aGlzLm9ucG9sbC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBiaW5kKGN1cnNvciwgY2FsbGJhY2ssIGRlbGF5KSB7XG4gICAgICAgIC8vIGNoZWNrIGRlbGF5XG4gICAgICAgIGlmIChkZWxheSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlbGF5ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVsYXkgIT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBkZWxheSBtdXN0IGJlIGEgbnVtYmVyICR7ZGVsYXl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVnaXN0ZXIgYmluZGluZ1xuICAgICAgICBsZXQgYmluZGluZyA9IHtjdXJzb3IsIGNhbGxiYWNrLCBkZWxheX07XG4gICAgICAgIHRoaXMuX2JpbmRpbmdfc2V0LmFkZChiaW5kaW5nKTtcbiAgICAgICAgLy8gcmVnaXN0ZXIgY3Vyc29yXG4gICAgICAgIGlmICghdGhpcy5fY3Vyc29yX21hcC5oYXMoY3Vyc29yKSkgeyBcbiAgICAgICAgICAgIGxldCBzdWIgPSBjdXJzb3Iub24oXCJjaGFuZ2VcIiwgdGhpcy5vbmN1cnNvcmNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnNvcl9tYXAuc2V0KGN1cnNvciwge1xuICAgICAgICAgICAgICAgIHN1YiwgcG9sbGluZzogZmFsc2UsIGJpbmRpbmdzOiBbYmluZGluZ11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY3Vyc29yX21hcC5nZXQoY3Vyc29yKS5iaW5kaW5ncy5wdXNoKGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiaW5kaW5nO1xuICAgIH1cblxuICAgIHJlbGVhc2UgKGJpbmRpbmcpIHtcbiAgICAgICAgLy8gdW5yZWdpc3RlciBiaW5kaW5nXG4gICAgICAgIGNvbnN0IHJlbW92ZWQgPSB0aGlzLl9iaW5kaW5nX3NldC5kZWxldGUoYmluZGluZyk7XG4gICAgICAgIGlmICghcmVtb3ZlZCkgcmV0dXJuO1xuICAgICAgICAvLyBjbGVhbnVwXG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGJpbmRpbmcuY3Vyc29yO1xuICAgICAgICBjb25zdCB7c3ViLCBiaW5kaW5nc30gPSB0aGlzLl9jdXJzb3JfbWFwLmdldChjdXJzb3IpO1xuICAgICAgICAvLyByZW1vdmUgYmluZGluZ1xuICAgICAgICBjb25zdCBpZHggPSBiaW5kaW5ncy5pbmRleE9mKGJpbmRpbmcpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGJpbmRpbmdzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiaW5kaW5ncy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgLy8gbm8gbW9yZSBiaW5kaW5nc1xuICAgICAgICAgICAgY3Vyc29yLm9mZihzdWIpO1xuICAgICAgICAgICAgdGhpcy5fY3Vyc29yX21hcC5kZWxldGUoY3Vyc29yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGEgY3Vyc29yIGhhcyBjaGFuZ2VkXG4gICAgICogZm9yd2FyZCBjaGFuZ2UgZXZlbnQgdG8gYWxsIGNhbGxiYWNrcyBmb3IgdGhpcyBjdXJzb3IuXG4gICAgICogYW5kIHJlZXZhbHVhdGUgcG9sbGluZyBzdGF0dXMsIHBhdXNpbmcgb3IgcmVzdW1pbmdcbiAgICAgKiBwb2xsaW5nIGlmIG5lZWRlZC5cbiAgICAgKi9cbiAgICBvbmN1cnNvcmNoYW5nZShlQXJnLCBlSW5mbykge1xuICAgICAgICBjb25zdCBjdXJzb3IgPSBlSW5mby5zcmM7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gZUFyZztcbiAgICAgICAgLy8gcmVldmFsdWF0ZSBwb2xsaW5nIHN0YXR1c1xuICAgICAgICB0aGlzLl9jdXJzb3JfbWFwLmdldChjdXJzb3IpLnBvbGxpbmcgPSBzdGF0ZS5keW5hbWljO1xuICAgICAgICAvLyBmaW5kIGN1cnNvcnMgd2hpY2ggbmVlZCBwb2xsaW5nXG4gICAgICAgIGNvbnN0IHBvbGxpbmdfY3Vyc29ycyA9IFsuLi50aGlzLl9jdXJzb3JfbWFwLnZhbHVlcygpXVxuICAgICAgICAgICAgLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5wb2xsaW5nKTtcbiAgICAgICAgdGhpcy5yZWV2YWx1YXRlX3BvbGxpbmcocG9sbGluZ19jdXJzb3JzKTtcbiAgICAgICAgLy8gZm9yd2FyZCBjaGFuZ2UgZXZlbnQgdG8gYWxsIGZvciB0aGlzIGN1cnNvciBjYWxsYmFja3NcbiAgICAgICAgY29uc3Qge2JpbmRpbmdzfSA9IHRoaXMuX2N1cnNvcl9tYXAuZ2V0KGN1cnNvcik7XG4gICAgICAgIGZvciAoY29uc3QgYmluZGluZyBvZiBiaW5kaW5ncykge1xuICAgICAgICAgICAgYmluZGluZy5jYWxsYmFjayhzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbnBvbGwoKSB7XG4gICAgICAgIGNvbnN0IHRzID0gbG9jYWxfY2xvY2subm93KCk7XG4gICAgICAgIC8vIHBvbGwgYWxsIGN1cnNvcnMgd2l0aCBuZWVkIG9mIHBvbGxpbmdcbiAgICAgICAgZm9yIChjb25zdCBbY3Vyc29yLCBlbnRyeV0gb2YgdGhpcy5fY3Vyc29yX21hcCkge1xuICAgICAgICAgICAgaWYgKGVudHJ5LnBvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGN1cnNvci5xdWVyeSh0cyk7XG4gICAgICAgICAgICAgICAgLy8gZm9yd2FyZCBwb2xsZWQgc3RhdGUgdG8gYWxsIGNhbGxiYWNrcyBmb3IgdGhpcyBjdXJzb3JcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJpbmRpbmcgb2YgZW50cnkuYmluZGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZy5jYWxsYmFjayhzdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVldmFsdWF0ZV9wb2xsaW5nKHBvbGxpbmdfY3Vyc29ycykge1xuICAgICAgICBpZiAocG9sbGluZ19jdXJzb3JzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9wb2xsZXIucGF1c2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZpbmQgbWluaW11bSBkZWxheVxuICAgICAgICAgICAgY29uc3QgZGVsYXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHBvbGxpbmdfY3Vyc29ycykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmluZGluZyBvZiBlbnRyeS5iaW5kaW5ncykge1xuICAgICAgICAgICAgICAgICAgICBkZWxheXMucHVzaChiaW5kaW5nLmRlbGF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbWluX2RlbGF5ID0gTWF0aC5taW4oLi4uZGVsYXlzKTtcbiAgICAgICAgICAgIHRoaXMuX3BvbGxlci5kZWxheSA9IG1pbl9kZWxheTtcbiAgICAgICAgICAgIHRoaXMuX3BvbGxlci5wYXVzZSgpO1xuICAgICAgICAgICAgdGhpcy5fcG9sbGVyLnJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBCSU5EIFJFTEVBU0VcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLy8gbW9uaXRvciBzaW5nbGV0b25cbmNvbnN0IG1vbml0b3IgPSBuZXcgQ3Vyc29yTW9uaXRvcigpO1xuXG5leHBvcnQgZnVuY3Rpb24gYmluZChjdXJzb3IsIGNhbGxiYWNrLCBkZWxheSkge1xuICAgIHJldHVybiBtb25pdG9yLmJpbmQoY3Vyc29yLCBjYWxsYmFjaywgZGVsYXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbGVhc2UoYmluZGluZykge1xuICAgIHJldHVybiBtb25pdG9yLnJlbGVhc2UoYmluZGluZyk7XG59XG5cbiIsImltcG9ydCAqIGFzIGV2ZW50aWZ5IGZyb20gXCIuL3V0aWwvYXBpX2V2ZW50aWZ5LmpzXCI7XG5pbXBvcnQgKiBhcyBjYWxsYmFjayBmcm9tIFwiLi91dGlsL2FwaV9jYWxsYmFjay5qc1wiO1xuaW1wb3J0IHsgYmluZCwgcmVsZWFzZSB9IGZyb20gXCIuL3V0aWwvY3Vyc29yX21vbml0b3IuanNcIjtcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBDVVJTT1JcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovICBcblxuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBDdXJzb3IgaW50ZXJmYWNlXG4gKi9cblxuZXhwb3J0IGNsYXNzIEN1cnNvciB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIGNhbGxiYWNrc1xuICAgICAgICBjYWxsYmFjay5hZGRTdGF0ZSh0aGlzKTtcbiAgICAgICAgLy8gZGVmaW5lIGNoYW5nZSBldmVudFxuICAgICAgICBldmVudGlmeS5hZGRTdGF0ZSh0aGlzKTtcbiAgICAgICAgdGhpcy5ldmVudGlmeURlZmluZShcImNoYW5nZVwiLCB7aW5pdDp0cnVlfSk7XG4gICAgfVxuXG4gICAgLy8gcmVzdHJpY3Rpb24gZGVmYXVsdHNcbiAgICBnZXQgbXV0YWJsZSAoKSB7cmV0dXJuIGZhbHNlO31cbiAgICBnZXQgbnVtZXJpYyAoKSB7cmV0dXJuIGZhbHNlO307XG4gICAgZ2V0IGl0ZW1zT25seSAoKSB7cmV0dXJuIGZhbHNlO31cbiAgICBnZXQgZml4ZWRSYXRlICgpIHtyZXR1cm4gZmFsc2V9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqIFFVRVJZIEFQSVxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgcXVlcnkobG9jYWxfdHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicXVlcnkoKSBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgfVxuICAgIGdldCB2YWx1ZSAoKSB7cmV0dXJuIHRoaXMucXVlcnkoKS52YWx1ZX07XG4gICAgZ2V0ICgpIHtyZXR1cm4gdGhpcy5xdWVyeSgpLnZhbHVlO31cblxuICAgIC8qKlxuICAgICAqIEV2ZW50aWZ5OiBpbW1lZGlhdGUgZXZlbnRzXG4gICAgICovXG4gICAgZXZlbnRpZnlJbml0RXZlbnRBcmdzKG5hbWUpIHtcbiAgICAgICAgaWYgKG5hbWUgPT0gXCJjaGFuZ2VcIikge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnF1ZXJ5KCldO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogQklORCBSRUxFQVNFIChjb252ZW5pZW5jZSlcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8qKlxuICAgICAqIGFsdGVybmF0aXZlIHRvIGxpc3RlbmluZyB0byB0aGUgY2hhbmdlIGV2ZW50XG4gICAgICogYmluZCBzdWJzY3JpYmVzIHRvIHRoZSBjaGFuZ2UgZXZlbnQsIGJ1dCBhbHNvIGF1dG9tYXRpY2FsbHlcbiAgICAgKiB0dXJucyBsaXN0ZW5pbmcgb24gYW5kIG9mZiB3aGVuIGFzIHRoZSBjdXJzb3Igc3dpdGNoZXNcbiAgICAgKiBiZXR3ZWVuIGR5bmFtaWMgYW5kIG5vbi1keW5hbWljIGJlaGF2aW9yLlxuICAgICAqL1xuXG4gICAgYmluZChjYWxsYmFjaywgZGVsYXksIG9wdGlvbnM9e30pIHtcbiAgICAgICAgcmV0dXJuIGJpbmQodGhpcywgY2FsbGJhY2ssIGRlbGF5LCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmVsZWFzZShoYW5kbGUpIHtcbiAgICAgICAgcmV0dXJuIHJlbGVhc2UoaGFuZGxlKTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqIENIQU5HRSBOT1RJRklDQVRJT05cbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8qKlxuICAgICAqIGludm9rZWQgYnkgY3Vyc29yIGltcGxlbWVudGF0aW9uIHRvIHNpZ25hbCBjaGFuZ2UgaW4gY3Vyc29yXG4gICAgICogYmVoYXZpb3IuXG4gICAgICovXG4gICAgb25jaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMubm90aWZ5X2NhbGxiYWNrcygpO1xuICAgICAgICB0aGlzLmV2ZW50aWZ5VHJpZ2dlcihcImNoYW5nZVwiLCB0aGlzLnF1ZXJ5KCkpO1xuICAgICAgICB0aGlzLmRldGVjdF9mdXR1cmVfZXZlbnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBvdmVycmlkZSBieSBjdXJzb3IgaW1wbGVtZW50YXRpb24gaW4gb3JkZXIgdG8gZGV0ZWN0XG4gICAgICogYW5kIHRyaWdnZXIgZnV0dXJlIGNoYW5nZSBldmVudHMgLSB3aGljaCBhcmUgbm90IHRyaWdnZXJlZFxuICAgICAqIGJ5IHN0YXRlIGNoYW5nZXMgLSBidXQgY2F1c2VkIGJ5IHRpbWUgcHJvZ3Jlc3Npb25cbiAgICAgKiBvciBwbGF5YmFjay4gVGhpcyBmdW5jdGlvbiBpcyBpbnZva2VkIGFmdGVyIGVhY2ggXG4gICAgICogb25jaGFuZ2UoKSBldmVudC5cbiAgICAgKi9cbiAgICBkZXRlY3RfZnV0dXJlX2V2ZW50KCkge31cbn1cbmNhbGxiYWNrLmFkZE1ldGhvZHMoQ3Vyc29yLnByb3RvdHlwZSk7XG5ldmVudGlmeS5hZGRNZXRob2RzKEN1cnNvci5wcm90b3R5cGUpO1xuIiwiaW1wb3J0IHtsb2NhbF9jbG9jaywgY2hlY2tfbnVtYmVyfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuXG5cbi8qKlxuICogQ0xPQ0sgUFJPVklERVJcbiAqIFxuICogQSBDbG9ja1Byb3ZpZGVyIGNhbiBiZSBjcmVhdGVkIGluIHR3byB3YXlzXG4gKiAtIGVpdGhlciBieSBzdXBwbHlpbmcgYSBjbG9jayBvYmplY3RcbiAqIC0gb3IgYnkgc3VwcGx5aW5nIGEgdmVjdG9yIFxuICogXG4gKiBBICpjbG9jayogaXMgYW4gb2JqZWN0IHRoYXQgaGFzIGEgbm93KCkgbWV0aG9kIHdoaWNoIHJldHVybnMgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEEgY2xvY2sgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGEgdGltZXN0YW1wIGluIHNlY29uZHMsIG1vbml0b25pY2FsbHkgaW5jcmVhc2luZyBcbiAqIGF0IHJhdGUgMS4wIHNlYy9zZWMuIFxuICogXG4gKiBBICp2ZWN0b3IqIGluaXRpYWxpemVzIGEgZGV0ZXJtaXN0aWMgY2xvY2sgYmFzZWQgb24gdGhlIG9mZmljaWFsICpsb2NhbF9jbG9jayouIFxuICogLSB0cyAoc2VjKSAtIHRpbWVzdGFtcCBmcm9tIG9mZmljaWFsICpsb2NhbF9jbG9jaypcbiAqIC0gdmFsdWUgKHNlYykgLSB2YWx1ZSBvZiBjbG9jayBhdCB0aW1lIHRzXG4gKiAtIHJhdGUgKHNlYy9zZWMpIC0gcmF0ZSBvZiBjbG9jayAoZGVmYXVsdCAxLjApXG4gKiBDbG9jayBQcm92aWRlciB1c2VzIG9mZmljaWFsICpsb2NhbCBjbG9jayogKHBlcmZvcm1hY2Uubm93KCkvMTAwMC4wKVxuICogVGhlIG9mZmljaWFsIGNsb2NrIGlzIGV4cG9ydGVkIGJ5IHRoZSBzdGF0ZWxheWVycyBmcmFtZXdvcmssIHNvIGFwcGxpY2F0aW9uXG4gKiBjb2RlIGNhbiB1c2UgaXQgdG8gY3JlYXRlIGFuIGluaXRpYWwgdGltZXN0YW1wcy4gSWYgb21taXR0ZWQsIGNsb2NrXG4gKiBwcm92aWRlciBjcmVhdGVzIHRoZSB0aW1lc3RhbXAgLSB0aGVyZWJ5IGFzc3VtaW5nIHRoYXQgdGhlIHByb3ZpZGVkIHZhbHVlIHdhcyBcbiAqIHNhbXBsZWQgaW1tZWRpYXRlbHkgYmVmb3JlLlxuICogXG4gKiBcbiAqIFRoZSBrZXkgZGlmZmVyZW5jZSBiZXR3ZWVuICpjbG9jayogYW5kICp2ZWN0b3IqIGlzIHRoYXQgdGhlIGNsb2NrIG9iamVjdCBjYW4gZHJpZnQgXG4gKiByZWxhdGl2ZSB0byB0aGUgb2ZmaWNpYWwgKmxvY2FsX2Nsb2NrKiwgd2hpbGUgdGhlIHZlY3RvciBvYmplY3QgaXMgZm9yZXZlciBsb2NrZWQgdG9cbiAqIHRoZSBvZmZpY2lhbCAqbG9jYWxfY2xvY2sqLlxuICogICBcbiAqL1xuXG5mdW5jdGlvbiBpc19jbG9jayhvYmopIHtcbiAgICBpZiAoIShcIm5vd1wiIGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIG9iai5ub3cgIT0gXCJmdW5jdGlvblwiKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBjbGFzcyBDbG9ja1Byb3ZpZGVyIHtcblxuICAgIGNvbnN0cnVjdG9yIChvcHRpb25zPXt9KSB7XG4gICAgICAgIGNvbnN0IHtjbG9jaywgdmVjdG9yPUxPQ0FMX0NMT0NLX1ZFQ1RPUn0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmIChjbG9jayAhPT0gdW5kZWZpbmVkICYmIGlzX2Nsb2NrKGNsb2NrKSkge1xuICAgICAgICAgICAgdGhpcy5fY2xvY2sgPSB7XG4gICAgICAgICAgICAgICAgbm93OiAobG9jYWxfdHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgbG9jYWxfdHMgaXMgZGVmaW5lZCBpdCBkZWZpbmVzIGEgdGltZXN0YW1wIGZvclxuICAgICAgICAgICAgICAgICAgICAvLyBldmFsdWF0aW9uIG9mIHRoZSBjbG9jayAtIHdoaWNoIGlzIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgICAgICAvLyBhcyBub3cgLSBiYWNrLWRhdGUgY2xvY2sgYWNjb3JkaW5nbHlcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlmZl90cyA9IChsb2NhbF90cyAhPSB1bmRlZmluZWQpID8gbG9jYWxfY2xvY2subm93KCkgLSBsb2NhbF90cyA6IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbG9jay5ub3coKSAtIGRpZmZfdHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgICAgIHRoaXMuX3JhdGUgPSAxLjA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQge3RzLCB2YWx1ZSwgcmF0ZT0xLjB9ID0gdmVjdG9yO1xuICAgICAgICAgICAgaWYgKHRzID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRzID0gbG9jYWxfY2xvY2subm93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVja19udW1iZXIoXCJ0c1wiLCB0cyk7XG4gICAgICAgICAgICBjaGVja19udW1iZXIoXCJ2YWx1ZVwiLCB2YWx1ZSk7XG4gICAgICAgICAgICBjaGVja19udW1iZXIoXCJyYXRlXCIsIHJhdGUpO1xuICAgICAgICAgICAgdGhpcy5fdDAgPSB0cztcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9yYXRlID0gcmF0ZTtcbiAgICAgICAgICAgIHRoaXMuX2Nsb2NrID0ge1xuICAgICAgICAgICAgICAgIG5vdzogKGxvY2FsX3RzID0gbG9jYWxfY2xvY2subm93KCkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlICsgKGxvY2FsX3RzIC0gdGhpcy5fdDApKnRoaXMuX3JhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbm93ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb2NrLm5vdygpO1xuICAgIH1cblxuICAgIGdldCByYXRlKCkge3JldHVybiB0aGlzLl9yYXRlO31cbn1cblxuXG4vLyBkZWZhdWx0IGNsb2NrIHByb3ZpZGVyICAgIFxuY29uc3QgTE9DQUxfQ0xPQ0tfVkVDVE9SID0ge1xuICAgIHRzOiBsb2NhbF9jbG9jay5ub3coKSxcbiAgICB2YWx1ZTogbmV3IERhdGUoKS8xMDAwLjAsIFxuICAgIHJhdGU6IDEuMFxufTtcbmNvbnN0IExPQ0FMX0NMT0NLX1BST1ZJREVSID0gbmV3IENsb2NrUHJvdmlkZXIoe3ZlY3RvcjpMT0NBTF9DTE9DS19WRUNUT1J9KTtcblxuZXhwb3J0IGNvbnN0IGNsb2NrX3Byb3ZpZGVyID0gKG9wdGlvbnM9e30pID0+IHtcblxuICAgIGNvbnN0IHtjbG9jaywgdmVjdG9yfSA9IG9wdGlvbnM7XG4gICAgaWYgKGNsb2NrID09IHVuZGVmaW5lZCAmJiB2ZWN0b3IgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBMT0NBTF9DTE9DS19QUk9WSURFUjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDbG9ja1Byb3ZpZGVyKG9wdGlvbnMpOyBcbn0iLCJpbXBvcnQgKiBhcyBjYWxsYmFjayBmcm9tIFwiLi91dGlsL2FwaV9jYWxsYmFjay5qc1wiO1xuaW1wb3J0IHsgY2hlY2tfaXRlbXMgfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuXG4vKipcbiAqIGNvbGxlY3Rpb24gcHJvdmlkZXJzIG11c3QgcHJvdmlkZSBnZXRfYWxsIGZ1bmN0aW9uXG4gKiBhbmQgYWxzbyBpbXBsZW1lbnQgY2FsbGJhY2sgaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc19jb2xsZWN0aW9uX3Byb3ZpZGVyKG9iaikge1xuICAgIGlmICghY2FsbGJhY2suaXNfY2FsbGJhY2tfYXBpKG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIShcImdldFwiIGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIG9iai5nZXQgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghKFwidXBkYXRlXCIgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0eXBlb2Ygb2JqLnVwZGF0ZSAhPSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIENPTExFQ1RJT04gUFJPVklERVJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBsb2NhbCBjb2xsZWN0aW9uIHByb3ZpZGVyXG4gKiBcbiAqIFxuICogY2hhbmdlcyA9IHtcbiAqICAgcmVtb3ZlPVtdLFxuICogICBpbnNlcnQ9W10sXG4gKiAgIHJlc2V0PWZhbHNlIFxuICogfVxuICogXG4qL1xuXG5leHBvcnQgY2xhc3MgQ29sbGVjdGlvblByb3ZpZGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM9e30pIHtcbiAgICAgICAgY2FsbGJhY2suYWRkU3RhdGUodGhpcyk7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZVxuICAgICAgICBsZXQge2l0ZW1zfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmIChpdGVtcyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgICAgIHRoaXMuX21hcC5zZXQoaXRlbS5pZCwgaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2NhbCBzdGF0ZXByb3ZpZGVycyBkZWNvdXBsZSB1cGRhdGUgcmVxdWVzdCBmcm9tXG4gICAgICogdXBkYXRlIHByb2Nlc3NpbmcsIGFuZCByZXR1cm5zIFByb21pc2UuXG4gICAgICovXG4gICAgdXBkYXRlIChjaGFuZ2VzKSB7XG4gICAgICAgIGNoYW5nZXMuaW5zZXJ0ID0gY2hlY2tfaXRlbXMoY2hhbmdlcy5pbnNlcnQpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGRpZmZzO1xuICAgICAgICAgICAgaWYgKGNoYW5nZXMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGlmZnMgPSB0aGlzLl91cGRhdGUoY2hhbmdlcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlfY2FsbGJhY2tzKGRpZmZzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkaWZmcztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3VwZGF0ZShjaGFuZ2VzKSB7XG4gICAgICAgIGNvbnN0IGRpZmZfbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBsZXQge1xuICAgICAgICAgICAgaW5zZXJ0PVtdLFxuICAgICAgICAgICAgcmVtb3ZlPVtdLFxuICAgICAgICAgICAgcmVzZXQ9ZmFsc2VcbiAgICAgICAgfSA9IGNoYW5nZXM7XG5cblxuICAgICAgICBpZiAocmVzZXQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2lkLCBpdGVtXSBvZiB0aGlzLl9tYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgZGlmZl9tYXAuc2V0KGlkLCB7aWQsIG5ldzp1bmRlZmluZWQsIG9sZDppdGVtfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjbGVhciBhbGwgaXRlbXNcbiAgICAgICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBpdGVtcyBieSBpZFxuICAgICAgICAgICAgZm9yIChjb25zdCBpZCBvZiByZW1vdmUpIHtcbiAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IHRoaXMuX21hcC5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBkaWZmX21hcC5zZXQoaXRlbS5pZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6aXRlbS5pZCwgbmV3OnVuZGVmaW5lZCwgb2xkOml0ZW1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5kZWxldGUoaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpbnNlcnQgaXRlbXNcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBpbnNlcnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBkaWZmX21hcC5nZXQoaXRlbS5pZClcbiAgICAgICAgICAgIGNvbnN0IG9sZCA9IChkaWZmICE9IHVuZGVmaW5lZCkgPyBkaWZmLm9sZCA6IHRoaXMuX21hcC5nZXQoaXRlbS5pZCk7XG4gICAgICAgICAgICBkaWZmX21hcC5zZXQoaXRlbS5pZCwge2lkOml0ZW0uaWQsIG5ldzppdGVtLCBvbGR9KTtcbiAgICAgICAgICAgIHRoaXMuX21hcC5zZXQoaXRlbS5pZCwgaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5kaWZmX21hcC52YWx1ZXMoKV07XG4gICAgfVxuXG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gWy4uLnRoaXMuX21hcC52YWx1ZXMoKV07XG4gICAgfTtcbn1cbmNhbGxiYWNrLmFkZE1ldGhvZHMoQ29sbGVjdGlvblByb3ZpZGVyLnByb3RvdHlwZSk7XG4iLCJpbXBvcnQgKiBhcyBjYWxsYmFjayBmcm9tIFwiLi91dGlsL2FwaV9jYWxsYmFjay5qc1wiO1xuaW1wb3J0IHsgY2hlY2tfaXRlbXMgfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuXG4vKipcbiAqIG9iamVjdCBwcm92aWRlcnMgaW1wbGVtZW50IGdldCgpIGFuZCBzZXQoKSBtZXRob2RzXG4gKiBhbmQgdGhlIGNhbGxiYWNrIGludGVyZmFjZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNfb2JqZWN0X3Byb3ZpZGVyKG9iaikge1xuICAgIGlmICghY2FsbGJhY2suaXNfY2FsbGJhY2tfYXBpKG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIShcImdldFwiIGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIG9iai5nZXQgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghKFwic2V0XCIgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0eXBlb2Ygb2JqLnNldCAhPSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBPQkpFQ1QgUFJPVklERVJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBPYmplY3RQcm92aWRlciBzdG9yZXMgYW4gb2JqZWN0IG9yIHVuZGVmaW5lZC5cbiAqL1xuXG5leHBvcnQgY2xhc3MgT2JqZWN0UHJvdmlkZXIge1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz17fSkge1xuICAgICAgICBjb25zdCB7aXRlbXN9ID0gb3B0aW9ucztcbiAgICAgICAgY2FsbGJhY2suYWRkU3RhdGUodGhpcyk7XG4gICAgICAgIHRoaXMuX29iamVjdCA9IGl0ZW1zO1xuICAgIH1cblxuICAgIHNldCAoaXRlbXMpIHtcbiAgICAgICAgaXRlbXMgPSBjaGVja19pdGVtcyhpdGVtcyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX29iamVjdCA9IGl0ZW1zO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5X2NhbGxiYWNrcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29iamVjdDtcbiAgICB9XG59XG5jYWxsYmFjay5hZGRNZXRob2RzKE9iamVjdFByb3ZpZGVyLnByb3RvdHlwZSk7IiwiaW1wb3J0IHsgaXNfY2FsbGJhY2tfYXBpIH0gZnJvbSBcIi4vYXBpX2NhbGxiYWNrLmpzXCI7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIFNPVVJDRSBQUk9QRVJUWSAoU1JDUFJPUClcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogRnVuY3Rpb25zIGZvciBleHRlbmRpbmcgYSBjbGFzcyB3aXRoIHN1cHBvcnQgZm9yIFxuICogZXh0ZXJuYWwgc291cmNlIG9uIGEgbmFtZWQgcHJvcGVydHkuXG4gKiBcbiAqIG9wdGlvbjogbXV0YWJsZTp0cnVlIG1lYW5zIHRoYXQgcHJvcGVyeSBtYXkgYmUgcmVzZXQgXG4gKiBcbiAqIHNvdXJjZSBvYmplY3QgaXMgYXNzdW1lZCB0byBzdXBwb3J0IHRoZSBjYWxsYmFjayBpbnRlcmZhY2UsXG4gKiBvciBiZSBhIGxpc3Qgb2Ygb2JqZWN0cyBhbGwgc3VwcG9ydGluZyB0aGUgY2FsbGJhY2sgaW50ZXJmYWNlXG4gKi9cblxuY29uc3QgTkFNRSA9IFwic3JjcHJvcFwiO1xuY29uc3QgUFJFRklYID0gYF9fJHtOQU1FfWA7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTdGF0ZSAob2JqZWN0KSB7XG4gICAgb2JqZWN0W2Ake1BSRUZJWH1gXSA9IG5ldyBNYXAoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE1ldGhvZHMgKG9iamVjdCkge1xuXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIocHJvcE5hbWUsIG9wdGlvbnM9e30pIHtcbiAgICAgICAgbGV0IHttdXRhYmxlPXRydWV9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgbWFwID0gdGhpc1tgJHtQUkVGSVh9YF07IFxuICAgICAgICBtYXAuc2V0KHByb3BOYW1lLCB7XG4gICAgICAgICAgICBpbml0OmZhbHNlLFxuICAgICAgICAgICAgbXV0YWJsZSxcbiAgICAgICAgICAgIGVudGl0eTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaGFuZGxlczogW11cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmVnaXN0ZXIgZ2V0dGVycyBhbmQgc2V0dGVyc1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgcHJvcE5hbWUsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXAuZ2V0KHByb3BOYW1lKS5lbnRpdHk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbYCR7TkFNRX1fY2hlY2tgXSkge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkgPSB0aGlzW2Ake05BTUV9X2NoZWNrYF0ocHJvcE5hbWUsIGVudGl0eSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbnRpdHkgIT0gbWFwLmdldChwcm9wTmFtZSkuZW50aXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbYCR7UFJFRklYfV9hdHRhY2hgXShwcm9wTmFtZSwgZW50aXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGF0dGF0Y2gocHJvcE5hbWUsIGVudGl0eSkge1xuXG4gICAgICAgIGNvbnN0IG1hcCA9IHRoaXNbYCR7UFJFRklYfWBdO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IG1hcC5nZXQocHJvcE5hbWUpXG5cbiAgICAgICAgaWYgKHN0YXRlLmluaXQgJiYgIXN0YXRlLm11dGFibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtwcm9wTmFtZX0gY2FuIG5vdCBiZSByZWFzc2lnbmVkYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRpdGllcyA9IChBcnJheS5pc0FycmF5KGVudGl0eSkpID8gZW50aXR5IDogW2VudGl0eV07XG5cbiAgICAgICAgLy8gdW5zdWJzY3JpYmUgZnJvbSBlbnRpdGllc1xuICAgICAgICBpZiAoc3RhdGUuaGFuZGxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtpZHgsIGVdIG9mIE9iamVjdC5lbnRyaWVzKGVudGl0aWVzKSkge1xuICAgICAgICAgICAgICAgIGlmIChpc19jYWxsYmFja19hcGkoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZW1vdmVfY2FsbGJhY2soc3RhdGUuaGFuZGxlc1tpZHhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICAgIFxuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmhhbmRsZXMgPSBbXTtcblxuICAgICAgICAvLyBhdHRhdGNoIG5ldyBlbnRpdHlcbiAgICAgICAgc3RhdGUuZW50aXR5ID0gZW50aXR5O1xuICAgICAgICBzdGF0ZS5pbml0ID0gdHJ1ZTtcblxuICAgICAgICAvLyBzdWJzY3JpYmUgdG8gY2FsbGJhY2sgZnJvbSBzb3VyY2VcbiAgICAgICAgaWYgKHRoaXNbYCR7TkFNRX1fb25jaGFuZ2VgXSkge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGZ1bmN0aW9uIChlQXJnKSB7XG4gICAgICAgICAgICAgICAgdGhpc1tgJHtOQU1FfV9vbmNoYW5nZWBdKHByb3BOYW1lLCBlQXJnKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBlbnRpdGllcykge1xuICAgICAgICAgICAgICAgIGlmIChpc19jYWxsYmFja19hcGkoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaGFuZGxlcy5wdXNoKGUuYWRkX2NhbGxiYWNrKGhhbmRsZXIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzW2Ake05BTUV9X29uY2hhbmdlYF0ocHJvcE5hbWUsIFwicmVzZXRcIik7IFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYXBpID0ge307XG4gICAgYXBpW2Ake05BTUV9X3JlZ2lzdGVyYF0gPSByZWdpc3RlcjtcbiAgICBhcGlbYCR7UFJFRklYfV9hdHRhY2hgXSA9IGF0dGF0Y2g7XG4gICAgT2JqZWN0LmFzc2lnbihvYmplY3QsIGFwaSk7XG59XG5cbiIsImltcG9ydCB7IGVuZHBvaW50IH0gZnJvbSBcIi4vaW50ZXJ2YWxzLmpzXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHRTT1JURUQgQVJSQVlcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLypcblx0U29ydGVkIGFycmF5IG9mIGVuZHBvaW50cyBbdmFsdWUsIHR5cGVdLlxuXHQtIEVsZW1lbnRzIGFyZSBzb3J0ZWQgaW4gYXNjZW5kaW5nIG9yZGVyLlxuXHQtIE5vIGR1cGxpY2F0ZXMgYXJlIGFsbG93ZWQuXG5cdC0gQmluYXJ5IHNlYXJjaCB1c2VkIGZvciBsb29rdXBcblxuXHR2YWx1ZXMgY2FuIGJlIHJlZ3VsYXIgbnVtYmVyIHZhbHVlcyAoZmxvYXQpIG9yIGVuZHBvaW50cyBbZmxvYXQsIHR5cGVdXG4qL1xuXG5leHBvcnQgY2xhc3MgU29ydGVkQXJyYXkge1xuXG5cdGNvbnN0cnVjdG9yKCl7XG5cdFx0dGhpcy5fYXJyYXkgPSBbXTtcblx0fVxuXG5cdGdldCBzaXplKCkge3JldHVybiB0aGlzLl9hcnJheS5sZW5ndGg7fVxuXHRnZXQgYXJyYXkoKSB7cmV0dXJuIHRoaXMuX2FycmF5O31cblxuXHQvKlxuXHRcdGZpbmQgaW5kZXggb2YgZ2l2ZW4gdmFsdWVcblxuXHRcdHJldHVybiBbZm91bmQsIGluZGV4XVxuXG5cdFx0aWYgZm91bmQgaXMgdHJ1ZSwgdGhlbiBpbmRleCBpcyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIG9iamVjdFxuXHRcdGlmIGZvdW5kIGlzIGZhbHNlLCB0aGVuIGluZGV4IGlzIHRoZSBpbmRleCB3aGVyZSB0aGUgb2JqZWN0IHNob3VsZFxuXHRcdGJlIGluc2VydGVkXG5cblx0XHQtIHVzZXMgYmluYXJ5IHNlYXJjaFx0XHRcblx0XHQtIGFycmF5IGRvZXMgbm90IGluY2x1ZGUgYW55IGR1cGxpY2F0ZSB2YWx1ZXNcblx0Ki9cblx0aW5kZXhPZih0YXJnZXRfdmFsdWUpIHtcblx0XHRjb25zdCB0YXJnZXRfZXAgPSBlbmRwb2ludC5mcm9tX2lucHV0KHRhcmdldF92YWx1ZSk7XG5cdFx0bGV0IGxlZnRfaWR4ID0gMDtcblx0XHRsZXQgcmlnaHRfaWR4ID0gdGhpcy5fYXJyYXkubGVuZ3RoIC0gMTtcblx0XHR3aGlsZSAobGVmdF9pZHggPD0gcmlnaHRfaWR4KSB7XG5cdFx0XHRjb25zdCBtaWRfaWR4ID0gTWF0aC5mbG9vcigobGVmdF9pZHggKyByaWdodF9pZHgpIC8gMik7XG5cdFx0XHRsZXQgbWlkX3ZhbHVlID0gdGhpcy5fYXJyYXlbbWlkX2lkeF07XG5cdFx0XHRpZiAoZW5kcG9pbnQuZXEobWlkX3ZhbHVlLCB0YXJnZXRfZXApKSB7XG5cdFx0XHRcdHJldHVybiBbdHJ1ZSwgbWlkX2lkeF07IC8vIFRhcmdldCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgYXJyYXlcblx0XHRcdH0gZWxzZSBpZiAoZW5kcG9pbnQubHQobWlkX3ZhbHVlLCB0YXJnZXRfZXApKSB7XG5cdFx0XHRcdCAgbGVmdF9pZHggPSBtaWRfaWR4ICsgMTsgLy8gTW92ZSBzZWFyY2ggcmFuZ2UgdG8gdGhlIHJpZ2h0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQgIHJpZ2h0X2lkeCA9IG1pZF9pZHggLSAxOyAvLyBNb3ZlIHNlYXJjaCByYW5nZSB0byB0aGUgbGVmdFxuXHRcdFx0fVxuXHRcdH1cblx0ICBcdHJldHVybiBbZmFsc2UsIGxlZnRfaWR4XTsgLy8gUmV0dXJuIHRoZSBpbmRleCB3aGVyZSB0YXJnZXQgc2hvdWxkIGJlIGluc2VydGVkXG5cdH1cblxuXHQvKlxuXHRcdGZpbmQgaW5kZXggb2Ygc21hbGxlc3QgdmFsdWUgd2hpY2ggaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRhcmdldCB2YWx1ZVxuXHRcdHJldHVybnMgLTEgaWYgbm8gc3VjaCB2YWx1ZSBleGlzdHNcblx0Ki9cblx0Z2VJbmRleE9mKHRhcmdldF92YWx1ZSkge1xuXHRcdGxldCBbZm91bmQsIGlkeF0gPSB0aGlzLmluZGV4T2YodGFyZ2V0X3ZhbHVlKTtcblx0XHRyZXR1cm4gKGlkeCA8IHRoaXMuX2FycmF5Lmxlbmd0aCkgPyBpZHggOiAtMSAgXG5cdH1cblxuXHQvKlxuXHRcdGZpbmQgaW5kZXggb2YgbGFyZ2VzdCB2YWx1ZSB3aGljaCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGFyZ2V0IHZhbHVlXG5cdFx0cmV0dXJucyAtMSBpZiBubyBzdWNoIHZhbHVlIGV4aXN0c1xuXHQqL1xuXHRsZUluZGV4T2YodGFyZ2V0X3ZhbHVlKSB7XG5cdFx0bGV0IFtmb3VuZCwgaWR4XSA9IHRoaXMuaW5kZXhPZih0YXJnZXRfdmFsdWUpO1xuXHRcdGlkeCA9IChmb3VuZCkgPyBpZHggOiBpZHgtMTtcblx0XHRyZXR1cm4gKGlkeCA+PSAwKSA/IGlkeCA6IC0xO1xuXHR9XG5cblx0Lypcblx0XHRmaW5kIGluZGV4IG9mIHNtYWxsZXN0IHZhbHVlIHdoaWNoIGlzIGdyZWF0ZXIgdGhhbiB0YXJnZXQgdmFsdWVcblx0XHRyZXR1cm5zIC0xIGlmIG5vIHN1Y2ggdmFsdWUgZXhpc3RzXG5cdCovXG5cdGd0SW5kZXhPZih0YXJnZXRfdmFsdWUpIHtcblx0XHRsZXQgW2ZvdW5kLCBpZHhdID0gdGhpcy5pbmRleE9mKHRhcmdldF92YWx1ZSk7XG5cdFx0aWR4ID0gKGZvdW5kKSA/IGlkeCArIDEgOiBpZHg7XG5cdFx0cmV0dXJuIChpZHggPCB0aGlzLl9hcnJheS5sZW5ndGgpID8gaWR4IDogLTEgIFxuXHR9XG5cblx0Lypcblx0XHRmaW5kIGluZGV4IG9mIGxhcmdlc3QgdmFsdWUgd2hpY2ggaXMgbGVzcyB0aGFuIHRhcmdldCB2YWx1ZVxuXHRcdHJldHVybnMgLTEgaWYgbm8gc3VjaCB2YWx1ZSBleGlzdHNcblx0Ki9cblx0bHRJbmRleE9mKHRhcmdldF92YWx1ZSkge1xuXHRcdGxldCBbZm91bmQsIGlkeF0gPSB0aGlzLmluZGV4T2YodGFyZ2V0X3ZhbHVlKTtcblx0XHRpZHggPSBpZHgtMTtcblx0XHRyZXR1cm4gKGlkeCA+PSAwKSA/IGlkeCA6IC0xO1x0XG5cdH1cblxuXHQvKlxuXHRcdFVQREFURVxuXG5cdFx0YXBwcm9hY2ggLSBtYWtlIGFsbCBuZWNjZXNzYXJ5IGNoYW5nZXMgYW5kIHRoZW4gc29ydFxuXG5cdFx0YXMgYSBydWxlIG9mIHRodW1iIC0gY29tcGFyZWQgdG8gcmVtb3ZpbmcgYW5kIGluc2VydGluZyBlbGVtZW50c1xuXHRcdG9uZSBieSBvbmUsIHRoaXMgaXMgbW9yZSBlZmZlY3RpdmUgZm9yIGxhcmdlciBiYXRjaGVzLCBzYXkgPiAxMDAuXG5cdFx0RXZlbiB0aG91Z2ggdGhpcyBtaWdodCBub3QgYmUgdGhlIGNvbW1vbiBjYXNlLCBwZW5hbHRpZXMgZm9yXG5cdFx0Y2hvb3NpbmcgdGhlIHdyb25nIGFwcHJvYWNoIGlzIGhpZ2hlciBmb3IgbGFyZ2VyIGJhdGNoZXMuXG5cblx0XHRyZW1vdmUgaXMgcHJvY2Vzc2VkIGZpcnN0LCBzbyBpZiBhIHZhbHVlIGFwcGVhcnMgaW4gYm90aCBcblx0XHRyZW1vdmUgYW5kIGluc2VydCwgaXQgd2lsbCByZW1haW4uXG5cdFx0dW5kZWZpbmVkIHZhbHVlcyBjYW4gbm90IGJlIGluc2VydGVkIFxuXG5cdCovXG5cblx0dXBkYXRlKHJlbW92ZV9saXN0PVtdLCBpbnNlcnRfbGlzdD1bXSkge1xuXG5cdFx0Lypcblx0XHRcdHJlbW92ZVxuXG5cdFx0XHRyZW1vdmUgYnkgZmxhZ2dpbmcgZWxlbWVudHMgYXMgdW5kZWZpbmVkXG5cdFx0XHQtIGNvbGxlY3QgYWxsIGluZGV4ZXMgZmlyc3Rcblx0XHRcdC0gZmxhZyBhcyB1bmRlZmluZWQgb25seSBhZnRlciBhbGwgaW5kZXhlcyBoYXZlIGJlZW4gZm91bmQsXG5cdFx0XHQgIGFzIGluc2VydGluZyB1bmRlZmluZWQgdmFsdWVzIGJyZWFrZXMgdGhlIGFzc3VtcHRpb24gdGhhdFxuXHRcdFx0ICB0aGUgYXJyYXkgaXMgc29ydGVkLlxuXHRcdFx0LSBsYXRlciBzb3J0IHdpbGwgbW92ZSB0aGVtIHRvIHRoZSBlbmQsIHdoZXJlIHRoZXkgY2FuIGJlXG5cdFx0XHQgIHRydW5jYXRlZCBvZmZcblx0XHQqL1xuXHRcdGxldCByZW1vdmVfaWR4X2xpc3QgPSBbXTtcblx0XHRmb3IgKGxldCB2YWx1ZSBvZiByZW1vdmVfbGlzdCkge1xuXHRcdFx0bGV0IFtmb3VuZCwgaWR4XSA9IHRoaXMuaW5kZXhPZih2YWx1ZSk7XG5cdFx0XHRpZiAoZm91bmQpIHtcblx0XHRcdFx0cmVtb3ZlX2lkeF9saXN0LnB1c2goaWR4KTtcblx0XHRcdH1cdFx0XG5cdFx0fVxuXHRcdGZvciAobGV0IGlkeCBvZiByZW1vdmVfaWR4X2xpc3QpIHtcblx0XHRcdHRoaXMuX2FycmF5W2lkeF0gPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGxldCBhbnlfcmVtb3ZlcyA9IHJlbW92ZV9pZHhfbGlzdC5sZW5ndGggPiAwO1xuXG5cdFx0Lypcblx0XHRcdGluc2VydFxuXG5cdFx0XHRpbnNlcnQgbWlnaHQgaW50cm9kdWNlIGR1cGxpY2F0aW9ucywgZWl0aGVyIGJlY2F1c2Vcblx0XHRcdHRoZSBpbnNlcnQgbGlzdCBpbmNsdWRlcyBkdXBsaWNhdGVzLCBvciBiZWNhdXNlIHRoZVxuXHRcdFx0aW5zZXJ0IGxpc3QgZHVwbGljYXRlcyBwcmVleGlzdGluZyB2YWx1ZXMuXG5cblx0XHRcdEluc3RlYWQgb2YgbG9va2luZyB1cCBhbmQgY2hlY2tpbmcgZWFjaCBpbnNlcnQgdmFsdWUsXG5cdFx0XHR3ZSBpbnN0ZWFkIGluc2VydCBldmVyeXRoaW5nIGF0IHRoZSBlbmQgb2YgdGhlIGFycmF5LFxuXHRcdFx0YW5kIHJlbW92ZSBkdXBsaWNhdGVzIG9ubHkgYWZ0ZXIgd2UgaGF2ZSBzb3J0ZWQuXG5cdFx0Ki9cblx0XHRsZXQgYW55X2luc2VydHMgPSBpbnNlcnRfbGlzdC5sZW5ndGggPiAwO1xuXHRcdGlmIChhbnlfaW5zZXJ0cykge1xuXHRcdFx0Y29uY2F0X2luX3BsYWNlKHRoaXMuX2FycmF5LCBpbnNlcnRfbGlzdCk7XG5cdFx0fVxuXG5cdFx0Lypcblx0XHRcdHNvcnRcblx0XHRcdHRoaXMgcHVzaGVzIGFueSB1bmRlZmluZWQgdmFsdWVzIHRvIHRoZSBlbmQgXG5cdFx0Ki9cblx0XHRpZiAoYW55X3JlbW92ZXMgfHwgYW55X2luc2VydHMpIHtcblx0XHRcdHRoaXMuX2FycmF5LnNvcnQoZW5kcG9pbnQuY21wKTtcblx0XHR9XG5cblx0XHQvKlxuXHRcdFx0cmVtb3ZlIHVuZGVmaW5lZCBcblx0XHRcdGFsbCB1bmRlZmluZWQgdmFsdWVzIGFyZSBwdXNoZWQgdG8gdGhlIGVuZFxuXHRcdCovXG5cdFx0aWYgKGFueV9yZW1vdmVzKSB7XG5cdFx0XHR0aGlzLl9hcnJheS5sZW5ndGggLT0gcmVtb3ZlX2lkeF9saXN0Lmxlbmd0aDtcblx0XHR9XG5cblx0XHQvKlxuXHRcdFx0cmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBzb3J0ZWQgYXJyYXlcblx0XHRcdC0gYXNzdW1pbmcgdGhlcmUgYXJlIGdvaW5nIHRvIGJlIGZldyBkdXBsaWNhdGVzLFxuXHRcdFx0ICBpdCBpcyBvayB0byByZW1vdmUgdGhlbSBvbmUgYnkgb25lXG5cblx0XHQqL1xuXHRcdGlmIChhbnlfaW5zZXJ0cykge1xuXHRcdFx0cmVtb3ZlX2R1cGxpY2F0ZXModGhpcy5fYXJyYXkpO1xuXHRcdH1cblx0fVxuXG5cdC8qXG5cdFx0Z2V0IGVsZW1lbnQgYnkgaW5kZXhcblx0Ki9cblx0Z2V0X2J5X2luZGV4KGlkeCkge1xuXHRcdGlmIChpZHggPiAtMSAmJiBpZHggPCB0aGlzLl9hcnJheS5sZW5ndGgpIHtcblx0XHRcdHJldHVybiB0aGlzLl9hcnJheVtpZHhdO1xuXHRcdH1cblx0fVxuXG5cdC8qXG5cdFx0bG9va3VwIHZhbHVlcyB3aXRoaW4gaW50ZXJ2YWxcblx0Ki9cblx0bG9va3VwKGl0dikge1xuXHRcdGlmIChpdHYgPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpdHYgPSBbbnVsbCwgbnVsbCwgdHJ1ZSwgdHJ1ZV07XG5cdFx0fVxuXHRcdGxldCBbZXBfMCwgZXBfMV0gPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKGl0dik7XG5cdFx0bGV0IGlkeF8wID0gdGhpcy5nZUluZGV4T2YoZXBfMCk7XG5cdFx0bGV0IGlkeF8xID0gdGhpcy5sZUluZGV4T2YoZXBfMSk7XG5cdFx0aWYgKGlkeF8wID09IC0xIHx8IGlkeF8xID09IC0xKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB0aGlzLl9hcnJheS5zbGljZShpZHhfMCwgaWR4XzErMSk7XG5cdFx0fVxuXHR9XG5cblx0bHQgKG9mZnNldCkge1xuXHRcdHJldHVybiB0aGlzLmdldF9ieV9pbmRleCh0aGlzLmx0SW5kZXhPZihvZmZzZXQpKTtcblx0fVxuXHRsZSAob2Zmc2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0X2J5X2luZGV4KHRoaXMubGVJbmRleE9mKG9mZnNldCkpO1xuXHR9XG5cdGdldCAob2Zmc2V0KSB7XG5cdFx0bGV0IFtmb3VuZCwgaWR4XSA9IHRoaXMuaW5kZXhPZihvZmZzZXQpO1xuXHRcdGlmIChmb3VuZCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2FycmF5W2lkeF07XG5cdFx0fSBcblx0fVxuXHRndCAob2Zmc2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0X2J5X2luZGV4KHRoaXMuZ3RJbmRleE9mKG9mZnNldCkpO1xuXHR9XG5cdGdlIChvZmZzZXQpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRfYnlfaW5kZXgodGhpcy5nZUluZGV4T2Yob2Zmc2V0KSk7XG5cdH1cbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdFVUSUxTXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qXG5cdENvbmNhdGluYXRlIHR3byBhcnJheXMgYnkgYXBwZW5kaW5nIHRoZSBzZWNvbmQgYXJyYXkgdG8gdGhlIGZpcnN0IGFycmF5LiBcbiovXG5cbmZ1bmN0aW9uIGNvbmNhdF9pbl9wbGFjZShmaXJzdF9hcnIsIHNlY29uZF9hcnIpIHtcblx0Y29uc3QgZmlyc3RfYXJyX2xlbmd0aCA9IGZpcnN0X2Fyci5sZW5ndGg7XG5cdGNvbnN0IHNlY29uZF9hcnJfbGVuZ3RoID0gc2Vjb25kX2Fyci5sZW5ndGg7XG4gIFx0Zmlyc3RfYXJyLmxlbmd0aCArPSBzZWNvbmRfYXJyX2xlbmd0aDtcbiAgXHRmb3IgKGxldCBpID0gMDsgaSA8IHNlY29uZF9hcnJfbGVuZ3RoOyBpKyspIHtcbiAgICBcdGZpcnN0X2FycltmaXJzdF9hcnJfbGVuZ3RoICsgaV0gPSBzZWNvbmRfYXJyW2ldO1xuICBcdH1cbn1cblxuLypcblx0cmVtb3ZlIGR1cGxpY2F0ZXMgaW4gYSBzb3J0ZWQgYXJyYXlcbiovXG5mdW5jdGlvbiByZW1vdmVfZHVwbGljYXRlcyhzb3J0ZWRfYXJyKSB7XG5cdGxldCBpID0gMDtcblx0d2hpbGUgKHRydWUpIHtcblx0XHRpZiAoaSArIDEgPj0gc29ydGVkX2Fyci5sZW5ndGgpIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRpZiAoZW5kcG9pbnQuZXEoc29ydGVkX2FycltpXSwgc29ydGVkX2FycltpICsgMV0pKSB7XG5cdFx0XHRzb3J0ZWRfYXJyLnNwbGljZShpICsgMSwgMSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGkgKz0gMTtcblx0XHR9XG5cdH1cbn1cbiIsImltcG9ydCB7IGVuZHBvaW50IH0gZnJvbSBcIi4vdXRpbC9pbnRlcnZhbHMuanNcIjtcbmltcG9ydCB7IE5lYXJieUluZGV4QmFzZSwgbmVhcmJ5X2Zyb20gfSBmcm9tIFwiLi9uZWFyYnlfYmFzZS5qc1wiO1xuaW1wb3J0IHsgU29ydGVkQXJyYXkgfSBmcm9tIFwiLi91dGlsL3NvcnRlZGFycmF5LmpzXCI7XG5pbXBvcnQgeyBpc19jb2xsZWN0aW9uX3Byb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJfY29sbGVjdGlvbi5qc1wiO1xuaW1wb3J0IHsgaXNfb2JqZWN0X3Byb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJfb2JqZWN0LmpzXCI7XG5cbmNvbnN0IHtMT1dfQ0xPU0VELCBMT1dfT1BFTiwgSElHSF9DTE9TRUQsIEhJR0hfT1BFTn0gPSBlbmRwb2ludC50eXBlcztcbmNvbnN0IEVQX1RZUEVTID0gW0xPV19DTE9TRUQsIExPV19PUEVOLCBISUdIX0NMT1NFRCwgSElHSF9PUEVOXTtcblxuXG4vLyBTZXQgb2YgdW5pcXVlIFt2LCB0XSBlbmRwb2ludHNcbmNsYXNzIEVuZHBvaW50U2V0IHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5fbWFwID0gbmV3IE1hcChbXG5cdFx0XHRbTE9XX0NMT1NFRCwgbmV3IFNldCgpXSxcblx0XHRcdFtMT1dfT1BFTiwgbmV3IFNldCgpXSwgXG5cdFx0XHRbSElHSF9DTE9TRUQsIG5ldyBTZXQoKV0sIFxuXHRcdFx0W0hJR0hfT1BFTiwgbmV3IFNldCgpXVxuXHRcdF0pO1xuXHR9XG5cdGFkZChlcCkge1xuXHRcdGNvbnN0IFt2YWx1ZSwgdHlwZV0gPSBlcDtcblx0XHRyZXR1cm4gdGhpcy5fbWFwLmdldCh0eXBlKS5hZGQodmFsdWUpO1xuXHR9XG5cdGhhcyAoZXApIHtcblx0XHRjb25zdCBbdmFsdWUsIHR5cGVdID0gZXA7XG5cdFx0cmV0dXJuIHRoaXMuX21hcC5nZXQodHlwZSkuaGFzKHZhbHVlKTtcblx0fVxuXHRnZXQoZXApIHtcblx0XHRjb25zdCBbdmFsdWUsIHR5cGVdID0gZXA7XG5cdFx0cmV0dXJuIHRoaXMuX21hcC5nZXQodHlwZSkuZ2V0KHZhbHVlKTtcblx0fVxuXG5cdGxpc3QoKSB7XG5cdFx0Y29uc3QgbGlzdHMgPSBFUF9UWVBFUy5tYXAoKHR5cGUpID0+IHtcblx0XHRcdHJldHVybiBbLi4udGhpcy5fbWFwLmdldCh0eXBlKS52YWx1ZXMoKV1cblx0XHRcdFx0Lm1hcCgodmFsdWUpID0+IFt2YWx1ZSwgdHlwZV0pO1xuXHRcdH0pO1xuXHRcdHJldHVybiBbXS5jb25jYXQoLi4ubGlzdHMpO1xuXHR9XG59XG5cbi8qKlxuICogSVRFTVMgTUFQXG4gKiBcbiAqIG1hcCBlbmRwb2ludCAtPiB7XG4gKiBcdGxvdzogW2l0ZW1zXSwgXG4gKiAgYWN0aXZlOiBbaXRlbXNdLCBcbiAqICBoaWdoOltpdGVtc11cbiAqIH1cbiAqIFxuICogaW4gb3JkZXIgdG8gdXNlIGVuZHBvaW50IFt2LHRdIGFzIGEgbWFwIGtleSB3ZSBjcmVhdGUgYSB0d28gbGV2ZWxcbiAqIG1hcCAtIHVzaW5nIHQgYXMgdGhlIGZpcnN0IHZhcmlhYmxlLiBcbiAqIFxuICovXG5cblxuY29uc3QgTE9XID0gXCJsb3dcIjtcbmNvbnN0IEFDVElWRSA9IFwiYWN0aXZlXCI7XG5jb25zdCBISUdIID0gXCJoaWdoXCI7XG5cblxuY2xhc3MgSXRlbXNNYXAge1xuXG5cdGNvbnN0cnVjdG9yICgpIHtcblx0XHQvLyBtYXAgZW5kcG9pbnQgLT4ge2xvdzogW2l0ZW1zXSwgYWN0aXZlOiBbaXRlbXNdLCBoaWdoOltpdGVtc119XG5cdFx0dGhpcy5fbWFwID0gbmV3IE1hcChbXG5cdFx0XHRbTE9XX0NMT1NFRCwgbmV3IE1hcCgpXSxcblx0XHRcdFtMT1dfT1BFTiwgbmV3IE1hcCgpXSwgXG5cdFx0XHRbSElHSF9DTE9TRUQsIG5ldyBNYXAoKV0sIFxuXHRcdFx0W0hJR0hfT1BFTiwgbmV3IE1hcCgpXVxuXHRcdF0pO1xuXHR9XG5cblx0Z2V0X2l0ZW1zX2J5X3JvbGUgKGVwLCByb2xlKSB7XG5cdFx0Y29uc3QgW3ZhbHVlLCB0eXBlXSA9IGVwO1xuXHRcdGNvbnN0IGVudHJ5ID0gdGhpcy5fbWFwLmdldCh0eXBlKS5nZXQodmFsdWUpO1xuXHRcdHJldHVybiAoZW50cnkgIT0gdW5kZWZpbmVkKSA/IGVudHJ5W3JvbGVdIDogW107XG5cdH1cblxuXHQvKlxuXHRcdHJlZ2lzdGVyIGl0ZW0gd2l0aCBlbmRwb2ludCAoaWRlbXBvdGVudClcblx0XHRyZXR1cm4gdHJ1ZSBpZiB0aGlzIHdhcyB0aGUgZmlyc3QgTE9XIG9yIEhJR0ggXG5cdCAqL1xuXHRyZWdpc3RlcihlcCwgaXRlbSwgcm9sZSkge1xuXHRcdGNvbnN0IFt2YWx1ZSwgdHlwZV0gPSBlcDtcblx0XHRjb25zdCB0eXBlX21hcCA9IHRoaXMuX21hcC5nZXQodHlwZSk7XG5cdFx0aWYgKCF0eXBlX21hcC5oYXModmFsdWUpKSB7XG5cdFx0XHR0eXBlX21hcC5zZXQodmFsdWUsIHtsb3c6IFtdLCBhY3RpdmU6W10sIGhpZ2g6W119KTtcblx0XHR9XG5cdFx0Y29uc3QgZW50cnkgPSB0eXBlX21hcC5nZXQodmFsdWUpO1xuXHRcdGNvbnN0IHdhc19lbXB0eSA9IGVudHJ5W0xPV10ubGVuZ3RoICsgZW50cnlbSElHSF0ubGVuZ3RoID09IDA7XG5cdFx0bGV0IGlkeCA9IGVudHJ5W3JvbGVdLmZpbmRJbmRleCgoX2l0ZW0pID0+IHtcblx0XHRcdHJldHVybiBfaXRlbS5pZCA9PSBpdGVtLmlkO1xuXHRcdH0pO1xuXHRcdGlmIChpZHggPT0gLTEpIHtcblx0XHRcdGVudHJ5W3JvbGVdLnB1c2goaXRlbSk7XG5cdFx0fVxuXHRcdGNvbnN0IGlzX2VtcHR5ID0gZW50cnlbTE9XXS5sZW5ndGggKyBlbnRyeVtISUdIXS5sZW5ndGggPT0gMDtcblx0XHRyZXR1cm4gd2FzX2VtcHR5ICYmICFpc19lbXB0eTtcblx0fVxuXG5cdC8qXG5cdFx0dW5yZWdpc3RlciBpdGVtIHdpdGggZW5kcG9pbnQgKGluZGVwZW5kZW50IG9mIHJvbGUpXG5cdFx0cmV0dXJuIHRydWUgaWYgdGhpcyByZW1vdmVkIGxhc3QgTE9XIG9yIEhJR0hcblx0ICovXG5cdHVucmVnaXN0ZXIoZXAsIGl0ZW0pIHtcblx0XHRjb25zdCBbdmFsdWUsIHR5cGVdID0gZXA7XG5cdFx0Y29uc3QgdHlwZV9tYXAgPSB0aGlzLl9tYXAuZ2V0KHR5cGUpO1xuXHRcdGNvbnN0IGVudHJ5ID0gdHlwZV9tYXAuZ2V0KHZhbHVlKTtcblx0XHRpZiAoZW50cnkgIT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjb25zdCB3YXNfZW1wdHkgPSBlbnRyeVtMT1ddLmxlbmd0aCArIGVudHJ5W0hJR0hdLmxlbmd0aCA9PSAwO1xuXHRcdFx0Ly8gcmVtb3ZlIGFsbCBtZW50aW9uZXMgb2YgaXRlbVxuXHRcdFx0Zm9yIChjb25zdCByb2xlIG9mIFtMT1csIEFDVElWRSwgSElHSF0pIHtcblx0XHRcdFx0bGV0IGlkeCA9IGVudHJ5W3JvbGVdLmZpbmRJbmRleCgoX2l0ZW0pID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gX2l0ZW0uaWQgPT0gaXRlbS5pZDtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChpZHggPiAtMSkge1xuXHRcdFx0XHRcdGVudHJ5W3JvbGVdLnNwbGljZShpZHgsIDEpO1xuXHRcdFx0XHR9XHRcblx0XHRcdH1cblx0XHRcdGNvbnN0IGlzX2VtcHR5ID0gZW50cnlbTE9XXS5sZW5ndGggKyBlbnRyeVtISUdIXS5sZW5ndGggPT0gMDtcblx0XHRcdGlmICghd2FzX2VtcHR5ICYmIGlzX2VtcHR5KSB7XG5cdFx0XHRcdC8vIGNsZWFuIHVwIGVudHJ5XG5cdFx0XHRcdHR5cGVfbWFwLmRlbGV0ZSh2YWx1ZSk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxuXG4vKipcbiAqIE5lYXJieUluZGV4XG4gKiBcbiAqIE5lYXJieUluZGV4IGZvciBDb2xsZWN0aW9uUHJvdmlkZXIgb3IgVmFyaWFibGVQcm92aWRlclxuICovXG5cbmV4cG9ydCBjbGFzcyBOZWFyYnlJbmRleCBleHRlbmRzIE5lYXJieUluZGV4QmFzZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihzdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgIHN1cGVyKCk7XHRcdFxuXG5cdFx0aWYgKFxuXHRcdFx0IWlzX2NvbGxlY3Rpb25fcHJvdmlkZXIoc3RhdGVQcm92aWRlcikgJiZcblx0XHRcdCFpc19vYmplY3RfcHJvdmlkZXIoc3RhdGVQcm92aWRlcilcblx0XHQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgc3RhdGVQcm92aWRlciBtdXN0IGJlIGNvbGxlY3Rpb25Qcm92aWRlciBvciB2YXJpYWJsZVByb3ZpZGVyICR7c3RhdGVQcm92aWRlcn1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zcCA9IHN0YXRlUHJvdmlkZXI7XG5cdFx0dGhpcy5faW5pdGlhbGlzZSgpO1xuXHRcdHRoaXMucmVmcmVzaCgpO1xuXHR9XG5cbiAgICBnZXQgc3JjICgpIHtyZXR1cm4gdGhpcy5fc3A7fVxuXG5cblx0X2luaXRpYWxpc2UoKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgaXRlbXMgd2l0aCBlbmRwb2ludHNcblx0XHR0aGlzLl9pdGVtc21hcCA9IG5ldyBJdGVtc01hcCgpO1xuXHRcdC8vIHNvcnRlZCBpbmRleFxuXHRcdHRoaXMuX2VuZHBvaW50cyA9IG5ldyBTb3J0ZWRBcnJheSgpO1xuXHRcdC8vIHN3aXBlIGluZGV4XG5cdFx0dGhpcy5faW5kZXggPSBbXTtcblx0fVxuXG5cblx0cmVmcmVzaChkaWZmcykge1xuXG5cdFx0Y29uc3QgcmVtb3ZlX2VuZHBvaW50cyA9IG5ldyBFbmRwb2ludFNldCgpO1xuXHRcdGNvbnN0IGluc2VydF9lbmRwb2ludHMgPSBuZXcgRW5kcG9pbnRTZXQoKTtcblxuXHRcdGxldCBpbnNlcnRfaXRlbXMgPSBbXTtcblx0XHRsZXQgcmVtb3ZlX2l0ZW1zID0gW107XG5cblx0XHRpZiAoZGlmZnMgPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpbnNlcnRfaXRlbXMgPSB0aGlzLnNyYy5nZXQoKSB8fCBbXTtcblx0XHRcdC8vIGNsZWFyIGFsbCBzdGF0ZVxuXHRcdFx0dGhpcy5faW5pdGlhbGlzZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBjb2xsZWN0IGluc2VydCBpdGVtcyBhbmQgcmVtb3ZlIGl0ZW1zXG5cdFx0XHRmb3IgKGNvbnN0IGRpZmYgb2YgZGlmZnMpIHtcblx0XHRcdFx0aWYgKGRpZmYubmV3ICE9IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGluc2VydF9pdGVtcy5wdXNoKGRpZmYubmV3KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZGlmZi5vbGQgIT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cmVtb3ZlX2l0ZW1zLnB1c2goZGlmZi5vbGQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Lypcblx0XHRcdHVucmVnaXN0ZXIgcmVtb3ZlIGl0ZW1zIGFjcm9zcyBhbGwgZW5kcG9pbnRzIFxuXHRcdFx0d2hlcmUgdGhleSB3ZXJlIHJlZ2lzdGVyZWQgKExPVywgQUNUSVZFLCBISUdIKSBcblx0XHQqL1xuXHRcdGZvciAoY29uc3QgaXRlbSBvZiByZW1vdmVfaXRlbXMpIHtcdFx0XHRcblx0XHRcdGZvciAoY29uc3QgZXAgb2YgdGhpcy5fZW5kcG9pbnRzLmxvb2t1cChpdGVtLml0dikpIHtcblx0XHRcdFx0Ly8gVE9ETzogY2hlY2sgaWYgdGhpcyBpcyBjb3JyZWN0XG5cdFx0XHRcdGNvbnN0IGJlY2FtZV9lbXB0eSA9IHRoaXMuX2l0ZW1zbWFwLnVucmVnaXN0ZXIoZXAsIGl0ZW0pO1xuXHRcdFx0XHRpZiAoYmVjYW1lX2VtcHR5KSByZW1vdmVfZW5kcG9pbnRzLmFkZChlcCk7XG5cdFx0XHR9XHRcblx0XHR9XG5cblx0XHQvKlxuXHRcdFx0cmVnaXN0ZXIgbmV3IGl0ZW1zIGFjcm9zcyBhbGwgZW5kcG9pbnRzIFxuXHRcdFx0d2hlcmUgdGhleSBzaG91bGQgYmUgcmVnaXN0ZXJlZCAoTE9XLCBISUdIKSBcblx0XHQqL1xuXHRcdGxldCBiZWNhbWVfbm9uZW1wdHk7XG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGluc2VydF9pdGVtcykge1xuXHRcdFx0Y29uc3QgW2xvdywgaGlnaF0gPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKGl0ZW0uaXR2KTtcblx0XHRcdGJlY2FtZV9ub25lbXB0eSA9IHRoaXMuX2l0ZW1zbWFwLnJlZ2lzdGVyKGxvdywgaXRlbSwgTE9XKTtcblx0XHRcdGlmIChiZWNhbWVfbm9uZW1wdHkpIGluc2VydF9lbmRwb2ludHMuYWRkKGxvdyk7XG5cdFx0XHRiZWNhbWVfbm9uZW1wdHkgPSB0aGlzLl9pdGVtc21hcC5yZWdpc3RlcihoaWdoLCBpdGVtLCBISUdIKTtcblx0XHRcdGlmIChiZWNhbWVfbm9uZW1wdHkpIGluc2VydF9lbmRwb2ludHMuYWRkKGhpZ2gpO1xuXHRcdH1cblxuXHRcdC8qXG5cdFx0XHRyZWZyZXNoIHNvcnRlZCBlbmRwb2ludHNcblx0XHRcdHBvc3NpYmxlIHRoYXQgYW4gZW5kcG9pbnQgaXMgcHJlc2VudCBpbiBib3RoIGxpc3RzXG5cdFx0XHR0aGlzIGlzIHByZXN1bWFibHkgbm90IGEgcHJvYmxlbSB3aXRoIFNvcnRlZEFycmF5LlxuXHRcdCovXG5cdFx0dGhpcy5fZW5kcG9pbnRzLnVwZGF0ZShcblx0XHRcdHJlbW92ZV9lbmRwb2ludHMubGlzdCgpLCBcblx0XHRcdGluc2VydF9lbmRwb2ludHMubGlzdCgpXG5cdFx0KTtcblxuXHRcdC8qXG5cdFx0XHRzd2lwZSBvdmVyIHRvIGVuc3VyZSB0aGF0IGFsbCBpdGVtcyBhcmUgYWN0aXZhdGVcblx0XHQqL1xuXHRcdGNvbnN0IGFjdGl2ZVNldCA9IG5ldyBTZXQoKTtcblx0XHRmb3IgKGNvbnN0IGVwIG9mIHRoaXMuX2VuZHBvaW50cy5hcnJheSkge1x0XG5cdFx0XHQvLyBBZGQgaXRlbXMgd2l0aCBlcCBhcyBsb3cgcG9pbnRcblx0XHRcdGZvciAobGV0IGl0ZW0gb2YgdGhpcy5faXRlbXNtYXAuZ2V0X2l0ZW1zX2J5X3JvbGUoZXAsIExPVykpIHtcblx0XHRcdFx0YWN0aXZlU2V0LmFkZChpdGVtKTtcblx0XHRcdH07XG5cdFx0XHQvLyBhY3RpdmF0ZSB1c2luZyBhY3RpdmVTZXRcblx0XHRcdGZvciAobGV0IGl0ZW0gb2YgYWN0aXZlU2V0KSB7XG5cdFx0XHRcdHRoaXMuX2l0ZW1zbWFwLnJlZ2lzdGVyKGVwLCBpdGVtLCBBQ1RJVkUpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gUmVtb3ZlIGl0ZW1zIHdpdGggcDEgYXMgaGlnaCBwb2ludFxuXHRcdFx0Zm9yIChsZXQgaXRlbSBvZiB0aGlzLl9pdGVtc21hcC5nZXRfaXRlbXNfYnlfcm9sZShlcCwgSElHSCkpIHtcblx0XHRcdFx0YWN0aXZlU2V0LmRlbGV0ZShpdGVtKTtcblx0XHRcdH07XHRcblx0XHR9XG5cdH1cblxuXHRfY292ZXJzIChvZmZzZXQpIHtcblx0XHRjb25zdCBlcCA9IGVuZHBvaW50LmZyb21faW5wdXQob2Zmc2V0KTtcblx0XHRjb25zdCBlcDEgPSB0aGlzLl9lbmRwb2ludHMubGUoZXApIHx8IGVuZHBvaW50Lk5FR19JTkY7XG5cdFx0Y29uc3QgZXAyID0gdGhpcy5fZW5kcG9pbnRzLmdlKGVwKSB8fCBlbmRwb2ludC5QT1NfSU5GO1xuXHRcdGlmIChlbmRwb2ludC5lcShlcDEsIGVwMikpIHtcblx0XHRcdHJldHVybiB0aGlzLl9pdGVtc21hcC5nZXRfaXRlbXNfYnlfcm9sZShlcDEsIEFDVElWRSk7XHRcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gZ2V0IGl0ZW1zIGZvciBib3RoIGVuZHBvaW50c1xuXHRcdFx0Y29uc3QgaXRlbXMxID0gdGhpcy5faXRlbXNtYXAuZ2V0X2l0ZW1zX2J5X3JvbGUoZXAxLCBBQ1RJVkUpO1xuXHRcdFx0Y29uc3QgaXRlbXMyID0gdGhpcy5faXRlbXNtYXAuZ2V0X2l0ZW1zX2J5X3JvbGUoZXAyLCBBQ1RJVkUpO1xuXHRcdFx0Ly8gcmV0dXJuIGFsbCBpdGVtcyB0aGF0IGFyZSBhY3RpdmUgaW4gYm90aCBlbmRwb2ludHNcblx0XHRcdGNvbnN0IGlkU2V0ID0gbmV3IFNldChpdGVtczEubWFwKGl0ZW0gPT4gaXRlbS5pZCkpO1xuXHRcdFx0cmV0dXJuIGl0ZW1zMi5maWx0ZXIoaXRlbSA9PiBpZFNldC5oYXMoaXRlbS5pZCkpO1xuXHRcdH1cblx0fVxuXG4gICAgLypcblx0XHRuZWFyYnkgKG9mZnNldClcbiAgICAqL1xuXHRuZWFyYnkob2Zmc2V0KSB7XG5cdFx0Y29uc3QgZXAgPSBlbmRwb2ludC5mcm9tX2lucHV0KG9mZnNldCk7XG5cblx0XHQvLyBjZW50ZXJcblx0XHRsZXQgY2VudGVyID0gdGhpcy5fY292ZXJzKGVwKVxuXHRcdGNvbnN0IGNlbnRlcl9oaWdoX2xpc3QgPSBbXTtcblx0XHRjb25zdCBjZW50ZXJfbG93X2xpc3QgPSBbXTtcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgY2VudGVyKSB7XG5cdFx0XHRjb25zdCBbbG93LCBoaWdoXSA9IGVuZHBvaW50LmZyb21faW50ZXJ2YWwoaXRlbS5pdHYpO1xuXHRcdFx0Y2VudGVyX2hpZ2hfbGlzdC5wdXNoKGhpZ2gpO1xuXHRcdFx0Y2VudGVyX2xvd19saXN0LnB1c2gobG93KTsgICAgXG5cdFx0fVxuXG5cdFx0Ly8gcHJldiBoaWdoXG5cdFx0bGV0IHByZXZfaGlnaCA9IGVwO1xuXHRcdGxldCBpdGVtcztcblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0cHJldl9oaWdoID0gdGhpcy5fZW5kcG9pbnRzLmx0KHByZXZfaGlnaCkgfHwgZW5kcG9pbnQuTkVHX0lORjtcblx0XHRcdGlmIChwcmV2X2hpZ2hbMF0gPT0gbnVsbCkge1xuXHRcdFx0XHRicmVha1xuXHRcdFx0fVxuXHRcdFx0aXRlbXMgPSB0aGlzLl9pdGVtc21hcC5nZXRfaXRlbXNfYnlfcm9sZShwcmV2X2hpZ2gsIEhJR0gpO1xuXHRcdFx0aWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBuZXh0IGxvd1xuXHRcdGxldCBuZXh0X2xvdyA9IGVwO1xuXHRcdHdoaWxlICh0cnVlKSB7XG5cdFx0XHRuZXh0X2xvdyA9IHRoaXMuX2VuZHBvaW50cy5ndChuZXh0X2xvdykgfHwgZW5kcG9pbnQuUE9TX0lORlxuXHRcdFx0aWYgKG5leHRfbG93WzBdID09IG51bGwpIHtcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHRcdGl0ZW1zID0gdGhpcy5faXRlbXNtYXAuZ2V0X2l0ZW1zX2J5X3JvbGUobmV4dF9sb3csIExPVyk7XG5cdFx0XHRpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRicmVha1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBuZWFyYnlfZnJvbShcblx0XHRcdHByZXZfaGlnaCwgXG5cdFx0XHRjZW50ZXJfbG93X2xpc3QsIFxuXHRcdFx0Y2VudGVyLFxuXHRcdFx0Y2VudGVyX2hpZ2hfbGlzdCxcblx0XHRcdG5leHRfbG93XG5cdFx0KTtcblx0fVxufSIsImltcG9ydCB7IGludGVydmFsIH0gZnJvbSBcIi4vaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyBtb3Rpb25fdXRpbHMgfSBmcm9tIFwiLi9jb21tb24uanNcIjtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5CQVNFIFNFR01FTlRcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qXG5cdEFic3RyYWN0IEJhc2UgQ2xhc3MgZm9yIFNlZ21lbnRzXG5cbiAgICBjb25zdHJ1Y3RvcihpbnRlcnZhbClcblxuICAgIC0gaW50ZXJ2YWw6IGludGVydmFsIG9mIHZhbGlkaXR5IG9mIHNlZ21lbnRcbiAgICAtIGR5bmFtaWM6IHRydWUgaWYgc2VnbWVudCBpcyBkeW5hbWljXG4gICAgLSB2YWx1ZShvZmZzZXQpOiB2YWx1ZSBvZiBzZWdtZW50IGF0IG9mZnNldFxuICAgIC0gcXVlcnkob2Zmc2V0KTogc3RhdGUgb2Ygc2VnbWVudCBhdCBvZmZzZXRcbiovXG5cbmV4cG9ydCBjbGFzcyBCYXNlU2VnbWVudCB7XG5cblx0Y29uc3RydWN0b3IoaXR2KSB7XG5cdFx0dGhpcy5faXR2ID0gaXR2O1xuXHR9XG5cblx0Z2V0IGl0digpIHtyZXR1cm4gdGhpcy5faXR2O31cblxuICAgIC8qKiBcbiAgICAgKiBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc1xuICAgICAqIHJldHVybnMge3ZhbHVlLCBkeW5hbWljfTtcbiAgICAqL1xuICAgIHN0YXRlKG9mZnNldCkge1xuICAgIFx0dGhyb3cgbmV3IEVycm9yKFwibm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNvbnZlbmllbmNlIGZ1bmN0aW9uIHJldHVybmluZyB0aGUgc3RhdGUgb2YgdGhlIHNlZ21lbnRcbiAgICAgKiBAcGFyYW0geyp9IG9mZnNldCBcbiAgICAgKiBAcmV0dXJucyBcbiAgICAgKi9cbiAgICBxdWVyeShvZmZzZXQpIHtcbiAgICAgICAgaWYgKGludGVydmFsLmNvdmVyc19wb2ludCh0aGlzLl9pdHYsIG9mZnNldCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7Li4udGhpcy5zdGF0ZShvZmZzZXQpLCBvZmZzZXR9O1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGR5bmFtaWM6ZmFsc2UsIG9mZnNldH07XG4gICAgfVxufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBTVEFUSUMgU0VHTUVOVFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5leHBvcnQgY2xhc3MgU3RhdGljU2VnbWVudCBleHRlbmRzIEJhc2VTZWdtZW50IHtcblxuXHRjb25zdHJ1Y3RvcihpdHYsIGRhdGEpIHtcbiAgICAgICAgc3VwZXIoaXR2KTtcblx0XHR0aGlzLl92YWx1ZSA9IGRhdGE7XG5cdH1cblxuXHRzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHt2YWx1ZTogdGhpcy5fdmFsdWUsIGR5bmFtaWM6ZmFsc2V9XG5cdH1cbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBNT1RJT04gU0VHTUVOVFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5leHBvcnQgY2xhc3MgTW90aW9uU2VnbWVudCBleHRlbmRzIEJhc2VTZWdtZW50IHtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihpdHYsIGRhdGEpIHtcbiAgICAgICAgc3VwZXIoaXR2KTtcbiAgICAgICAgdGhpcy5fdmVjdG9yID0gZGF0YTtcbiAgICB9XG5cbiAgICBzdGF0ZShvZmZzZXQpIHtcbiAgICAgICAgY29uc3QgW3AsdixhLHRdID0gbW90aW9uX3V0aWxzLmNhbGN1bGF0ZSh0aGlzLl92ZWN0b3IsIG9mZnNldCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcCwgZHluYW1pYzogKHYgIT0gMCB8fCBhICE9IDAgKSxcbiAgICAgICAgICAgIHZlY3RvcjogW3AsIHYsIGEsIHRdLFxuICAgICAgICB9XG4gICAgfVxufVxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIFRSQU5TSVRJT04gU0VHTUVOVFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKlxuICAgIFN1cHBvcnRlZCBlYXNpbmcgZnVuY3Rpb25zXG4gICAgXCJlYXNlLWluXCI6XG4gICAgXCJlYXNlLW91dFwiOlxuICAgIFwiZWFzZS1pbi1vdXRcIlxuKi9cblxuZnVuY3Rpb24gZWFzZWluICh0cykge1xuICAgIHJldHVybiBNYXRoLnBvdyh0cywyKTsgIFxufVxuZnVuY3Rpb24gZWFzZW91dCAodHMpIHtcbiAgICByZXR1cm4gMSAtIGVhc2VpbigxIC0gdHMpO1xufVxuZnVuY3Rpb24gZWFzZWlub3V0ICh0cykge1xuICAgIGlmICh0cyA8IC41KSB7XG4gICAgICAgIHJldHVybiBlYXNlaW4oMiAqIHRzKSAvIDI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICgyIC0gZWFzZWluKDIgKiAoMSAtIHRzKSkpIC8gMjtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2l0aW9uU2VnbWVudCBleHRlbmRzIEJhc2VTZWdtZW50IHtcblxuXHRjb25zdHJ1Y3RvcihpdHYsIGRhdGEpIHtcblx0XHRzdXBlcihpdHYpO1xuICAgICAgICBsZXQge3YwLCB2MSwgZWFzaW5nfSA9IGRhdGE7XG4gICAgICAgIGxldCBbdDAsIHQxXSA9IHRoaXMuX2l0di5zbGljZSgwLDIpO1xuXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgdHJhbnNpdGlvbiBmdW5jdGlvblxuICAgICAgICB0aGlzLl9keW5hbWljID0gdjEtdjAgIT0gMDtcbiAgICAgICAgdGhpcy5fdHJhbnMgPSBmdW5jdGlvbiAodHMpIHtcbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdHMgdG8gW3QwLHQxXS1zcGFjZVxuICAgICAgICAgICAgLy8gLSBzaGlmdCBmcm9tIFt0MCx0MV0tc3BhY2UgdG8gWzAsKHQxLXQwKV0tc3BhY2VcbiAgICAgICAgICAgIC8vIC0gc2NhbGUgZnJvbSBbMCwodDEtdDApXS1zcGFjZSB0byBbMCwxXS1zcGFjZVxuICAgICAgICAgICAgdHMgPSB0cyAtIHQwO1xuICAgICAgICAgICAgdHMgPSB0cy9wYXJzZUZsb2F0KHQxLXQwKTtcbiAgICAgICAgICAgIC8vIGVhc2luZyBmdW5jdGlvbnMgc3RyZXRjaGVzIG9yIGNvbXByZXNzZXMgdGhlIHRpbWUgc2NhbGUgXG4gICAgICAgICAgICBpZiAoZWFzaW5nID09IFwiZWFzZS1pblwiKSB7XG4gICAgICAgICAgICAgICAgdHMgPSBlYXNlaW4odHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlYXNpbmcgPT0gXCJlYXNlLW91dFwiKSB7XG4gICAgICAgICAgICAgICAgdHMgPSBlYXNlb3V0KHRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWFzaW5nID09IFwiZWFzZS1pbi1vdXRcIikge1xuICAgICAgICAgICAgICAgIHRzID0gZWFzZWlub3V0KHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGxpbmVhciB0cmFuc2l0aW9uIGZyb20gdjAgdG8gdjEsIGZvciB0aW1lIHZhbHVlcyBbMCwxXVxuICAgICAgICAgICAgdHMgPSBNYXRoLm1heCh0cywgMCk7XG4gICAgICAgICAgICB0cyA9IE1hdGgubWluKHRzLCAxKTtcbiAgICAgICAgICAgIHJldHVybiB2MCArICh2MS12MCkqdHM7XG4gICAgICAgIH1cblx0fVxuXG5cdHN0YXRlKG9mZnNldCkge1xuICAgICAgICByZXR1cm4ge3ZhbHVlOiB0aGlzLl90cmFucyhvZmZzZXQpLCBkeW5hbWljOnRoaXMuX2R5bmFtaWN9XG5cdH1cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIElOVEVSUE9MQVRJT04gU0VHTUVOVFxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhbiBpbnRlcnBvbGF0b3IgZm9yIG5lYXJlc3QgbmVpZ2hib3IgaW50ZXJwb2xhdGlvbiB3aXRoXG4gKiBleHRyYXBvbGF0aW9uIHN1cHBvcnQuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdHVwbGVzIC0gQW4gYXJyYXkgb2YgW3ZhbHVlLCBvZmZzZXRdIHBhaXJzLCB3aGVyZSB2YWx1ZSBpcyB0aGVcbiAqIHBvaW50J3MgdmFsdWUgYW5kIG9mZnNldCBpcyB0aGUgY29ycmVzcG9uZGluZyBvZmZzZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IC0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIG9mZnNldCBhbmQgcmV0dXJucyB0aGVcbiAqIGludGVycG9sYXRlZCBvciBleHRyYXBvbGF0ZWQgdmFsdWUuXG4gKi9cblxuZnVuY3Rpb24gaW50ZXJwb2xhdGUodHVwbGVzKSB7XG5cbiAgICBpZiAodHVwbGVzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGludGVycG9sYXRvciAoKSB7cmV0dXJuIHVuZGVmaW5lZDt9XG4gICAgfSBlbHNlIGlmICh0dXBsZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGludGVycG9sYXRvciAoKSB7cmV0dXJuIHR1cGxlc1swXVswXTt9XG4gICAgfVxuXG4gICAgLy8gU29ydCB0aGUgdHVwbGVzIGJ5IHRoZWlyIG9mZnNldHNcbiAgICBjb25zdCBzb3J0ZWRUdXBsZXMgPSBbLi4udHVwbGVzXS5zb3J0KChhLCBiKSA9PiBhWzFdIC0gYlsxXSk7XG4gIFxuICAgIHJldHVybiBmdW5jdGlvbiBpbnRlcnBvbGF0b3Iob2Zmc2V0KSB7XG4gICAgICAvLyBIYW5kbGUgZXh0cmFwb2xhdGlvbiBiZWZvcmUgdGhlIGZpcnN0IHBvaW50XG4gICAgICBpZiAob2Zmc2V0IDw9IHNvcnRlZFR1cGxlc1swXVsxXSkge1xuICAgICAgICBjb25zdCBbdmFsdWUxLCBvZmZzZXQxXSA9IHNvcnRlZFR1cGxlc1swXTtcbiAgICAgICAgY29uc3QgW3ZhbHVlMiwgb2Zmc2V0Ml0gPSBzb3J0ZWRUdXBsZXNbMV07XG4gICAgICAgIHJldHVybiB2YWx1ZTEgKyAoKG9mZnNldCAtIG9mZnNldDEpICogKHZhbHVlMiAtIHZhbHVlMSkgLyAob2Zmc2V0MiAtIG9mZnNldDEpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGV4dHJhcG9sYXRpb24gYWZ0ZXIgdGhlIGxhc3QgcG9pbnRcbiAgICAgIGlmIChvZmZzZXQgPj0gc29ydGVkVHVwbGVzW3NvcnRlZFR1cGxlcy5sZW5ndGggLSAxXVsxXSkge1xuICAgICAgICBjb25zdCBbdmFsdWUxLCBvZmZzZXQxXSA9IHNvcnRlZFR1cGxlc1tzb3J0ZWRUdXBsZXMubGVuZ3RoIC0gMl07XG4gICAgICAgIGNvbnN0IFt2YWx1ZTIsIG9mZnNldDJdID0gc29ydGVkVHVwbGVzW3NvcnRlZFR1cGxlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHZhbHVlMSArICgob2Zmc2V0IC0gb2Zmc2V0MSkgKiAodmFsdWUyIC0gdmFsdWUxKSAvIChvZmZzZXQyIC0gb2Zmc2V0MSkpO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEZpbmQgdGhlIG5lYXJlc3QgcG9pbnRzIHRvIHRoZSBsZWZ0IGFuZCByaWdodFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZWRUdXBsZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGlmIChvZmZzZXQgPj0gc29ydGVkVHVwbGVzW2ldWzFdICYmIG9mZnNldCA8PSBzb3J0ZWRUdXBsZXNbaSArIDFdWzFdKSB7XG4gICAgICAgICAgY29uc3QgW3ZhbHVlMSwgb2Zmc2V0MV0gPSBzb3J0ZWRUdXBsZXNbaV07XG4gICAgICAgICAgY29uc3QgW3ZhbHVlMiwgb2Zmc2V0Ml0gPSBzb3J0ZWRUdXBsZXNbaSArIDFdO1xuICAgICAgICAgIC8vIExpbmVhciBpbnRlcnBvbGF0aW9uIGZvcm11bGE6IHkgPSB5MSArICggKHggLSB4MSkgKiAoeTIgLSB5MSkgLyAoeDIgLSB4MSkgKVxuICAgICAgICAgIHJldHVybiB2YWx1ZTEgKyAoKG9mZnNldCAtIG9mZnNldDEpICogKHZhbHVlMiAtIHZhbHVlMSkgLyAob2Zmc2V0MiAtIG9mZnNldDEpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIC8vIEluIGNhc2UgdGhlIG9mZnNldCBkb2VzIG5vdCBmYWxsIHdpdGhpbiBhbnkgcmFuZ2UgKHNob3VsZCBiZSBjb3ZlcmVkIGJ5IHRoZSBwcmV2aW91cyBjb25kaXRpb25zKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xufVxuICBcblxuZXhwb3J0IGNsYXNzIEludGVycG9sYXRpb25TZWdtZW50IGV4dGVuZHMgQmFzZVNlZ21lbnQge1xuXG4gICAgY29uc3RydWN0b3IoaXR2LCB0dXBsZXMpIHtcbiAgICAgICAgc3VwZXIoaXR2KTtcbiAgICAgICAgLy8gc2V0dXAgaW50ZXJwb2xhdGlvbiBmdW5jdGlvblxuICAgICAgICB0aGlzLl90cmFucyA9IGludGVycG9sYXRlKHR1cGxlcyk7XG4gICAgfVxuXG4gICAgc3RhdGUob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7dmFsdWU6IHRoaXMuX3RyYW5zKG9mZnNldCksIGR5bmFtaWM6dHJ1ZX07XG4gICAgfVxufVxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBMT0FEIFNFR01FTlRcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRfc2VnbWVudChpdHYsIGl0ZW0pIHtcbiAgICBsZXQge3R5cGU9XCJzdGF0aWNcIiwgZGF0YX0gPSBpdGVtO1xuICAgIGlmICh0eXBlID09IFwic3RhdGljXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdGF0aWNTZWdtZW50KGl0diwgZGF0YSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09IFwidHJhbnNpdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNpdGlvblNlZ21lbnQoaXR2LCBkYXRhKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJpbnRlcnBvbGF0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnBvbGF0aW9uU2VnbWVudChpdHYsIGRhdGEpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcIm1vdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW90aW9uU2VnbWVudChpdHYsIGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidW5yZWNvZ25pemVkIHNlZ21lbnQgdHlwZVwiLCB0eXBlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgKiBhcyBzcmNwcm9wIGZyb20gXCIuL3V0aWwvYXBpX3NyY3Byb3AuanNcIjtcbmltcG9ydCB7IExheWVyIH0gZnJvbSBcIi4vbGF5ZXJfYmFzZS5qc1wiO1xuaW1wb3J0IHsgaXNfY29sbGVjdGlvbl9wcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyX2NvbGxlY3Rpb24uanNcIjtcbmltcG9ydCB7IGlzX29iamVjdF9wcm92aWRlcn0gZnJvbSBcIi4vcHJvdmlkZXJfb2JqZWN0LmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleCB9IGZyb20gXCIuL25lYXJieV9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbG9hZF9zZWdtZW50IH0gZnJvbSBcIi4vdXRpbC9zZWdtZW50cy5qc1wiO1xuaW1wb3J0IHsgdG9TdGF0ZSwgaXNfZmluaXRlX251bWJlciwgY2hlY2tfbnVtYmVyfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuaW1wb3J0IHsgZW5kcG9pbnQsIGludGVydmFsIH0gZnJvbSBcIi4vdXRpbC9pbnRlcnZhbHMuanNcIjtcblxuXG5leHBvcnQgZnVuY3Rpb24gaXNfbGVhZl9sYXllcihvYmopIHtcbiAgICByZXR1cm4gKChvYmogaW5zdGFuY2VvZiBMYXllcikgJiYgb2JqLmlzTGVhZik7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBMRUFGIExBWUVSXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZWFmX2xheWVyKG9wdGlvbnM9e30pIHtcbiAgICBjb25zdCB7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICBudW1lcmljPWZhbHNlLCBcbiAgICAgICAgbXV0YWJsZT10cnVlLCBcbiAgICAgICAgbWFzayxcbiAgICAgICAgLi4ub3B0c30gPSBvcHRpb25zO1xuXG4gICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXIoe1xuICAgICAgICBDYWNoZUNsYXNzOkxlYWZMYXllckNhY2hlLCBcbiAgICAgICAgLi4ub3B0cyxcbiAgICB9KTtcblxuICAgIC8vIHJlc3RyaWN0aW9uc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgXCJudW1lcmljXCIsIHtnZXQ6ICgpID0+IG51bWVyaWN9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobGF5ZXIsIFwibXV0YWJsZVwiLCB7Z2V0OiAoKSA9PiBtdXRhYmxlfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGxheWVyLCBcIml0ZW1zT25seVwiLCB7Z2V0OiAoKSA9PiB0cnVlfSk7XG5cbiAgICAvLyBudW1lcmljIG1hc2sgLSByZXBsYWNlcyB1bmRlZmluZWQgZm9yIG51bWVyaWMgbGF5ZXJzXG4gICAgaWYgKG1hc2sgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNoZWNrX251bWJlcihcIm1hc2tcIiwgbWFzayk7XG4gICAgfVxuICAgIGxheWVyLm1hc2sgPSBtYXNrO1xuXG4gICAgLy8gc2V0dXAgcHJvdmlkZXIgYXMgcHJvcGVydHlcbiAgICBzcmNwcm9wLmFkZFN0YXRlKGxheWVyKTtcbiAgICBzcmNwcm9wLmFkZE1ldGhvZHMobGF5ZXIpO1xuICAgIGxheWVyLnNyY3Byb3BfcmVnaXN0ZXIoXCJwcm92aWRlclwiKTtcbiAgICBsYXllci5zcmNwcm9wX2NoZWNrID0gZnVuY3Rpb24gKHByb3BOYW1lLCBvYmopIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwicHJvdmlkZXJcIikge1xuICAgICAgICAgICAgaWYgKCEoaXNfY29sbGVjdGlvbl9wcm92aWRlcihvYmopKSAmJiAhKGlzX29iamVjdF9wcm92aWRlcihvYmopKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCJvYmpcIiBtdXN0IGNvbGxlY3Rpb25Qcm92aWRlciBvciBvYmplY3RQcm92aWRlciAke29ian1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvYmo7ICAgIFxuICAgICAgICB9XG4gICAgfVxuICAgIGxheWVyLnNyY3Byb3Bfb25jaGFuZ2UgPSBmdW5jdGlvbiAocHJvcE5hbWUsIGVBcmcpIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwicHJvdmlkZXJcIikge1xuICAgICAgICAgICAgaWYgKGVBcmcgPT0gXCJyZXNldFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzX2NvbGxlY3Rpb25fcHJvdmlkZXIobGF5ZXIucHJvdmlkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmluZGV4ID0gbmV3IE5lYXJieUluZGV4KGxheWVyLnByb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzX29iamVjdF9wcm92aWRlcihsYXllci5wcm92aWRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuaW5kZXggPSBuZXcgTmVhcmJ5SW5kZXgobGF5ZXIucHJvdmlkZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBpZiAobGF5ZXIuaW5kZXggIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzX2NvbGxlY3Rpb25fcHJvdmlkZXIobGF5ZXIucHJvdmlkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmluZGV4LnJlZnJlc2goZUFyZyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc19vYmplY3RfcHJvdmlkZXIobGF5ZXIucHJvdmlkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyLmluZGV4LnJlZnJlc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGF5ZXIub25jaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAgICAgICAgXG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBjb252ZW5pZW5jZSBtZXRob2QgZm9yIGdldHRpbmcgaXRlbXMgdmFsaWQgYXQgb2Zmc2V0XG4gICAgICogb25seSBpdGVtcyBsYXllciBzdXBwb3J0cyB0aGlzIG1ldGhvZFxuICAgICAqL1xuICAgIGxheWVyLmdldF9pdGVtcyA9IGZ1bmN0aW9uIGdldF9pdGVtcyhvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5sYXllci5pbmRleC5uZWFyYnkob2Zmc2V0KS5jZW50ZXJdO1xuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKiBMQVlFUiBVUERBVEUgQVBJXG4gICAgICogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgaWYgKCFsYXllci5yZWFkT25seSkge1xuICAgICAgICBsYXllci51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoY2hhbmdlcykge1xuICAgICAgICAgICAgcmV0dXJuIGxheWVyX3VwZGF0ZShsYXllciwgY2hhbmdlcyk7XG4gICAgICAgIH1cbiAgICAgICAgbGF5ZXIuYXBwZW5kID0gZnVuY3Rpb24gYXBwZW5kKGl0ZW1zLCBvZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXllcl9hcHBlbmQobGF5ZXIsIGl0ZW1zLCBvZmZzZXQpO1xuICAgICAgICB9ICAgIFxuICAgIH1cbiBcbiAgICAvLyBpbml0aWFsaXNlXG4gICAgbGF5ZXIucHJvdmlkZXIgPSBwcm92aWRlcjtcblxuICAgIHJldHVybiBsYXllcjtcbn1cblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgTEVBRiBMQVlFUiBDQUNIRVxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKlxuICAgIExlYWZMYXllcnMgaGF2ZSBhIENvbGxlY3Rpb25Qcm92aWRlciBvciBhIE9iamVjdFByb3ZpZGVyIGFzIHByb3ZpZGVyIFxuICAgIGFuZCB1c2UgYSBzcGVjaWZpYyBjYWNoZSBpbXBsZW1lbnRhdGlvbiwgYXMgb2JqZWN0cyBpbiB0aGUgXG4gICAgaW5kZXggYXJlIGFzc3VtZWQgdG8gYmUgaXRlbXMgZnJvbSB0aGUgcHJvdmlkZXIsIG5vdCBvdGhlciBsYXllciBvYmplY3RzLiBcbiAgICBNb3Jlb3ZlciwgcXVlcmllcyBhcmUgbm90IHJlc29sdmVkIGRpcmVjdGx5IG9uIHRoZSBpdGVtcyBpbiB0aGUgaW5kZXgsIGJ1dFxuICAgIHJhdGhlciBmcm9tIGNvcnJlc3BvbmRpbmcgc2VnbWVudCBvYmplY3RzLCBpbnN0YW50aWF0ZWQgZnJvbSBpdGVtcy5cblxuICAgIENhY2hpbmcgaGVyZSBhcHBsaWVzIHRvIG5lYXJieSBzdGF0ZSBhbmQgc2VnbWVudCBvYmplY3RzLlxuKi9cblxuY2xhc3MgTGVhZkxheWVyQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGxheWVyKSB7XG4gICAgICAgIC8vIGxheWVyXG4gICAgICAgIHRoaXMuX2xheWVyID0gbGF5ZXI7XG4gICAgICAgIC8vIGNhY2hlZCBuZWFyYnkgb2JqZWN0XG4gICAgICAgIHRoaXMuX25lYXJieSA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gY2FjaGVkIHNlZ21lbnRcbiAgICAgICAgdGhpcy5fc2VnbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gcXVlcnkgb3B0aW9uc1xuICAgICAgICB0aGlzLl9xdWVyeV9vcHRpb25zID0ge1xuICAgICAgICAgICAgdmFsdWVGdW5jOiB0aGlzLl9sYXllci52YWx1ZUZ1bmMsXG4gICAgICAgICAgICBzdGF0ZUZ1bmM6IHRoaXMuX2xheWVyLnN0YXRlRnVuYyxcbiAgICAgICAgICAgIG51bWVyaWM6IHRoaXMuX2xheWVyLm51bWVyaWMsXG4gICAgICAgICAgICBtYXNrOiB0aGlzLl9sYXllci5tYXNrXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0IHNyYygpIHtyZXR1cm4gdGhpcy5fbGF5ZXJ9O1xuICAgIGdldCBzZWdtZW50KCkge3JldHVybiB0aGlzLl9zZWdtZW50fTtcblxuICAgIHF1ZXJ5KG9mZnNldCkge1xuICAgICAgICBjb25zdCBuZWVkX2luZGV4X2xvb2t1cCA9IChcbiAgICAgICAgICAgIHRoaXMuX25lYXJieSA9PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICFpbnRlcnZhbC5jb3ZlcnNfZW5kcG9pbnQodGhpcy5fbmVhcmJ5Lml0diwgb2Zmc2V0KVxuICAgICAgICApO1xuICAgICAgICBpZiAobmVlZF9pbmRleF9sb29rdXApIHtcbiAgICAgICAgICAgIC8vIGNhY2hlIG1pc3NcbiAgICAgICAgICAgIHRoaXMuX25lYXJieSA9IHRoaXMuX2xheWVyLmluZGV4Lm5lYXJieShvZmZzZXQpO1xuICAgICAgICAgICAgbGV0IHtpdHYsIGNlbnRlcn0gPSB0aGlzLl9uZWFyYnk7XG4gICAgICAgICAgICB0aGlzLl9zZWdtZW50cyA9IGNlbnRlci5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZF9zZWdtZW50KGl0diwgaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwZXJmb3JtIHF1ZXJpZXNcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gdGhpcy5fc2VnbWVudHMubWFwKChzZWcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzZWcucXVlcnkob2Zmc2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBzaW5nbGUgcmVzdWx0IHN0YXRlXG4gICAgICAgIHJldHVybiB0b1N0YXRlKHRoaXMuX3NlZ21lbnRzLCBzdGF0ZXMsIG9mZnNldCwgdGhpcy5fcXVlcnlfb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuX25lYXJieSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fc2VnbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cblxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBMQVlFUiBVUERBVEVcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBOT1RFIC0gbGF5ZXIgdXBkYXRlIGlzIGVzc2VudGlhbGx5IGFib3V0IHN0YXRlUHJvdmlkZXIgdXBkYXRlLlxuICogc28gdGhlc2UgbWV0aG9kcyBjb3VsZCAoZm9yIHRoZSBtb3N0IHBhcnQpIGJlIG1vdmVkIHRvIHRoZSBwcm92aWRlci5cbiAqIEhvd2V2ZXIsIHVwZGF0ZV9hcHBlbmQgYmVuZWZpdHMgZnJvbSB1c2luZyB0aGUgaW5kZXggb2YgdGhlIGxheWVyLFxuICogc28gd2Uga2VlcCBpdCBoZXJlIGZvciBub3cuIFxuICovXG5cbi8qXG4gICAgSXRlbXMgTGF5ZXIgZm9yd2FyZHMgdXBkYXRlIHRvIHN0YXRlUHJvdmlkZXJcbiovXG5mdW5jdGlvbiBsYXllcl91cGRhdGUobGF5ZXIsIGNoYW5nZXM9e30pIHtcblxuICAgIGNoYW5nZXMuaW5zZXJ0ID8/PSBbXTtcblxuICAgIC8vIGNoZWNrIG51bWJlciByZXN0cmljdGlvblxuICAgIC8vIGNoZWNrIHRoYXQgc3RhdGljIGl0ZW1zIGFyZSByZXN0cmljdGVkIHRvIG51bWJlcnNcbiAgICAvLyBvdGhlciBpdGVtIHR5cGVzIGFyZSByZXN0cmljdGVkIHRvIG51bWJlcnMgYnkgZGVmYXVsdFxuICAgIGlmIChsYXllci5pc051bWJlck9ubHkpIHtcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBjaGFuZ2VzLmluc2VydCkge1xuICAgICAgICAgICAgaXRlbS50eXBlID8/PSBcInN0YXRpY1wiO1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PSBcInN0YXRpY1wiICYmICFpc19maW5pdGVfbnVtYmVyKGl0ZW0uZGF0YSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExheWVyIGlzIG51bWJlciBvbmx5LCBidXQgaXRlbSAke2l0ZW19IGlzIG5vdCBhIG51bWJlcmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzX2NvbGxlY3Rpb25fcHJvdmlkZXIobGF5ZXIucHJvdmlkZXIpKSB7XG4gICAgICAgIHJldHVybiBsYXllci5wcm92aWRlci51cGRhdGUoY2hhbmdlcyk7XG4gICAgfSBlbHNlIGlmIChpc19vYmplY3RfcHJvdmlkZXIobGF5ZXIucHJvdmlkZXIpKSB7ICAgICBcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIGluc2VydD1bXSxcbiAgICAgICAgICAgIHJlbW92ZT1bXSxcbiAgICAgICAgICAgIHJlc2V0PWZhbHNlXG4gICAgICAgIH0gPSBjaGFuZ2VzO1xuICAgICAgICBpZiAocmVzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXllci5wcm92aWRlci5zZXQoaW5zZXJ0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKGxheWVyLnByb3ZpZGVyLmdldCgpIHx8IFtdKVxuICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IFtpdGVtLmlkLCBpdGVtXSkpO1xuICAgICAgICAgICAgLy8gcmVtb3ZlXG4gICAgICAgICAgICByZW1vdmUuZm9yRWFjaCgoaWQpID0+IG1hcC5kZWxldGUoaWQpKTtcbiAgICAgICAgICAgIC8vIGluc2VydFxuICAgICAgICAgICAgaW5zZXJ0LmZvckVhY2goKGl0ZW0pID0+IG1hcC5zZXQoaXRlbS5pZCwgaXRlbSkpO1xuICAgICAgICAgICAgLy8gc2V0XG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20obWFwLnZhbHVlcygpKTtcbiAgICAgICAgICAgIHJldHVybiBsYXllci5wcm92aWRlci5zZXQoaXRlbXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuICAgIFxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgTEFZRVIgQVBQRU5EXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogYXBwZW5kIGl0ZW1zIHRvIGxheWVyIGF0IG9mZnNldFxuICogXG4gKiBhcHBlbmQgaW1wbGllcyB0aGF0IHByZS1leGlzdGluZyBpdGVtcyBiZXlvbmQgb2Zmc2V0LFxuICogd2lsbCBlaXRoZXIgYmUgcmVtb3ZlZCBvciB0cnVuY2F0ZWQsIHNvIHRoYXQgdGhlIGxheWVyXG4gKiBpcyBlbXB0eSBhZnRlciBvZmZzZXQuXG4gKiBcbiAqIGl0ZW1zIHdpbGwgb25seSBiZSBpbnNlcnRlZCBhZnRlciBvZmZzZXQsIHNvIGFueSBuZXdcbiAqIGl0ZW0gYmVmb3JlIG9mZnNldCB3aWxsIGJlIHRydW5jYXRlZCBvciBkcm9wcGVkLlxuICogXG4gKiBuZXcgaXRlbXMgd2lsbCBvbmx5IGJlIGJlIGFwcGxpZWQgZm9yIHQgPj0gb2Zmc2V0XG4gKiBvbGQgaXRlbXMgd2lsbCBiZSBrZXB0IGZvciB0IDwgb2Zmc2V0XG4gKiBcbiAqIFxuICovXG5mdW5jdGlvbiBsYXllcl9hcHBlbmQobGF5ZXIsIGl0ZW1zLCBvZmZzZXQpIHtcbiAgICBjb25zdCBlcCA9IGVuZHBvaW50LmZyb21faW5wdXQob2Zmc2V0KTtcbiAgICBcbiAgICAvLyB0cnVuY2F0ZSBvciByZW1vdmUgbmV3IGl0ZW1zIGJlZm9yZSBvZmZzZXRcbiAgICBjb25zdCBpbnNlcnRfaXRlbXMgPSBpdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAvLyBrZWVwIG9ubHkgaXRlbXMgd2l0aCBpdHYuaGlnaCA+PSBvZmZzZXRcbiAgICAgICAgICAgIGNvbnN0IGhpZ2hFcCA9IGVuZHBvaW50LmZyb21faW50ZXJ2YWwoaXRlbS5pdHYpWzFdO1xuICAgICAgICAgICAgcmV0dXJuIGVuZHBvaW50LmdlKGhpZ2hFcCwgZXApO1xuICAgICAgICB9KVxuICAgICAgICAubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAvLyB0cnVuY2F0ZSBpdGVtIG92ZXJsYXBwaW5nIG9mZnNldCBpdHYubG93PW9mZnNldFxuICAgICAgICAgICAgaWYgKGludGVydmFsLmNvdmVyc19lbmRwb2ludChpdGVtLml0diwgZXApKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3X2l0ZW0gPSB7Li4uaXRlbX07XG4gICAgICAgICAgICAgICAgbmV3X2l0ZW0uaXR2ID0gW29mZnNldCwgaXRlbS5pdHZbMV0sIHRydWUsIGl0ZW0uaXR2WzNdXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3X2l0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgLy8gY29uc29sZS5sb2coXCJpbnNlcnRcIiwgaW5zZXJ0X2l0ZW1zKTtcblxuICAgIC8vIHRydW5jYXRlIHByZS1leGlzdGluZyBpdGVtcyBvdmVybGFwcGluZyBvZmZzZXRcbiAgICBjb25zdCBtb2RpZnlfaXRlbXMgPSBsYXllci5pbmRleC5uZWFyYnkob2Zmc2V0KS5jZW50ZXIubWFwKChpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld19pdGVtID0gey4uLml0ZW19O1xuICAgICAgICBuZXdfaXRlbS5pdHYgPSBbaXRlbS5pdHZbMF0sIG9mZnNldCwgaXRlbS5pdHZbMl0sIGZhbHNlXTtcbiAgICAgICAgcmV0dXJuIG5ld19pdGVtO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIGNvbnNvbGUubG9nKFwibW9kaWZ5XCIsIG1vZGlmeV9pdGVtcyk7XG5cbiAgICAvLyByZW1vdmUgcHJlLWV4aXN0aW5nIGZ1dHVyZSAtIGl0ZW1zIGNvdmVyaW5nIGl0di5sb3cgPiBvZmZzZXRcbiAgICBjb25zdCByZW1vdmUgPSBsYXllci5wcm92aWRlci5nZXQoKVxuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsb3dFcCA9IGVuZHBvaW50LmZyb21faW50ZXJ2YWwoaXRlbS5pdHYpWzBdO1xuICAgICAgICAgICAgcmV0dXJuIGVuZHBvaW50Lmd0KGxvd0VwLCBlcCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmlkO1xuICAgICAgICB9KTtcblxuICAgIC8vIGNvbnNvbGUubG9nKFwicmVtb3ZlXCIsIHJlbW92ZSk7XG5cbiAgICAvLyBsYXllciB1cGRhdGVcbiAgICBjb25zdCBpbnNlcnQgPSBbLi4ubW9kaWZ5X2l0ZW1zLCAuLi5pbnNlcnRfaXRlbXNdO1xuICAgIHJldHVybiBsYXllcl91cGRhdGUobGF5ZXIsIHtyZW1vdmUsIGluc2VydCwgcmVzZXQ6ZmFsc2V9KVxufVxuXG5cblxuIiwiaW1wb3J0IHsgQ3Vyc29yIH0gZnJvbSBcIi4vY3Vyc29yX2Jhc2UuanNcIjtcbmltcG9ydCB7IExheWVyIH0gZnJvbSBcIi4vbGF5ZXJfYmFzZS5qc1wiO1xuaW1wb3J0ICogYXMgc3JjcHJvcCBmcm9tIFwiLi91dGlsL2FwaV9zcmNwcm9wLmpzXCI7XG5pbXBvcnQgeyBjaGVja19udW1iZXIsIHNldF90aW1lb3V0fSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogUExBWUJBQ0sgQ1VSU09SXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogZ2VuZXJpYyBwbGF5YmFjayBjdXJzb3JcbiAqIFxuICogXCJzcmNcIiBpcyBhIGxheWVyXG4gKiBcImN0cmxcIiBpcyBjdXJzb3IgKE51bWJlcilcbiAqIHJldHVybnMgYSBjdXJzb3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGxheWJhY2tfY3Vyc29yKG9wdGlvbnM9e30pIHtcblxuICAgIGNvbnN0IHtjdHJsLCBzcmMsIFxuICAgICAgICBtdXRhYmxlPWZhbHNlfSA9IG9wdGlvbnM7XG5cbiAgICBsZXQgc3JjX2NhY2hlOyAvLyBjYWNoZSBmb3Igc3JjIGxheWVyXG4gICAgbGV0IHRpZDsgLy8gdGltZW91dFxuICAgIGxldCBwaWQ7IC8vIHBvbGxpbmdcblxuICAgIGNvbnN0IGN1cnNvciA9IG5ldyBDdXJzb3IoKTtcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogUkVTVFJJQ1RJT05TXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Vyc29yLCBcIm51bWVyaWNcIiwge2dldDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gKGN1cnNvci5zcmMgIT0gdW5kZWZpbmVkKSA/IGN1cnNvci5zcmMubnVtZXJpYyA6IGZhbHNlO1xuICAgIH19KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Vyc29yLCBcIm11dGFibGVcIiwge2dldDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gKGN1cnNvci5zcmMgIT0gdW5kZWZpbmVkKSA/IChjdXJzb3Iuc3JjLm11dGFibGUgJiYgbXV0YWJsZSkgOiBmYWxzZTtcbiAgICB9fSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN1cnNvciwgXCJpdGVtc09ubHlcIiwge2dldDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gKGN1cnNvci5zcmMgIT0gdW5kZWZpbmVkKSA/IGN1cnNvci5zcmMuaXRlbXNPbmx5IDogZmFsc2U7XG4gICAgfX0pO1xuXG4gICAgXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKiBTUkMgQU5EIENUUkwgUFJPUEVSVElFU1xuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgc3JjcHJvcC5hZGRTdGF0ZShjdXJzb3IpO1xuICAgIHNyY3Byb3AuYWRkTWV0aG9kcyhjdXJzb3IpO1xuICAgIGN1cnNvci5zcmNwcm9wX3JlZ2lzdGVyKFwiY3RybFwiKTtcbiAgICBjdXJzb3Iuc3JjcHJvcF9yZWdpc3RlcihcInNyY1wiKTtcblxuICAgIGN1cnNvci5zcmNwcm9wX2NoZWNrID0gZnVuY3Rpb24gKHByb3BOYW1lLCBvYmopIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwiY3RybFwiKSB7XG4gICAgICAgICAgICBpZiAoIShvYmogaW5zdGFuY2VvZiBDdXJzb3IpIHx8IG9iai5udW1lcmljID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcImN0cmxcIiBwcm9wZXJ0eSBtdXN0IGJlIGEgbnVtZXJpYyBjdXJzb3IgJHtvYmp9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wTmFtZSA9PSBcInNyY1wiKSB7XG4gICAgICAgICAgICBpZiAoIShvYmogaW5zdGFuY2VvZiBMYXllcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwic3JjXCIgcHJvcGVydHkgbXVzdCBiZSBhIGxheWVyICR7b2JqfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjdXJzb3Iuc3JjcHJvcF9vbmNoYW5nZSA9IGZ1bmN0aW9uIChwcm9wTmFtZSwgZUFyZykge1xuICAgICAgICBpZiAoY3Vyc29yLnNyYyA9PSB1bmRlZmluZWQgfHwgY3Vyc29yLmN0cmwgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwic3JjXCIpIHtcbiAgICAgICAgICAgIGlmIChlQXJnID09IFwicmVzZXRcIikge1xuICAgICAgICAgICAgICAgIHNyY19jYWNoZSA9IGN1cnNvci5zcmMuY3JlYXRlQ2FjaGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3JjX2NhY2hlLmNsZWFyKCk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGN1cnNvci5vbmNoYW5nZSgpO1xuICAgIH1cblxuICAgIGN1cnNvci5xdWVyeSA9IGZ1bmN0aW9uIHF1ZXJ5KGxvY2FsX3RzKSB7XG4gICAgICAgIGxldCBvZmZzZXQgPSBjdXJzb3IuY3RybC5xdWVyeShsb2NhbF90cykudmFsdWU7XG4gICAgICAgIC8vIHNob3VsZCBub3QgaGFwcGVuXG4gICAgICAgIGNoZWNrX251bWJlcihcImN1cnNvci5jdHJsLm9mZnNldFwiLCBvZmZzZXQpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHNyY19jYWNoZS5xdWVyeShvZmZzZXQpO1xuICAgICAgICAvLyBpZiAoc3JjKSBsYXllciBpcyBudW1lcmljLCBkZWZhdWx0IHZhbHVlIDAgXG4gICAgICAgIC8vIGlzIGFzc3VtZWQgaW4gcmVnaW9ucyB3aGVyZSB0aGUgbGF5ZXIgaXMgdW5kZWZpbmVkXG4gICAgICAgIGlmIChjdXJzb3Iuc3JjLm51bWVyaWMgJiYgc3RhdGUudmFsdWUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdGF0ZS52YWx1ZSA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgY3Vyc29yLmFjdGl2ZV9pdGVtcyA9IGZ1bmN0aW9uIGdldF9pdGVtKGxvY2FsX3RzKSB7XG4gICAgICAgIGlmIChjdXJzb3IuaXRlbXNPbmx5KSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBjdXJzb3IuY3RybC5xdWVyeShsb2NhbF90cykudmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gY3Vyc29yLnNyYy5pbmRleC5uZWFyYnkob2Zmc2V0KS5jZW50ZXI7ICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKiBERVRFQ1QgRlVUVVJFIEVWRU5UXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKipcbiAgICAgKiBmaXhlZCByYXRlIGN1cnNvcnMgbmV2ZXIgY2hhbmdlIHRoZWlyIGJlaGF2aW9yIC0gYW5kXG4gICAgICogY29uc2VxdWVudGx5IG5ldmVyIGhhcyB0byBpbnZva2UgYW55IGNhbGxiYWNrcyAvIGV2ZW50c1xuICAgICAqIFxuICAgICAqIE90aGVyIGN1cnNvcnMgbWF5IGNoYW5nZSBiZWhhdmlvdXIgYXQgYSBmdXR1cmUgdGltZS5cbiAgICAgKiBJZiB0aGlzIGZ1dHVyZSBjaGFuZ2UgaXMgY2F1c2VkIGJ5IGEgc3RhdGUgY2hhbmdlIC0gXG4gICAgICogZWl0aGVyIGluIChzcmMpIGxheWVyIG9yIChjdHJsKSBjdXJzb3IgLSBldmVudHMgd2lsbCBiZSBcbiAgICAgKiB0cmlnZ2VyZWQgaW4gcmVzcG9uc2UgdG8gdGhpcy4gXG4gICAgICogXG4gICAgICogSG93ZXZlciwgY3Vyc29ycyBtYXkgYWxzbyBjaGFuZ2UgYmVoYXZpb3VyIGF0IGEgZnV0dXJlIHRpbWUgbW9tZW50XG4gICAgICogaW4gdGltZSwgd2l0aG91dCBhbnkgY2F1c2luZyBzdGF0ZSBjaGFuZ2UuIFRoaXMgbWF5IGhhcHBlbiBkdXJpbmcgXG4gICAgICogcGxheWJhY2ssIGFzIHRoZSAoY3RybCkgY3Vyc29yIGxlYXZlcyB0aGUgY3VycmVudCByZWdpb24gXG4gICAgICogb2YgdGhlIChzcmMpIGxheWVyIGFuZCBlbnRlcnMgaW50byB0aGUgbmV4dCByZWdpb24uXG4gICAgICogXG4gICAgICogVGhpcyBldmVudCBtdXN0IGJlIGRldGVjdGVkLCBpZGVhbGx5IGF0IHRoZSByaWdodCBtb21lbnQsIFxuICAgICAqIHNvIHRoYXQgdGhlIGN1cnNvciBjYW4gZ2VuZXJhdGUgZXZlbnRzLCBhbGxvd2luZyBvYnNlcnZlcnMgdG9cbiAgICAgKiByZWFjdCB0byB0aGUgY2hhbmdlLiBJZiB0aGUgKGN0cmwpIGN1cnNvciBiZWhhdmVzIGRldGVybWluaXN0aWNhbGx5LCBcbiAgICAgKiB0aGlzIGZ1dHVyZSBldmVudCBjYW4gYmUgY2FsY3VsYXRlZCBhaGVhZCBvZiB0aW1lLCBcbiAgICAgKiBhbmQgZGV0ZWN0ZWQgYnkgdGltZW91dC4gT3RoZXJ3aXNlLCB0aGUgZmFsbGJhY2sgc29sdXRpb24gaXMgdG9cbiAgICAgKiBkZXRlY3Qgc3VjaCBmdXR1cmUgZXZlbnRzIGJ5IHBvbGxpbmcuXG4gICAgICogXG4gICAgICogTk9URSBjb25zdW1lcnMgb2YgY3Vyc29ycyBtaWdodCBwb2xsIHRoZSBjdXJzb3IgdGhlbXNlbHZlcywgdGh1cyBcbiAgICAgKiBjYXVzaW5nIHRoZSBldmVudCB0byBiZSBkZXRlY3RlZCB0aGF0IHdheS4gSG93ZXZlciwgdGhlcmUgaXMgbm8gXG4gICAgICogZ3VhcmFudGVlIHRoYXQgdGhpcyB3aWxsIGhhcHBlbi4gRm9yIGV4YW1wbGUsIGluIGNpcmN1bXN0YW5jZXMgXG4gICAgICogd2hlcmUgdGhlIChzcmMpIGxheWVyIHJlZ2lvbiBpcyBzdGF0aWMsIGNvbnN1bWVycyB3aWxsIHR1cm5cbiAgICAgKiBwb2xsaW5nIG9mZiwgYW5kIGRlcGVuZCBvbiB0aGUgY2hhbmdlIGV2ZW50IGZyb20gdGhlIGN1cnNvciwgaW4gb3JkZXIgXG4gICAgICogdG8gZGV0ZWN0IHRoZSBjaGFuZ2UgaW4gYmVoYXZpb3IuXG4gICAgICogXG4gICAgICovXG4gICAgY3Vyc29yLmRldGVjdF9mdXR1cmVfZXZlbnQgPSBmdW5jdGlvbiBkZXRlY3RfZnV0dXJlX2V2ZW50KCkge1xuXG4gICAgICAgIGNhbmNlbF90aW1lb3V0KCk7XG4gICAgICAgIGNhbmNlbF9wb2xsaW5nKCk7XG5cbiAgICAgICAgLy8gbm8gZnV0dXJlIHRpbWVvdXQgaWYgY3Vyc29yIGl0c2VsZiBpcyBmaXhlZFJhdGVcbiAgICAgICAgaWYgKGN1cnNvci5maXhlZFJhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFsbCBvdGhlciBjdXJzb3JzIG11c3QgaGF2ZSAoc3JjKSBhbmQgKGN0cmwpXG4gICAgICAgIGlmIChjdXJzb3IuY3RybCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImN1cnNvci5jdHJsIGNhbiBub3QgYmUgdW5kZWZpbmVkIHdpdGggaXNGaXhlZFJhdGU9ZmFsc2VcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnNvci5zcmMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjdXJzb3Iuc3JjIGNhbiBub3QgYmUgdW5kZWZpbmVkIHdpdGggaXNGaXhlZFJhdGU9ZmFsc2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjdXJyZW50IHN0YXRlIG9mIGN1cnNvci5jdHJsIFxuICAgICAgICBjb25zdCB7dmFsdWU6cG9zMCwgZHluYW1pYywgb2Zmc2V0OnRzMH0gPSBjdXJzb3IuY3RybC5xdWVyeSgpO1xuXG4gICAgICAgIC8vIG5vIGZ1dHVyZSB0aW1lb3V0IGlmIGN1cnNvci5jdHJsIGlzIHN0YXRpY1xuICAgICAgICBpZiAoIWR5bmFtaWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGN1cnJlbnQgcmVnaW9uIG9mIGN1cnNvci5zcmNcbiAgICAgICAgY29uc3Qgc3JjX25lYXJieSA9IGN1cnNvci5zcmMuaW5kZXgubmVhcmJ5KHBvczApO1xuICAgICAgICBjb25zdCBzcmNfcmVnaW9uX2xvdyA9IHNyY19uZWFyYnkuaXR2WzBdID8/IC1JbmZpbml0eTtcbiAgICAgICAgY29uc3Qgc3JjX3JlZ2lvbl9oaWdoID0gc3JjX25lYXJieS5pdHZbMV0gPz8gSW5maW5pdHk7XG5cbiAgICAgICAgaWYgKHNyY19yZWdpb25fbG93ID09IC1JbmZpbml0eSAmJiBzcmNfcmVnaW9uX2hpZ2ggPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgIC8vIHVuYm91bmRlZCBzcmMgcmVnaW9uIC0gbm8gZXZlbnRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIGlmIGNvbmRpdGlvbiBmb3IgY2xvY2sgdGltZW91dCBpcyBtZXRcbiAgICAgICAgaWYgKGN1cnNvci5jdHJsLmZpeGVkUmF0ZSkge1xuICAgICAgICAgICAgLyogXG4gICAgICAgICAgICAgICAgY3Vyc29yLmN0cmwgaXMgZml4ZWQgcmF0ZSAoY2xvY2spXG4gICAgICAgICAgICAgICAgZnV0dXJlIHRpbWVvdXQgd2hlbiBjdXJzb3IuY3RybCBsZWF2ZXMgc3JjX3JlZ2lvbiAob24gdGhlIHJpZ2h0KVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnN0IHZlY3RvciA9IFtwb3MwLCBjdXJzb3IuY3RybC5yYXRlLCAwLCB0czBdO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gc3JjX3JlZ2lvbl9oaWdoXG4gICAgICAgICAgICBzY2hlZHVsZV90aW1lb3V0KHZlY3RvciwgdGFyZ2V0KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIGlmIGNvbmRpdGlvbnMgZm9yIG1vdGlvbiB0aW1lb3V0IGFyZSBtZXRcbiAgICAgICAgLy8gY3Vyc29yLmN0cmwuY3RybCBtdXN0IGJlIGZpeGVkIHJhdGVcbiAgICAgICAgLy8gY3Vyc29yLmN0cmwuc3JjIG11c3QgaGF2ZSBpdGVtc09ubHkgPT0gdHJ1ZSBcbiAgICAgICAgaWYgKGN1cnNvci5jdHJsLmN0cmwuZml4ZWRSYXRlICYmIGN1cnNvci5jdHJsLnNyYy5pdGVtc09ubHkpIHtcbiAgICAgICAgICAgIC8qIFxuICAgICAgICAgICAgICAgIHBvc3NpYmxlIHRpbWVvdXQgYXNzb2NpYXRlZCB3aXRoIGxlYXZpbmcgcmVnaW9uXG4gICAgICAgICAgICAgICAgdGhyb3VnaCBlaXRoZXIgcmVnaW9uX2xvdyBvciByZWdpb25faGlnaC5cblxuICAgICAgICAgICAgICAgIEhvd2V2ZXIsIHRoaXMgY2FuIG9ubHkgYmUgcHJlZGljdGVkIGlmIGN1cnNvci5jdHJsXG4gICAgICAgICAgICAgICAgaW1wbGVtZW50cyBhIGRldGVybWluaXN0aWMgZnVuY3Rpb24gb2YgdGltZS5cbiAgICAgICAgICAgICAgICBUaGlzIGNhbiBiZSBrbm93biBvbmx5IGlmIGN1cnNvci5jdHJsLnNyYyBpcyBhIGxheWVyIHdpdGggaXRlbXMuXG4gICAgICAgICAgICAgICAgYW5kIGEgc2luZ2xlIGFjdGl2ZSBpdGVtIGRlc2NyaWJlcyBlaXRoZXIgYSBtb3Rpb24gb3IgYSB0cmFuc2l0aW9uIFxuICAgICAgICAgICAgICAgICh3aXRoIGxpbmVhciBlYXNpbmcpLiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVfaXRlbXMgPSBjdXJzb3IuY3RybC5zcmMuZ2V0X2l0ZW1zKHRzMCk7XG4gICAgICAgICAgICBpZiAoYWN0aXZlX2l0ZW1zLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlX2l0ZW0gPSBhY3RpdmVfaXRlbXNbMF07XG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZV9pdGVtLnR5cGUgPT0gXCJtb3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbcCx2LGEsdF0gPSBhY3RpdmVfaXRlbS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGNhbGN1bGF0ZSB0aW1lb3V0IHdpdGggYWNjZWxlcmF0aW9uIHRvb1xuICAgICAgICAgICAgICAgICAgICBpZiAoYSA9PSAwLjApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpZ3VyZSBvdXQgd2hpY2ggcmVnaW9uIGJvdW5kYXJ5IHdlIGhpdCBmaXJzdFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gKHYgPiAwKSA/IHNyY19yZWdpb25faGlnaCA6IHNyY19yZWdpb25fbG93O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVjdG9yID0gW3BvczAsIHYsIDAsIHRzMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZV90aW1lb3V0KHZlY3RvciwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlX2l0ZW0udHlwZSA9PSBcInRyYW5zaXRpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7djAsIHYxLCB0MCwgdDEsIGVhc2luZz1cImxpbmVhclwifSA9IGFjdGl2ZV9pdGVtLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlYXNpbmcgPT0gXCJsaW5lYXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGluZWFyIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHYgPSAodjEtdjApLyh0MS10MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAodiA+IDApID8gc3JjX3JlZ2lvbl9oaWdoIDogc3JjX3JlZ2lvbl9sb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZWN0b3IgPSBbcG9zMCwgdiwgMCwgdHMwXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlX3RpbWVvdXQodmVjdG9yLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9ICAgICAgICAgICAgXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRldGVjdGlvbiBvZiBsZWF2ZSBldmVudHMgZmFsbHMgYmFjayBvbiBwb2xsaW5nXG4gICAgICAgICAqL1xuICAgICAgICBzdGFydF9wb2xsaW5nKHNyY19yZWdpb25fbG93LCBzcmNfcmVnaW9uX2hpZ2gpO1xuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogVElNRU9VVFxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVfdGltZW91dCh2ZWN0b3IsIHRhcmdldCkge1xuICAgICAgICBjb25zdCBbcCx2LGEsdF0gPSB2ZWN0b3I7XG4gICAgICAgIGlmIChhICE9IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRpbWVvdXQgbm90IHlldCBpbXBsZW1lbnRlZCBmb3IgYWNjZWxlcmF0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXQgPT0gSW5maW5pdHkgfHwgdGFyZ2V0ID09IC1JbmZpbml0eSkge1xuICAgICAgICAgICAgLy8gbm8gdGltZW91dFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlbHRhX3NlYyA9ICh0YXJnZXQgLSBwKSAvIHY7XG4gICAgICAgIGlmIChkZWx0YV9zZWMgPD0gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJXYXJuaW5nIC0gdGltZW91dCA8PSAwIC0gZHJvcHBpbmdcIiwgZGVsdGFfc2VjKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidmVjdG9yXCIsIHZlY3Rvcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRhcmdldFwiLCB0YXJnZXQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRpZCA9IHNldF90aW1lb3V0KGhhbmRsZV90aW1lb3V0LCBkZWx0YV9zZWMgKiAxMDAwLjApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZV90aW1lb3V0KCkge1xuICAgICAgICAvLyBldmVudCBkZXRlY3RlZFxuICAgICAgICBjdXJzb3Iub25jaGFuZ2UoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5jZWxfdGltZW91dCgpIHtcbiAgICAgICAgaWYgKHRpZCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRpZC5jYW5jZWwoKTsgXG4gICAgICAgIH0gICAgXG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKiBQT0xMSU5HXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICBmdW5jdGlvbiBzdGFydF9wb2xsaW5nKHRhcmdldExvdywgdGFyZ2V0SGlnaCkge1xuICAgICAgICBwaWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBoYW5kbGVfcG9sbGluZyh0YXJnZXRMb3csIHRhcmdldEhpZ2gpO1xuICAgICAgICB9LCAxMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZV9wb2xsaW5nKHRhcmdldExvdywgdGFyZ2V0SGlnaCkge1xuICAgICAgICBsZXQgcG9zID0gY3Vyc29yLmN0cmwudmFsdWU7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICh0YXJnZXRMb3cgPiAtSW5maW5pdHkgJiYgcG9zIDwgdGFyZ2V0TG93KSB8fFxuICAgICAgICAgICAgKHRhcmdldEhpZ2ggPCBJbmZpbml0eSAmJiBwb3MgPiB0YXJnZXRIaWdoKVxuICAgICAgICApeyBcbiAgICAgICAgICAgIC8vIGV2ZW50IGRldGVjdGVkXG4gICAgICAgICAgICBjdXJzb3Iub25jaGFuZ2UoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbmNlbF9wb2xsaW5nKCkge1xuICAgICAgICBpZiAocGlkICE9IHVuZGVmaW5lZCkgeyBcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocGlkKTsgXG4gICAgICAgIH1cbiAgICB9XG4gXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgKiBJTklUSUFMSVpBVElPTlxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIGN1cnNvci5jdHJsID0gY3RybDtcbiAgICBjdXJzb3Iuc3JjID0gc3JjO1xuICAgIHJldHVybiBjdXJzb3I7XG59XG5cbiIsImltcG9ydCB7IHBsYXliYWNrX2N1cnNvciB9IGZyb20gXCIuL2N1cnNvcl9wbGF5YmFjay5qc1wiO1xuaW1wb3J0IHsgcmFuZG9tX3N0cmluZywgY2hlY2tfbnVtYmVyLCBtb3Rpb25fdXRpbHMgfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuaW1wb3J0IHsgbG9hZF9zZWdtZW50IH0gZnJvbSBcIi4vdXRpbC9zZWdtZW50cy5qc1wiO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIE9CSkVDVCBDVVJTT1JcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBjdXJzb3Igb2JqZWN0IHN1cHBvcnRpbmcgdXBkYXRlc1xuICogIFxuICogXCJzcmNcIiBpcyBhIGxheWVyIHdoaWNoIGlzIG11dGFibGVcbiAqIFwiY3RybFwiIGlzIGZpeGVkLXJhdGUgY3Vyc29yXG4gKiBcbiAqIG9iamVjdF9jdXJzb3IgbWF5IGFsc28gc3VwcG9ydCByZWNvcmRpbmdcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gb2JqZWN0X2N1cnNvcihvcHRpb25zPXt9KSB7XG5cbiAgICBjb25zdCB7Y3RybCwgc3JjLCByZWNvcmQ9ZmFsc2V9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IGN1cnNvciA9IG5ldyBwbGF5YmFja19jdXJzb3Ioe2N0cmwsIHNyYywgbXV0YWJsZTogdHJ1ZX0pO1xuXG4gICAgLyoqXG4gICAgICogb3ZlcnJpZGUgdG8gaW1wbGVtZW50IGFkZGl0aW9uYWwgcmVzdHJpY3Rpb25zIFxuICAgICAqIG9uIHNyYyBhbmQgY3RybFxuICAgICAqL1xuICAgIGNvbnN0IG9yaWdpbmFsX3NyY3Byb3BfY2hlY2sgPSBjdXJzb3Iuc3JjcHJvcF9jaGVjaztcblxuICAgIGN1cnNvci5zcmNwcm9wX2NoZWNrID0gZnVuY3Rpb24gKHByb3BOYW1lLCBvYmopIHtcbiAgICAgICAgb2JqID0gb3JpZ2luYWxfc3JjcHJvcF9jaGVjayhwcm9wTmFtZSwgb2JqKTtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwiY3RybFwiKSB7XG4gICAgICAgICAgICBpZiAoIW9iai5maXhlZFJhdGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiY3RybFwiIHByb3BlcnR5IG11c3QgYmUgYSBmaXhlZHJhdGUgY3Vyc29yICR7b2JqfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcE5hbWUgPT0gXCJzcmNcIikge1xuICAgICAgICAgICAgaWYgKCFvYmoubXV0YWJsZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCJzcmNcIiBwcm9wZXJ0eSBtdXN0IGJlIG11dGFibGUgbGF5ZXIgJHtvYmp9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgfVxuICAgICAgICBcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogVVBEQVRFIEFQSVxuICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgIGN1cnNvci5zZXQgPSAodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbXMgPSBjcmVhdGVfc2V0X2l0ZW1zKGN1cnNvciwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gY3Vyc29yLnVwZGF0ZShpdGVtcyk7XG4gICAgfVxuICAgIGN1cnNvci5tb3Rpb24gPSAodmVjdG9yKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gY3JlYXRlX21vdGlvbl9pdGVtcyhjdXJzb3IsIHZlY3Rvcik7XG4gICAgICAgIHJldHVybiBjdXJzb3IudXBkYXRlKGl0ZW1zKTtcbiAgICB9XG4gICAgY3Vyc29yLnRyYW5zaXRpb24gPSAoe3RhcmdldCwgZHVyYXRpb24sIGVhc2luZ30pID0+IHsgXG4gICAgICAgIGNvbnN0IGl0ZW1zID0gY3JlYXRlX3RyYW5zaXRpb25faXRlbXMoY3Vyc29yLCB0YXJnZXQsIGR1cmF0aW9uLCBlYXNpbmcpO1xuICAgICAgICByZXR1cm4gY3Vyc29yLnVwZGF0ZShpdGVtcyk7XG5cbiAgICB9XG4gICAgY3Vyc29yLmludGVycG9sYXRlID0gKHt0dXBsZXMsIGR1cmF0aW9ufSkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtcyA9IGNyZWF0ZV9pbnRlcnBvbGF0aW9uX2l0ZW1zKGN1cnNvciwgdHVwbGVzLCBkdXJhdGlvbik7XG4gICAgICAgIHJldHVybiBjdXJzb3IudXBkYXRlKGl0ZW1zKTtcbiAgICB9XG4gICAgXG4gICAgY3Vyc29yLnVwZGF0ZSA9IChpdGVtcykgPT4ge1xuICAgICAgICBpZiAoaXRlbXMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAocmVjb3JkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnNvci5zcmMuYXBwZW5kKGl0ZW1zLCBjdXJzb3IuY3RybC52YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJzb3Iuc3JjLnVwZGF0ZSh7aW5zZXJ0Oml0ZW1zLCByZXNldDp0cnVlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY3Vyc29yO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIENVUlNPUiBVUERBVEUgQVBJXG4gKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogY3JlYWF0ZSBpdGVtcyBmb3Igc2V0IG9wZXJhdGlvblxuKi9cbmZ1bmN0aW9uIGNyZWF0ZV9zZXRfaXRlbXMoY3Vyc29yLCB2YWx1ZSkge1xuICAgIGxldCBpdGVtcyA9IFtdO1xuICAgIGlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgaXRlbXMgPSBbe1xuICAgICAgICAgICAgaWQ6IHJhbmRvbV9zdHJpbmcoMTApLFxuICAgICAgICAgICAgaXR2OiBbbnVsbCwgbnVsbCwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgICAgICB0eXBlOiBcInN0YXRpY1wiLFxuICAgICAgICAgICAgZGF0YTogdmFsdWUgICAgICAgICAgICAgIFxuICAgICAgICB9XTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zO1xufVxuXG4vKipcbiAqIGNyZWF0ZSBpdGVtcyBmb3IgbW90aW9uIG9wZXJhdGlvblxuICogIFxuICogbW90aW9uIG9ubHkgbWFrZXMgc2Vuc2UgaWYgb2JqZWN0IGN1cnNvciBpcyByZXN0cmljdGVkIHRvIG51bWJlciB2YWx1ZXMsXG4gKiB3aGljaCBpbiB0dXJuIGltcGxpZXMgdGhhdCB0aGUgY3Vyc29yLnNyYyAoSXRlbXMgTGF5ZXIpIHNob3VsZCBiZVxuICogcmVzdHJpY3RlZCB0byBudW1iZXIgdmFsdWVzLiBcbiAqIElmIG5vbi1udW1iZXIgdmFsdWVzIG9jY3VyIC0gd2Ugc2ltcGx5IHJlcGxhY2Ugd2l0aCAwLlxuICogQWxzbywgaXRlbXMgbGF5ZXIgc2hvdWxkIGhhdmUgYSBzaW5nbGUgaXRlbSBpbiBuZWFyYnkgY2VudGVyLlxuICogXG4gKiBpZiBwb3NpdGlvbiBpcyBvbWl0dGVkIGluIHZlY3RvciAtIGN1cnJlbnQgcG9zaXRpb24gd2lsbCBiZSBhc3N1bWVkXG4gKiBpZiB0aW1lc3RhbXAgaXMgb21pdHRlZCBpbiB2ZWN0b3IgLSBjdXJyZW50IHRpbWVzdGFtcCB3aWxsIGJlIGFzc3VtZWRcbiAqIGlmIHZlbG9jaXR5IGFuZCBhY2NlbGVyYXRpb24gYXJlIG9tbWl0dGVkIGluIHZlY3RvciBcbiAqIC0gdGhlc2Ugd2lsbCBiZSBzZXQgdG8gemVyby5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlX21vdGlvbl9pdGVtcyhjdXJzb3IsIHZlY3Rvcj17fSkge1xuICAgIC8vIGdldCB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY3Vyc29yXG4gICAgbGV0IHt2YWx1ZTpwMCwgb2Zmc2V0OnQwfSA9IGN1cnNvci5xdWVyeSgpO1xuICAgIC8vIGVuc3VyZSB0aGF0IHAwIGlzIG51bWJlciB0eXBlXG4gICAgaWYgKHR5cGVvZiBwMCAhPT0gJ251bWJlcicgfHwgIWlzRmluaXRlKHAwKSkge1xuICAgICAgICBwMCA9IDA7XG4gICAgfVxuICAgIC8vIGZldGNoIG5ldyB2YWx1ZXMgZnJvbSB2ZWN0b3JcbiAgICBjb25zdCB7XG4gICAgICAgIHBvc2l0aW9uOnAxPXAwLFxuICAgICAgICB2ZWxvY2l0eTp2MT0wLFxuICAgICAgICBhY2NlbGVyYXRpb246YTE9MCxcbiAgICAgICAgdGltZXN0YW1wOnQxPXQwLFxuICAgICAgICByYW5nZT1bbnVsbCwgbnVsbF1cbiAgICB9ID0gdmVjdG9yO1xuICAgIG1vdGlvbl91dGlscy5jaGVja19yYW5nZShyYW5nZSk7XG4gICAgY2hlY2tfbnVtYmVyKFwicG9zaXRpb25cIiwgcDEpO1xuICAgIGNoZWNrX251bWJlcihcInZlbG9jaXR5XCIsIHYxKTtcbiAgICBjaGVja19udW1iZXIoXCJhY2NlbGVyYXRpb25cIiwgYTEpO1xuICAgIGNoZWNrX251bWJlcihcInRpbWVzdGFtcFwiLCB0MSk7XG5cbiAgICBjb25zdCBpdGVtcyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogaWYgcG9zIHJhbmdlIGlzIGJvdW5kZWQgbG93IG9yIGhpZ2ggb3IgYm90aCxcbiAgICAgKiB0aGlzIHBvdGVudGlhbGx5IGNvcnJlc3BvbmRzIHRvIG11bHRpcGxlIHRpbWUgcmFuZ2VzIFtbdDAsIHQxXV0gXG4gICAgICogd2hlcmUgdGhlIG1vdGlvbiBwb3NpdGlvbiBpcyBsZWdhbCAgXG4gICAgICogbG93IDw9IHAgPD0gaGlnaCBcbiAgICAgKi9cbiAgICBjb25zdCBjdHIgPSBtb3Rpb25fdXRpbHMuY2FsY3VsYXRlX3RpbWVfcmFuZ2VzO1xuICAgIGNvbnN0IHRpbWVfcmFuZ2VzID0gY3RyKFtwMSx2MSxhMSx0MV0sIHJhbmdlKTtcbiAgICAvLyBwaWNrIGEgdGltZSByYW5nZSB3aGljaCBjb250YWlucyB0MVxuICAgIGNvbnN0IHRzID0gY3Vyc29yLmN0cmwudmFsdWU7XG5cbiAgICBjb25zdCB0aW1lX3JhbmdlID0gdGltZV9yYW5nZXMuZmluZCgodHIpID0+IHtcbiAgICAgICAgY29uc3QgbG93ID0gdHJbMF0gPz8gLUluZmluaXR5O1xuICAgICAgICBjb25zdCBoaWdoID0gdHJbMV0gPz8gSW5maW5pdHk7XG4gICAgICAgIHJldHVybiBsb3cgPD0gdHMgJiYgdHMgPD0gaGlnaDtcbiAgICB9KTtcbiAgICBpZiAodGltZV9yYW5nZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgW2xvdywgaGlnaF0gPSB0aW1lX3JhbmdlO1xuICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgICAgIGl0djogW2xvdywgaGlnaCwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgICAgICB0eXBlOiBcIm1vdGlvblwiLFxuICAgICAgICAgICAgZGF0YTogW3AxLCB2MSwgYTEsIHQxXVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gYWRkIGxlZnQgaWYgbmVlZGVkXG4gICAgICAgIGlmIChsb3cgIT0gbnVsbCkge1xuICAgICAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IHJhbmRvbV9zdHJpbmcoMTApLFxuICAgICAgICAgICAgICAgIGl0djogW251bGwsIGxvdywgdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RhdGljXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogcmFuZ2VbMF1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCByaWdodCBpZiBuZWVkZWRcbiAgICAgICAgaWYgKGhpZ2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IHJhbmRvbV9zdHJpbmcoMTApLFxuICAgICAgICAgICAgICAgIGl0djogW2hpZ2gsIG51bGwsIGZhbHNlLCB0cnVlXSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN0YXRpY1wiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJhbmdlWzFdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIFxuICAgICAgICAgICAgbm8gdGltZV9yYW5nZSBmb3VuZFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBwMSBpcyBvdXRzaWRlIHRoZSBwb3NfcmFuZ2VcbiAgICAgICAgICAgIGlmIHAxIGlzIGxlc3MgdGhhbiBsb3csIHRoZW4gdXNlIGxvd1xuICAgICAgICAgICAgaWYgcDEgaXMgZ3JlYXRlciB0aGFuIGhpZ2gsIHRoZW4gdXNlIGhpZ2hcbiAgICAgICAgKi9cbiAgICAgICAgY29uc3QgdmFsID0gKHAxIDwgcmFuZ2VbMF0pID8gcmFuZ2VbMF0gOiByYW5nZVsxXTtcbiAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICBpZDogcmFuZG9tX3N0cmluZygxMCksXG4gICAgICAgICAgICBpdHY6IFtudWxsLCBudWxsLCB0cnVlLCB0cnVlXSxcbiAgICAgICAgICAgIHR5cGU6IFwic3RhdGljXCIsXG4gICAgICAgICAgICBkYXRhOiB2YWxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbn1cblxuLyoqXG4gKiBjcmVhdGUgaXRlbXMgZm9yIHRyYW5zaXRpb24gb3BlcmF0aW9uXG4gKiAgXG4gKiB0cmFuc2l0aW9uIHRvIHRhcmdldCBwb3NpdGlvbiB1c2luZyBpbiA8ZHVyYXRpb24+IHNlY29uZHMuXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlX3RyYW5zaXRpb25faXRlbXMoY3Vyc29yLCB0YXJnZXQsIGR1cmF0aW9uLCBlYXNpbmcpIHtcblxuICAgIGNvbnN0IHt2YWx1ZTp2MCwgb2Zmc2V0OnQwfSA9IGN1cnNvci5xdWVyeSgpO1xuICAgIGNvbnN0IHYxID0gdGFyZ2V0O1xuICAgIGNvbnN0IHQxID0gdDAgKyBkdXJhdGlvbjtcbiAgICBpZiAodjEgPT0gdjApIHtcbiAgICAgICAgLy8gbm9vcFxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNoZWNrX251bWJlcihcInBvc2l0aW9uXCIsIHYwKTtcbiAgICBjaGVja19udW1iZXIoXCJwb3NpdGlvblwiLCB2MSk7XG4gICAgY2hlY2tfbnVtYmVyKFwicG9zaXRpb25cIiwgdDApO1xuICAgIGNoZWNrX251bWJlcihcInBvc2l0aW9uXCIsIHQxKTtcbiAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogcmFuZG9tX3N0cmluZygxMCksXG4gICAgICAgICAgICBpdHY6IFtudWxsLCB0MCwgdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgdHlwZTogXCJzdGF0aWNcIixcbiAgICAgICAgICAgIGRhdGE6IHYwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgICAgIGl0djogW3QwLCB0MSwgdHJ1ZSwgdHJ1ZV0sXG4gICAgICAgICAgICB0eXBlOiBcInRyYW5zaXRpb25cIixcbiAgICAgICAgICAgIGRhdGE6IHt2MCwgdjEsIHQwLCB0MSwgZWFzaW5nfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogcmFuZG9tX3N0cmluZygxMCksXG4gICAgICAgICAgICBpdHY6IFt0MSwgbnVsbCwgZmFsc2UsIHRydWVdLFxuICAgICAgICAgICAgdHlwZTogXCJzdGF0aWNcIixcbiAgICAgICAgICAgIGRhdGE6IHYxXG4gICAgICAgIH1cbiAgICBdO1xufVxuXG4vKipcbiAqIGNyZWF0ZSBpdGVtcyBmb3IgaW50ZXJwb2xhdGlvbiBvcGVyYXRpb25cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVfaW50ZXJwb2xhdGlvbl9pdGVtcyhjdXJzb3IsIHR1cGxlcywgZHVyYXRpb24pIHtcblxuICAgIGNvbnN0IG5vdyA9IGN1cnNvci5jdHJsLnZhbHVlO1xuICAgIHR1cGxlcyA9IHR1cGxlcy5tYXAoKFt2LHRdKSA9PiB7XG4gICAgICAgIGNoZWNrX251bWJlcihcInRzXCIsIHQpO1xuICAgICAgICBjaGVja19udW1iZXIoXCJ2YWxcIiwgdik7XG4gICAgICAgIHJldHVybiBbdiwgbm93ICsgdF07XG4gICAgfSlcblxuICAgIC8vIGluZmxhdGUgc2VnbWVudCB0byBjYWxjdWxhdGUgYm91bmRhcnkgY29uZGl0aW9uc1xuICAgIGNvbnN0IHNlZyA9IGxvYWRfc2VnbWVudChbbnVsbCwgbnVsbCwgdHJ1ZSwgdHJ1ZV0sIHtcbiAgICAgICAgdHlwZTogXCJpbnRlcnBvbGF0aW9uXCIsXG4gICAgICAgIGRhdGE6IHR1cGxlc1xuICAgIH0pO1xuXG4gICAgY29uc3QgdDAgPSBub3c7XG4gICAgY29uc3QgdDEgPSB0MCArIGR1cmF0aW9uO1xuICAgIGNvbnN0IHYwID0gc2VnLnN0YXRlKHQwKS52YWx1ZTtcbiAgICBjb25zdCB2MSA9IHNlZy5zdGF0ZSh0MSkudmFsdWU7XG4gICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IHJhbmRvbV9zdHJpbmcoMTApLFxuICAgICAgICAgICAgaXR2OiBbLUluZmluaXR5LCB0MCwgdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgdHlwZTogXCJzdGF0aWNcIixcbiAgICAgICAgICAgIGRhdGE6IHYwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlkOiByYW5kb21fc3RyaW5nKDEwKSxcbiAgICAgICAgICAgIGl0djogW3QwLCB0MSwgdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgdHlwZTogXCJpbnRlcnBvbGF0aW9uXCIsXG4gICAgICAgICAgICBkYXRhOiB0dXBsZXNcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6IHJhbmRvbV9zdHJpbmcoMTApLFxuICAgICAgICAgICAgaXR2OiBbdDEsIEluZmluaXR5LCB0cnVlLCB0cnVlXSxcbiAgICAgICAgICAgIHR5cGU6IFwic3RhdGljXCIsXG4gICAgICAgICAgICBkYXRhOiB2MVxuICAgICAgICB9XG4gICAgXTtcbn1cbiIsImltcG9ydCB7IGVuZHBvaW50fSBmcm9tIFwiLi4vdXRpbC9pbnRlcnZhbHMuanNcIjtcbmltcG9ydCB7IE5lYXJieUluZGV4QmFzZSB9IGZyb20gXCIuLi9uZWFyYnlfYmFzZS5qc1wiO1xuaW1wb3J0IHsgTGF5ZXIgfSBmcm9tIFwiLi4vbGF5ZXJfYmFzZS5qc1wiXG5pbXBvcnQgeyBDdXJzb3IgfSBmcm9tIFwiLi4vY3Vyc29yX2Jhc2UuanNcIjtcblxuLyoqXG4gKiBUaGlzIHdyYXBzIGEgY3Vyc29yIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgYXMgYSBsYXllci5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGF5ZXJfZnJvbV9jdXJzb3Ioc3JjKSB7XG5cbiAgICBpZiAoIShzcmMgaW5zdGFuY2VvZiBDdXJzb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgc3JjIG11c3QgYmUgYSBDdXJzb3IgJHtzcmN9YCk7XG4gICAgfVxuIFxuICAgIGNvbnN0IGxheWVyID0gbmV3IExheWVyKCk7XG4gICAgbGF5ZXIuaW5kZXggPSBuZXcgQ3Vyc29ySW5kZXgoc3JjKTtcblxuICAgIC8vIHJlc3RyaWN0aW9uc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgXCJudW1lcmljXCIsIHtnZXQ6ICgpID0+IHNyYy5udW1lcmljfSk7XG5cbiAgICAvLyBzdWJzY3JpYmVcbiAgICBzcmMuYWRkX2NhbGxiYWNrKChlQXJnKSA9PiB7XG4gICAgICAgIGxheWVyLm9uY2hhbmdlKGVBcmcpO1xuICAgIH0pO1xuXG4gICAgLy8gaW5pdGlhbGlzZVxuICAgIGxheWVyLnNyYyA9IHNyYztcbiAgICByZXR1cm4gbGF5ZXI7XG59IFxuXG5cbi8qKlxuICogQ3JlYXRlIGEgTmVhcmJ5SW5kZXggZm9yIHRoZSBDdXJzb3IuXG4gKiBcbiAqIFRoZSBjdXJzb3IgdmFsdWUgaXMgaW5kZXBlbmRlbnQgb2YgdGltZWxpbmUgb2Zmc2V0LCBcbiAqIHdoaWNoIGlzIHRvIHNheSB0aGF0IGl0IGhhcyB0aGUgc2FtZSB2YWx1ZSBmb3IgYWxsIFxuICogdGltZWxpbmUgb2Zmc2V0cy5cbiAqIFxuICogSW4gb3JkZXIgZm9yIHRoZSBkZWZhdWx0IExheWVyQ2FjaGUgdG8gd29yaywgYW5cbiAqIG9iamVjdCB3aXRoIGEgLnF1ZXJ5KG9mZnNldCkgbWV0aG9kIGlzIG5lZWRlZCBpbiBcbiAqIG5lYXJieS5jZW50ZXIuIFNpbmNlIGN1cnNvcnMgc3VwcG9ydCB0aGlzIG1ldGhvZFxuICogKGlnbm9yaW5nIHRoZSBvZmZzZXQpLCB3ZSBjYW4gdXNlIHRoZSBjdXJzb3IgZGlyZWN0bHkuXG4gKi9cblxuY2xhc3MgQ3Vyc29ySW5kZXggZXh0ZW5kcyBOZWFyYnlJbmRleEJhc2Uge1xuXG4gICAgY29uc3RydWN0b3IoY3Vyc29yKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2N1cnNvciA9IGN1cnNvcjtcbiAgICB9XG5cbiAgICBuZWFyYnkob2Zmc2V0KSB7XG4gICAgICAgIC8vIGN1cnNvciBpbmRleCBpcyBkZWZpbmVkIGZvciBlbnRpcmUgdGltZWxpbmVcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGl0djogW251bGwsIG51bGwsIHRydWUsIHRydWVdLFxuICAgICAgICAgICAgY2VudGVyOiBbdGhpcy5fY3Vyc29yXSxcbiAgICAgICAgICAgIGxlZnQ6IGVuZHBvaW50Lk5FR19JTkYsXG4gICAgICAgICAgICBwcmV2OiBlbmRwb2ludC5ORUdfSU5GLFxuICAgICAgICAgICAgcmlnaHQ6IGVuZHBvaW50LlBPU19JTkYsXG4gICAgICAgICAgICBuZXh0OiBlbmRwb2ludC5QT1NfSU5GLFxuICAgICAgICB9XG4gICAgfVxufVxuXG4iLCJpbXBvcnQgKiBhcyBzcmNwcm9wIGZyb20gXCIuLi91dGlsL2FwaV9zcmNwcm9wLmpzXCI7XG5pbXBvcnQgeyBMYXllciB9IGZyb20gXCIuLi9sYXllcl9iYXNlLmpzXCJcbmltcG9ydCB7IGVuZHBvaW50IH0gZnJvbSBcIi4uL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleEJhc2UsIG5lYXJieV9mcm9tIH0gZnJvbSBcIi4uL25lYXJieV9iYXNlLmpzXCI7XG5cblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXJnZSBvcHRpb25zXG4gKi9cbmNvbnN0IE1FUkdFX09QVElPTlMgPSB7XG4gICAgc3VtOiB7XG4gICAgICAgIHZhbHVlRnVuYzogZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIC8vIHJldHVybnMgdGhlIHN1bSBvZiB2YWx1ZXMgb2YgYWN0aXZlIGxheWVyc1xuICAgICAgICAgICAgcmV0dXJuIGluZm8uc3RhdGVzXG4gICAgICAgICAgICAgICAgLm1hcChzdGF0ZSA9PiBzdGF0ZS52YWx1ZSkgXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB2YWx1ZSkgPT4gYWNjICsgdmFsdWUsIDApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzdGFjazoge1xuICAgICAgICBzdGF0ZUZ1bmM6IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICAvLyByZXR1cm5zIHZhbHVlcyBmcm9tIGZpcnN0IGFjdGl2ZSBsYXllclxuICAgICAgICAgICAgcmV0dXJuIHsuLi5pbmZvLnN0YXRlc1swXX1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgYXJyYXk6IHtcbiAgICAgICAgdmFsdWVGdW5jOiBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgICAgICAgLy8gcmV0dXJucyBhbiBhcnJheSB3aXRoIHZhbHVlcyBmcm9tIGFjdGl2ZSBsYXllcnNcbiAgICAgICAgICAgIHJldHVybiBpbmZvLnN0YXRlcy5tYXAoc3RhdGUgPT4gc3RhdGUudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFxuICogVGhpcyBpbXBsZW1lbnRzIGEgbWVyZ2Ugb3BlcmF0aW9uIGZvciBsYXllcnMuXG4gKiBMaXN0IG9mIHNvdXJjZXMgaXMgaW1tdXRhYmxlLlxuICogXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlX2xheWVyIChzb3VyY2VzLCBvcHRpb25zPXt9KSB7XG4gICAgbGV0IHt0eXBlPVwiXCIsIC4uLm9wdHN9ID0gb3B0aW9ucztcblxuICAgIC8vIHR5cGUgc3BlY2lmaWVzIHByZWRlZmluZWQgb3B0aW9ucyBmb3IgTGF5ZXJcbiAgICBpZiAodHlwZSBpbiBNRVJHRV9PUFRJT05TKSB7XG4gICAgICAgIG9wdHMgPSBNRVJHRV9PUFRJT05TW3R5cGVdO1xuICAgIH1cbiAgICBjb25zdCBsYXllciA9IG5ldyBMYXllcihvcHRzKTsgICAgXG5cbiAgICAvLyBzZXR1cCBzb3VyY2VzIHByb3BlcnR5XG4gICAgc3JjcHJvcC5hZGRTdGF0ZShsYXllcik7XG4gICAgc3JjcHJvcC5hZGRNZXRob2RzKGxheWVyKTtcbiAgICBsYXllci5zcmNwcm9wX3JlZ2lzdGVyKFwic291cmNlc1wiKTtcblxuICAgIGxheWVyLnNyY3Byb3BfY2hlY2sgPSBmdW5jdGlvbihwcm9wTmFtZSwgc291cmNlcykge1xuICAgICAgICBpZiAocHJvcE5hbWUgPT0gXCJzb3VyY2VzXCIpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIHRoYXQgc291cmNlcyBpcyBhcnJheSBvZiBsYXllcnNcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzb3VyY2VzKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc291cmNlcyBtdXN0IGJlIGFycmF5ICR7c291cmNlc31gKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWxsX2xheWVycyA9IHNvdXJjZXMubWFwKChlKSA9PiBlIGluc3RhbmNlb2YgTGF5ZXIpLmV2ZXJ5KGUgPT4gZSk7XG4gICAgICAgICAgICBpZiAoIWFsbF9sYXllcnMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNvdXJjZXMgbXVzdCBhbGwgYmUgbGF5ZXJzICR7c291cmNlc31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc291cmNlcztcbiAgICB9XG5cbiAgICBsYXllci5zcmNwcm9wX29uY2hhbmdlID0gZnVuY3Rpb24ocHJvcE5hbWUsIGVBcmcpIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwic291cmNlc1wiKSB7XG4gICAgICAgICAgICBpZiAoZUFyZyA9PSBcInJlc2V0XCIpIHtcbiAgICAgICAgICAgICAgICBsYXllci5pbmRleCA9IG5ldyBOZWFyYnlJbmRleE1lcmdlKGxheWVyLnNvdXJjZXMpXG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgbGF5ZXIub25jaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlc3RyaWN0aW9uc1xuICAgIGNvbnN0IG51bWVyaWMgPSBzb3VyY2VzLm1hcCgoc3JjKSA9PiBzcmMubnVtZXJpYykuZXZlcnkoZT0+ZSkgIFxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgXCJudW1lcmljXCIsIHtnZXQ6ICgpID0+IG51bWVyaWN9KTtcblxuICAgIC8vIGluaXRpYWxpc2VcbiAgICBsYXllci5zb3VyY2VzID0gc291cmNlcztcblxuICAgIHJldHVybiBsYXllclxufVxuXG5cblxuLyoqXG4gKiBDcmVhdGluZyBhIG1lcmdlZCBOZWFyYnlJbmRleCBmb3Igc2V0IG9mIExheWVycy5cbiAqICBcbiAqIEEgcmVnaW9uIHdpdGhpbiB0aGUgbWVyZ2VkIGluZGV4IHdpbGwgY29udGFpblxuICogYSBsaXN0IG9mIHJlZmVyZW5jZXMgdG8gKGNhY2hlIG9iamVjdHMpIGZvciBcbiAqIHRoZSBMYXllcnMgd2hpY2ggYXJlIGRlZmluZWQgaW4gdGhpcyByZWdpb24uXG4gKiBcbiAqIEltcGxlbWVudGF0aW9uIGlzIHN0YXRlbGVzcy5cbiAqIFNldCBvZiBsYXllcnMgaXMgYXNzdW1lZCB0byBiZSBzdGF0aWMuXG4gKi9cblxuZnVuY3Rpb24gY21wX2FzY2VuZGluZyhwMSwgcDIpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQuY21wKHAxLCBwMilcbn1cblxuZnVuY3Rpb24gY21wX2Rlc2NlbmRpbmcocDEsIHAyKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50LmNtcChwMiwgcDEpXG59XG5cbmV4cG9ydCBjbGFzcyBOZWFyYnlJbmRleE1lcmdlIGV4dGVuZHMgTmVhcmJ5SW5kZXhCYXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKHNvdXJjZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICAgIHRoaXMuX2NhY2hlcyA9IG5ldyBNYXAoc291cmNlcy5tYXAoKHNyYykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFtzcmMsIHNyYy5jcmVhdGVDYWNoZSgpXTtcbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIG5lYXJieShvZmZzZXQpIHtcbiAgICAgICAgb2Zmc2V0ID0gZW5kcG9pbnQuZnJvbV9pbnB1dChvZmZzZXQpO1xuICAgICAgICAvLyBhY2N1bXVsYXRlIG5lYXJieSBmcm9tIGFsbCBzb3VyY2VzXG4gICAgICAgIGNvbnN0IHByZXZfbGlzdCA9IFtdLCBuZXh0X2xpc3QgPSBbXTtcbiAgICAgICAgY29uc3QgY2VudGVyID0gW107XG4gICAgICAgIGNvbnN0IGNlbnRlcl9oaWdoX2xpc3QgPSBbXTtcbiAgICAgICAgY29uc3QgY2VudGVyX2xvd19saXN0ID0gW11cbiAgICAgICAgZm9yIChsZXQgc3JjIG9mIHRoaXMuX3NvdXJjZXMpIHtcbiAgICAgICAgICAgIGxldCBuZWFyYnkgPSBzcmMuaW5kZXgubmVhcmJ5KG9mZnNldCk7XG4gICAgICAgICAgICBsZXQgcHJldl9yZWdpb24gPSBzcmMuaW5kZXguZmluZF9yZWdpb24obmVhcmJ5LCB7ZGlyZWN0aW9uOi0xfSk7XG4gICAgICAgICAgICBsZXQgbmV4dF9yZWdpb24gPSBzcmMuaW5kZXguZmluZF9yZWdpb24obmVhcmJ5LCB7ZGlyZWN0aW9uOjF9KTtcbiAgICAgICAgICAgIGlmIChwcmV2X3JlZ2lvbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwcmV2X2xpc3QucHVzaChlbmRwb2ludC5mcm9tX2ludGVydmFsKHByZXZfcmVnaW9uLml0dilbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHRfcmVnaW9uICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5leHRfbGlzdC5wdXNoKGVuZHBvaW50LmZyb21faW50ZXJ2YWwobmV4dF9yZWdpb24uaXR2KVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmVhcmJ5LmNlbnRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY2VudGVyLnB1c2godGhpcy5fY2FjaGVzLmdldChzcmMpKTtcbiAgICAgICAgICAgICAgICBsZXQgW2xvdywgaGlnaF0gPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKG5lYXJieS5pdHYpO1xuICAgICAgICAgICAgICAgIGNlbnRlcl9oaWdoX2xpc3QucHVzaChoaWdoKTtcbiAgICAgICAgICAgICAgICBjZW50ZXJfbG93X2xpc3QucHVzaChsb3cpOyAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gZmluZCBjbG9zZXN0IGVuZHBvaW50IHRvIHRoZSByaWdodCAobm90IGluIGNlbnRlcilcbiAgICAgICAgbmV4dF9saXN0LnNvcnQoY21wX2FzY2VuZGluZyk7XG4gICAgICAgIGNvbnN0IG5leHRfbG93ID0gbmV4dF9saXN0WzBdIHx8IGVuZHBvaW50LlBPU19JTkY7XG5cbiAgICAgICAgLy8gZmluZCBjbG9zZXN0IGVuZHBvaW50IHRvIHRoZSBsZWZ0IChub3QgaW4gY2VudGVyKVxuICAgICAgICBwcmV2X2xpc3Quc29ydChjbXBfZGVzY2VuZGluZyk7XG4gICAgICAgIGNvbnN0IHByZXZfaGlnaCA9IHByZXZfbGlzdFswXSB8fCBlbmRwb2ludC5ORUdfSU5GO1xuXG4gICAgICAgIHJldHVybiBuZWFyYnlfZnJvbShcbiAgICAgICAgICAgICAgICBwcmV2X2hpZ2gsIFxuICAgICAgICAgICAgICAgIGNlbnRlcl9sb3dfbGlzdCwgXG4gICAgICAgICAgICAgICAgY2VudGVyLFxuICAgICAgICAgICAgICAgIGNlbnRlcl9oaWdoX2xpc3QsXG4gICAgICAgICAgICAgICAgbmV4dF9sb3dcbiAgICAgICAgICAgICk7XG4gICAgfVxufTtcbiIsImltcG9ydCB7IGludGVydmFsLCBlbmRwb2ludH0gZnJvbSBcIi4uL3V0aWwvaW50ZXJ2YWxzLmpzXCI7XG5pbXBvcnQgeyBOZWFyYnlJbmRleEJhc2UgfSBmcm9tIFwiLi4vbmVhcmJ5X2Jhc2UuanNcIjtcbmltcG9ydCB7IExheWVyIH0gZnJvbSBcIi4uL2xheWVyX2Jhc2UuanNcIlxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgQk9PTEVBTiBMQVlFUlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKiBcbiAgICBCb29sZWFuIExheWVyIGlzIHJldHVybnMgdmFsdWVzIDAvMSAtIG1ha2luZyBpdCBhIG51bWVyaWMgbGF5ZXJcbiovXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGJvb2xlYW5fbGF5ZXIoc3JjKSB7XG5cbiAgICBjb25zdCBsYXllciA9IG5ldyBMYXllcigpO1xuICAgIGxheWVyLmluZGV4ID0gbmV3IE5lYXJieUluZGV4Qm9vbGVhbihzcmMuaW5kZXgpO1xuICAgIFxuICAgIC8vIHN1YnNjcmliZVxuICAgIHNyYy5hZGRfY2FsbGJhY2soKGVBcmcpID0+IHtcbiAgICAgICAgbGF5ZXIub25jaGFuZ2UoZUFyZyk7XG4gICAgfSk7XG5cblxuICAgIC8vIHJlc3RyaWN0aW9uc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgXCJudW1lcmljXCIsIHtnZXQ6ICgpID0+IHRydWV9KTtcblxuICAgIC8vIGluaXRpYWxpc2VcbiAgICBsYXllci5zcmMgPSBzcmM7XG4gICAgcmV0dXJuIGxheWVyO1xufSBcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgQk9PTEVBTiBORUFSQlkgSU5ERVhcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBXcmFwcGVyIEluZGV4IHdoZXJlIHJlZ2lvbnMgYXJlIHRydWUvZmFsc2UsIGJhc2VkIG9uIFxuICogY29uZGl0aW9uIG9uIG5lYXJieS5jZW50ZXIuXG4gKiBCYWNrLXRvLWJhY2sgcmVnaW9ucyB3aGljaCBhcmUgdHJ1ZSBhcmUgY29sbGFwc2VkIFxuICogaW50byBvbmUgcmVnaW9uXG4gKiBcbiAqL1xuXG5mdW5jdGlvbiBxdWVyeU9iamVjdCAodmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBxdWVyeTogZnVuY3Rpb24gKG9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHt2YWx1ZSwgZHluYW1pYzpmYWxzZSwgb2Zmc2V0fTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5lYXJieUluZGV4Qm9vbGVhbiBleHRlbmRzIE5lYXJieUluZGV4QmFzZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihpbmRleCwgb3B0aW9ucz17fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICAgICAgICBsZXQge2NvbmRpdGlvbiA9IChjZW50ZXIpID0+IGNlbnRlci5sZW5ndGggPiAwfSA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuX2NvbmRpdGlvbiA9IGNvbmRpdGlvbjtcbiAgICB9XG5cbiAgICBuZWFyYnkob2Zmc2V0KSB7XG4gICAgICAgIG9mZnNldCA9IGVuZHBvaW50LmZyb21faW5wdXQob2Zmc2V0KTtcbiAgICAgICAgY29uc3QgbmVhcmJ5ID0gdGhpcy5faW5kZXgubmVhcmJ5KG9mZnNldCk7XG4gICAgICAgIFxuICAgICAgICBsZXQgZXZhbHVhdGlvbiA9IHRoaXMuX2NvbmRpdGlvbihuZWFyYnkuY2VudGVyKTsgXG4gICAgICAgIC8qIFxuICAgICAgICAgICAgc2VlayBsZWZ0IGFuZCByaWdodCBmb3IgZmlyc3QgcmVnaW9uXG4gICAgICAgICAgICB3aGljaCBkb2VzIG5vdCBoYXZlIHRoZSBzYW1lIGV2YWx1YXRpb24gXG4gICAgICAgICovXG4gICAgICAgIGNvbnN0IGNvbmRpdGlvbiA9IChjZW50ZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb25kaXRpb24oY2VudGVyKSAhPSBldmFsdWF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXhwYW5kIHJpZ2h0XG4gICAgICAgIGxldCByaWdodDtcbiAgICAgICAgbGV0IHJpZ2h0X25lYXJieSA9IHRoaXMuX2luZGV4LmZpbmRfcmVnaW9uKG5lYXJieSwge1xuICAgICAgICAgICAgZGlyZWN0aW9uOjEsIGNvbmRpdGlvblxuICAgICAgICB9KTsgICAgICAgIFxuICAgICAgICBpZiAocmlnaHRfbmVhcmJ5ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmlnaHQgPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKHJpZ2h0X25lYXJieS5pdHYpWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXhwYW5kIGxlZnRcbiAgICAgICAgbGV0IGxlZnQ7XG4gICAgICAgIGxldCBsZWZ0X25lYXJieSA9IHRoaXMuX2luZGV4LmZpbmRfcmVnaW9uKG5lYXJieSwge1xuICAgICAgICAgICAgZGlyZWN0aW9uOi0xLCBjb25kaXRpb25cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsZWZ0X25lYXJieSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxlZnQgPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKGxlZnRfbmVhcmJ5Lml0dilbMV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBleHBhbmQgdG8gaW5maW5pdHlcbiAgICAgICAgbGVmdCA9IGxlZnQgfHwgZW5kcG9pbnQuTkVHX0lORjtcbiAgICAgICAgcmlnaHQgPSByaWdodCB8fCBlbmRwb2ludC5QT1NfSU5GO1xuICAgICAgICBjb25zdCBsb3cgPSBlbmRwb2ludC5mbGlwKGxlZnQpO1xuICAgICAgICBjb25zdCBoaWdoID0gZW5kcG9pbnQuZmxpcChyaWdodClcbiAgICAgICAgY29uc3QgdmFsdWUgPSBldmFsdWF0aW9uID8gMSA6IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpdHY6IGludGVydmFsLmZyb21fZW5kcG9pbnRzKGxvdywgaGlnaCksXG4gICAgICAgICAgICBjZW50ZXIgOiBbcXVlcnlPYmplY3QodmFsdWUpXSxcbiAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICByaWdodCxcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IExheWVyIH0gZnJvbSBcIi4uL2xheWVyX2Jhc2UuanNcIjtcbmltcG9ydCB7IE5lYXJieUluZGV4Qm9vbGVhbiB9IGZyb20gXCIuL2Jvb2xlYW4uanNcIjtcbmltcG9ydCB7IE5lYXJieUluZGV4TWVyZ2UgfSBmcm9tIFwiLi9tZXJnZS5qc1wiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dpY2FsX21lcmdlX2xheWVyKHNvdXJjZXMsIG9wdGlvbnM9e30pIHtcblxuICAgIGNvbnN0IHtleHByfSA9IG9wdGlvbnM7XG4gICAgbGV0IGNvbmRpdGlvbjtcbiAgICBpZiAoZXhwcikge1xuICAgICAgICBjb25kaXRpb24gPSAoY2VudGVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZXhwci5ldmFsKGNlbnRlcik7XG4gICAgICAgIH0gICAgXG4gICAgfVxuXG4gICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXIoKTtcbiAgICBjb25zdCBpbmRleCA9IG5ldyBOZWFyYnlJbmRleE1lcmdlKHNvdXJjZXMpO1xuICAgIGxheWVyLmluZGV4ID0gbmV3IE5lYXJieUluZGV4Qm9vbGVhbihpbmRleCwge2NvbmRpdGlvbn0pO1xuXG4gICAgLy8gc3Vic2NyaWJlIHRvIGNhbGxiYWNrcyBmcm9tIHNvdXJjZXNcbiAgICBzb3VyY2VzLm1hcCgoc3JjKSA9PiB7XG4gICAgICAgIHJldHVybiBzcmMuYWRkX2NhbGxiYWNrKGxheWVyLm9uY2hhbmdlKTtcbiAgICB9KTtcbiAgICBcbiAgICBsYXllci5zb3VyY2VzID0gc291cmNlcztcblxuICAgIC8vIHJlc3RyaWN0aW9uc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgXCJudW1lcmljXCIsIHtnZXQ6ICgpID0+IHRydWV9KTtcblxuICAgIHJldHVybiBsYXllcjtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gbG9naWNhbF9leHByIChzcmMpIHtcbiAgICBpZiAoIShzcmMgaW5zdGFuY2VvZiBMYXllcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBtdXN0IGJlIGxheWVyICR7c3JjfWApXG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjZW50ZXIpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNhY2hlIG9mIGNlbnRlcikge1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZS5zcmMgPT0gc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubG9naWNhbF9leHByLmFuZCA9IGZ1bmN0aW9uIGFuZCguLi5leHBycykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjZW50ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBleHBycy5ldmVyeSgoZXhwcikgPT4gZXhwci5ldmFsKGNlbnRlcikpO1xuICAgICAgICB9ICAgIFxuICAgIH1cbn1cblxubG9naWNhbF9leHByLm9yID0gZnVuY3Rpb24gb3IoLi4uZXhwcnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBldmFsOiBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwcnMuc29tZSgoZXhwcikgPT4gZXhwci5ldmFsKGNlbnRlcikpO1xuICAgICAgICB9ICAgIFxuICAgIH1cbn1cblxubG9naWNhbF9leHByLnhvciA9IGZ1bmN0aW9uIHhvcihleHByMSwgZXhwcjIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBldmFsOiBmdW5jdGlvbiAoY2VudGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwcjEuZXZhbChjZW50ZXIpICE9IGV4cHIyLmV2YWwoY2VudGVyKTtcbiAgICAgICAgfSAgICBcbiAgICB9XG59XG5cbmxvZ2ljYWxfZXhwci5ub3QgPSBmdW5jdGlvbiBub3QoZXhwcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGV2YWw6IGZ1bmN0aW9uIChjZW50ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiAhZXhwci5ldmFsKGNlbnRlcik7XG4gICAgICAgIH0gICAgXG4gICAgfVxufVxuXG5cblxuXG4iLCJpbXBvcnQgeyBlbmRwb2ludCB9IGZyb20gXCIuLi91dGlsL2ludGVydmFscy5qc1wiO1xuaW1wb3J0IHsgTmVhcmJ5SW5kZXhCYXNlIH0gZnJvbSBcIi4uL25lYXJieV9iYXNlLmpzXCI7XG5pbXBvcnQgeyBMYXllciB9IGZyb20gXCIuLi9sYXllcl9iYXNlLmpzXCJcbmltcG9ydCAqIGFzIHNyY3Byb3AgZnJvbSBcIi4uL3V0aWwvYXBpX3NyY3Byb3AuanNcIjtcblxuXG4vKipcbiAqIGFmZmluZSB0cmFuc2Zvcm0gMUQgYnkgc2hpZnQgYW5kIHNjYWxlIGZhY3RvclxuICovXG5cbmZ1bmN0aW9uIHRyYW5zZm9ybShwLCB7c2hpZnQ9MCwgc2NhbGU9MX0pIHtcbiAgICBpZiAocCA9PSB1bmRlZmluZWQgfHwgIWlzRmluaXRlKHApKSB7XG4gICAgICAgIC8vIHAgLSBub29wXG4gICAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgcCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIC8vIHAgaXMgbnVtYmVyIC0gdHJhbnNmb3JtXG4gICAgICAgIHJldHVybiAocCpzY2FsZSkgKyBzaGlmdDtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocCkgJiYgcC5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIHAgaXMgZW5kcG9pbnQgLSB0cmFuc2Zvcm0gdmFsdWVcbiAgICAgICAgbGV0IFt2YWwsIGJyYWNrZXRdID0gcDtcbiAgICAgICAgcmV0dXJuIGVuZHBvaW50LmZyb21faW5wdXQoWyh2YWwqc2NhbGUpK3NoaWZ0LCBicmFja2V0XSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZXZlcnNlKHAsIHtzaGlmdD0wLCBzY2FsZT0xfSkge1xuICAgIGlmIChwID09IHVuZGVmaW5lZCB8fCAhaXNGaW5pdGUocCkpIHtcbiAgICAgICAgLy8gcCAtIG5vb3BcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBwID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgLy8gcCBpcyBudW1iZXIgLSB0cmFuc2Zvcm1cbiAgICAgICAgcmV0dXJuIChwLXNoaWZ0KS9zY2FsZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocCkgJiYgcC5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIHAgaXMgZW5kcG9pbnQgLSB0cmFuc2Zvcm0gdmFsdWVcbiAgICAgICAgbGV0IFt2YWwsIGJyYWNrZXRdID0gcDtcbiAgICAgICAgcmV0dXJuIGVuZHBvaW50LmZyb21faW5wdXQoWygodmFsLXNoaWZ0KS9zY2FsZSksIGJyYWNrZXRdKTtcbiAgICB9XG59XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIE5FQVJCWSBJTkRFWCAtIEFGRklORSBUSU1FTElORSBUUkFOU0ZPUk1cbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuY2xhc3MgTmVhcmJ5SW5kZXhBVFQgZXh0ZW5kcyBOZWFyYnlJbmRleEJhc2Uge1xuXG4gICAgY29uc3RydWN0b3IgKGxheWVyLCBvcHRpb25zPXt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX2xheWVyID0gbGF5ZXI7XG4gICAgICAgIHRoaXMuX2NhY2hlID0gbGF5ZXIuY3JlYXRlQ2FjaGUoKTtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIFxuICAgICAgICAvLyB0cmFuc2Zvcm0gY2FjaGVcbiAgICAgICAgdGhpcy5fdHJhbnNmb3JtX2NhY2hlID0ge1xuICAgICAgICAgICAgcXVlcnk6IGZ1bmN0aW9uIChvZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAvLyByZXZlcnNlIHRyYW5zZm9ybSBxdWVyeVxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fY2FjaGUucXVlcnkocmV2ZXJzZShvZmZzZXQsIHRoaXMuX29wdGlvbnMpKTtcbiAgICAgICAgICAgICAgICAvLyBrZWVwIG9yaWdpbmFsIG9mZnNldCAoaW5zdGVhZCBvZiByZXZlcnNpbmcgcmVzdWx0KVxuICAgICAgICAgICAgICAgIHJldHVybiB7Li4uc3RhdGUsIG9mZnNldH07XG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBuZWFyYnkob2Zmc2V0KSB7XG4gICAgICAgIG9mZnNldCA9IGVuZHBvaW50LmZyb21faW5wdXQob2Zmc2V0KTtcbiAgICAgICAgLy8gcmV2ZXJzZSB0cmFuc2Zvcm0gcXVlcnkgb2Zmc2V0XG4gICAgICAgIGNvbnN0IG5lYXJieSA9IHRoaXMuX2xheWVyLmluZGV4Lm5lYXJieShyZXZlcnNlKG9mZnNldCwgdGhpcy5fb3B0aW9ucykpO1xuICAgICAgICAvLyB0cmFuc2Zvcm0gcXVlcnkgcmVzdWx0IFxuICAgICAgICBjb25zdCBpdHYgPSBuZWFyYnkuaXR2LnNsaWNlKCk7XG4gICAgICAgIGl0dlswXSA9IHRyYW5zZm9ybShuZWFyYnkuaXR2WzBdLCB0aGlzLl9vcHRpb25zKTtcbiAgICAgICAgaXR2WzFdID0gdHJhbnNmb3JtKG5lYXJieS5pdHZbMV0sIHRoaXMuX29wdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXR2LFxuICAgICAgICAgICAgbGVmdDogdHJhbnNmb3JtKG5lYXJieS5sZWZ0LCB0aGlzLl9vcHRpb25zKSxcbiAgICAgICAgICAgIHJpZ2h0OiB0cmFuc2Zvcm0obmVhcmJ5LnJpZ2h0LCB0aGlzLl9vcHRpb25zKSxcbiAgICAgICAgICAgIGNlbnRlcjogbmVhcmJ5LmNlbnRlci5tYXAoKCkgPT4gdGhpcy5fdHJhbnNmb3JtX2NhY2hlKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBUSU1FTElORSBUUkFOU0ZPUk0gTEFZRVJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBTaGlmdGluZyBhbmQgc2NhbGluZyB0aGUgdGltZWxpbmUgb2YgYSBsYXllclxuICogXG4gKiBvcHRpb25zOlxuICogLSBzaGlmdDogYSB2YWx1ZSBvZiAyIGVmZmVjdGl2ZWx5IG1lYW5zIHRoYXQgbGF5ZXIgY29udGVudHMgXG4gKiAgIGFyZSBzaGlmdGVkIHRvIHRoZSByaWdodCBvbiB0aGUgdGltZWxpbmUsIGJ5IDIgdW5pdHNcbiAqIC0gc2NhbGU6IGEgdmFsdWUgb2YgMiBtZWFucyB0aGF0IHRoZSBsYXllciBpcyBzdHJldGNoZWRcbiAqICAgYnkgYSBmYWN0b3Igb2YgMlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lbGluZV90cmFuc2Zvcm0gKHNyYywgb3B0aW9ucz17fSkge1xuXG4gICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXIoKTtcblxuICAgIC8vIHNldHVwIHNyYyBwcm9wZXJ0eVxuICAgIHNyY3Byb3AuYWRkU3RhdGUobGF5ZXIpO1xuICAgIHNyY3Byb3AuYWRkTWV0aG9kcyhsYXllcik7XG4gICAgbGF5ZXIuc3JjcHJvcF9yZWdpc3RlcihcInNyY1wiKTtcbiAgICAgICAgXG4gICAgbGF5ZXIuc3JjcHJvcF9jaGVjayA9IGZ1bmN0aW9uKHByb3BOYW1lLCBzcmMpIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwic3JjXCIpIHtcbiAgICAgICAgICAgIGlmICghKHNyYyBpbnN0YW5jZW9mIExheWVyKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXCJzcmNcIiBtdXN0IGJlIExheWVyICR7c3JjfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNyYzsgICAgXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsYXllci5zcmNwcm9wX29uY2hhbmdlID0gZnVuY3Rpb24ocHJvcE5hbWUsIGVBcmcpIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwic3JjXCIpIHtcbiAgICAgICAgICAgIGlmIChlQXJnID09IFwicmVzZXRcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBuZXcgTmVhcmJ5SW5kZXhBVFQodGhpcy5zcmMsIG9wdGlvbnMpXG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgbGF5ZXIub25jaGFuZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJlc3RyaWN0aW9uc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsYXllciwgXCJudW1lcmljXCIsIHtnZXQ6ICgpID0+IHNyYy5udW1lcmljfSk7XG5cbiAgICAvLyBpbml0aWFsaXNlXG4gICAgbGF5ZXIuc3JjID0gc3JjO1xuXG5cblxuICAgIFxuICAgIHJldHVybiBsYXllcjtcbn1cblxuIiwiaW1wb3J0IHsgQ3Vyc29yIH0gZnJvbSBcIi4uL2N1cnNvcl9iYXNlLmpzXCI7XG5pbXBvcnQgeyBsb2NhbF9jbG9jayB9IGZyb20gXCIuLi91dGlsL2NvbW1vbi5qc1wiO1xuXG4vKipcbiAqIHJlY29yZCBjdXJzb3IgaW50byBsYXllclxuICogXG4gKiAgIE1BSU4gSURFQVxuICogLSByZWNvcmQgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBjdXJzb3IgKHNyYykgaW50byBhIGxheWVyIChkc3QpXG4gKiBcbiAqIC0gcmVjb3JkaW5nIGlzIGVzc2VudGlhbGx5IGEgY29weSBvcGVyYXRpb24gZnJvbSB0aGVcbiAqICAgc3RhdGVQcm92aWRlciBvZiBhIGN1cnNvciAoc3JjKSB0byB0aGUgc3RhdGVQcm92aWRlciBvZiB0aGUgbGF5ZXIgKGRzdCkuXG4gKiAtIG1vcmUgZ2VuZXJhbGx5IGNvcHkgc3RhdGUgKGl0ZW1zKSBmcm9tIGN1cnNvciB0byBsYXllci4gXG4gKiAtIHJlY29yZGluZyB0aGVyZWZvciBvbmx5IGFwcGxpZXMgdG8gY3Vyc29ycyB0aGF0IHJ1biBkaXJlY3RseSBvbiBhIGxheWVyIHdpdGggaXRlbXNcbiAqIC0gbW9yZW92ZXIsIHRoZSB0YXJnZXQgbGF5ZXIgbXVzdCBoYXZlIGl0ZW1zICh0eXBpY2FsbHkgYSBsZWFmbGF5ZXIpXG4gKlxuICogXG4gKiAgIFRJTUVGUkFNRVMgXG4gKiAtIHRoZSByZWNvcmRpbmcgdG8gKGRzdCkgbGF5ZXIgaXMgZHJpdmVuIGJ5IGEgY2xvY2sgKGN0cmwpOiA8RFNUX0NMT0NLPlxuICogLSBkdXJpbmcgcmVjb3JkaW5nIC0gY3VycmVudCB2YWx1ZSBvZiB0aGUgc3JjIGN1cnNvciB3aWxsIGJlIGNvcGllZCwgYW5kXG4gKiAgIGNvbnZlcnRlZCBpbnRvIHRoZSB0aW1lbGluZSBvZiB0aGUgPERTVF9DTE9DSz5cbiAqIC0gcmVjb3JkaW5nIGlzIGFjdGl2ZSBvbmx5IHdoZW4gPERTVF9DTE9DSz4gaXMgcHJvZ3Jlc3Npbmcgd2l0aCByYXRlPT0xLjBcbiAqIC0gdGhpcyBvcGVucyBmb3IgTElWRSByZWNvcmRpbmcgKDxEU1RfQ0xPQ0s+IGlzIGZpeGVkUmF0ZSBjdXJzb3IpIG9yXG4gKiAgIGl0ZXJhdGl2ZSByZWNvcmRpbmcgdXNpbmcgYSAoTnVtYmVyaWNWYXJpYWJsZSksIGFsbG93aW5nIG11bHRpcGxlIHRha2VzLCBcbiAqIFxuICogXG4gKiAgIFJFQ09SRElOR1xuICogLSByZWNvcmRpbmcgaXMgZG9uZSBieSBhcHBlbmRpbmcgaXRlbXMgdG8gdGhlIGRzdCBsYXllciBcbiAqIC0gd2hlbiB0aGUgY3Vyc29yIHN0YXRlIGNoYW5nZXMgKGVudGlyZSBjdXJzb3Iuc3JjIGxheWVyIGlzIHJlc2V0KSBcbiAqIC0gdGhlIHBhcnQgd2hpY2ggZGVzY3JpYmVzIHRoZSBmdXR1cmUgd2lsbCBvdmVyd3JpdGUgdGhlIHJlbGV2YW50XG4gKiAtIHBhcnQgb2YgdGhlIHRoZSBsYXllciB0aW1lbGluZVxuICogLSB0aGUgZGVsaW5lYXRpb24gYmV0d2VlbiBwYXN0IGFuZCBmdXR1cmUgaXMgZGV0ZXJtaW5lZCBieSBcbiAqIC0gZnJlc2ggdGltZXN0YW1wIDxUUz4gZnJvbSA8RFNUX0NMT0NLPlxuICogLSBpZiBhbiBpdGVtIG92ZXJsYXBzIHdpdGggPFRTPiBpdCB3aWxsIGJlIHRydW5jYXRlcyBzbyB0aGF0IG9ubHkgdGhlIHBhcnRcbiAqIC0gdGhhdCBpcyBpbiB0aGUgZnV0dXJlIHdpbGwgYmUgcmVjb3JkZWQgKGNvcGllZCkgdG8gdGhlIGxheWVyLlxuICogLSBpbiBjYXNlIChjdHJsKSBpcyBhIG1lZGlhIGNvbnRyb2wgLSByZWNvcmRpbmcgY2FuIG9ubHkgaGFwcGVuXG4gKiAgIHdoZW4gdGhlIChjdHJsKSBpcyBtb3ZpbmcgZm9yd2FyZFxuICogXG4gKiAgIElOUFVUXG4gKiAtIChjdHJsKVxuICogICAgICAtIG51bWVyaWMgY3Vyc29yIChjdHJsLmZpeGVkUmF0ZSwgb3IgXG4gKiAgICAgIC0gbWVkaWEgY29udHJvbCAoY3RybC5jdHJsLmZpeGVkUmF0ZSAmJiBjdHJsLnNyYy5pdGVtc09ubHkpXG4gKiAtIChzcmMpIC0gY3Vyc29yIHdpdGggbGF5ZXIgd2l0aCBpdGVtcyAoc3JjLml0ZW1zT25seSkgXG4gKiAtIChkc3QpIC0gbGF5ZXIgb2YgaXRlbXMgKGRzdC5pdGVtc09ubHkgJiYgZHN0Lm11dGFibGUpXG4gKlxuICogICBOT1RFXG4gKiAtIGltcGxlbWVudGF0aW9uIGFzc3VtZXMgXG4gKiAgICAgIC0gKGRzdCkgbGF5ZXIgaXMgbm90IHRoZSBzYW1lIGFzIHRoZSAoc3JjKSBsYXllclxuICogICAgICAtIChzcmMpIGN1cnNvciBjYW4gbm90IGJlIGNsb2NrIGN1cnNvciAobWFrZXMgbm8gc2Vuc2UgdG8gcmVjb3JkIGEgY2xvY2tcbiAqICAgXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gbGF5ZXJfcmVjb3JkZXIob3B0aW9ucz17fSkge1xuICAgIGNvbnN0IHtjdHJsLCBzcmMsIGRzdH0gPSBvcHRpb25zO1xuXG4gICAgLy8gY2hlY2sgLSBjdHJsXG4gICAgaWYgKCEoY3RybCBpbnN0YW5jZW9mIEN1cnNvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBjdHJsIG11c3QgYmUgYSBjdXJzb3IgJHtjdHJsfWApO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAgICFjdHJsLmZpeGVkUmF0ZSAmJiAhY3RybC5jdHJsLmZpeGVkUmF0ZVxuICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGN0cmwgb3IgY3RybC5jdHJsIG11c3QgYmUgZml4ZWRSYXRlICR7Y3RybH1gKTtcbiAgICB9XG4gICAgaWYgKCFjdHJsLmZpeGVkUmF0ZSkge1xuICAgICAgICBpZiAoY3RybC5jdHJsLmZpeGVkUmF0ZSAmJiAhY3RybC5pdGVtc09ubHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZ2l2ZW4gY3RybC5jdHJsLmZpeGVkUmF0ZSwgY3RybCBtdXN0IGJlIGl0ZW1zT25seSAke2N0cmx9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjaGVjayAtIHNyY1xuICAgIGlmICghKHNyYyBpbnN0YW5jZW9mIEN1cnNvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzcmMgbXVzdCBiZSBhIGN1cnNvciAke3NyY31gKTtcbiAgICB9XG4gICAgaWYgKChzcmMuZml4ZWRSYXRlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGN1cnNvciBzcmMgY2FuIG5vdCBiZSBmaXhlZFJhdGUgY3Vyc29yICR7c3JjfWApO1xuICAgIH1cbiAgICBpZiAoIXNyYy5pdGVtc09ubHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBjdXJzb3Igc3JjIG11c3QgYmUgaXRlbXNPbmx5ICR7c3JjfWApO1xuICAgIH1cbiAgICBpZiAoIXNyYy5tdXRhYmxlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgY3Vyc29yIHNyYyBtdXN0IGJlIG11dGFibGUgJHtzcmN9YCk7XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgLSBzdGF0ZVByb3ZpZGVyc1xuICAgIGNvbnN0IHNyY19zdGF0ZVByb3ZpZGVyID0gc3JjLnNyYy5wcm92aWRlcjtcbiAgICBjb25zdCBkc3Rfc3RhdGVQcm92aWRlciA9IGRzdC5wcm92aWRlcjtcbiAgICBpZiAoc3JjX3N0YXRlUHJvdmlkZXIgPT09IGRzdF9zdGF0ZVByb3ZpZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgc3JjIGFuZCBkc3QgY2FuIG5vdCBoYXZlIHRoZSBzYW1lIHN0YXRlUHJvdmlkZXJgKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIHR1cm4gdGhpcyBhcm91bmQ/XG4gICAgICogaGF2ZSBzdGFydCBhbmQgc3RvcCByZWNvcmRpbmdcbiAgICAgKiBtZXRob2RzIGRpcmVjdCB0aGUgY29udHJvbD9cbiAgICAgKiBcbiAgICAgKiByZWNvcmRpbmcgd2l0aCBsaXZlIGNsb2NrIHJlcXVpcmVzXG4gICAgICogc3RhcnQgYW5kIHN0b3AgbWV0aG9kc1xuICAgICAqIFxuICAgICAqIHdoYXQgYWJvdXQgYSBtZWRpYSBjbG9jayA/XG4gICAgICogc2hvdWxkIGJlIGEgbWVkaWEgY2xvY2sgdGhhdCBjYW4gb25seSBtb3ZlIGZvcndhcmRcbiAgICAgKiBpdCBhY3R1YWxseSBtYWtlcyBzZW5zZSB0byBiZSBpbiByZWNvcmQgbW9kZSBldmVuIGlmIG1lZGlhY2xvY2sgaXMgcGF1c2VkXG4gICAgICogYmVjYXVzZSByZWNvcmRpbmcgb25seSBoYXBwZW5zIG9uIHN0YXRlIGNoYW5nZVxuICAgICAqIHBhdXNlZCBtZWFucyB5b3Ugb3ZlcndyaXRlIG9uIHRoZSBzYW1lIHNwb3RcbiAgICAgKiBza2lwcGluZyBiYWNrIHdoaWxlIGluIHJlY29yZCBtb2RlIC0gc2hvdWxkIHRoYXQgdHJpZ2dlciB3cml0ZSBjdXJyZW50XG4gICAgICogc3RhdGUgbG9uZ2VyIGJhY2tcbiAgICAgKiBcbiAgICAgKiBza2lwcGluZyBhbHdheXMgZXhpdCByZWNvcmQgbW9kZVxuICAgICAqIHJlY29yZCBtb2RlIGFsd2F5cyBzdGFydHNcbiAgICAgKiBtZWRpYSBjb250cm9sIG1heSBiZSBjb250cm9sbGVkIGV4dGVybmFsbHlcbiAgICAgKiBcbiAgICAgKiBzcGxpdCBiZXR3ZWVuIGEgbGl2ZSBhbmQgYSBtZWRpYSBjbG9jayByZWNvcmRlcj9cbiAgICAgKiBcbiAgICAgKi9cblxuICAgIC8vIGludGVybmFsIHN0YXRlXG4gICAgbGV0IGlzX3JlY29yZGluZyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogc3RhdGUgY2hhbmdlIGluIHNyYyBzdGF0ZVByb3ZpZGVyXG4gICAgICovXG5cbiAgICBmdW5jdGlvbiBvbl9zcmNfY2hhbmdlICgpIHtcbiAgICAgICAgaWYgKCFpc19yZWNvcmRpbmcpIHJldHVybjtcbiAgICAgICAgcmVjb3JkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc3RhdGUgY2hhbmdlIGluIGN0cmxcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBvbl9jdHJsX2NoYW5nZSAoKSB7XG4gICAgICAgIC8vIGZpZ3VyZSBvdXQgaWYgcmVjb3JkaW5nIHN0YXJ0cyBvciBzdG9wc1xuICAgICAgICBjb25zdCB3YXNfcmVjb3JkaW5nID0gaXNfcmVjb3JkaW5nO1xuICAgICAgICBpc19yZWNvcmRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKGN0cmwuZml4ZWRSYXRlKSB7XG4gICAgICAgICAgICBpc19yZWNvcmRpbmcgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY3RybF90cyA9IGN0cmwuY3RybC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gY3RybC5zcmMuaW5kZXgubmVhcmJ5KGN0cmxfdHMpLmNlbnRlcjtcbiAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMSlcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXNbMF0udHlwZSA9PSBcIm1vdGlvblwiICkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbcCx2LGEsdF0gPSBpdGVtc1swXS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IDAgfHwgdiA9PSAwICYmIGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc19yZWNvcmRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3YXNfcmVjb3JkaW5nICYmIGlzX3JlY29yZGluZykge1xuICAgICAgICAgICAgc3RhcnRfcmVjb3JkaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAod2FzX3JlY29yZGluZyAmJiAhaXNfcmVjb3JkaW5nKSB7XG4gICAgICAgICAgICBzdG9wX3JlY29yZGluZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmVjb3JkXG4gICAgICovXG4gICAgZnVuY3Rpb24gc3RhcnRfcmVjb3JkaW5nKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInN0YXJ0IHJlY29yZGluZ1wiKVxuICAgICAgICByZWNvcmQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdG9wX3JlY29yZGluZygpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJzdG9wIHJlY29yZGluZ1wiKVxuICAgICAgICAvLyBjbG9zZSBsYXN0IGl0ZW1cbiAgICAgICAgY29uc3QgdHMgPSBsb2NhbF9jbG9jay5ub3coKTtcbiAgICAgICAgY29uc3QgZHN0X29mZnNldCA9IGN0cmwucXVlcnkodHMpLnZhbHVlO1xuICAgICAgICBjb25zdCBpdGVtcyA9IGRzdC5pbmRleC5uZWFyYnkoZHN0X29mZnNldCkuY2VudGVyO1xuICAgICAgICBjb25zdCBpbnNlcnQgPSBpdGVtcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld19pdGVtID0gey4uLml0ZW19O1xuICAgICAgICAgICAgbmV3X2l0ZW0uaXR2WzFdID0gZHN0X29mZnNldDtcbiAgICAgICAgICAgIG5ld19pdGVtLml0dlszXSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIG5ld19pdGVtO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGRzdC51cGRhdGUoe2luc2VydCwgcmVzZXQ6ZmFsc2V9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlY29yZCgpIHtcbiAgICAgICAgY29uc3QgdHMgPSBsb2NhbF9jbG9jay5ub3coKTtcbiAgICAgICAgY29uc3Qgc3JjX29mZnNldCA9IHNyYy5xdWVyeSh0cykub2Zmc2V0O1xuICAgICAgICBjb25zdCBkc3Rfb2Zmc2V0ID0gY3RybC5xdWVyeSh0cykudmFsdWU7XG4gICAgICAgIC8vIGdldCBjdXJyZW50IHNyYyBpdGVtc1xuICAgICAgICAvLyBjcnVjaWFsIHRvIGNsb25lIHRoZSBpdGVtcyBiZWZvcmUgY2hhbmdpbmcgYW5kXG4gICAgICAgIC8vIHN0b3JpbmcgdGhlbSBpbiB0aGUgZHN0IGxheWVyXG4gICAgICAgIGxldCBzcmNfaXRlbXMgPSBzdHJ1Y3R1cmVkQ2xvbmUoc3JjX3N0YXRlUHJvdmlkZXIuZ2V0KCkpO1xuXG4gICAgICAgIC8vIHJlLWVuY29kZSBpdGVtcyBpbiBkc3QgdGltZWZyYW1lLCBpZiBuZWVkZWRcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZHN0X29mZnNldCAtIHNyY19vZmZzZXQ7XG4gICAgICAgIGlmIChvZmZzZXQgIT0gMCkge1xuICAgICAgICAgICAgY29uc3QgZHN0X2l0ZW1zID0gc3JjX2l0ZW1zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lc2hpZnRfaXRlbShpdGVtLCBvZmZzZXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkc3QuYXBwZW5kKGRzdF9pdGVtcywgZHN0X29mZnNldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkc3QuYXBwZW5kKHNyY19pdGVtcywgc3JjX29mZnNldCk7XG4gICAgICAgIH0gICAgICAgIFxuICAgIH1cblxuICAgIC8vIHJlZ2lzdGVyIGNhbGxiYWNrc1xuICAgIHNyY19zdGF0ZVByb3ZpZGVyLmFkZF9jYWxsYmFjayhvbl9zcmNfY2hhbmdlKTtcbiAgICBjdHJsLmFkZF9jYWxsYmFjayhvbl9jdHJsX2NoYW5nZSk7XG4gICAgb25fY3RybF9jaGFuZ2UoKTtcblxuICAgIHJldHVybiBkc3Q7XG59XG5cblxuLyoqXG4gKiB0aW1lc2hpZnQgcGFyYW1ldGVycyBvZiB0aW1lIGJ5IG9mZnNldFxuICovXG5mdW5jdGlvbiB0aW1lc2hpZnRfaXRlbSAoaXRlbSwgb2Zmc2V0KSB7XG4gICAgaXRlbSA9IHsuLi5pdGVtfTtcbiAgICBpdGVtLml0dlswXSA9IChpdGVtLml0dlswXSAhPSBudWxsKSA/IGl0ZW0uaXR2WzBdICsgb2Zmc2V0IDogbnVsbDtcbiAgICBpdGVtLml0dlsxXSA9IChpdGVtLml0dlsxXSAhPSBudWxsKSA/IGl0ZW0uaXR2WzFdICsgb2Zmc2V0IDogbnVsbDtcbiAgICAvLyBUT0RPIC0gcGVyaGFwcyBjaGFuZ2UgaW1wbGVtZW50YXRpb24gb2YgbW90aW9uIGFuZCB0cmFuc2l0aW9uIHNlZ21lbnRcbiAgICAvLyB0byB1c2UgdGltZXN0YW1wcyByZWxhdGl2ZSB0byB0aGUgc3RhcnQgb2YgdGhlIHNlZ21lbnQsXG4gICAgLy8gc2ltaWxhciB0byBpbnRlcnBvbGF0aW9uP1xuICAgIGlmIChpdGVtLnR5cGUgPT0gXCJtb3Rpb25cIikge1xuICAgICAgICBpdGVtLmRhdGEudGltZXN0YW1wID0gaXRlbS5kYXRhLnRpbWVzdGFtcCArIG9mZnNldDtcbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PSBcInRyYW5zaXRpb25cIikge1xuICAgICAgICBpdGVtLmRhdGEudDAgPSBpdGVtLmRhdGEudDAgKyBvZmZzZXQ7XG4gICAgICAgIGl0ZW0uZGF0YS50MSA9IGl0ZW0uZGF0YS50MSArIG9mZnNldDtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG59XG5cblxuXG4iLCJpbXBvcnQge2VuZHBvaW50fSBmcm9tIFwiLi9pbnRlcnZhbHMuanNcIjtcblxuLypcbiAgICBTdGF0ZSBQcm92aWRlciBWaWV3ZXJcbiovXG5cbmZ1bmN0aW9uIGl0ZW0yc3RyaW5nKGl0ZW0sIG9wdGlvbnMpIHtcbiAgICAvLyB0eHRcbiAgICBjb25zdCBpZF90eHQgPSBpdGVtLmlkO1xuICAgIGNvbnN0IHR5cGVfdHh0ID0gaXRlbS50eXBlO1xuICAgIGxldCBpdHZfdHh0ID0gXCJcIjtcbiAgICBpZiAoaXRlbS5pdHYgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IFtsb3csIGhpZ2gsIGxvd0luY2x1ZGUsIGhpZ2hJbmNsdWRlXSA9IGl0ZW0uaXR2O1xuICAgICAgICBjb25zdCBsb3dfdHh0ID0gKGxvdyA9PSBudWxsKSA/IFwibnVsbFwiIDogbG93LnRvRml4ZWQoMik7XG4gICAgICAgIGNvbnN0IGhpZ2hfdHh0ID0gKGhpZ2ggPT0gbnVsbCkgPyBcIm51bGxcIiA6IGhpZ2gudG9GaXhlZCgyKTtcbiAgICAgICAgaXR2X3R4dCA9IGBbJHtsb3dfdHh0fSwke2hpZ2hfdHh0fSwke2xvd0luY2x1ZGV9LCR7aGlnaEluY2x1ZGV9XWA7IFxuICAgIH1cbiAgICBsZXQgZGF0YV90eHQgPSBKU09OLnN0cmluZ2lmeShpdGVtLmRhdGEpO1xuXG4gICAgLy8gaHRtbFxuICAgIGxldCBpZF9odG1sID0gYDxzcGFuIGNsYXNzPVwiaXRlbS1pZFwiPiR7aWRfdHh0fTwvc3Bhbj5gO1xuICAgIGxldCBpdHZfaHRtbCA9IGA8c3BhbiBjbGFzcz1cIml0ZW0taXR2XCI+JHtpdHZfdHh0fTwvc3Bhbj5gO1xuICAgIGxldCB0eXBlX2h0bWwgPSBgPHNwYW4gY2xhc3M9XCJpdGVtLXR5cGVcIj4ke3R5cGVfdHh0fTwvc3Bhbj5gXG4gICAgbGV0IGRhdGFfaHRtbCA9IGA8c3BhbiBjbGFzcz1cIml0ZW0tZGF0YVwiPiR7ZGF0YV90eHR9PC9zcGFuPmA7XG4gICAgXG4gICAgLy8gZGVsZXRlIEJ1dHRvblxuICAgIGNvbnN0IHtkZWxldGVfYWxsb3dlZD1mYWxzZX0gPSBvcHRpb25zO1xuICAgIGlmIChkZWxldGVfYWxsb3dlZCkge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImRlbGV0ZVwiPlg8L2J1dHRvbj5cbiAgICAgICAgICAgICR7aWRfaHRtbH06ICR7dHlwZV9odG1sfSAke2l0dl9odG1sfSAke2RhdGFfaHRtbH1cbiAgICAgICAgPC9kaXY+YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgJHtpZF9odG1sfTogJHt0eXBlX2h0bWx9ICR7aXR2X2h0bWx9ICR7ZGF0YV9odG1sfVxuICAgICAgICA8L2Rpdj5gOyAgICAgICAgXG4gICAgfVxufVxuXG5cbmV4cG9ydCBjbGFzcyBTdGF0ZVByb3ZpZGVyVmlld2VyIHtcblxuICAgIGNvbnN0cnVjdG9yKHN0YXRlUHJvdmlkZXIsIGVsZW0sIG9wdGlvbnM9e30pIHtcbiAgICAgICAgdGhpcy5fc3AgPSBzdGF0ZVByb3ZpZGVyO1xuICAgICAgICB0aGlzLl9lbGVtID0gZWxlbTtcbiAgICAgICAgdGhpcy5faGFuZGxlID0gdGhpcy5fc3AuYWRkX2NhbGxiYWNrKHRoaXMuX29uY2hhbmdlLmJpbmQodGhpcykpOyBcblxuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIGxldCBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgIHRvU3RyaW5nOml0ZW0yc3RyaW5nXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSB7Li4uZGVmYXVsdHMsIC4uLm9wdGlvbnN9O1xuXG4gICAgICAgIC8qXG4gICAgICAgICAgICBTdXBwb3J0IGRlbGV0ZVxuICAgICAgICAqL1xuICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy5kZWxldGVfYWxsb3dlZCkge1xuICAgICAgICAgICAgLy8gbGlzdGVuIGZvciBjbGljayBldmVudHMgb24gcm9vdCBlbGVtZW50XG4gICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGNhdGNoIGNsaWNrIGV2ZW50IGZyb20gZGVsZXRlIGJ1dHRvblxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIjZGVsZXRlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVCdG4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBkZWxldGVCdG4uY2xvc2VzdChcIi5saXN0LWl0ZW1cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3AudXBkYXRlKHtyZW1vdmU6W2xpc3RJdGVtLmlkXX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcbiAgICAgICAgICAgIHJlbmRlciBpbml0aWFsIHN0YXRlXG4gICAgICAgICovIFxuICAgICAgICB0aGlzLl9vbmNoYW5nZSgpO1xuICAgIH1cblxuICAgIF9vbmNoYW5nZSgpIHtcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLl9zcC5nZXQoKSB8fCBbXTtcblxuICAgICAgICAvLyBzb3J0IGJ5IGxvdyBlbmRwb2ludFxuICAgICAgICBpdGVtcy5zb3J0KChpdGVtX2EsIGl0ZW1fYikgPT4ge1xuICAgICAgICAgICAgbGV0IGxvd0VwX2EgPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKGl0ZW1fYS5pdHYpWzBdO1xuICAgICAgICAgICAgbGV0IGxvd0VwX2IgPSBlbmRwb2ludC5mcm9tX2ludGVydmFsKGl0ZW1fYi5pdHYpWzBdO1xuICAgICAgICAgICAgcmV0dXJuIGVuZHBvaW50LmNtcChsb3dFcF9hLCBsb3dFcF9iKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gY2xlYXJcbiAgICAgICAgdGhpcy5fZWxlbS5yZXBsYWNlQ2hpbGRyZW4oKTtcbiAgICAgICAgLy8gcmVidWlsZFxuICAgICAgICBjb25zdCB7dG9TdHJpbmd9ID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgLy8gYWRkXG4gICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMuX2VsZW0ucXVlcnlTZWxlY3RvcihgIyR7aXRlbS5pZH1gKTtcbiAgICAgICAgICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcImlkXCIsIGl0ZW0uaWQpO1xuICAgICAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbGVtLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSB0b1N0cmluZyhpdGVtLCB0aGlzLl9vcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyX3Byb3ZpZGVyKHN0YXRlUHJvdmlkZXIsIHNlbGVjdG9yLCBvcHRpb25zPXt9KSB7XG4gICAgY29uc3QgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICByZXR1cm4gbmV3IFN0YXRlUHJvdmlkZXJWaWV3ZXIoc3RhdGVQcm92aWRlciwgZWxlbXMsIG9wdGlvbnMpO1xufVxuIiwiLy8gY2xhc3Nlc1xuaW1wb3J0IHsgTmVhcmJ5SW5kZXhCYXNlIH0gZnJvbSBcIi4vbmVhcmJ5X2Jhc2UuanNcIjtcbmltcG9ydCB7IExheWVyIH0gZnJvbSBcIi4vbGF5ZXJfYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ3Vyc29yIH0gZnJvbSBcIi4vY3Vyc29yX2Jhc2UuanNcIjtcblxuLy8gc3RhdGVQcm92aWRlcnNcbmltcG9ydCB7IGNsb2NrX3Byb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJfY2xvY2suanNcIjtcbmltcG9ydCB7IENvbGxlY3Rpb25Qcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyX2NvbGxlY3Rpb24uanNcIjtcbmltcG9ydCB7IE9iamVjdFByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJfb2JqZWN0LmpzXCI7XG5cbi8vIGZhY3RvcnkgZnVuY3Rpb25zXG5pbXBvcnQgeyBsZWFmX2xheWVyIH0gZnJvbSBcIi4vbGF5ZXJfbGVhZi5qc1wiO1xuaW1wb3J0IHsgY2xvY2tfY3Vyc29yIH0gZnJvbSBcIi4vY3Vyc29yX2Nsb2NrLmpzXCJcbmltcG9ydCB7IG9iamVjdF9jdXJzb3IgfSBmcm9tIFwiLi9jdXJzb3Jfb2JqZWN0LmpzXCI7XG5pbXBvcnQgeyBwbGF5YmFja19jdXJzb3IgfSBmcm9tIFwiLi9jdXJzb3JfcGxheWJhY2suanNcIjtcbmltcG9ydCB7IGxheWVyX2Zyb21fY3Vyc29yIH0gZnJvbSBcIi4vb3BzL2xheWVyX2Zyb21fY3Vyc29yLmpzXCI7XG5pbXBvcnQgeyBtZXJnZV9sYXllciB9IGZyb20gXCIuL29wcy9tZXJnZS5qc1wiO1xuaW1wb3J0IHsgYm9vbGVhbl9sYXllciB9IGZyb20gXCIuL29wcy9ib29sZWFuLmpzXCJcbmltcG9ydCB7IGxvZ2ljYWxfbWVyZ2VfbGF5ZXIsIGxvZ2ljYWxfZXhwcn0gZnJvbSBcIi4vb3BzL2xvZ2ljYWxfbWVyZ2UuanNcIjtcbmltcG9ydCB7IHRpbWVsaW5lX3RyYW5zZm9ybSB9IGZyb20gXCIuL29wcy90aW1lbGluZV90cmFuc2Zvcm0uanNcIjtcbmltcG9ydCB7IGN1cnNvcl90cmFuc2Zvcm0sIGxheWVyX3RyYW5zZm9ybSB9IGZyb20gXCIuL29wcy90cmFuc2Zvcm0uanNcIjtcbmltcG9ydCB7IGxheWVyX3JlY29yZGVyIH0gZnJvbSBcIi4vb3BzL3JlY29yZC5qc1wiO1xuaW1wb3J0IHsgY3Vyc29yX2Zyb21fdGltaW5nb2JqZWN0IH0gZnJvbSBcIi4vb3BzL2N1cnNvcl9mcm9tX3RpbWluZ29iamVjdC5qc1wiO1xuXG4vLyB1dGlsXG5pbXBvcnQgeyBsb2NhbF9jbG9jaywgcmVuZGVyX2N1cnNvciwgY2hlY2tfaXRlbXMgfSBmcm9tIFwiLi91dGlsL2NvbW1vbi5qc1wiO1xuaW1wb3J0IHsgcmVuZGVyX3Byb3ZpZGVyIH0gZnJvbSBcIi4vdXRpbC9wcm92aWRlcl92aWV3ZXIuanNcIjtcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgTEFZRVIgRkFDVE9SSUVTXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmZ1bmN0aW9uIGxheWVyKG9wdGlvbnM9e30pIHtcbiAgICBsZXQge3NyYywgcHJvdmlkZXIsIGl0ZW1zPVtdLCB2YWx1ZSwgLi4ub3B0c30gPSBvcHRpb25zO1xuICAgIGlmIChzcmMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChzcmMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICAgICAgcmV0dXJuIHNyYztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvdmlkZXIgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gY2hlY2tfaXRlbXMoW3tcbiAgICAgICAgICAgICAgICBpdHY6IFtudWxsLCBudWxsLCB0cnVlLCB0cnVlXSxcbiAgICAgICAgICAgICAgICBkYXRhOiB2YWx1ZVxuICAgICAgICAgICAgfV0pXG4gICAgICAgICAgICBwcm92aWRlciA9IG5ldyBPYmplY3RQcm92aWRlcih7aXRlbXN9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGl0ZW1zID0gY2hlY2tfaXRlbXMoaXRlbXMpO1xuICAgICAgICAgICAgcHJvdmlkZXIgPSBuZXcgQ29sbGVjdGlvblByb3ZpZGVyKHtpdGVtc30pO1xuICAgICAgICB9IFxuICAgIH1cbiAgICByZXR1cm4gbGVhZl9sYXllcih7cHJvdmlkZXIsIC4uLm9wdHN9KTsgXG59XG5cbmZ1bmN0aW9uIHJlY29yZCAob3B0aW9ucz17fSkge1xuICAgIGNvbnN0IGRzdCA9IGxheWVyKHttdXRhYmxlOnRydWV9KTtcbiAgICBsZXQge2N0cmwsIHNyY30gPSBvcHRpb25zO1xuICAgIGlmIChjdHJsID09IHVuZGVmaW5lZCkge1xuICAgICAgICBjdHJsID0gY2xvY2soKTtcbiAgICB9XG4gICAgcmV0dXJuIGxheWVyX3JlY29yZGVyKHtjdHJsLCBzcmMsIGRzdH0pO1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgQ1VSU09SIEZBQ1RPUklFU1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5mdW5jdGlvbiBjbG9jayhvcHRpb25zPXt9KSB7XG4gICAgY29uc3Qge2Nsb2NrLCB2ZWN0b3IsIC4uLm9wdHN9ID0gb3B0aW9ucztcbiAgICBjb25zdCBwcm92aWRlciA9IGNsb2NrX3Byb3ZpZGVyKHtjbG9jaywgdmVjdG9yfSk7XG4gICAgcmV0dXJuIGNsb2NrX2N1cnNvcih7cHJvdmlkZXIsIC4uLm9wdHN9KTtcbn1cblxuZnVuY3Rpb24gb2JqZWN0KG9wdGlvbnM9e30pIHtcbiAgICBsZXQge2N0cmwsIHNyYywgLi4uc3JjX29wdHN9ID0gb3B0aW9ucztcbiAgICBpZiAoY3RybCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3RybCA9IGNsb2NrKCk7XG4gICAgfVxuICAgIGlmIChzcmMgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNyYyA9IGxheWVyKHNyY19vcHRzKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdF9jdXJzb3Ioe2N0cmwsIHNyY30pO1xufVxuXG5mdW5jdGlvbiBwbGF5YmFjayhvcHRpb25zPXt9KSB7XG4gICAgbGV0IHtjdHJsLCBzcmMsIC4uLnNyY19vcHRzfSA9IG9wdGlvbnM7XG4gICAgaWYgKGN0cmwgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGN0cmwgPSBjbG9jaygpO1xuICAgIH1cbiAgICBpZiAoc3JjID09IHVuZGVmaW5lZCkge1xuICAgICAgICBzcmMgPSBsYXllcihzcmNfb3B0cyk7XG4gICAgfVxuICAgIHJldHVybiBwbGF5YmFja19jdXJzb3Ioe2N0cmwsIHNyY30pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICBFWFBPUlRTXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmV4cG9ydCB7XG4gICAgQ29sbGVjdGlvblByb3ZpZGVyLCBPYmplY3RQcm92aWRlcixcbiAgICBsb2NhbF9jbG9jayxcbiAgICBMYXllciwgQ3Vyc29yLCBOZWFyYnlJbmRleEJhc2UsXG4gICAgbGF5ZXIsIFxuICAgIGNsb2NrLFxuICAgIG9iamVjdCxcbiAgICBwbGF5YmFjayxcbiAgICByZWNvcmQsXG4gICAgbWVyZ2VfbGF5ZXIgYXMgbWVyZ2UsIFxuICAgIGJvb2xlYW5fbGF5ZXIgYXMgYm9vbGVhbixcbiAgICBsb2dpY2FsX21lcmdlX2xheWVyIGFzIGxvZ2ljYWxfbWVyZ2UsIFxuICAgIGxvZ2ljYWxfZXhwcixcbiAgICBsYXllcl9mcm9tX2N1cnNvcixcbiAgICBsYXllcl90cmFuc2Zvcm0sXG4gICAgY3Vyc29yX3RyYW5zZm9ybSxcbiAgICBjdXJzb3JfZnJvbV90aW1pbmdvYmplY3QsXG4gICAgdGltZWxpbmVfdHJhbnNmb3JtLFxuICAgIHJlbmRlcl9wcm92aWRlcixcbiAgICByZW5kZXJfY3Vyc29yXG59IiwiaW1wb3J0IHsgQ3Vyc29yIH0gZnJvbSBcIi4vY3Vyc29yX2Jhc2UuanNcIjtcbmltcG9ydCB7IENsb2NrUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcl9jbG9jay5qc1wiO1xuaW1wb3J0ICogYXMgc3JjcHJvcCBmcm9tIFwiLi91dGlsL2FwaV9zcmNwcm9wLmpzXCI7XG5pbXBvcnQgeyBsb2NhbF9jbG9jayB9IGZyb20gXCIuL3V0aWwvY29tbW9uLmpzXCI7XG5cbi8qKlxuICogQ2xvY2sgQ3Vyc29yIGlzIGEgY3Vyc29yIHRoYXQgd3JhcHMgYSBjbG9jayBwcm92aWRlciwgd2hpY2ggaXMgYXZhaWxhYmxlIFxuICogb24gdGhlIHByb3ZpZGVyIHByb3BlcnR5LlxuICogXG4gKiBDbG9jayBjdXJzb3IgZG9lcyBub3QgZGVwZW5kIG9uIGEgc3JjIGxheWVyIG9yIGEgY3RybCBjdXJzb3IuIFxuICogQ2xvY2sgY3Vyc29yIGlzIEZpeGVkUmF0ZSBDdXJzb3IgKGJwbSAxKVxuICogQ2xvY2sgY3Vyc29yIGlzIE51bWJlck9ubHlcbiAqIFxuICogQ2xvY2sgY3Vyc29yIHRha2Ugb3B0aW9ucyB7c2tldywgc2NhbGV9IHRvIHRyYW5zZm9ybSB0aGUgY2xvY2sgdmFsdWUuXG4gKiBTY2FsZSBpcyBtdWx0aXBsaWVyIHRvIHRoZSBjbG9jayB2YWx1ZSwgYXBwbGllZCBiZWZvcmUgdGhlIHNrZXcgc28gdGhhdFxuICogaXQgcHJlc2VydmVzIHRoZSB6ZXJvIHBvaW50LlxuICogXG4gKiBUaGUgQ2xvY2sgY3Vyc29yIGdlbmVyYWxseSBkb2VzIG5vdCBpbnZva2UgYW55IGNhbGxiYWNrLCBhcyBpdCBpcyBhbHdheXMgaW4gZHluYW1pYyBzdGF0ZS5cbiAqIEhvd2V2ZXIsIGEgY2FsbGJhY2sgd2lsbCBiZSBpbnZva2VkIGlmIHRoZSBjbG9ja3Byb3ZpZGVyIGlzIGNoYW5nZWQgdGhyb3VnaCBcbiAqIGFzc2lnbm1lbnQgb2YgdGhlIHByb3ZpZGVyIHByb3BlcnR5LlxuICogXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb2NrX2N1cnNvcihvcHRpb25zPXt9KSB7XG5cbiAgICBjb25zdCB7cHJvdmlkZXIsIHNoaWZ0PTAsIHNjYWxlPTEuMH0gPSBvcHRpb25zO1xuXG4gICAgY29uc3QgY3Vyc29yID0gbmV3IEN1cnNvcigpO1xuXG4gICAgLy8gcmVzdHJpY3Rpb25zXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN1cnNvciwgXCJudW1lcmljXCIsIHtnZXQ6ICgpID0+IHRydWV9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Vyc29yLCBcImZpeGVkUmF0ZVwiLCB7Z2V0OiAoKSA9PiB0cnVlfSk7XG5cbiAgICAvLyBxdWVyeVxuICAgIGN1cnNvci5xdWVyeSA9IGZ1bmN0aW9uIChsb2NhbF90cz1sb2NhbF9jbG9jay5ub3coKSkge1xuICAgICAgICBjb25zdCBjbG9ja190cyA9IHByb3ZpZGVyLm5vdyhsb2NhbF90cyk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gKGNsb2NrX3RzICogc2NhbGUpICsgc2hpZnQ7XG4gICAgICAgIHJldHVybiB7dmFsdWUsIGR5bmFtaWM6dHJ1ZSwgb2Zmc2V0OmxvY2FsX3RzfTtcbiAgICB9XG5cbiAgICAvLyBzZXR1cCBwcm92aWRlciBhcyBzZXR0YWJsZSBwcm9wZXJ0eVxuICAgIHNyY3Byb3AuYWRkU3RhdGUoY3Vyc29yKTtcbiAgICBzcmNwcm9wLmFkZE1ldGhvZHMoY3Vyc29yKTtcbiAgICBjdXJzb3Iuc3JjcHJvcF9yZWdpc3RlcihcInByb3ZpZGVyXCIpO1xuICAgIGN1cnNvci5zcmNwcm9wX2NoZWNrID0gZnVuY3Rpb24gKHByb3BOYW1lLCBvYmopIHtcbiAgICAgICAgaWYgKHByb3BOYW1lID09IFwicHJvdmlkZXJcIikge1xuICAgICAgICAgICAgaWYgKCEob2JqIGluc3RhbmNlb2YgQ2xvY2tQcm92aWRlcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHByb3ZpZGVyIG11c3QgYmUgY2xvY2tQcm92aWRlciAke3Byb3ZpZGVyfWApO1xuICAgICAgICAgICAgfSAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gb2JqOyAgICBcbiAgICAgICAgfVxuICAgIH1cbiAgICBjdXJzb3Iuc3JjcHJvcF9vbmNoYW5nZSA9IGZ1bmN0aW9uIChwcm9wTmFtZSwgZUFyZykge1xuICAgICAgICBpZiAocHJvcE5hbWUgPT0gXCJwcm92aWRlclwiKSB7XG4gICAgICAgICAgICBpZiAoZUFyZyA9PSBcInJlc2V0XCIpIHtcbiAgICAgICAgICAgICAgICBjdXJzb3Iub25jaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAgICAgICAgXG4gICAgfVxuXG4gICAgLy8gaW5pdGlhbGlzZVxuICAgIGN1cnNvci5yYXRlID0gMS4wICogc2NhbGU7XG4gICAgY3Vyc29yLnByb3ZpZGVyID0gcHJvdmlkZXI7XG4gICAgcmV0dXJuIGN1cnNvcjtcbn1cbiIsImltcG9ydCB7IEN1cnNvciB9IGZyb20gXCIuLi9jdXJzb3JfYmFzZS5qc1wiO1xuXG4vKipcbiAqIFRpbWluZyBPYmplY3QgQ3Vyc29yXG4gKiBDcmVhdGUgYSBuZXcgQ3Vyc29yIHdoaWNoIGhhcyBhIFRpbWluZyBPYmplY3QgYXMgc3JjIHByb3BlcnR5LlxuICogXG4gKiBUaGUgbmV3IEN1cnNvciBkb2VzIG5vdCBoYXZlIGEgc3JjIChsYXllcikgb3IgYSBjdHJsIChjdXJzb3IpXG4gKiBwcm9wZXJ0eSwgc2luY2UgaXQgb25seSBkZXBlbmRzIG9uIHRoZSBzcmMgVGltaW5nT2JqZWN0LlxuICogXG4gKiBBbHNvLCB0aGUgbmV3IGN1cnNvciBkb2VzIG5vdCBuZWVkIGFueSBwbGF5YmFjayBsb2dpYyBvbiBpdHMgb3duXG4gKiBzaW5jZSBpdCBpcyBvbmx5IGEgd3JhcHBlciBhbmQgdGhlIHRpbWluZyBvYmplY3QgcHJvdmlkZXMgcGxheWJhY2sgc3VwcG9ydC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGN1cnNvcl9mcm9tX3RpbWluZ29iamVjdChzcmMpIHtcblxuICAgIGlmIChzcmMuY29uc3RydWN0b3IubmFtZSAhPSBcIlRpbWluZ09iamVjdFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgc3JjIG11c3QgYmUgYSBUaW1pbmdPYmplY3QgJHtzcmN9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yID0gbmV3IEN1cnNvcigpO1xuXG4gICAgLy8gaW1wbGVtZW50IHF1ZXJ5XG4gICAgY3Vyc29yLnF1ZXJ5ID0gZnVuY3Rpb24gcXVlcnkoKSB7XG4gICAgICAgIGNvbnN0IHtwb3NpdGlvbiwgdmVsb2NpdHksIGFjY2VsZXJhdGlvbiwgdGltZXN0YW1wfSA9IHNyYy5xdWVyeSgpO1xuICAgICAgICBjb25zdCBkeW5hbWljID0gKHZlbG9jaXR5ICE9IDAgfHwgYWNjZWxlcmF0aW9uICE9IDApO1xuICAgICAgICByZXR1cm4ge3ZhbHVlOnBvc2l0aW9uLCBkeW5hbWljLCBvZmZzZXQ6dGltZXN0YW1wfTtcbiAgICB9XG5cbiAgICAvLyBudW1lcmljXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN1cnNvciwgXCJudW1lcmljXCIsIHtnZXQ6ICgpID0+IHRydWV9KTtcbiAgICAvLyBmaXhlZFJhdGVcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Vyc29yLCBcImZpeGVkUmF0ZVwiLCB7Z2V0OiAoKSA9PiBmYWxzZX0pO1xuXG4gICAgLy8gY2FsbGJhY2tzIGZyb20gdGltaW5nIG9iamVjdFxuICAgIHNyYy5vbihcImNoYW5nZVwiLCAoKSA9PiB7Y3Vyc29yLm9uY2hhbmdlKCl9KTtcbiAgICByZXR1cm4gY3Vyc29yO1xufVxuIiwiaW1wb3J0IHsgQ3Vyc29yIH0gZnJvbSBcIi4uL2N1cnNvcl9iYXNlLmpzXCI7XG5pbXBvcnQgeyBMYXllciB9IGZyb20gXCIuLi9sYXllcl9iYXNlLmpzXCJcbmltcG9ydCB7IE5lYXJieUluZGV4U3JjIH0gZnJvbSBcIi4uL25lYXJieV9iYXNlLmpzXCJcblxuXG5cbi8vIFRPRE8gLSBlbnVzdXJlIG51bWVyaWMgaWYgc2V0IHRvIHRydWVcblxuZnVuY3Rpb24gdHJhbnNmb3JtU3RhdGUoc3RhdGUsIG9wdGlvbnM9e30pIHtcbiAgICBjb25zdCB7dmFsdWVGdW5jLCBzdGF0ZUZ1bmN9ID0gb3B0aW9ucztcbiAgICBpZiAodmFsdWVGdW5jICE9IHVuZGVmaW5lZCkge1xuICAgICAgICBzdGF0ZS52YWx1ZSA9IHZhbHVlRnVuYyhzdGF0ZS52YWx1ZSk7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlRnVuYyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlRnVuYyhzdGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDdXJzb3IgVHJhbnNmb3JtXG4gKiBDcmVhdGUgYSBuZXcgQ3Vyc29yIHdoaWNoIGlzIGEgdHJhbnNmb3JtYXRpb24gb2YgYSBzcmMgQ3Vyc29yLlxuICogXG4gKiBUaGUgbmV3IHRyYW5zZm9ybWVkIEN1cnNvciBkb2VzIG5vdCBoYXZlIGEgc3JjIChsYXllcikgYW5kIGFuZCBhIGN0cmwgKGN1cnNvcilcbiAqIHByb3BlcnR5LCBzaW5jZSBpdCBvbmx5IGRlcGVuZHMgb24gdGhlIHNyYyBjdXJzb3IuXG4gKiBcbiAqIEFsc28sIHRoZSBuZXcgdHJhbnNmb3JtZWQgY3Vyc29yIGRvZXMgbm90IG5lZWQgYW55IHBsYXliYWNrIGxvZ2ljIG9uIGl0cyBvd25cbiAqIGFzIGxvbmcgYXMgdGhlIG5hdHVyZSBvZiB0aGUgdHJhbnNmb3JtYXRpb24gaXMgYSBwbGFpbiB2YWx1ZS9zdGF0ZSB0cmFuc2l0aW9uLiBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGN1cnNvcl90cmFuc2Zvcm0oc3JjLCBvcHRpb25zPXt9KSB7XG5cbiAgICBpZiAoIShzcmMgaW5zdGFuY2VvZiBDdXJzb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgc3JjIG11c3QgYmUgYSBDdXJzb3IgJHtzcmN9YCk7XG4gICAgfVxuXG4gICAgY29uc3Qge251bWVyaWMsIHZhbHVlRnVuYywgc3RhdGVGdW5jfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgY3Vyc29yID0gbmV3IEN1cnNvcigpO1xuXG4gICAgLy8gaW1wbGVtZW50IHF1ZXJ5XG4gICAgY3Vyc29yLnF1ZXJ5ID0gZnVuY3Rpb24gcXVlcnkoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gc3JjLnF1ZXJ5KCk7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1TdGF0ZShzdGF0ZSwge3N0YXRlRnVuYywgdmFsdWVGdW5jfSk7XG4gICAgfVxuXG4gICAgLy8gbnVtYmVyaWMgY2FuIGJlIHNldCB0byB0cnVlIGJ5IG9wdGlvbnNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Vyc29yLCBcIm51bWVyaWNcIiwge2dldDogKCkgPT4ge1xuICAgICAgICByZXR1cm4gKG51bWVyaWMgPT0gdW5kZWZpbmVkKSA/IHNyYy5udW1lcmljIDogbnVtZXJpYzsgXG4gICAgfX0pO1xuICAgIC8vIGZpeGVkUmF0ZSBpcyBpbmhlcml0ZWQgZnJvbSBzcmNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Vyc29yLCBcImZpeGVkUmF0ZVwiLCB7Z2V0OiAoKSA9PiBzcmMuZml4ZWRSYXRlfSk7XG5cbiAgICBpZiAoc3JjLmZpeGVkUmF0ZSkge1xuICAgICAgICAvLyBwcm9wYWdhdGUgcmF0ZSBwcm9wZXJ0eSBmcm9tIHNyY1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3Vyc29yLCBcInJhdGVcIiwge2dldDogKCkgPT4gc3JjLnJhdGV9KTtcbiAgICB9XG5cbiAgICAvLyBjYWxsYmFja3MgZnJvbSBzcmMtY3Vyc29yXG4gICAgc3JjLmFkZF9jYWxsYmFjaygoKSA9PiB7Y3Vyc29yLm9uY2hhbmdlKCl9KTtcbiAgICByZXR1cm4gY3Vyc29yO1xufVxuXG5cbi8qKlxuICogTGF5ZXIgVHJhbnNmb3JtXG4gKiBDcmVhdGUgYSBuZXcgTGF5ZXIgd2hpY2ggaXMgYSB0cmFuc2Zvcm1hdGlvbiBvZiB0aGUgc3JjIExheWVyXG4gKi9cblxuZnVuY3Rpb24gd3JhcHBlZFZhbHVlRnVuYyh2YWx1ZUZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHtzb3VyY2VzLCBzdGF0ZXMsIG9mZnNldH0pIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlRnVuYyhzdGF0ZXNbMF0udmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gd3JhcHBlZFN0YXRlRnVuYyhzdGF0ZUZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHtzb3VyY2VzLCBzdGF0ZXMsIG9mZnNldH0pIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlRnVuYyhzdGF0ZXNbMF0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxheWVyX3RyYW5zZm9ybShzcmMsIG9wdGlvbnM9e30pIHtcblxuICAgIGlmICghKHNyYyBpbnN0YW5jZW9mIExheWVyKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHNyYyBtdXN0IGJlIGEgTGF5ZXIgJHtzcmN9YCk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3BzID0ge307XG4gICAgb3BzLnZhbHVlRnVuYyA9IHdyYXBwZWRWYWx1ZUZ1bmMob3B0aW9ucy52YWx1ZUZ1bmMpO1xuICAgIG9wcy5zdGF0ZUZ1bmMgPSB3cmFwcGVkU3RhdGVGdW5jKG9wdGlvbnMuc3RhdGVGdW5jKTtcblxuICAgIGNvbnN0IGxheWVyID0gbmV3IExheWVyKG9wcyk7XG4gICAgbGF5ZXIuaW5kZXggPSBuZXcgTmVhcmJ5SW5kZXhTcmMoc3JjKTtcbiAgICBsYXllci5zcmMgPSBzcmM7XG4gICAgbGF5ZXIuc3JjLmFkZF9jYWxsYmFjaygoZUFyZykgPT4ge2xheWVyLm9uY2hhbmdlKGVBcmcpfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobGF5ZXIsIFwibnVtZXJpY1wiLCB7Z2V0OiAoKSA9PiBzcmMubnVtZXJpY30pO1xuXG4gICAgcmV0dXJuIGxheWVyO1xufVxuXG5cblxuIl0sIm5hbWVzIjpbImlzTnVtYmVyIiwibiIsIkVQX1RZUEUiLCJPYmplY3QiLCJmcmVlemUiLCJISUdIX09QRU4iLCJISUdIX0NMT1NFRCIsIlZBTFVFIiwiTE9XX0NMT1NFRCIsIkxPV19PUEVOIiwiRVBfT1JERVIiLCJNYXAiLCJlbmRwb2ludF9pc19sb3ciLCJlcCIsImVuZHBvaW50X2Zyb21faW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJFcnJvciIsInYiLCJ0IiwidmFsdWUiLCJ2YWx1ZXMiLCJpbmNsdWRlcyIsIkluZmluaXR5IiwidW5kZWZpbmVkIiwiZW5kcG9pbnRfUE9TX0lORiIsImVuZHBvaW50X05FR19JTkYiLCJlbmRwb2ludF9pbnRlcm5hbCIsIm51bWJlcl9jbXAiLCJhIiwiYiIsImVuZHBvaW50X2NtcCIsImVwMSIsImVwMiIsInYxIiwidDEiLCJ2MiIsInQyIiwiZGlmZiIsImdldCIsImVuZHBvaW50X2xlIiwicDEiLCJwMiIsImVuZHBvaW50X2dlIiwiZW5kcG9pbnRfZXEiLCJlbmRwb2ludHNfZnJvbV9pbnRlcnZhbCIsIml0diIsImxvdyIsImhpZ2giLCJsb3dDbG9zZWQiLCJoaWdoQ2xvc2VkIiwibG93VHlwZSIsImhpZ2hUeXBlIiwiaW50ZXJ2YWxfY292ZXJzX2VuZHBvaW50IiwibG93X2VwIiwiaGlnaF9lcCIsImVuZHBvaW50IiwibGUiLCJsdCIsImdlIiwiZ3QiLCJjbXAiLCJlcSIsIm1pbiIsIm1heCIsImZsaXAiLCJ0YXJnZXQiLCJmcm9tX2ludGVydmFsIiwiZnJvbV9pbnB1dCIsInR5cGVzIiwiUE9TX0lORiIsIk5FR19JTkYiLCJpbnRlcnZhbCIsImNvdmVyc19lbmRwb2ludCIsImNvdmVyc19wb2ludCIsInAiLCJpc19zaW5ndWxhciIsImZyb21fZW5kcG9pbnRzIiwiaW5wdXQiLCJsb3dJbmNsdWRlIiwiaGlnaEluY2x1ZGUiLCJOZWFyYnlJbmRleEJhc2UiLCJuZWFyYnkiLCJvZmZzZXQiLCJlbXB0eSIsInRoaXMiLCJmaXJzdCIsImNlbnRlciIsInJpZ2h0IiwibGFzdCIsImxlZnQiLCJyaWdodF9yZWdpb24iLCJyaWdodF9lbmRwb2ludCIsImxlZnRfcmVnaW9uIiwibGVmdF9lbmRwb2ludCIsImZpbmRfcmVnaW9uIiwib3B0aW9ucyIsIm5leHRfbmVhcmJ5IiwiZGlyZWN0aW9uIiwiY29uZGl0aW9uIiwicmVnaW9ucyIsIlJlZ2lvbkl0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJpbmRleCIsInN0YXJ0Iiwic3RvcCIsImluY2x1ZGVFbXB0eSIsIl9pbmRleCIsIl9zdGFydCIsIl9zdG9wIiwiX2NvbmRpdGlvbiIsIl9jdXJyZW50IiwibmV4dCIsImRvbmUiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNtcF9hc2NlbmRpbmciLCJjbXBfZGVzY2VuZGluZyIsIm5lYXJieV9mcm9tIiwicHJldl9oaWdoIiwiY2VudGVyX2xvd19saXN0IiwiY2VudGVyX2hpZ2hfbGlzdCIsIm5leHRfbG93IiwicmVzdWx0Iiwic29ydCIsIm1pbl9jZW50ZXJfaGlnaCIsIm1heF9jZW50ZXJfaGlnaCIsInNsaWNlIiwibXVsdGlwbGVfY2VudGVyX2hpZ2giLCJtYXhfY2VudGVyX2xvdyIsIm1pbl9jZW50ZXJfbG93IiwibXVsdGlwbGVfY2VudGVyX2xvdyIsInByZXYiLCJOZWFyYnlJbmRleFNyYyIsInNyYyIsInN1cGVyIiwiX3NyYyIsIl9jYWNoZSIsImNyZWF0ZUNhY2hlIiwiRXZlbnQiLCJwdWJsaXNoZXIiLCJuYW1lIiwiaW5pdCIsInN1YnNjcmlwdGlvbnMiLCJzdWJzY3JpYmUiLCJjYWxsYmFjayIsInN1YiIsIlN1YnNjcmlwdGlvbiIsInB1c2giLCJpbml0X3BlbmRpbmciLCJzZWxmIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwiZUFyZ3MiLCJldmVudGlmeUluaXRFdmVudEFyZ3MiLCJlQXJnIiwidHJpZ2dlciIsInN1YnMiLCJlSW5mbyIsImN0eCIsInRlcm1pbmF0ZWQiLCJjYWxsIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInVuc3Vic2NyaWJlIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsInRlcm1pbmF0ZSIsImV2ZW50IiwiZXZlbnRpZnlJbnN0YW5jZSIsIm9iamVjdCIsIl9fZXZlbnRpZnlfZXZlbnRNYXAiLCJfX2V2ZW50aWZ5X2J1ZmZlciIsImV2ZW50aWZ5UHJvdG90eXBlIiwiX3Byb3RvdHlwZSIsImV2ZW50aWZ5R2V0RXZlbnQiLCJldmVudGlmeURlZmluZSIsImhhcyIsInNldCIsImV2ZW50aWZ5VHJpZ2dlciIsImV2ZW50aWZ5VHJpZ2dlckFsbCIsImV2ZW50aWZ5VHJpZ2dlckFsaWtlIiwibWFwIiwiZXZlbnRJdGVtcyIsInRyaWdnZXJJdGVtcyIsIml0ZW0iLCJldiIsImZpbHRlciIsImxlbiIsImJ1ZiIsImJ1Zl9sZW4iLCJpIiwiZXZlbnRpZnlTdWJzY3JpcHRpb25zIiwib24iLCJvZmYiLCJfdmFsdWUiLCJwcm90b3R5cGUiLCJQUkVGSVgiLCJhZGRTdGF0ZSIsImFkZF9jYWxsYmFjayIsImhhbmRsZXIiLCJoYW5kbGUiLCJyZW1vdmVfY2FsbGJhY2siLCJub3RpZnlfY2FsbGJhY2tzIiwiZm9yRWFjaCIsImFkZE1ldGhvZHMiLCJvYmoiLCJhcGkiLCJhc3NpZ24iLCJpc19jYWxsYmFja19hcGkiLCJtZXRob2RzIiwicHJvcCIsImlzX2Zpbml0ZV9udW1iZXIiLCJpc0Zpbml0ZSIsImNoZWNrX251bWJlciIsImxvY2FsX2Nsb2NrIiwibm93IiwicGVyZm9ybWFuY2UiLCJ0b1N0YXRlIiwic291cmNlcyIsInN0YXRlcyIsInN0YXRlIiwidmFsdWVGdW5jIiwic3RhdGVGdW5jIiwibnVtZXJpYyIsIm1hc2siLCJkeW5hbWljIiwiZHltYW1pYyIsInNvbWUiLCJlIiwiY2hlY2tfaXRlbXMiLCJpdGVtcyIsImlkIiwicmFuZG9tX3N0cmluZyIsInRleHQiLCJwb3NzaWJsZSIsImNoYXJBdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm1vdGlvbl9oYXNfcmVhbF9zb2x1dGlvbnMiLCJ2ZWN0b3IiLCJwMCIsInYwIiwiYTAiLCJ0MCIsInBvdyIsIm1vdGlvbl9nZXRfcmVhbF9zb2x1dGlvbnMiLCJzcXJ0IiwiZDEiLCJkMiIsIm1vdGlvbl91dGlscyIsImNhbGN1bGF0ZSIsImQiLCJoYXNfcmVhbF9zb2x1dGlvbnMiLCJnZXRfcmVhbF9zb2x1dGlvbnMiLCJjYWxjdWxhdGVfdGltZV9yYW5nZXMiLCJwb3NfcmFuZ2UiLCJzb2x1dGlvbnMiLCJTZXQiLCJjaGVja19yYW5nZSIsIkxheWVyIiwiQ2FjaGVDbGFzcyIsIkxheWVyQ2FjaGUiLCJjYWxsYmFjay5hZGRTdGF0ZSIsImV2ZW50aWZ5LmFkZFN0YXRlIiwiX0NhY2hlQ2xhc3MiLCJfcHJpdmF0ZV9jYWNoZSIsIl9jb25zdW1lcl9jYWNoZXMiLCJfdmFsdWVGdW5jIiwiX3N0YXRlRnVuYyIsIm11dGFibGUiLCJpdGVtc09ubHkiLCJjYWNoZSIsInF1ZXJ5IiwicmVsZWFzZUNhY2hlIiwiY2xlYXJDYWNoZXMiLCJjbGVhciIsIm9uY2hhbmdlIiwic2FtcGxlIiwic3RlcCIsInNhbXBsZXMiLCJlbmQiLCJpbmNsdWRlX2VuZCIsInJhbmdlIiwiY2FsbGJhY2suYWRkTWV0aG9kcyIsImV2ZW50aWZ5LmFkZE1ldGhvZHMiLCJsYXllciIsIl9sYXllciIsIl9uZWFyYnkiLCJfc3RhdGUiLCJfcXVlcnlfb3B0aW9ucyIsIm51bWJlck9ubHkiLCJpc051bWJlck9ubHkiLCJuZWVkX2luZGV4X2xvb2t1cCIsIlBvbGxlciIsIl9jYWxsYmFjayIsIl9oYW5kbGUiLCJfZGVsYXkiLCJkZWxheSIsImRlbGF5X21zIiwiaXNfcG9sbGluZyIsInBhdXNlIiwiY2FuY2VsIiwicG9sbCIsInJlc3VtZSIsImFpZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInRpZCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJtb25pdG9yIiwiX2JpbmRpbmdfc2V0IiwiX2N1cnNvcl9tYXAiLCJfcG9sbGVyIiwib25wb2xsIiwiY3Vyc29yIiwiYmluZGluZyIsImFkZCIsImJpbmRpbmdzIiwib25jdXJzb3JjaGFuZ2UiLCJwb2xsaW5nIiwicmVsZWFzZSIsImRlbGV0ZSIsInBvbGxpbmdfY3Vyc29ycyIsImVudHJ5IiwicmVldmFsdWF0ZV9wb2xsaW5nIiwidHMiLCJkZWxheXMiLCJtaW5fZGVsYXkiLCJDdXJzb3IiLCJmaXhlZFJhdGUiLCJsb2NhbF90cyIsImRldGVjdF9mdXR1cmVfZXZlbnQiLCJDbG9ja1Byb3ZpZGVyIiwiY2xvY2siLCJMT0NBTF9DTE9DS19WRUNUT1IiLCJfY2xvY2siLCJkaWZmX3RzIiwiX3JhdGUiLCJyYXRlIiwiX3QwIiwiRGF0ZSIsIkxPQ0FMX0NMT0NLX1BST1ZJREVSIiwiaXNfY29sbGVjdGlvbl9wcm92aWRlciIsImNhbGxiYWNrLmlzX2NhbGxiYWNrX2FwaSIsInVwZGF0ZSIsIkNvbGxlY3Rpb25Qcm92aWRlciIsIl9tYXAiLCJjaGFuZ2VzIiwiaW5zZXJ0IiwiZGlmZnMiLCJfdXBkYXRlIiwiZGlmZl9tYXAiLCJyZW1vdmUiLCJyZXNldCIsImVudHJpZXMiLCJuZXciLCJvbGQiLCJpc19vYmplY3RfcHJvdmlkZXIiLCJPYmplY3RQcm92aWRlciIsIl9vYmplY3QiLCJOQU1FIiwicHJvcE5hbWUiLCJlbnRpdHkiLCJoYW5kbGVzIiwiZGVmaW5lUHJvcGVydHkiLCJlbnRpdGllcyIsIlNvcnRlZEFycmF5IiwiX2FycmF5Iiwic2l6ZSIsImFycmF5IiwidGFyZ2V0X3ZhbHVlIiwidGFyZ2V0X2VwIiwibGVmdF9pZHgiLCJyaWdodF9pZHgiLCJtaWRfaWR4IiwibWlkX3ZhbHVlIiwiZ2VJbmRleE9mIiwiZm91bmQiLCJsZUluZGV4T2YiLCJndEluZGV4T2YiLCJsdEluZGV4T2YiLCJyZW1vdmVfbGlzdCIsImluc2VydF9saXN0IiwicmVtb3ZlX2lkeF9saXN0IiwiYW55X3JlbW92ZXMiLCJhbnlfaW5zZXJ0cyIsImZpcnN0X2FyciIsInNlY29uZF9hcnIiLCJmaXJzdF9hcnJfbGVuZ3RoIiwic2Vjb25kX2Fycl9sZW5ndGgiLCJjb25jYXRfaW5fcGxhY2UiLCJzb3J0ZWRfYXJyIiwicmVtb3ZlX2R1cGxpY2F0ZXMiLCJnZXRfYnlfaW5kZXgiLCJsb29rdXAiLCJlcF8wIiwiZXBfMSIsImlkeF8wIiwiaWR4XzEiLCJFUF9UWVBFUyIsIkVuZHBvaW50U2V0IiwidHlwZSIsImxpc3QiLCJsaXN0cyIsImNvbmNhdCIsIkxPVyIsIkFDVElWRSIsIkhJR0giLCJJdGVtc01hcCIsImdldF9pdGVtc19ieV9yb2xlIiwicm9sZSIsInJlZ2lzdGVyIiwidHlwZV9tYXAiLCJhY3RpdmUiLCJ3YXNfZW1wdHkiLCJmaW5kSW5kZXgiLCJfaXRlbSIsImlzX2VtcHR5IiwidW5yZWdpc3RlciIsIk5lYXJieUluZGV4Iiwic3RhdGVQcm92aWRlciIsIl9zcCIsIl9pbml0aWFsaXNlIiwicmVmcmVzaCIsIl9pdGVtc21hcCIsIl9lbmRwb2ludHMiLCJyZW1vdmVfZW5kcG9pbnRzIiwiaW5zZXJ0X2VuZHBvaW50cyIsImJlY2FtZV9ub25lbXB0eSIsImluc2VydF9pdGVtcyIsInJlbW92ZV9pdGVtcyIsImFjdGl2ZVNldCIsIl9jb3ZlcnMiLCJpdGVtczEiLCJpdGVtczIiLCJpZFNldCIsIkJhc2VTZWdtZW50IiwiX2l0diIsIlN0YXRpY1NlZ21lbnQiLCJkYXRhIiwiTW90aW9uU2VnbWVudCIsIl92ZWN0b3IiLCJlYXNlaW4iLCJUcmFuc2l0aW9uU2VnbWVudCIsImVhc2luZyIsIl9keW5hbWljIiwiX3RyYW5zIiwicGFyc2VGbG9hdCIsImVhc2VvdXQiLCJlYXNlaW5vdXQiLCJJbnRlcnBvbGF0aW9uU2VnbWVudCIsInR1cGxlcyIsInNvcnRlZFR1cGxlcyIsInZhbHVlMSIsIm9mZnNldDEiLCJ2YWx1ZTIiLCJvZmZzZXQyIiwiaW50ZXJwb2xhdGUiLCJsb2FkX3NlZ21lbnQiLCJsZWFmX2xheWVyIiwicHJvdmlkZXIiLCJvcHRzIiwiTGVhZkxheWVyQ2FjaGUiLCJzcmNwcm9wLmFkZFN0YXRlIiwic3JjcHJvcC5hZGRNZXRob2RzIiwic3JjcHJvcF9yZWdpc3RlciIsInNyY3Byb3BfY2hlY2siLCJzcmNwcm9wX29uY2hhbmdlIiwiZ2V0X2l0ZW1zIiwicmVhZE9ubHkiLCJsYXllcl91cGRhdGUiLCJhcHBlbmQiLCJoaWdoRXAiLCJuZXdfaXRlbSIsIm1vZGlmeV9pdGVtcyIsImxvd0VwIiwibGF5ZXJfYXBwZW5kIiwiX3NlZ21lbnQiLCJzZWdtZW50IiwiX3NlZ21lbnRzIiwic2VnIiwiZnJvbSIsInBsYXliYWNrX2N1cnNvciIsImN0cmwiLCJzcmNfY2FjaGUiLCJwaWQiLCJzY2hlZHVsZV90aW1lb3V0IiwiZGVsdGFfc2VjIiwiZGVsdGFfbXMiLCJ0YXJnZXRfbXMiLCJoYW5kbGVfdGltZW91dCIsInNldF90aW1lb3V0IiwiYWN0aXZlX2l0ZW1zIiwiY2xlYXJJbnRlcnZhbCIsInBvczAiLCJ0czAiLCJzcmNfbmVhcmJ5Iiwic3JjX3JlZ2lvbl9sb3ciLCJzcmNfcmVnaW9uX2hpZ2giLCJhY3RpdmVfaXRlbSIsInRhcmdldExvdyIsInRhcmdldEhpZ2giLCJzZXRJbnRlcnZhbCIsInBvcyIsImhhbmRsZV9wb2xsaW5nIiwib2JqZWN0X2N1cnNvciIsInJlY29yZCIsIm9yaWdpbmFsX3NyY3Byb3BfY2hlY2siLCJjcmVhdGVfc2V0X2l0ZW1zIiwibW90aW9uIiwicG9zaXRpb24iLCJ2ZWxvY2l0eSIsImFjY2VsZXJhdGlvbiIsImExIiwidGltZXN0YW1wIiwidGltZV9yYW5nZXMiLCJjdHIiLCJ0aW1lX3JhbmdlIiwiZmluZCIsInRyIiwidmFsIiwiY3JlYXRlX21vdGlvbl9pdGVtcyIsInRyYW5zaXRpb24iLCJkdXJhdGlvbiIsImNyZWF0ZV90cmFuc2l0aW9uX2l0ZW1zIiwiY3JlYXRlX2ludGVycG9sYXRpb25faXRlbXMiLCJDdXJzb3JJbmRleCIsIl9jdXJzb3IiLCJNRVJHRV9PUFRJT05TIiwic3VtIiwiaW5mbyIsInJlZHVjZSIsImFjYyIsInN0YWNrIiwiTmVhcmJ5SW5kZXhNZXJnZSIsIl9zb3VyY2VzIiwiX2NhY2hlcyIsInByZXZfbGlzdCIsIm5leHRfbGlzdCIsInByZXZfcmVnaW9uIiwibmV4dF9yZWdpb24iLCJxdWVyeU9iamVjdCIsIk5lYXJieUluZGV4Qm9vbGVhbiIsImV2YWx1YXRpb24iLCJyaWdodF9uZWFyYnkiLCJsZWZ0X25lYXJieSIsImxvZ2ljYWxfZXhwciIsImV2YWwiLCJ0cmFuc2Zvcm0iLCJzaGlmdCIsInNjYWxlIiwiYnJhY2tldCIsInJldmVyc2UiLCJhbmQiLCJleHBycyIsImV2ZXJ5IiwiZXhwciIsIm9yIiwieG9yIiwiZXhwcjEiLCJleHByMiIsIm5vdCIsIk5lYXJieUluZGV4QVRUIiwiX29wdGlvbnMiLCJfdHJhbnNmb3JtX2NhY2hlIiwibGF5ZXJfcmVjb3JkZXIiLCJkc3QiLCJzcmNfc3RhdGVQcm92aWRlciIsImRzdF9zdGF0ZVByb3ZpZGVyIiwiaXNfcmVjb3JkaW5nIiwib25fY3RybF9jaGFuZ2UiLCJ3YXNfcmVjb3JkaW5nIiwiY3RybF90cyIsImRzdF9vZmZzZXQiLCJzdG9wX3JlY29yZGluZyIsInNyY19vZmZzZXQiLCJzcmNfaXRlbXMiLCJzdHJ1Y3R1cmVkQ2xvbmUiLCJkc3RfaXRlbXMiLCJ0aW1lc2hpZnRfaXRlbSIsIml0ZW0yc3RyaW5nIiwiaWRfdHh0IiwidHlwZV90eHQiLCJpdHZfdHh0IiwidG9GaXhlZCIsImlkX2h0bWwiLCJpdHZfaHRtbCIsInR5cGVfaHRtbCIsImRhdGFfaHRtbCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVfYWxsb3dlZCIsIlN0YXRlUHJvdmlkZXJWaWV3ZXIiLCJlbGVtIiwiX2VsZW0iLCJfb25jaGFuZ2UiLCJkZWZhdWx0cyIsInRvU3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRlbGV0ZUJ0biIsImNsb3Nlc3QiLCJsaXN0SXRlbSIsInN0b3BQcm9wYWdhdGlvbiIsIml0ZW1fYSIsIml0ZW1fYiIsImxvd0VwX2EiLCJsb3dFcF9iIiwicmVwbGFjZUNoaWxkcmVuIiwibm9kZSIsInF1ZXJ5U2VsZWN0b3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsImNsb2NrX3Byb3ZpZGVyIiwiY2xvY2tfY3Vyc29yIiwidHJhbnNmb3JtU3RhdGUiLCJvcHMiLCJzcmNfb3B0cyIsInNlbGVjdG9yIiwicmVuZGVyIiwibm92YWx1ZSIsImVsZW1zIiwidGV4dENvbnRlbnQiXSwibWFwcGluZ3MiOiJ5Q0EyQ0EsU0FBU0EsRUFBU0MsR0FDZCxNQUFtQixpQkFBTEEsQ0FDbEIsQ0FFQSxNQUFNQyxFQUFVQyxPQUFPQyxPQUFPLENBQzFCQyxVQUFXLElBQ1hDLFlBQWEsSUFDYkMsTUFBTyxHQUNQQyxXQUFZLElBQ1pDLFNBQVUsTUFPZCxNQUFNQyxFQUFXLElBQUlDLElBQUksQ0FDckIsQ0FBQ1QsRUFBUUcsV0FBWSxHQUNy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
